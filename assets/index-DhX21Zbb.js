function BD(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const s=Object.getOwnPropertyDescriptor(i,o);s&&Object.defineProperty(n,o,s.get?s:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();function vu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $D={exports:{}},ky={},zD={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm=Symbol.for("react.element"),T5=Symbol.for("react.portal"),M5=Symbol.for("react.fragment"),R5=Symbol.for("react.strict_mode"),A5=Symbol.for("react.profiler"),N5=Symbol.for("react.provider"),P5=Symbol.for("react.context"),O5=Symbol.for("react.forward_ref"),I5=Symbol.for("react.suspense"),D5=Symbol.for("react.memo"),L5=Symbol.for("react.lazy"),TR=Symbol.iterator;function F5(n){return n===null||typeof n!="object"?null:(n=TR&&n[TR]||n["@@iterator"],typeof n=="function"?n:null)}var kD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VD=Object.assign,GD={};function Df(n,e,r){this.props=n,this.context=e,this.refs=GD,this.updater=r||kD}Df.prototype.isReactComponent={};Df.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Df.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function HD(){}HD.prototype=Df.prototype;function sC(n,e,r){this.props=n,this.context=e,this.refs=GD,this.updater=r||kD}var aC=sC.prototype=new HD;aC.constructor=sC;VD(aC,Df.prototype);aC.isPureReactComponent=!0;var MR=Array.isArray,jD=Object.prototype.hasOwnProperty,lC={current:null},WD={key:!0,ref:!0,__self:!0,__source:!0};function qD(n,e,r){var i,o={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)jD.call(e,i)&&!WD.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(l===1)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)o[i]===void 0&&(o[i]=l[i]);return{$$typeof:Dm,type:n,key:s,ref:a,props:o,_owner:lC.current}}function U5(n,e){return{$$typeof:Dm,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function cC(n){return typeof n=="object"&&n!==null&&n.$$typeof===Dm}function B5(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var RR=/\/+/g;function Ex(n,e){return typeof n=="object"&&n!==null&&n.key!=null?B5(""+n.key):e.toString(36)}function Vv(n,e,r,i,o){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Dm:case T5:a=!0}}if(a)return a=n,o=o(a),n=i===""?"."+Ex(a,0):i,MR(o)?(r="",n!=null&&(r=n.replace(RR,"$&/")+"/"),Vv(o,e,r,"",function(u){return u})):o!=null&&(cC(o)&&(o=U5(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(RR,"$&/")+"/")+n)),e.push(o)),1;if(a=0,i=i===""?".":i+":",MR(n))for(var l=0;l<n.length;l++){s=n[l];var c=i+Ex(s,l);a+=Vv(s,e,r,c,o)}else if(c=F5(n),typeof c=="function")for(n=c.call(n),l=0;!(s=n.next()).done;)s=s.value,c=i+Ex(s,l++),a+=Vv(s,e,r,c,o);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function mg(n,e,r){if(n==null)return n;var i=[],o=0;return Vv(n,i,"","",function(s){return e.call(r,s,o++)}),i}function $5(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Pi={current:null},Gv={transition:null},z5={ReactCurrentDispatcher:Pi,ReactCurrentBatchConfig:Gv,ReactCurrentOwner:lC};function XD(){throw Error("act(...) is not supported in production builds of React.")}an.Children={map:mg,forEach:function(n,e,r){mg(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return mg(n,function(){e++}),e},toArray:function(n){return mg(n,function(e){return e})||[]},only:function(n){if(!cC(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};an.Component=Df;an.Fragment=M5;an.Profiler=A5;an.PureComponent=sC;an.StrictMode=R5;an.Suspense=I5;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z5;an.act=XD;an.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=VD({},n.props),o=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=lC.current),e.key!==void 0&&(o=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)jD.call(e,c)&&!WD.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:Dm,type:n.type,key:o,ref:s,props:i,_owner:a}};an.createContext=function(n){return n={$$typeof:P5,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:N5,_context:n},n.Consumer=n};an.createElement=qD;an.createFactory=function(n){var e=qD.bind(null,n);return e.type=n,e};an.createRef=function(){return{current:null}};an.forwardRef=function(n){return{$$typeof:O5,render:n}};an.isValidElement=cC;an.lazy=function(n){return{$$typeof:L5,_payload:{_status:-1,_result:n},_init:$5}};an.memo=function(n,e){return{$$typeof:D5,type:n,compare:e===void 0?null:e}};an.startTransition=function(n){var e=Gv.transition;Gv.transition={};try{n()}finally{Gv.transition=e}};an.unstable_act=XD;an.useCallback=function(n,e){return Pi.current.useCallback(n,e)};an.useContext=function(n){return Pi.current.useContext(n)};an.useDebugValue=function(){};an.useDeferredValue=function(n){return Pi.current.useDeferredValue(n)};an.useEffect=function(n,e){return Pi.current.useEffect(n,e)};an.useId=function(){return Pi.current.useId()};an.useImperativeHandle=function(n,e,r){return Pi.current.useImperativeHandle(n,e,r)};an.useInsertionEffect=function(n,e){return Pi.current.useInsertionEffect(n,e)};an.useLayoutEffect=function(n,e){return Pi.current.useLayoutEffect(n,e)};an.useMemo=function(n,e){return Pi.current.useMemo(n,e)};an.useReducer=function(n,e,r){return Pi.current.useReducer(n,e,r)};an.useRef=function(n){return Pi.current.useRef(n)};an.useState=function(n){return Pi.current.useState(n)};an.useSyncExternalStore=function(n,e,r){return Pi.current.useSyncExternalStore(n,e,r)};an.useTransition=function(){return Pi.current.useTransition()};an.version="18.3.1";zD.exports=an;var b=zD.exports;const de=vu(b),Vy=BD({__proto__:null,default:de},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k5=b,V5=Symbol.for("react.element"),G5=Symbol.for("react.fragment"),H5=Object.prototype.hasOwnProperty,j5=k5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W5={key:!0,ref:!0,__self:!0,__source:!0};function KD(n,e,r){var i,o={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)H5.call(e,i)&&!W5.hasOwnProperty(i)&&(o[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:V5,type:n,key:s,ref:a,props:o,_owner:j5.current}}ky.Fragment=G5;ky.jsx=KD;ky.jsxs=KD;$D.exports=ky;var Ut=$D.exports,YD={exports:{}},So={},QD={exports:{}},ZD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,V){var B=O.length;O.push(V);e:for(;0<B;){var z=B-1>>>1,W=O[z];if(0<o(W,V))O[z]=V,O[B]=W,B=z;else break e}}function r(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var V=O[0],B=O.pop();if(B!==V){O[0]=B;e:for(var z=0,W=O.length,ie=W>>>1;z<ie;){var k=2*(z+1)-1,j=O[k],Q=k+1,Y=O[Q];if(0>o(j,B))Q<W&&0>o(Y,j)?(O[z]=Y,O[Q]=B,z=Q):(O[z]=j,O[k]=B,z=k);else if(Q<W&&0>o(Y,B))O[z]=Y,O[Q]=B,z=Q;else break e}}return V}function o(O,V){var B=O.sortIndex-V.sortIndex;return B!==0?B:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var V=r(u);V!==null;){if(V.callback===null)i(u);else if(V.startTime<=O)i(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=r(u)}}function S(O){if(y=!1,x(O),!g)if(r(c)!==null)g=!0,N(w);else{var V=r(u);V!==null&&L(S,V.startTime-O)}}function w(O,V){g=!1,y&&(y=!1,m(T),T=-1),p=!0;var B=h;try{for(x(V),f=r(c);f!==null&&(!(f.expirationTime>V)||O&&!P());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var W=z(f.expirationTime<=V);V=n.unstable_now(),typeof W=="function"?f.callback=W:f===r(c)&&i(c),x(V)}else i(c);f=r(c)}if(f!==null)var ie=!0;else{var k=r(u);k!==null&&L(S,k.startTime-V),ie=!1}return ie}finally{f=null,h=B,p=!1}}var E=!1,C=null,T=-1,M=5,R=-1;function P(){return!(n.unstable_now()-R<M)}function D(){if(C!==null){var O=n.unstable_now();R=O;var V=!0;try{V=C(!0,O)}finally{V?F():(E=!1,C=null)}}else E=!1}var F;if(typeof _=="function")F=function(){_(D)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,I=A.port2;A.port1.onmessage=D,F=function(){I.postMessage(null)}}else F=function(){v(D,0)};function N(O){C=O,E||(E=!0,F())}function L(O,V){T=v(function(){O(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,N(w))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return r(c)},n.unstable_next=function(O){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var B=h;h=V;try{return O()}finally{h=B}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var B=h;h=O;try{return V()}finally{h=B}},n.unstable_scheduleCallback=function(O,V,B){var z=n.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?z+B:z):B=z,O){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=B+W,O={id:d++,callback:V,priorityLevel:O,startTime:B,expirationTime:W,sortIndex:-1},B>z?(O.sortIndex=B,e(u,O),r(c)===null&&O===r(u)&&(y?(m(T),T=-1):y=!0,L(S,B-z))):(O.sortIndex=W,e(c,O),g||p||(g=!0,N(w))),O},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(O){var V=h;return function(){var B=h;h=V;try{return O.apply(this,arguments)}finally{h=B}}}})(ZD);QD.exports=ZD;var q5=QD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X5=b,_o=q5;function tt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JD=new Set,Mp={};function yu(n,e){Hd(n,e),Hd(n+"Capture",e)}function Hd(n,e){for(Mp[n]=e,n=0;n<e.length;n++)JD.add(e[n])}var Fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_1=Object.prototype.hasOwnProperty,K5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,AR={},NR={};function Y5(n){return _1.call(NR,n)?!0:_1.call(AR,n)?!1:K5.test(n)?NR[n]=!0:(AR[n]=!0,!1)}function Q5(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Z5(n,e,r,i){if(e===null||typeof e>"u"||Q5(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Oi(n,e,r,i,o,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var oi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){oi[n]=new Oi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];oi[e]=new Oi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){oi[n]=new Oi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){oi[n]=new Oi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){oi[n]=new Oi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){oi[n]=new Oi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){oi[n]=new Oi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){oi[n]=new Oi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){oi[n]=new Oi(n,5,!1,n.toLowerCase(),null,!1,!1)});var uC=/[\-:]([a-z])/g;function dC(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(uC,dC);oi[e]=new Oi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(uC,dC);oi[e]=new Oi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(uC,dC);oi[e]=new Oi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){oi[n]=new Oi(n,1,!1,n.toLowerCase(),null,!1,!1)});oi.xlinkHref=new Oi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){oi[n]=new Oi(n,1,!1,n.toLowerCase(),null,!0,!0)});function fC(n,e,r,i){var o=oi.hasOwnProperty(e)?oi[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Z5(e,r,o,i)&&(r=null),i||o===null?Y5(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):o.mustUseProperty?n[o.propertyName]=r===null?o.type===3?!1:"":r:(e=o.attributeName,i=o.attributeNamespace,r===null?n.removeAttribute(e):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var Xa=X5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gg=Symbol.for("react.element"),sd=Symbol.for("react.portal"),ad=Symbol.for("react.fragment"),hC=Symbol.for("react.strict_mode"),x1=Symbol.for("react.profiler"),eL=Symbol.for("react.provider"),tL=Symbol.for("react.context"),pC=Symbol.for("react.forward_ref"),b1=Symbol.for("react.suspense"),S1=Symbol.for("react.suspense_list"),mC=Symbol.for("react.memo"),_l=Symbol.for("react.lazy"),nL=Symbol.for("react.offscreen"),PR=Symbol.iterator;function ih(n){return n===null||typeof n!="object"?null:(n=PR&&n[PR]||n["@@iterator"],typeof n=="function"?n:null)}var sr=Object.assign,Cx;function jh(n){if(Cx===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Cx=e&&e[1]||""}return`
`+Cx+n}var Tx=!1;function Mx(n,e){if(!n||Tx)return"";Tx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),s=i.stack.split(`
`),a=o.length-1,l=s.length-1;1<=a&&0<=l&&o[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(o[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||o[a]!==s[l]){var c=`
`+o[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=l);break}}}finally{Tx=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?jh(n):""}function J5(n){switch(n.tag){case 5:return jh(n.type);case 16:return jh("Lazy");case 13:return jh("Suspense");case 19:return jh("SuspenseList");case 0:case 2:case 15:return n=Mx(n.type,!1),n;case 11:return n=Mx(n.type.render,!1),n;case 1:return n=Mx(n.type,!0),n;default:return""}}function w1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ad:return"Fragment";case sd:return"Portal";case x1:return"Profiler";case hC:return"StrictMode";case b1:return"Suspense";case S1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case tL:return(n.displayName||"Context")+".Consumer";case eL:return(n._context.displayName||"Context")+".Provider";case pC:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case mC:return e=n.displayName||null,e!==null?e:w1(n.type)||"Memo";case _l:e=n._payload,n=n._init;try{return w1(n(e))}catch{}}return null}function eV(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w1(e);case 8:return e===hC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rL(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tV(n){var e=rL(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,s=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return o.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function vg(n){n._valueTracker||(n._valueTracker=tV(n))}function iL(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=rL(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function S0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function E1(n,e){var r=e.checked;return sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function OR(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=Wl(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oL(n,e){e=e.checked,e!=null&&fC(n,"checked",e,!1)}function C1(n,e){oL(n,e);var r=Wl(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?T1(n,e.type,r):e.hasOwnProperty("defaultValue")&&T1(n,e.type,Wl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function IR(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function T1(n,e,r){(e!=="number"||S0(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var Wh=Array.isArray;function Rd(n,e,r,i){if(n=n.options,e){e={};for(var o=0;o<r.length;o++)e["$"+r[o]]=!0;for(r=0;r<n.length;r++)o=e.hasOwnProperty("$"+n[r].value),n[r].selected!==o&&(n[r].selected=o),o&&i&&(n[r].defaultSelected=!0)}else{for(r=""+Wl(r),e=null,o=0;o<n.length;o++){if(n[o].value===r){n[o].selected=!0,i&&(n[o].defaultSelected=!0);return}e!==null||n[o].disabled||(e=n[o])}e!==null&&(e.selected=!0)}}function M1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tt(91));return sr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function DR(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(tt(92));if(Wh(r)){if(1<r.length)throw Error(tt(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:Wl(r)}}function sL(n,e){var r=Wl(e.value),i=Wl(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function LR(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function aL(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function R1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?aL(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yg,lL=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,o){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,o)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(yg=yg||document.createElement("div"),yg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Rp(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var ip={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nV=["Webkit","ms","Moz","O"];Object.keys(ip).forEach(function(n){nV.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ip[e]=ip[n]})});function cL(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ip.hasOwnProperty(n)&&ip[n]?(""+e).trim():e+"px"}function uL(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=cL(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,o):n[r]=o}}var rV=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function A1(n,e){if(e){if(rV[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(tt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tt(62))}}function N1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var P1=null;function gC(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var O1=null,Ad=null,Nd=null;function FR(n){if(n=Um(n)){if(typeof O1!="function")throw Error(tt(280));var e=n.stateNode;e&&(e=qy(e),O1(n.stateNode,n.type,e))}}function dL(n){Ad?Nd?Nd.push(n):Nd=[n]:Ad=n}function fL(){if(Ad){var n=Ad,e=Nd;if(Nd=Ad=null,FR(n),e)for(n=0;n<e.length;n++)FR(e[n])}}function hL(n,e){return n(e)}function pL(){}var Rx=!1;function mL(n,e,r){if(Rx)return n(e,r);Rx=!0;try{return hL(n,e,r)}finally{Rx=!1,(Ad!==null||Nd!==null)&&(pL(),fL())}}function Ap(n,e){var r=n.stateNode;if(r===null)return null;var i=qy(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(tt(231,e,typeof r));return r}var I1=!1;if(Fa)try{var oh={};Object.defineProperty(oh,"passive",{get:function(){I1=!0}}),window.addEventListener("test",oh,oh),window.removeEventListener("test",oh,oh)}catch{I1=!1}function iV(n,e,r,i,o,s,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var op=!1,w0=null,E0=!1,D1=null,oV={onError:function(n){op=!0,w0=n}};function sV(n,e,r,i,o,s,a,l,c){op=!1,w0=null,iV.apply(oV,arguments)}function aV(n,e,r,i,o,s,a,l,c){if(sV.apply(this,arguments),op){if(op){var u=w0;op=!1,w0=null}else throw Error(tt(198));E0||(E0=!0,D1=u)}}function _u(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function gL(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function UR(n){if(_u(n)!==n)throw Error(tt(188))}function lV(n){var e=n.alternate;if(!e){if(e=_u(n),e===null)throw Error(tt(188));return e!==n?null:n}for(var r=n,i=e;;){var o=r.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===r)return UR(o),n;if(s===i)return UR(o),e;s=s.sibling}throw Error(tt(188))}if(r.return!==i.return)r=o,i=s;else{for(var a=!1,l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a)throw Error(tt(189))}}if(r.alternate!==i)throw Error(tt(190))}if(r.tag!==3)throw Error(tt(188));return r.stateNode.current===r?n:e}function vL(n){return n=lV(n),n!==null?yL(n):null}function yL(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=yL(n);if(e!==null)return e;n=n.sibling}return null}var _L=_o.unstable_scheduleCallback,BR=_o.unstable_cancelCallback,cV=_o.unstable_shouldYield,uV=_o.unstable_requestPaint,fr=_o.unstable_now,dV=_o.unstable_getCurrentPriorityLevel,vC=_o.unstable_ImmediatePriority,xL=_o.unstable_UserBlockingPriority,C0=_o.unstable_NormalPriority,fV=_o.unstable_LowPriority,bL=_o.unstable_IdlePriority,Gy=null,Vs=null;function hV(n){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(Gy,n,void 0,(n.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:gV,pV=Math.log,mV=Math.LN2;function gV(n){return n>>>=0,n===0?32:31-(pV(n)/mV|0)|0}var _g=64,xg=4194304;function qh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function T0(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,o=n.suspendedLanes,s=n.pingedLanes,a=r&268435455;if(a!==0){var l=a&~o;l!==0?i=qh(l):(s&=a,s!==0&&(i=qh(s)))}else a=r&~o,a!==0?i=qh(a):s!==0&&(i=qh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-gs(e),o=1<<r,i|=n[r],e&=~o;return i}function vV(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yV(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,o=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-gs(s),l=1<<a,c=o[a];c===-1?(!(l&r)||l&i)&&(o[a]=vV(l,e)):c<=e&&(n.expiredLanes|=l),s&=~l}}function L1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function SL(){var n=_g;return _g<<=1,!(_g&4194240)&&(_g=64),n}function Ax(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function Lm(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-gs(e),n[e]=r}function _V(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var o=31-gs(r),s=1<<o;e[o]=0,i[o]=-1,n[o]=-1,r&=~s}}function yC(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-gs(r),o=1<<i;o&e|n[i]&e&&(n[i]|=e),r&=~o}}var Nn=0;function wL(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var EL,_C,CL,TL,ML,F1=!1,bg=[],Il=null,Dl=null,Ll=null,Np=new Map,Pp=new Map,wl=[],xV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $R(n,e){switch(n){case"focusin":case"focusout":Il=null;break;case"dragenter":case"dragleave":Dl=null;break;case"mouseover":case"mouseout":Ll=null;break;case"pointerover":case"pointerout":Np.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pp.delete(e.pointerId)}}function sh(n,e,r,i,o,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Um(e),e!==null&&_C(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),n)}function bV(n,e,r,i,o){switch(e){case"focusin":return Il=sh(Il,n,e,r,i,o),!0;case"dragenter":return Dl=sh(Dl,n,e,r,i,o),!0;case"mouseover":return Ll=sh(Ll,n,e,r,i,o),!0;case"pointerover":var s=o.pointerId;return Np.set(s,sh(Np.get(s)||null,n,e,r,i,o)),!0;case"gotpointercapture":return s=o.pointerId,Pp.set(s,sh(Pp.get(s)||null,n,e,r,i,o)),!0}return!1}function RL(n){var e=Uc(n.target);if(e!==null){var r=_u(e);if(r!==null){if(e=r.tag,e===13){if(e=gL(r),e!==null){n.blockedOn=e,ML(n.priority,function(){CL(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=U1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);P1=i,r.target.dispatchEvent(i),P1=null}else return e=Um(r),e!==null&&_C(e),n.blockedOn=r,!1;e.shift()}return!0}function zR(n,e,r){Hv(n)&&r.delete(e)}function SV(){F1=!1,Il!==null&&Hv(Il)&&(Il=null),Dl!==null&&Hv(Dl)&&(Dl=null),Ll!==null&&Hv(Ll)&&(Ll=null),Np.forEach(zR),Pp.forEach(zR)}function ah(n,e){n.blockedOn===e&&(n.blockedOn=null,F1||(F1=!0,_o.unstable_scheduleCallback(_o.unstable_NormalPriority,SV)))}function Op(n){function e(o){return ah(o,n)}if(0<bg.length){ah(bg[0],n);for(var r=1;r<bg.length;r++){var i=bg[r];i.blockedOn===n&&(i.blockedOn=null)}}for(Il!==null&&ah(Il,n),Dl!==null&&ah(Dl,n),Ll!==null&&ah(Ll,n),Np.forEach(e),Pp.forEach(e),r=0;r<wl.length;r++)i=wl[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<wl.length&&(r=wl[0],r.blockedOn===null);)RL(r),r.blockedOn===null&&wl.shift()}var Pd=Xa.ReactCurrentBatchConfig,M0=!0;function wV(n,e,r,i){var o=Nn,s=Pd.transition;Pd.transition=null;try{Nn=1,xC(n,e,r,i)}finally{Nn=o,Pd.transition=s}}function EV(n,e,r,i){var o=Nn,s=Pd.transition;Pd.transition=null;try{Nn=4,xC(n,e,r,i)}finally{Nn=o,Pd.transition=s}}function xC(n,e,r,i){if(M0){var o=U1(n,e,r,i);if(o===null)$x(n,e,i,R0,r),$R(n,i);else if(bV(o,n,e,r,i))i.stopPropagation();else if($R(n,i),e&4&&-1<xV.indexOf(n)){for(;o!==null;){var s=Um(o);if(s!==null&&EL(s),s=U1(n,e,r,i),s===null&&$x(n,e,i,R0,r),s===o)break;o=s}o!==null&&i.stopPropagation()}else $x(n,e,i,null,r)}}var R0=null;function U1(n,e,r,i){if(R0=null,n=gC(i),n=Uc(n),n!==null)if(e=_u(n),e===null)n=null;else if(r=e.tag,r===13){if(n=gL(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return R0=n,null}function AL(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dV()){case vC:return 1;case xL:return 4;case C0:case fV:return 16;case bL:return 536870912;default:return 16}default:return 16}}var Rl=null,bC=null,jv=null;function NL(){if(jv)return jv;var n,e=bC,r=e.length,i,o="value"in Rl?Rl.value:Rl.textContent,s=o.length;for(n=0;n<r&&e[n]===o[n];n++);var a=r-n;for(i=1;i<=a&&e[r-i]===o[s-i];i++);return jv=o.slice(n,1<i?1-i:void 0)}function Wv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Sg(){return!0}function kR(){return!1}function wo(n){function e(r,i,o,s,a){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Sg:kR,this.isPropagationStopped=kR,this}return sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Sg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Sg)},persist:function(){},isPersistent:Sg}),e}var Lf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SC=wo(Lf),Fm=sr({},Lf,{view:0,detail:0}),CV=wo(Fm),Nx,Px,lh,Hy=sr({},Fm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==lh&&(lh&&n.type==="mousemove"?(Nx=n.screenX-lh.screenX,Px=n.screenY-lh.screenY):Px=Nx=0,lh=n),Nx)},movementY:function(n){return"movementY"in n?n.movementY:Px}}),VR=wo(Hy),TV=sr({},Hy,{dataTransfer:0}),MV=wo(TV),RV=sr({},Fm,{relatedTarget:0}),Ox=wo(RV),AV=sr({},Lf,{animationName:0,elapsedTime:0,pseudoElement:0}),NV=wo(AV),PV=sr({},Lf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),OV=wo(PV),IV=sr({},Lf,{data:0}),GR=wo(IV),DV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UV(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=FV[n])?!!e[n]:!1}function wC(){return UV}var BV=sr({},Fm,{key:function(n){if(n.key){var e=DV[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Wv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?LV[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wC,charCode:function(n){return n.type==="keypress"?Wv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Wv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$V=wo(BV),zV=sr({},Hy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HR=wo(zV),kV=sr({},Fm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wC}),VV=wo(kV),GV=sr({},Lf,{propertyName:0,elapsedTime:0,pseudoElement:0}),HV=wo(GV),jV=sr({},Hy,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),WV=wo(jV),qV=[9,13,27,32],EC=Fa&&"CompositionEvent"in window,sp=null;Fa&&"documentMode"in document&&(sp=document.documentMode);var XV=Fa&&"TextEvent"in window&&!sp,PL=Fa&&(!EC||sp&&8<sp&&11>=sp),jR=" ",WR=!1;function OL(n,e){switch(n){case"keyup":return qV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IL(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ld=!1;function KV(n,e){switch(n){case"compositionend":return IL(e);case"keypress":return e.which!==32?null:(WR=!0,jR);case"textInput":return n=e.data,n===jR&&WR?null:n;default:return null}}function YV(n,e){if(ld)return n==="compositionend"||!EC&&OL(n,e)?(n=NL(),jv=bC=Rl=null,ld=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PL&&e.locale!=="ko"?null:e.data;default:return null}}var QV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!QV[n.type]:e==="textarea"}function DL(n,e,r,i){dL(i),e=A0(e,"onChange"),0<e.length&&(r=new SC("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var ap=null,Ip=null;function ZV(n){jL(n,0)}function jy(n){var e=dd(n);if(iL(e))return n}function JV(n,e){if(n==="change")return e}var LL=!1;if(Fa){var Ix;if(Fa){var Dx="oninput"in document;if(!Dx){var XR=document.createElement("div");XR.setAttribute("oninput","return;"),Dx=typeof XR.oninput=="function"}Ix=Dx}else Ix=!1;LL=Ix&&(!document.documentMode||9<document.documentMode)}function KR(){ap&&(ap.detachEvent("onpropertychange",FL),Ip=ap=null)}function FL(n){if(n.propertyName==="value"&&jy(Ip)){var e=[];DL(e,Ip,n,gC(n)),mL(ZV,e)}}function e6(n,e,r){n==="focusin"?(KR(),ap=e,Ip=r,ap.attachEvent("onpropertychange",FL)):n==="focusout"&&KR()}function t6(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return jy(Ip)}function n6(n,e){if(n==="click")return jy(e)}function r6(n,e){if(n==="input"||n==="change")return jy(e)}function i6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var bs=typeof Object.is=="function"?Object.is:i6;function Dp(n,e){if(bs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!_1.call(e,o)||!bs(n[o],e[o]))return!1}return!0}function YR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function QR(n,e){var r=YR(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=YR(r)}}function UL(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?UL(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function BL(){for(var n=window,e=S0();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=S0(n.document)}return e}function CC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function o6(n){var e=BL(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&UL(r.ownerDocument.documentElement,r)){if(i!==null&&CC(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var o=r.textContent.length,s=Math.min(i.start,o);i=i.end===void 0?s:Math.min(i.end,o),!n.extend&&s>i&&(o=i,i=s,s=o),o=QR(r,s);var a=QR(r,i);o&&a&&(n.rangeCount!==1||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var s6=Fa&&"documentMode"in document&&11>=document.documentMode,cd=null,B1=null,lp=null,$1=!1;function ZR(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$1||cd==null||cd!==S0(i)||(i=cd,"selectionStart"in i&&CC(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),lp&&Dp(lp,i)||(lp=i,i=A0(B1,"onSelect"),0<i.length&&(e=new SC("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=cd)))}function wg(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var ud={animationend:wg("Animation","AnimationEnd"),animationiteration:wg("Animation","AnimationIteration"),animationstart:wg("Animation","AnimationStart"),transitionend:wg("Transition","TransitionEnd")},Lx={},$L={};Fa&&($L=document.createElement("div").style,"AnimationEvent"in window||(delete ud.animationend.animation,delete ud.animationiteration.animation,delete ud.animationstart.animation),"TransitionEvent"in window||delete ud.transitionend.transition);function Wy(n){if(Lx[n])return Lx[n];if(!ud[n])return n;var e=ud[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in $L)return Lx[n]=e[r];return n}var zL=Wy("animationend"),kL=Wy("animationiteration"),VL=Wy("animationstart"),GL=Wy("transitionend"),HL=new Map,JR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jl(n,e){HL.set(n,e),yu(e,[n])}for(var Fx=0;Fx<JR.length;Fx++){var Ux=JR[Fx],a6=Ux.toLowerCase(),l6=Ux[0].toUpperCase()+Ux.slice(1);Jl(a6,"on"+l6)}Jl(zL,"onAnimationEnd");Jl(kL,"onAnimationIteration");Jl(VL,"onAnimationStart");Jl("dblclick","onDoubleClick");Jl("focusin","onFocus");Jl("focusout","onBlur");Jl(GL,"onTransitionEnd");Hd("onMouseEnter",["mouseout","mouseover"]);Hd("onMouseLeave",["mouseout","mouseover"]);Hd("onPointerEnter",["pointerout","pointerover"]);Hd("onPointerLeave",["pointerout","pointerover"]);yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xh));function eA(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,aV(i,e,void 0,n),n.currentTarget=null}function jL(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],o=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&o.isPropagationStopped())break e;eA(o,l,u),s=c}else for(a=0;a<i.length;a++){if(l=i[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&o.isPropagationStopped())break e;eA(o,l,u),s=c}}}if(E0)throw n=D1,E0=!1,D1=null,n}function Vn(n,e){var r=e[H1];r===void 0&&(r=e[H1]=new Set);var i=n+"__bubble";r.has(i)||(WL(e,n,2,!1),r.add(i))}function Bx(n,e,r){var i=0;e&&(i|=4),WL(r,n,i,e)}var Eg="_reactListening"+Math.random().toString(36).slice(2);function Lp(n){if(!n[Eg]){n[Eg]=!0,JD.forEach(function(r){r!=="selectionchange"&&(c6.has(r)||Bx(r,!1,n),Bx(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Eg]||(e[Eg]=!0,Bx("selectionchange",!1,e))}}function WL(n,e,r,i){switch(AL(e)){case 1:var o=wV;break;case 4:o=EV;break;default:o=xC}r=o.bind(null,e,r,n),o=void 0,!I1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?n.addEventListener(e,r,{capture:!0,passive:o}):n.addEventListener(e,r,!0):o!==void 0?n.addEventListener(e,r,{passive:o}):n.addEventListener(e,r,!1)}function $x(n,e,r,i,o){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;a=a.return}for(;l!==null;){if(a=Uc(l),a===null)return;if(c=a.tag,c===5||c===6){i=s=a;continue e}l=l.parentNode}}i=i.return}mL(function(){var u=s,d=gC(r),f=[];e:{var h=HL.get(n);if(h!==void 0){var p=SC,g=n;switch(n){case"keypress":if(Wv(r)===0)break e;case"keydown":case"keyup":p=$V;break;case"focusin":g="focus",p=Ox;break;case"focusout":g="blur",p=Ox;break;case"beforeblur":case"afterblur":p=Ox;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=VR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=MV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=VV;break;case zL:case kL:case VL:p=NV;break;case GL:p=HV;break;case"scroll":p=CV;break;case"wheel":p=WV;break;case"copy":case"cut":case"paste":p=OV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=HR}var y=(e&4)!==0,v=!y&&n==="scroll",m=y?h!==null?h+"Capture":null:h;y=[];for(var _=u,x;_!==null;){x=_;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,m!==null&&(S=Ap(_,m),S!=null&&y.push(Fp(_,S,x)))),v)break;_=_.return}0<y.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",h&&r!==P1&&(g=r.relatedTarget||r.fromElement)&&(Uc(g)||g[Ua]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?Uc(g):null,g!==null&&(v=_u(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(y=VR,S="onMouseLeave",m="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(y=HR,S="onPointerLeave",m="onPointerEnter",_="pointer"),v=p==null?h:dd(p),x=g==null?h:dd(g),h=new y(S,_+"leave",p,r,d),h.target=v,h.relatedTarget=x,S=null,Uc(d)===u&&(y=new y(m,_+"enter",g,r,d),y.target=x,y.relatedTarget=v,S=y),v=S,p&&g)t:{for(y=p,m=g,_=0,x=y;x;x=Pu(x))_++;for(x=0,S=m;S;S=Pu(S))x++;for(;0<_-x;)y=Pu(y),_--;for(;0<x-_;)m=Pu(m),x--;for(;_--;){if(y===m||m!==null&&y===m.alternate)break t;y=Pu(y),m=Pu(m)}y=null}else y=null;p!==null&&tA(f,h,p,y,!1),g!==null&&v!==null&&tA(f,v,g,y,!0)}}e:{if(h=u?dd(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=JV;else if(qR(h))if(LL)w=r6;else{w=t6;var E=e6}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=n6);if(w&&(w=w(n,u))){DL(f,w,r,d);break e}E&&E(n,h,u),n==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&T1(h,"number",h.value)}switch(E=u?dd(u):window,n){case"focusin":(qR(E)||E.contentEditable==="true")&&(cd=E,B1=u,lp=null);break;case"focusout":lp=B1=cd=null;break;case"mousedown":$1=!0;break;case"contextmenu":case"mouseup":case"dragend":$1=!1,ZR(f,r,d);break;case"selectionchange":if(s6)break;case"keydown":case"keyup":ZR(f,r,d)}var C;if(EC)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ld?OL(n,r)&&(T="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(PL&&r.locale!=="ko"&&(ld||T!=="onCompositionStart"?T==="onCompositionEnd"&&ld&&(C=NL()):(Rl=d,bC="value"in Rl?Rl.value:Rl.textContent,ld=!0)),E=A0(u,T),0<E.length&&(T=new GR(T,n,null,r,d),f.push({event:T,listeners:E}),C?T.data=C:(C=IL(r),C!==null&&(T.data=C)))),(C=XV?KV(n,r):YV(n,r))&&(u=A0(u,"onBeforeInput"),0<u.length&&(d=new GR("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=C))}jL(f,e)})}function Fp(n,e,r){return{instance:n,listener:e,currentTarget:r}}function A0(n,e){for(var r=e+"Capture",i=[];n!==null;){var o=n,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Ap(n,r),s!=null&&i.unshift(Fp(n,s,o)),s=Ap(n,e),s!=null&&i.push(Fp(n,s,o))),n=n.return}return i}function Pu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function tA(n,e,r,i,o){for(var s=e._reactName,a=[];r!==null&&r!==i;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,o?(c=Ap(r,s),c!=null&&a.unshift(Fp(r,c,l))):o||(c=Ap(r,s),c!=null&&a.push(Fp(r,c,l)))),r=r.return}a.length!==0&&n.push({event:e,listeners:a})}var u6=/\r\n?/g,d6=/\u0000|\uFFFD/g;function nA(n){return(typeof n=="string"?n:""+n).replace(u6,`
`).replace(d6,"")}function Cg(n,e,r){if(e=nA(e),nA(n)!==e&&r)throw Error(tt(425))}function N0(){}var z1=null,k1=null;function V1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var G1=typeof setTimeout=="function"?setTimeout:void 0,f6=typeof clearTimeout=="function"?clearTimeout:void 0,rA=typeof Promise=="function"?Promise:void 0,h6=typeof queueMicrotask=="function"?queueMicrotask:typeof rA<"u"?function(n){return rA.resolve(null).then(n).catch(p6)}:G1;function p6(n){setTimeout(function(){throw n})}function zx(n,e){var r=e,i=0;do{var o=r.nextSibling;if(n.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){n.removeChild(o),Op(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);Op(e)}function Fl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function iA(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var Ff=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Ff,Up="__reactProps$"+Ff,Ua="__reactContainer$"+Ff,H1="__reactEvents$"+Ff,m6="__reactListeners$"+Ff,g6="__reactHandles$"+Ff;function Uc(n){var e=n[Fs];if(e)return e;for(var r=n.parentNode;r;){if(e=r[Ua]||r[Fs]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=iA(n);n!==null;){if(r=n[Fs])return r;n=iA(n)}return e}n=r,r=n.parentNode}return null}function Um(n){return n=n[Fs]||n[Ua],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function dd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(tt(33))}function qy(n){return n[Up]||null}var j1=[],fd=-1;function ec(n){return{current:n}}function qn(n){0>fd||(n.current=j1[fd],j1[fd]=null,fd--)}function zn(n,e){fd++,j1[fd]=n.current,n.current=e}var ql={},hi=ec(ql),qi=ec(!1),Zc=ql;function jd(n,e){var r=n.type.contextTypes;if(!r)return ql;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in r)o[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=o),o}function Xi(n){return n=n.childContextTypes,n!=null}function P0(){qn(qi),qn(hi)}function oA(n,e,r){if(hi.current!==ql)throw Error(tt(168));zn(hi,e),zn(qi,r)}function qL(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(tt(108,eV(n)||"Unknown",o));return sr({},r,i)}function O0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ql,Zc=hi.current,zn(hi,n),zn(qi,qi.current),!0}function sA(n,e,r){var i=n.stateNode;if(!i)throw Error(tt(169));r?(n=qL(n,e,Zc),i.__reactInternalMemoizedMergedChildContext=n,qn(qi),qn(hi),zn(hi,n)):qn(qi),zn(qi,r)}var ga=null,Xy=!1,kx=!1;function XL(n){ga===null?ga=[n]:ga.push(n)}function v6(n){Xy=!0,XL(n)}function tc(){if(!kx&&ga!==null){kx=!0;var n=0,e=Nn;try{var r=ga;for(Nn=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}ga=null,Xy=!1}catch(o){throw ga!==null&&(ga=ga.slice(n+1)),_L(vC,tc),o}finally{Nn=e,kx=!1}}return null}var hd=[],pd=0,I0=null,D0=0,Io=[],Do=0,Jc=null,wa=1,Ea="";function Sc(n,e){hd[pd++]=D0,hd[pd++]=I0,I0=n,D0=e}function KL(n,e,r){Io[Do++]=wa,Io[Do++]=Ea,Io[Do++]=Jc,Jc=n;var i=wa;n=Ea;var o=32-gs(i)-1;i&=~(1<<o),r+=1;var s=32-gs(e)+o;if(30<s){var a=o-o%5;s=(i&(1<<a)-1).toString(32),i>>=a,o-=a,wa=1<<32-gs(e)+o|r<<o|i,Ea=s+n}else wa=1<<s|r<<o|i,Ea=n}function TC(n){n.return!==null&&(Sc(n,1),KL(n,1,0))}function MC(n){for(;n===I0;)I0=hd[--pd],hd[pd]=null,D0=hd[--pd],hd[pd]=null;for(;n===Jc;)Jc=Io[--Do],Io[Do]=null,Ea=Io[--Do],Io[Do]=null,wa=Io[--Do],Io[Do]=null}var yo=null,go=null,Jn=!1,as=null;function YL(n,e){var r=Uo(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function aA(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,yo=n,go=Fl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,yo=n,go=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Jc!==null?{id:wa,overflow:Ea}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Uo(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,yo=n,go=null,!0):!1;default:return!1}}function W1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function q1(n){if(Jn){var e=go;if(e){var r=e;if(!aA(n,e)){if(W1(n))throw Error(tt(418));e=Fl(r.nextSibling);var i=yo;e&&aA(n,e)?YL(i,r):(n.flags=n.flags&-4097|2,Jn=!1,yo=n)}}else{if(W1(n))throw Error(tt(418));n.flags=n.flags&-4097|2,Jn=!1,yo=n}}}function lA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;yo=n}function Tg(n){if(n!==yo)return!1;if(!Jn)return lA(n),Jn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!V1(n.type,n.memoizedProps)),e&&(e=go)){if(W1(n))throw QL(),Error(tt(418));for(;e;)YL(n,e),e=Fl(e.nextSibling)}if(lA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(tt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){go=Fl(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}go=null}}else go=yo?Fl(n.stateNode.nextSibling):null;return!0}function QL(){for(var n=go;n;)n=Fl(n.nextSibling)}function Wd(){go=yo=null,Jn=!1}function RC(n){as===null?as=[n]:as.push(n)}var y6=Xa.ReactCurrentBatchConfig;function ch(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(tt(309));var i=r.stateNode}if(!i)throw Error(tt(147,n));var o=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=o.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(tt(284));if(!r._owner)throw Error(tt(290,n))}return n}function Mg(n,e){throw n=Object.prototype.toString.call(e),Error(tt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function cA(n){var e=n._init;return e(n._payload)}function ZL(n){function e(m,_){if(n){var x=m.deletions;x===null?(m.deletions=[_],m.flags|=16):x.push(_)}}function r(m,_){if(!n)return null;for(;_!==null;)e(m,_),_=_.sibling;return null}function i(m,_){for(m=new Map;_!==null;)_.key!==null?m.set(_.key,_):m.set(_.index,_),_=_.sibling;return m}function o(m,_){return m=zl(m,_),m.index=0,m.sibling=null,m}function s(m,_,x){return m.index=x,n?(x=m.alternate,x!==null?(x=x.index,x<_?(m.flags|=2,_):x):(m.flags|=2,_)):(m.flags|=1048576,_)}function a(m){return n&&m.alternate===null&&(m.flags|=2),m}function l(m,_,x,S){return _===null||_.tag!==6?(_=Xx(x,m.mode,S),_.return=m,_):(_=o(_,x),_.return=m,_)}function c(m,_,x,S){var w=x.type;return w===ad?d(m,_,x.props.children,S,x.key):_!==null&&(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_l&&cA(w)===_.type)?(S=o(_,x.props),S.ref=ch(m,_,x),S.return=m,S):(S=Jv(x.type,x.key,x.props,null,m.mode,S),S.ref=ch(m,_,x),S.return=m,S)}function u(m,_,x,S){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=Kx(x,m.mode,S),_.return=m,_):(_=o(_,x.children||[]),_.return=m,_)}function d(m,_,x,S,w){return _===null||_.tag!==7?(_=Hc(x,m.mode,S,w),_.return=m,_):(_=o(_,x),_.return=m,_)}function f(m,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Xx(""+_,m.mode,x),_.return=m,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case gg:return x=Jv(_.type,_.key,_.props,null,m.mode,x),x.ref=ch(m,null,_),x.return=m,x;case sd:return _=Kx(_,m.mode,x),_.return=m,_;case _l:var S=_._init;return f(m,S(_._payload),x)}if(Wh(_)||ih(_))return _=Hc(_,m.mode,x,null),_.return=m,_;Mg(m,_)}return null}function h(m,_,x,S){var w=_!==null?_.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:l(m,_,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case gg:return x.key===w?c(m,_,x,S):null;case sd:return x.key===w?u(m,_,x,S):null;case _l:return w=x._init,h(m,_,w(x._payload),S)}if(Wh(x)||ih(x))return w!==null?null:d(m,_,x,S,null);Mg(m,x)}return null}function p(m,_,x,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(x)||null,l(_,m,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case gg:return m=m.get(S.key===null?x:S.key)||null,c(_,m,S,w);case sd:return m=m.get(S.key===null?x:S.key)||null,u(_,m,S,w);case _l:var E=S._init;return p(m,_,x,E(S._payload),w)}if(Wh(S)||ih(S))return m=m.get(x)||null,d(_,m,S,w,null);Mg(_,S)}return null}function g(m,_,x,S){for(var w=null,E=null,C=_,T=_=0,M=null;C!==null&&T<x.length;T++){C.index>T?(M=C,C=null):M=C.sibling;var R=h(m,C,x[T],S);if(R===null){C===null&&(C=M);break}n&&C&&R.alternate===null&&e(m,C),_=s(R,_,T),E===null?w=R:E.sibling=R,E=R,C=M}if(T===x.length)return r(m,C),Jn&&Sc(m,T),w;if(C===null){for(;T<x.length;T++)C=f(m,x[T],S),C!==null&&(_=s(C,_,T),E===null?w=C:E.sibling=C,E=C);return Jn&&Sc(m,T),w}for(C=i(m,C);T<x.length;T++)M=p(C,m,T,x[T],S),M!==null&&(n&&M.alternate!==null&&C.delete(M.key===null?T:M.key),_=s(M,_,T),E===null?w=M:E.sibling=M,E=M);return n&&C.forEach(function(P){return e(m,P)}),Jn&&Sc(m,T),w}function y(m,_,x,S){var w=ih(x);if(typeof w!="function")throw Error(tt(150));if(x=w.call(x),x==null)throw Error(tt(151));for(var E=w=null,C=_,T=_=0,M=null,R=x.next();C!==null&&!R.done;T++,R=x.next()){C.index>T?(M=C,C=null):M=C.sibling;var P=h(m,C,R.value,S);if(P===null){C===null&&(C=M);break}n&&C&&P.alternate===null&&e(m,C),_=s(P,_,T),E===null?w=P:E.sibling=P,E=P,C=M}if(R.done)return r(m,C),Jn&&Sc(m,T),w;if(C===null){for(;!R.done;T++,R=x.next())R=f(m,R.value,S),R!==null&&(_=s(R,_,T),E===null?w=R:E.sibling=R,E=R);return Jn&&Sc(m,T),w}for(C=i(m,C);!R.done;T++,R=x.next())R=p(C,m,T,R.value,S),R!==null&&(n&&R.alternate!==null&&C.delete(R.key===null?T:R.key),_=s(R,_,T),E===null?w=R:E.sibling=R,E=R);return n&&C.forEach(function(D){return e(m,D)}),Jn&&Sc(m,T),w}function v(m,_,x,S){if(typeof x=="object"&&x!==null&&x.type===ad&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case gg:e:{for(var w=x.key,E=_;E!==null;){if(E.key===w){if(w=x.type,w===ad){if(E.tag===7){r(m,E.sibling),_=o(E,x.props.children),_.return=m,m=_;break e}}else if(E.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_l&&cA(w)===E.type){r(m,E.sibling),_=o(E,x.props),_.ref=ch(m,E,x),_.return=m,m=_;break e}r(m,E);break}else e(m,E);E=E.sibling}x.type===ad?(_=Hc(x.props.children,m.mode,S,x.key),_.return=m,m=_):(S=Jv(x.type,x.key,x.props,null,m.mode,S),S.ref=ch(m,_,x),S.return=m,m=S)}return a(m);case sd:e:{for(E=x.key;_!==null;){if(_.key===E)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){r(m,_.sibling),_=o(_,x.children||[]),_.return=m,m=_;break e}else{r(m,_);break}else e(m,_);_=_.sibling}_=Kx(x,m.mode,S),_.return=m,m=_}return a(m);case _l:return E=x._init,v(m,_,E(x._payload),S)}if(Wh(x))return g(m,_,x,S);if(ih(x))return y(m,_,x,S);Mg(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,_!==null&&_.tag===6?(r(m,_.sibling),_=o(_,x),_.return=m,m=_):(r(m,_),_=Xx(x,m.mode,S),_.return=m,m=_),a(m)):r(m,_)}return v}var qd=ZL(!0),JL=ZL(!1),L0=ec(null),F0=null,md=null,AC=null;function NC(){AC=md=F0=null}function PC(n){var e=L0.current;qn(L0),n._currentValue=e}function X1(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function Od(n,e){F0=n,AC=md=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(zi=!0),n.firstContext=null)}function Go(n){var e=n._currentValue;if(AC!==n)if(n={context:n,memoizedValue:e,next:null},md===null){if(F0===null)throw Error(tt(308));md=n,F0.dependencies={lanes:0,firstContext:n}}else md=md.next=n;return e}var Bc=null;function OC(n){Bc===null?Bc=[n]:Bc.push(n)}function eF(n,e,r,i){var o=e.interleaved;return o===null?(r.next=r,OC(e)):(r.next=o.next,o.next=r),e.interleaved=r,Ba(n,i)}function Ba(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var xl=!1;function IC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tF(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Aa(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ul(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,gn&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,Ba(n,r)}return o=i.interleaved,o===null?(e.next=e,OC(i)):(e.next=o.next,o.next=e),i.interleaved=e,Ba(n,r)}function qv(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,yC(n,r)}}function uA(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?o=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?o=s=e:s=s.next=e}else o=s=e;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function U0(n,e,r,i){var o=n.updateQueue;xl=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=o.baseState;a=0,d=u=c=null,l=s;do{var h=l.lane,p=l.eventTime;if((i&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=n,y=l;switch(h=e,p=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=sr({},f,h);break e;case 2:xl=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,h=o.effects,h===null?o.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=h;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;h=l,l=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(d===null&&(c=f),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=d,e=o.shared.interleaved,e!==null){o=e;do a|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);tu|=a,n.lanes=a,n.memoizedState=f}}function dA(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(tt(191,o));o.call(i)}}}var Bm={},Gs=ec(Bm),Bp=ec(Bm),$p=ec(Bm);function $c(n){if(n===Bm)throw Error(tt(174));return n}function DC(n,e){switch(zn($p,e),zn(Bp,n),zn(Gs,Bm),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:R1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=R1(e,n)}qn(Gs),zn(Gs,e)}function Xd(){qn(Gs),qn(Bp),qn($p)}function nF(n){$c($p.current);var e=$c(Gs.current),r=R1(e,n.type);e!==r&&(zn(Bp,n),zn(Gs,r))}function LC(n){Bp.current===n&&(qn(Gs),qn(Bp))}var nr=ec(0);function B0(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vx=[];function FC(){for(var n=0;n<Vx.length;n++)Vx[n]._workInProgressVersionPrimary=null;Vx.length=0}var Xv=Xa.ReactCurrentDispatcher,Gx=Xa.ReactCurrentBatchConfig,eu=0,or=null,Dr=null,qr=null,$0=!1,cp=!1,zp=0,_6=0;function si(){throw Error(tt(321))}function UC(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!bs(n[r],e[r]))return!1;return!0}function BC(n,e,r,i,o,s){if(eu=s,or=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xv.current=n===null||n.memoizedState===null?w6:E6,n=r(i,o),cp){s=0;do{if(cp=!1,zp=0,25<=s)throw Error(tt(301));s+=1,qr=Dr=null,e.updateQueue=null,Xv.current=C6,n=r(i,o)}while(cp)}if(Xv.current=z0,e=Dr!==null&&Dr.next!==null,eu=0,qr=Dr=or=null,$0=!1,e)throw Error(tt(300));return n}function $C(){var n=zp!==0;return zp=0,n}function Os(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?or.memoizedState=qr=n:qr=qr.next=n,qr}function Ho(){if(Dr===null){var n=or.alternate;n=n!==null?n.memoizedState:null}else n=Dr.next;var e=qr===null?or.memoizedState:qr.next;if(e!==null)qr=e,Dr=n;else{if(n===null)throw Error(tt(310));Dr=n,n={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},qr===null?or.memoizedState=qr=n:qr=qr.next=n}return qr}function kp(n,e){return typeof e=="function"?e(n):e}function Hx(n){var e=Ho(),r=e.queue;if(r===null)throw Error(tt(311));r.lastRenderedReducer=n;var i=Dr,o=i.baseQueue,s=r.pending;if(s!==null){if(o!==null){var a=o.next;o.next=s.next,s.next=a}i.baseQueue=o=s,r.pending=null}if(o!==null){s=o.next,i=i.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((eu&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=i):c=c.next=f,or.lanes|=d,tu|=d}u=u.next}while(u!==null&&u!==s);c===null?a=i:c.next=l,bs(i,e.memoizedState)||(zi=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,r.lastRenderedState=i}if(n=r.interleaved,n!==null){o=n;do s=o.lane,or.lanes|=s,tu|=s,o=o.next;while(o!==n)}else o===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function jx(n){var e=Ho(),r=e.queue;if(r===null)throw Error(tt(311));r.lastRenderedReducer=n;var i=r.dispatch,o=r.pending,s=e.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do s=n(s,a.action),a=a.next;while(a!==o);bs(s,e.memoizedState)||(zi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,i]}function rF(){}function iF(n,e){var r=or,i=Ho(),o=e(),s=!bs(i.memoizedState,o);if(s&&(i.memoizedState=o,zi=!0),i=i.queue,zC(aF.bind(null,r,i,n),[n]),i.getSnapshot!==e||s||qr!==null&&qr.memoizedState.tag&1){if(r.flags|=2048,Vp(9,sF.bind(null,r,i,o,e),void 0,null),Kr===null)throw Error(tt(349));eu&30||oF(r,e,o)}return o}function oF(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function sF(n,e,r,i){e.value=r,e.getSnapshot=i,lF(e)&&cF(n)}function aF(n,e,r){return r(function(){lF(e)&&cF(n)})}function lF(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!bs(n,r)}catch{return!0}}function cF(n){var e=Ba(n,1);e!==null&&vs(e,n,1,-1)}function fA(n){var e=Os();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kp,lastRenderedState:n},e.queue=n,n=n.dispatch=S6.bind(null,or,n),[e.memoizedState,n]}function Vp(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=or.updateQueue,e===null?(e={lastEffect:null,stores:null},or.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function uF(){return Ho().memoizedState}function Kv(n,e,r,i){var o=Os();or.flags|=n,o.memoizedState=Vp(1|e,r,void 0,i===void 0?null:i)}function Ky(n,e,r,i){var o=Ho();i=i===void 0?null:i;var s=void 0;if(Dr!==null){var a=Dr.memoizedState;if(s=a.destroy,i!==null&&UC(i,a.deps)){o.memoizedState=Vp(e,r,s,i);return}}or.flags|=n,o.memoizedState=Vp(1|e,r,s,i)}function hA(n,e){return Kv(8390656,8,n,e)}function zC(n,e){return Ky(2048,8,n,e)}function dF(n,e){return Ky(4,2,n,e)}function fF(n,e){return Ky(4,4,n,e)}function hF(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function pF(n,e,r){return r=r!=null?r.concat([n]):null,Ky(4,4,hF.bind(null,e,n),r)}function kC(){}function mF(n,e){var r=Ho();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&UC(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function gF(n,e){var r=Ho();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&UC(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function vF(n,e,r){return eu&21?(bs(r,e)||(r=SL(),or.lanes|=r,tu|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,zi=!0),n.memoizedState=r)}function x6(n,e){var r=Nn;Nn=r!==0&&4>r?r:4,n(!0);var i=Gx.transition;Gx.transition={};try{n(!1),e()}finally{Nn=r,Gx.transition=i}}function yF(){return Ho().memoizedState}function b6(n,e,r){var i=$l(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},_F(n))xF(e,r);else if(r=eF(n,e,r,i),r!==null){var o=Ti();vs(r,n,i,o),bF(r,e,i)}}function S6(n,e,r){var i=$l(n),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(_F(n))xF(e,o);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,r);if(o.hasEagerState=!0,o.eagerState=l,bs(l,a)){var c=e.interleaved;c===null?(o.next=o,OC(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}r=eF(n,e,o,i),r!==null&&(o=Ti(),vs(r,n,i,o),bF(r,e,i))}}function _F(n){var e=n.alternate;return n===or||e!==null&&e===or}function xF(n,e){cp=$0=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function bF(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,yC(n,r)}}var z0={readContext:Go,useCallback:si,useContext:si,useEffect:si,useImperativeHandle:si,useInsertionEffect:si,useLayoutEffect:si,useMemo:si,useReducer:si,useRef:si,useState:si,useDebugValue:si,useDeferredValue:si,useTransition:si,useMutableSource:si,useSyncExternalStore:si,useId:si,unstable_isNewReconciler:!1},w6={readContext:Go,useCallback:function(n,e){return Os().memoizedState=[n,e===void 0?null:e],n},useContext:Go,useEffect:hA,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,Kv(4194308,4,hF.bind(null,e,n),r)},useLayoutEffect:function(n,e){return Kv(4194308,4,n,e)},useInsertionEffect:function(n,e){return Kv(4,2,n,e)},useMemo:function(n,e){var r=Os();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=Os();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=b6.bind(null,or,n),[i.memoizedState,n]},useRef:function(n){var e=Os();return n={current:n},e.memoizedState=n},useState:fA,useDebugValue:kC,useDeferredValue:function(n){return Os().memoizedState=n},useTransition:function(){var n=fA(!1),e=n[0];return n=x6.bind(null,n[1]),Os().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=or,o=Os();if(Jn){if(r===void 0)throw Error(tt(407));r=r()}else{if(r=e(),Kr===null)throw Error(tt(349));eu&30||oF(i,e,r)}o.memoizedState=r;var s={value:r,getSnapshot:e};return o.queue=s,hA(aF.bind(null,i,s,n),[n]),i.flags|=2048,Vp(9,sF.bind(null,i,s,r,e),void 0,null),r},useId:function(){var n=Os(),e=Kr.identifierPrefix;if(Jn){var r=Ea,i=wa;r=(i&~(1<<32-gs(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=zp++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=_6++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},E6={readContext:Go,useCallback:mF,useContext:Go,useEffect:zC,useImperativeHandle:pF,useInsertionEffect:dF,useLayoutEffect:fF,useMemo:gF,useReducer:Hx,useRef:uF,useState:function(){return Hx(kp)},useDebugValue:kC,useDeferredValue:function(n){var e=Ho();return vF(e,Dr.memoizedState,n)},useTransition:function(){var n=Hx(kp)[0],e=Ho().memoizedState;return[n,e]},useMutableSource:rF,useSyncExternalStore:iF,useId:yF,unstable_isNewReconciler:!1},C6={readContext:Go,useCallback:mF,useContext:Go,useEffect:zC,useImperativeHandle:pF,useInsertionEffect:dF,useLayoutEffect:fF,useMemo:gF,useReducer:jx,useRef:uF,useState:function(){return jx(kp)},useDebugValue:kC,useDeferredValue:function(n){var e=Ho();return Dr===null?e.memoizedState=n:vF(e,Dr.memoizedState,n)},useTransition:function(){var n=jx(kp)[0],e=Ho().memoizedState;return[n,e]},useMutableSource:rF,useSyncExternalStore:iF,useId:yF,unstable_isNewReconciler:!1};function ns(n,e){if(n&&n.defaultProps){e=sr({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function K1(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:sr({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var Yy={isMounted:function(n){return(n=n._reactInternals)?_u(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=Ti(),o=$l(n),s=Aa(i,o);s.payload=e,r!=null&&(s.callback=r),e=Ul(n,s,o),e!==null&&(vs(e,n,o,i),qv(e,n,o))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=Ti(),o=$l(n),s=Aa(i,o);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Ul(n,s,o),e!==null&&(vs(e,n,o,i),qv(e,n,o))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=Ti(),i=$l(n),o=Aa(r,i);o.tag=2,e!=null&&(o.callback=e),e=Ul(n,o,i),e!==null&&(vs(e,n,i,r),qv(e,n,i))}};function pA(n,e,r,i,o,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Dp(r,i)||!Dp(o,s):!0}function SF(n,e,r){var i=!1,o=ql,s=e.contextType;return typeof s=="object"&&s!==null?s=Go(s):(o=Xi(e)?Zc:hi.current,i=e.contextTypes,s=(i=i!=null)?jd(n,o):ql),e=new e(r,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yy,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=s),e}function mA(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&Yy.enqueueReplaceState(e,e.state,null)}function Y1(n,e,r,i){var o=n.stateNode;o.props=r,o.state=n.memoizedState,o.refs={},IC(n);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Go(s):(s=Xi(e)?Zc:hi.current,o.context=jd(n,s)),o.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(K1(n,e,s,r),o.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Yy.enqueueReplaceState(o,o.state,null),U0(n,r,o,i),o.state=n.memoizedState),typeof o.componentDidMount=="function"&&(n.flags|=4194308)}function Kd(n,e){try{var r="",i=e;do r+=J5(i),i=i.return;while(i);var o=r}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:o,digest:null}}function Wx(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function Q1(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var T6=typeof WeakMap=="function"?WeakMap:Map;function wF(n,e,r){r=Aa(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){V0||(V0=!0,aw=i),Q1(n,e)},r}function EF(n,e,r){r=Aa(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;r.payload=function(){return i(o)},r.callback=function(){Q1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Q1(n,e),typeof i!="function"&&(Bl===null?Bl=new Set([this]):Bl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function gA(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new T6;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(r)||(o.add(r),n=z6.bind(null,n,e,r),e.then(n,n))}function vA(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function yA(n,e,r,i,o){return n.mode&1?(n.flags|=65536,n.lanes=o,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Aa(-1,1),e.tag=2,Ul(r,e,1))),r.lanes|=1),n)}var M6=Xa.ReactCurrentOwner,zi=!1;function bi(n,e,r,i){e.child=n===null?JL(e,null,r,i):qd(e,n.child,r,i)}function _A(n,e,r,i,o){r=r.render;var s=e.ref;return Od(e,o),i=BC(n,e,r,i,s,o),r=$C(),n!==null&&!zi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,$a(n,e,o)):(Jn&&r&&TC(e),e.flags|=1,bi(n,e,i,o),e.child)}function xA(n,e,r,i,o){if(n===null){var s=r.type;return typeof s=="function"&&!KC(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,CF(n,e,s,i,o)):(n=Jv(r.type,null,i,e,e.mode,o),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&o)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:Dp,r(a,i)&&n.ref===e.ref)return $a(n,e,o)}return e.flags|=1,n=zl(s,i),n.ref=e.ref,n.return=e,e.child=n}function CF(n,e,r,i,o){if(n!==null){var s=n.memoizedProps;if(Dp(s,i)&&n.ref===e.ref)if(zi=!1,e.pendingProps=i=s,(n.lanes&o)!==0)n.flags&131072&&(zi=!0);else return e.lanes=n.lanes,$a(n,e,o)}return Z1(n,e,r,i,o)}function TF(n,e,r){var i=e.pendingProps,o=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},zn(vd,fo),fo|=r;else{if(!(r&1073741824))return n=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,zn(vd,fo),fo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,zn(vd,fo),fo|=i}else s!==null?(i=s.baseLanes|r,e.memoizedState=null):i=r,zn(vd,fo),fo|=i;return bi(n,e,o,r),e.child}function MF(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Z1(n,e,r,i,o){var s=Xi(r)?Zc:hi.current;return s=jd(e,s),Od(e,o),r=BC(n,e,r,i,s,o),i=$C(),n!==null&&!zi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,$a(n,e,o)):(Jn&&i&&TC(e),e.flags|=1,bi(n,e,r,o),e.child)}function bA(n,e,r,i,o){if(Xi(r)){var s=!0;O0(e)}else s=!1;if(Od(e,o),e.stateNode===null)Yv(n,e),SF(e,r,i),Y1(e,r,i,o),i=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Go(u):(u=Xi(r)?Zc:hi.current,u=jd(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||c!==u)&&mA(e,a,i,u),xl=!1;var h=e.memoizedState;a.state=h,U0(e,i,a,o),c=e.memoizedState,l!==i||h!==c||qi.current||xl?(typeof d=="function"&&(K1(e,r,d,i),c=e.memoizedState),(l=xl||pA(e,r,l,i,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=u,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,tF(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:ns(e.type,l),a.props=u,f=e.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Go(c):(c=Xi(r)?Zc:hi.current,c=jd(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||h!==c)&&mA(e,a,i,c),xl=!1,h=e.memoizedState,a.state=h,U0(e,i,a,o);var g=e.memoizedState;l!==f||h!==g||qi.current||xl?(typeof p=="function"&&(K1(e,r,p,i),g=e.memoizedState),(u=xl||pA(e,r,u,i,h,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),a.props=i,a.state=g,a.context=c,i=u):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return J1(n,e,r,i,s,o)}function J1(n,e,r,i,o,s){MF(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return o&&sA(e,r,!1),$a(n,e,s);i=e.stateNode,M6.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=qd(e,n.child,null,s),e.child=qd(e,null,l,s)):bi(n,e,l,s),e.memoizedState=i.state,o&&sA(e,r,!0),e.child}function RF(n){var e=n.stateNode;e.pendingContext?oA(n,e.pendingContext,e.pendingContext!==e.context):e.context&&oA(n,e.context,!1),DC(n,e.containerInfo)}function SA(n,e,r,i,o){return Wd(),RC(o),e.flags|=256,bi(n,e,r,i),e.child}var ew={dehydrated:null,treeContext:null,retryLane:0};function tw(n){return{baseLanes:n,cachePool:null,transitions:null}}function AF(n,e,r){var i=e.pendingProps,o=nr.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(o&2)!==0),l?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(o|=1),zn(nr,o&1),n===null)return q1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Jy(a,i,0,null),n=Hc(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=tw(r),e.memoizedState=ew,n):VC(e,a));if(o=n.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return R6(n,e,a,i,l,o,r);if(s){s=i.fallback,a=e.mode,o=n.child,l=o.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=zl(o,c),i.subtreeFlags=o.subtreeFlags&14680064),l!==null?s=zl(l,s):(s=Hc(s,a,r,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?tw(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~r,e.memoizedState=ew,i}return s=n.child,n=s.sibling,i=zl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function VC(n,e){return e=Jy({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Rg(n,e,r,i){return i!==null&&RC(i),qd(e,n.child,null,r),n=VC(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function R6(n,e,r,i,o,s,a){if(r)return e.flags&256?(e.flags&=-257,i=Wx(Error(tt(422))),Rg(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,o=e.mode,i=Jy({mode:"visible",children:i.children},o,0,null),s=Hc(s,o,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&qd(e,n.child,null,a),e.child.memoizedState=tw(a),e.memoizedState=ew,s);if(!(e.mode&1))return Rg(n,e,a,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(tt(419)),i=Wx(s,i,void 0),Rg(n,e,a,i)}if(l=(a&n.childLanes)!==0,zi||l){if(i=Kr,i!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|a)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Ba(n,o),vs(i,n,o,-1))}return XC(),i=Wx(Error(tt(421))),Rg(n,e,a,i)}return o.data==="$?"?(e.flags|=128,e.child=n.child,e=k6.bind(null,n),o._reactRetry=e,null):(n=s.treeContext,go=Fl(o.nextSibling),yo=e,Jn=!0,as=null,n!==null&&(Io[Do++]=wa,Io[Do++]=Ea,Io[Do++]=Jc,wa=n.id,Ea=n.overflow,Jc=e),e=VC(e,i.children),e.flags|=4096,e)}function wA(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),X1(n.return,e,r)}function qx(n,e,r,i,o){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=o)}function NF(n,e,r){var i=e.pendingProps,o=i.revealOrder,s=i.tail;if(bi(n,e,i.children,r),i=nr.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wA(n,r,e);else if(n.tag===19)wA(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(zn(nr,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(r=e.child,o=null;r!==null;)n=r.alternate,n!==null&&B0(n)===null&&(o=r),r=r.sibling;r=o,r===null?(o=e.child,e.child=null):(o=r.sibling,r.sibling=null),qx(e,!1,o,r,s);break;case"backwards":for(r=null,o=e.child,e.child=null;o!==null;){if(n=o.alternate,n!==null&&B0(n)===null){e.child=o;break}n=o.sibling,o.sibling=r,r=o,o=n}qx(e,!0,r,null,s);break;case"together":qx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function $a(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),tu|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(tt(153));if(e.child!==null){for(n=e.child,r=zl(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=zl(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function A6(n,e,r){switch(e.tag){case 3:RF(e),Wd();break;case 5:nF(e);break;case 1:Xi(e.type)&&O0(e);break;case 4:DC(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;zn(L0,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(zn(nr,nr.current&1),e.flags|=128,null):r&e.child.childLanes?AF(n,e,r):(zn(nr,nr.current&1),n=$a(n,e,r),n!==null?n.sibling:null);zn(nr,nr.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return NF(n,e,r);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),zn(nr,nr.current),i)break;return null;case 22:case 23:return e.lanes=0,TF(n,e,r)}return $a(n,e,r)}var PF,nw,OF,IF;PF=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};nw=function(){};OF=function(n,e,r,i){var o=n.memoizedProps;if(o!==i){n=e.stateNode,$c(Gs.current);var s=null;switch(r){case"input":o=E1(n,o),i=E1(n,i),s=[];break;case"select":o=sr({},o,{value:void 0}),i=sr({},i,{value:void 0}),s=[];break;case"textarea":o=M1(n,o),i=M1(n,i),s=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=N0)}A1(r,i);var a;r=null;for(u in o)if(!i.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var l=o[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mp.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=o!=null?o[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mp.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Vn("scroll",n),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};IF=function(n,e,r,i){r!==i&&(e.flags|=4)};function uh(n,e){if(!Jn)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ai(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var o=n.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=n,o=o.sibling;else for(o=n.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=n,o=o.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function N6(n,e,r){var i=e.pendingProps;switch(MC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(e),null;case 1:return Xi(e.type)&&P0(),ai(e),null;case 3:return i=e.stateNode,Xd(),qn(qi),qn(hi),FC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Tg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,as!==null&&(uw(as),as=null))),nw(n,e),ai(e),null;case 5:LC(e);var o=$c($p.current);if(r=e.type,n!==null&&e.stateNode!=null)OF(n,e,r,i,o),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(tt(166));return ai(e),null}if(n=$c(Gs.current),Tg(e)){i=e.stateNode,r=e.type;var s=e.memoizedProps;switch(i[Fs]=e,i[Up]=s,n=(e.mode&1)!==0,r){case"dialog":Vn("cancel",i),Vn("close",i);break;case"iframe":case"object":case"embed":Vn("load",i);break;case"video":case"audio":for(o=0;o<Xh.length;o++)Vn(Xh[o],i);break;case"source":Vn("error",i);break;case"img":case"image":case"link":Vn("error",i),Vn("load",i);break;case"details":Vn("toggle",i);break;case"input":OR(i,s),Vn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Vn("invalid",i);break;case"textarea":DR(i,s),Vn("invalid",i)}A1(r,s),o=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Cg(i.textContent,l,n),o=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Cg(i.textContent,l,n),o=["children",""+l]):Mp.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Vn("scroll",i)}switch(r){case"input":vg(i),IR(i,s,!0);break;case"textarea":vg(i),LR(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=N0)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=aL(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(r,{is:i.is}):(n=a.createElement(r),r==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,r),n[Fs]=e,n[Up]=i,PF(n,e,!1,!1),e.stateNode=n;e:{switch(a=N1(r,i),r){case"dialog":Vn("cancel",n),Vn("close",n),o=i;break;case"iframe":case"object":case"embed":Vn("load",n),o=i;break;case"video":case"audio":for(o=0;o<Xh.length;o++)Vn(Xh[o],n);o=i;break;case"source":Vn("error",n),o=i;break;case"img":case"image":case"link":Vn("error",n),Vn("load",n),o=i;break;case"details":Vn("toggle",n),o=i;break;case"input":OR(n,i),o=E1(n,i),Vn("invalid",n);break;case"option":o=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},o=sr({},i,{value:void 0}),Vn("invalid",n);break;case"textarea":DR(n,i),o=M1(n,i),Vn("invalid",n);break;default:o=i}A1(r,o),l=o;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?uL(n,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lL(n,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Rp(n,c):typeof c=="number"&&Rp(n,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mp.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Vn("scroll",n):c!=null&&fC(n,s,c,a))}switch(r){case"input":vg(n),IR(n,i,!1);break;case"textarea":vg(n),LR(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Wl(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Rd(n,!!i.multiple,s,!1):i.defaultValue!=null&&Rd(n,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(n.onclick=N0)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ai(e),null;case 6:if(n&&e.stateNode!=null)IF(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(tt(166));if(r=$c($p.current),$c(Gs.current),Tg(e)){if(i=e.stateNode,r=e.memoizedProps,i[Fs]=e,(s=i.nodeValue!==r)&&(n=yo,n!==null))switch(n.tag){case 3:Cg(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Cg(i.nodeValue,r,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Fs]=e,e.stateNode=i}return ai(e),null;case 13:if(qn(nr),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Jn&&go!==null&&e.mode&1&&!(e.flags&128))QL(),Wd(),e.flags|=98560,s=!1;else if(s=Tg(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(tt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[Fs]=e}else Wd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ai(e),s=!1}else as!==null&&(uw(as),as=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||nr.current&1?Fr===0&&(Fr=3):XC())),e.updateQueue!==null&&(e.flags|=4),ai(e),null);case 4:return Xd(),nw(n,e),n===null&&Lp(e.stateNode.containerInfo),ai(e),null;case 10:return PC(e.type._context),ai(e),null;case 17:return Xi(e.type)&&P0(),ai(e),null;case 19:if(qn(nr),s=e.memoizedState,s===null)return ai(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)uh(s,!1);else{if(Fr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=B0(n),a!==null){for(e.flags|=128,uh(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)s=r,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return zn(nr,nr.current&1|2),e.child}n=n.sibling}s.tail!==null&&fr()>Yd&&(e.flags|=128,i=!0,uh(s,!1),e.lanes=4194304)}else{if(!i)if(n=B0(a),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),uh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Jn)return ai(e),null}else 2*fr()-s.renderingStartTime>Yd&&r!==1073741824&&(e.flags|=128,i=!0,uh(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fr(),e.sibling=null,r=nr.current,zn(nr,i?r&1|2:r&1),e):(ai(e),null);case 22:case 23:return qC(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?fo&1073741824&&(ai(e),e.subtreeFlags&6&&(e.flags|=8192)):ai(e),null;case 24:return null;case 25:return null}throw Error(tt(156,e.tag))}function P6(n,e){switch(MC(e),e.tag){case 1:return Xi(e.type)&&P0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Xd(),qn(qi),qn(hi),FC(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return LC(e),null;case 13:if(qn(nr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(tt(340));Wd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return qn(nr),null;case 4:return Xd(),null;case 10:return PC(e.type._context),null;case 22:case 23:return qC(),null;case 24:return null;default:return null}}var Ag=!1,di=!1,O6=typeof WeakSet=="function"?WeakSet:Set,St=null;function gd(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){lr(n,e,i)}else r.current=null}function rw(n,e,r){try{r()}catch(i){lr(n,e,i)}}var EA=!1;function I6(n,e){if(z1=M0,n=BL(),CC(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=n,h=null;t:for(;;){for(var p;f!==r||o!==0&&f.nodeType!==3||(l=a+o),f!==s||i!==0&&f.nodeType!==3||(c=a+i),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===n)break t;if(h===r&&++u===o&&(l=a),h===s&&++d===i&&(c=a),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(k1={focusedElem:n,selectionRange:r},M0=!1,St=e;St!==null;)if(e=St,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,St=n;else for(;St!==null;){e=St;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,m=e.stateNode,_=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:ns(e.type,y),v);m.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(S){lr(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,St=n;break}St=e.return}return g=EA,EA=!1,g}function up(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&n)===n){var s=o.destroy;o.destroy=void 0,s!==void 0&&rw(e,r,s)}o=o.next}while(o!==i)}}function Qy(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function iw(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function DF(n){var e=n.alternate;e!==null&&(n.alternate=null,DF(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Fs],delete e[Up],delete e[H1],delete e[m6],delete e[g6])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function LF(n){return n.tag===5||n.tag===3||n.tag===4}function CA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||LF(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ow(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=N0));else if(i!==4&&(n=n.child,n!==null))for(ow(n,e,r),n=n.sibling;n!==null;)ow(n,e,r),n=n.sibling}function sw(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(sw(n,e,r),n=n.sibling;n!==null;)sw(n,e,r),n=n.sibling}var Jr=null,rs=!1;function rl(n,e,r){for(r=r.child;r!==null;)FF(n,e,r),r=r.sibling}function FF(n,e,r){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(Gy,r)}catch{}switch(r.tag){case 5:di||gd(r,e);case 6:var i=Jr,o=rs;Jr=null,rl(n,e,r),Jr=i,rs=o,Jr!==null&&(rs?(n=Jr,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):Jr.removeChild(r.stateNode));break;case 18:Jr!==null&&(rs?(n=Jr,r=r.stateNode,n.nodeType===8?zx(n.parentNode,r):n.nodeType===1&&zx(n,r),Op(n)):zx(Jr,r.stateNode));break;case 4:i=Jr,o=rs,Jr=r.stateNode.containerInfo,rs=!0,rl(n,e,r),Jr=i,rs=o;break;case 0:case 11:case 14:case 15:if(!di&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var s=o,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&rw(r,e,a),o=o.next}while(o!==i)}rl(n,e,r);break;case 1:if(!di&&(gd(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){lr(r,e,l)}rl(n,e,r);break;case 21:rl(n,e,r);break;case 22:r.mode&1?(di=(i=di)||r.memoizedState!==null,rl(n,e,r),di=i):rl(n,e,r);break;default:rl(n,e,r)}}function TA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new O6),e.forEach(function(i){var o=V6.bind(null,n,i);r.has(i)||(r.add(i),i.then(o,o))})}}function Yo(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var s=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Jr=l.stateNode,rs=!1;break e;case 3:Jr=l.stateNode.containerInfo,rs=!0;break e;case 4:Jr=l.stateNode.containerInfo,rs=!0;break e}l=l.return}if(Jr===null)throw Error(tt(160));FF(s,a,o),Jr=null,rs=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){lr(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)UF(e,n),e=e.sibling}function UF(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Yo(e,n),As(n),i&4){try{up(3,n,n.return),Qy(3,n)}catch(y){lr(n,n.return,y)}try{up(5,n,n.return)}catch(y){lr(n,n.return,y)}}break;case 1:Yo(e,n),As(n),i&512&&r!==null&&gd(r,r.return);break;case 5:if(Yo(e,n),As(n),i&512&&r!==null&&gd(r,r.return),n.flags&32){var o=n.stateNode;try{Rp(o,"")}catch(y){lr(n,n.return,y)}}if(i&4&&(o=n.stateNode,o!=null)){var s=n.memoizedProps,a=r!==null?r.memoizedProps:s,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&oL(o,s),N1(l,a);var u=N1(l,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?uL(o,f):d==="dangerouslySetInnerHTML"?lL(o,f):d==="children"?Rp(o,f):fC(o,d,f,u)}switch(l){case"input":C1(o,s);break;case"textarea":sL(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Rd(o,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Rd(o,!!s.multiple,s.defaultValue,!0):Rd(o,!!s.multiple,s.multiple?[]:"",!1))}o[Up]=s}catch(y){lr(n,n.return,y)}}break;case 6:if(Yo(e,n),As(n),i&4){if(n.stateNode===null)throw Error(tt(162));o=n.stateNode,s=n.memoizedProps;try{o.nodeValue=s}catch(y){lr(n,n.return,y)}}break;case 3:if(Yo(e,n),As(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Op(e.containerInfo)}catch(y){lr(n,n.return,y)}break;case 4:Yo(e,n),As(n);break;case 13:Yo(e,n),As(n),o=n.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(jC=fr())),i&4&&TA(n);break;case 22:if(d=r!==null&&r.memoizedState!==null,n.mode&1?(di=(u=di)||d,Yo(e,n),di=u):Yo(e,n),As(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(St=n,d=n.child;d!==null;){for(f=St=d;St!==null;){switch(h=St,p=h.child,h.tag){case 0:case 11:case 14:case 15:up(4,h,h.return);break;case 1:gd(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,r=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){lr(i,r,y)}}break;case 5:gd(h,h.return);break;case 22:if(h.memoizedState!==null){RA(f);continue}}p!==null?(p.return=h,St=p):RA(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{o=f.stateNode,u?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=cL("display",a))}catch(y){lr(n,n.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){lr(n,n.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Yo(e,n),As(n),i&4&&TA(n);break;case 21:break;default:Yo(e,n),As(n)}}function As(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(LF(r)){var i=r;break e}r=r.return}throw Error(tt(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Rp(o,""),i.flags&=-33);var s=CA(n);sw(n,s,o);break;case 3:case 4:var a=i.stateNode.containerInfo,l=CA(n);ow(n,l,a);break;default:throw Error(tt(161))}}catch(c){lr(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function D6(n,e,r){St=n,BF(n)}function BF(n,e,r){for(var i=(n.mode&1)!==0;St!==null;){var o=St,s=o.child;if(o.tag===22&&i){var a=o.memoizedState!==null||Ag;if(!a){var l=o.alternate,c=l!==null&&l.memoizedState!==null||di;l=Ag;var u=di;if(Ag=a,(di=c)&&!u)for(St=o;St!==null;)a=St,c=a.child,a.tag===22&&a.memoizedState!==null?AA(o):c!==null?(c.return=a,St=c):AA(o);for(;s!==null;)St=s,BF(s),s=s.sibling;St=o,Ag=l,di=u}MA(n)}else o.subtreeFlags&8772&&s!==null?(s.return=o,St=s):MA(n)}}function MA(n){for(;St!==null;){var e=St;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:di||Qy(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!di)if(r===null)i.componentDidMount();else{var o=e.elementType===e.type?r.memoizedProps:ns(e.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&dA(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}dA(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Op(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}di||e.flags&512&&iw(e)}catch(h){lr(e,e.return,h)}}if(e===n){St=null;break}if(r=e.sibling,r!==null){r.return=e.return,St=r;break}St=e.return}}function RA(n){for(;St!==null;){var e=St;if(e===n){St=null;break}var r=e.sibling;if(r!==null){r.return=e.return,St=r;break}St=e.return}}function AA(n){for(;St!==null;){var e=St;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Qy(4,e)}catch(c){lr(e,r,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(c){lr(e,o,c)}}var s=e.return;try{iw(e)}catch(c){lr(e,s,c)}break;case 5:var a=e.return;try{iw(e)}catch(c){lr(e,a,c)}}}catch(c){lr(e,e.return,c)}if(e===n){St=null;break}var l=e.sibling;if(l!==null){l.return=e.return,St=l;break}St=e.return}}var L6=Math.ceil,k0=Xa.ReactCurrentDispatcher,GC=Xa.ReactCurrentOwner,$o=Xa.ReactCurrentBatchConfig,gn=0,Kr=null,wr=null,ni=0,fo=0,vd=ec(0),Fr=0,Gp=null,tu=0,Zy=0,HC=0,dp=null,Ui=null,jC=0,Yd=1/0,pa=null,V0=!1,aw=null,Bl=null,Ng=!1,Al=null,G0=0,fp=0,lw=null,Qv=-1,Zv=0;function Ti(){return gn&6?fr():Qv!==-1?Qv:Qv=fr()}function $l(n){return n.mode&1?gn&2&&ni!==0?ni&-ni:y6.transition!==null?(Zv===0&&(Zv=SL()),Zv):(n=Nn,n!==0||(n=window.event,n=n===void 0?16:AL(n.type)),n):1}function vs(n,e,r,i){if(50<fp)throw fp=0,lw=null,Error(tt(185));Lm(n,r,i),(!(gn&2)||n!==Kr)&&(n===Kr&&(!(gn&2)&&(Zy|=r),Fr===4&&El(n,ni)),Ki(n,i),r===1&&gn===0&&!(e.mode&1)&&(Yd=fr()+500,Xy&&tc()))}function Ki(n,e){var r=n.callbackNode;yV(n,e);var i=T0(n,n===Kr?ni:0);if(i===0)r!==null&&BR(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&BR(r),e===1)n.tag===0?v6(NA.bind(null,n)):XL(NA.bind(null,n)),h6(function(){!(gn&6)&&tc()}),r=null;else{switch(wL(i)){case 1:r=vC;break;case 4:r=xL;break;case 16:r=C0;break;case 536870912:r=bL;break;default:r=C0}r=WF(r,$F.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function $F(n,e){if(Qv=-1,Zv=0,gn&6)throw Error(tt(327));var r=n.callbackNode;if(Id()&&n.callbackNode!==r)return null;var i=T0(n,n===Kr?ni:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=H0(n,i);else{e=i;var o=gn;gn|=2;var s=kF();(Kr!==n||ni!==e)&&(pa=null,Yd=fr()+500,Gc(n,e));do try{B6();break}catch(l){zF(n,l)}while(!0);NC(),k0.current=s,gn=o,wr!==null?e=0:(Kr=null,ni=0,e=Fr)}if(e!==0){if(e===2&&(o=L1(n),o!==0&&(i=o,e=cw(n,o))),e===1)throw r=Gp,Gc(n,0),El(n,i),Ki(n,fr()),r;if(e===6)El(n,i);else{if(o=n.current.alternate,!(i&30)&&!F6(o)&&(e=H0(n,i),e===2&&(s=L1(n),s!==0&&(i=s,e=cw(n,s))),e===1))throw r=Gp,Gc(n,0),El(n,i),Ki(n,fr()),r;switch(n.finishedWork=o,n.finishedLanes=i,e){case 0:case 1:throw Error(tt(345));case 2:wc(n,Ui,pa);break;case 3:if(El(n,i),(i&130023424)===i&&(e=jC+500-fr(),10<e)){if(T0(n,0)!==0)break;if(o=n.suspendedLanes,(o&i)!==i){Ti(),n.pingedLanes|=n.suspendedLanes&o;break}n.timeoutHandle=G1(wc.bind(null,n,Ui,pa),e);break}wc(n,Ui,pa);break;case 4:if(El(n,i),(i&4194240)===i)break;for(e=n.eventTimes,o=-1;0<i;){var a=31-gs(i);s=1<<a,a=e[a],a>o&&(o=a),i&=~s}if(i=o,i=fr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*L6(i/1960))-i,10<i){n.timeoutHandle=G1(wc.bind(null,n,Ui,pa),i);break}wc(n,Ui,pa);break;case 5:wc(n,Ui,pa);break;default:throw Error(tt(329))}}}return Ki(n,fr()),n.callbackNode===r?$F.bind(null,n):null}function cw(n,e){var r=dp;return n.current.memoizedState.isDehydrated&&(Gc(n,e).flags|=256),n=H0(n,e),n!==2&&(e=Ui,Ui=r,e!==null&&uw(e)),n}function uw(n){Ui===null?Ui=n:Ui.push.apply(Ui,n)}function F6(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],s=o.getSnapshot;o=o.value;try{if(!bs(s(),o))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function El(n,e){for(e&=~HC,e&=~Zy,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-gs(e),i=1<<r;n[r]=-1,e&=~i}}function NA(n){if(gn&6)throw Error(tt(327));Id();var e=T0(n,0);if(!(e&1))return Ki(n,fr()),null;var r=H0(n,e);if(n.tag!==0&&r===2){var i=L1(n);i!==0&&(e=i,r=cw(n,i))}if(r===1)throw r=Gp,Gc(n,0),El(n,e),Ki(n,fr()),r;if(r===6)throw Error(tt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,wc(n,Ui,pa),Ki(n,fr()),null}function WC(n,e){var r=gn;gn|=1;try{return n(e)}finally{gn=r,gn===0&&(Yd=fr()+500,Xy&&tc())}}function nu(n){Al!==null&&Al.tag===0&&!(gn&6)&&Id();var e=gn;gn|=1;var r=$o.transition,i=Nn;try{if($o.transition=null,Nn=1,n)return n()}finally{Nn=i,$o.transition=r,gn=e,!(gn&6)&&tc()}}function qC(){fo=vd.current,qn(vd)}function Gc(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,f6(r)),wr!==null)for(r=wr.return;r!==null;){var i=r;switch(MC(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&P0();break;case 3:Xd(),qn(qi),qn(hi),FC();break;case 5:LC(i);break;case 4:Xd();break;case 13:qn(nr);break;case 19:qn(nr);break;case 10:PC(i.type._context);break;case 22:case 23:qC()}r=r.return}if(Kr=n,wr=n=zl(n.current,null),ni=fo=e,Fr=0,Gp=null,HC=Zy=tu=0,Ui=dp=null,Bc!==null){for(e=0;e<Bc.length;e++)if(r=Bc[e],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,s=r.pending;if(s!==null){var a=s.next;s.next=o,i.next=a}r.pending=i}Bc=null}return n}function zF(n,e){do{var r=wr;try{if(NC(),Xv.current=z0,$0){for(var i=or.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}$0=!1}if(eu=0,qr=Dr=or=null,cp=!1,zp=0,GC.current=null,r===null||r.return===null){Fr=1,Gp=e,wr=null;break}e:{var s=n,a=r.return,l=r,c=e;if(e=ni,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vA(a);if(p!==null){p.flags&=-257,yA(p,a,l,s,e),p.mode&1&&gA(s,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(c),e.updateQueue=y}else g.add(c);break e}else{if(!(e&1)){gA(s,u,e),XC();break e}c=Error(tt(426))}}else if(Jn&&l.mode&1){var v=vA(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),yA(v,a,l,s,e),RC(Kd(c,l));break e}}s=c=Kd(c,l),Fr!==4&&(Fr=2),dp===null?dp=[s]:dp.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=wF(s,c,e);uA(s,m);break e;case 1:l=c;var _=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Bl===null||!Bl.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=EF(s,l,e);uA(s,S);break e}}s=s.return}while(s!==null)}GF(r)}catch(w){e=w,wr===r&&r!==null&&(wr=r=r.return);continue}break}while(!0)}function kF(){var n=k0.current;return k0.current=z0,n===null?z0:n}function XC(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Kr===null||!(tu&268435455)&&!(Zy&268435455)||El(Kr,ni)}function H0(n,e){var r=gn;gn|=2;var i=kF();(Kr!==n||ni!==e)&&(pa=null,Gc(n,e));do try{U6();break}catch(o){zF(n,o)}while(!0);if(NC(),gn=r,k0.current=i,wr!==null)throw Error(tt(261));return Kr=null,ni=0,Fr}function U6(){for(;wr!==null;)VF(wr)}function B6(){for(;wr!==null&&!cV();)VF(wr)}function VF(n){var e=jF(n.alternate,n,fo);n.memoizedProps=n.pendingProps,e===null?GF(n):wr=e,GC.current=null}function GF(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=P6(r,e),r!==null){r.flags&=32767,wr=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Fr=6,wr=null;return}}else if(r=N6(r,e,fo),r!==null){wr=r;return}if(e=e.sibling,e!==null){wr=e;return}wr=e=n}while(e!==null);Fr===0&&(Fr=5)}function wc(n,e,r){var i=Nn,o=$o.transition;try{$o.transition=null,Nn=1,$6(n,e,r,i)}finally{$o.transition=o,Nn=i}return null}function $6(n,e,r,i){do Id();while(Al!==null);if(gn&6)throw Error(tt(327));r=n.finishedWork;var o=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(tt(177));n.callbackNode=null,n.callbackPriority=0;var s=r.lanes|r.childLanes;if(_V(n,s),n===Kr&&(wr=Kr=null,ni=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ng||(Ng=!0,WF(C0,function(){return Id(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=$o.transition,$o.transition=null;var a=Nn;Nn=1;var l=gn;gn|=4,GC.current=null,I6(n,r),UF(r,n),o6(k1),M0=!!z1,k1=z1=null,n.current=r,D6(r),uV(),gn=l,Nn=a,$o.transition=s}else n.current=r;if(Ng&&(Ng=!1,Al=n,G0=o),s=n.pendingLanes,s===0&&(Bl=null),hV(r.stateNode),Ki(n,fr()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)o=e[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(V0)throw V0=!1,n=aw,aw=null,n;return G0&1&&n.tag!==0&&Id(),s=n.pendingLanes,s&1?n===lw?fp++:(fp=0,lw=n):fp=0,tc(),null}function Id(){if(Al!==null){var n=wL(G0),e=$o.transition,r=Nn;try{if($o.transition=null,Nn=16>n?16:n,Al===null)var i=!1;else{if(n=Al,Al=null,G0=0,gn&6)throw Error(tt(331));var o=gn;for(gn|=4,St=n.current;St!==null;){var s=St,a=s.child;if(St.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(St=u;St!==null;){var d=St;switch(d.tag){case 0:case 11:case 15:up(8,d,s)}var f=d.child;if(f!==null)f.return=d,St=f;else for(;St!==null;){d=St;var h=d.sibling,p=d.return;if(DF(d),d===u){St=null;break}if(h!==null){h.return=p,St=h;break}St=p}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}St=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,St=a;else e:for(;St!==null;){if(s=St,s.flags&2048)switch(s.tag){case 0:case 11:case 15:up(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,St=m;break e}St=s.return}}var _=n.current;for(St=_;St!==null;){a=St;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,St=x;else e:for(a=_;St!==null;){if(l=St,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Qy(9,l)}}catch(w){lr(l,l.return,w)}if(l===a){St=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,St=S;break e}St=l.return}}if(gn=o,tc(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(Gy,n)}catch{}i=!0}return i}finally{Nn=r,$o.transition=e}}return!1}function PA(n,e,r){e=Kd(r,e),e=wF(n,e,1),n=Ul(n,e,1),e=Ti(),n!==null&&(Lm(n,1,e),Ki(n,e))}function lr(n,e,r){if(n.tag===3)PA(n,n,r);else for(;e!==null;){if(e.tag===3){PA(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Bl===null||!Bl.has(i))){n=Kd(r,n),n=EF(e,n,1),e=Ul(e,n,1),n=Ti(),e!==null&&(Lm(e,1,n),Ki(e,n));break}}e=e.return}}function z6(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=Ti(),n.pingedLanes|=n.suspendedLanes&r,Kr===n&&(ni&r)===r&&(Fr===4||Fr===3&&(ni&130023424)===ni&&500>fr()-jC?Gc(n,0):HC|=r),Ki(n,e)}function HF(n,e){e===0&&(n.mode&1?(e=xg,xg<<=1,!(xg&130023424)&&(xg=4194304)):e=1);var r=Ti();n=Ba(n,e),n!==null&&(Lm(n,e,r),Ki(n,r))}function k6(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),HF(n,r)}function V6(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,o=n.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(tt(314))}i!==null&&i.delete(e),HF(n,r)}var jF;jF=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||qi.current)zi=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return zi=!1,A6(n,e,r);zi=!!(n.flags&131072)}else zi=!1,Jn&&e.flags&1048576&&KL(e,D0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Yv(n,e),n=e.pendingProps;var o=jd(e,hi.current);Od(e,r),o=BC(null,e,i,n,o,r);var s=$C();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xi(i)?(s=!0,O0(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,IC(e),o.updater=Yy,e.stateNode=o,o._reactInternals=e,Y1(e,i,n,r),e=J1(null,e,i,!0,s,r)):(e.tag=0,Jn&&s&&TC(e),bi(null,e,o,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Yv(n,e),n=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=H6(i),n=ns(i,n),o){case 0:e=Z1(null,e,i,n,r);break e;case 1:e=bA(null,e,i,n,r);break e;case 11:e=_A(null,e,i,n,r);break e;case 14:e=xA(null,e,i,ns(i.type,n),r);break e}throw Error(tt(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:ns(i,o),Z1(n,e,i,o,r);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:ns(i,o),bA(n,e,i,o,r);case 3:e:{if(RF(e),n===null)throw Error(tt(387));i=e.pendingProps,s=e.memoizedState,o=s.element,tF(n,e),U0(e,i,null,r);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Kd(Error(tt(423)),e),e=SA(n,e,i,r,o);break e}else if(i!==o){o=Kd(Error(tt(424)),e),e=SA(n,e,i,r,o);break e}else for(go=Fl(e.stateNode.containerInfo.firstChild),yo=e,Jn=!0,as=null,r=JL(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wd(),i===o){e=$a(n,e,r);break e}bi(n,e,i,r)}e=e.child}return e;case 5:return nF(e),n===null&&q1(e),i=e.type,o=e.pendingProps,s=n!==null?n.memoizedProps:null,a=o.children,V1(i,o)?a=null:s!==null&&V1(i,s)&&(e.flags|=32),MF(n,e),bi(n,e,a,r),e.child;case 6:return n===null&&q1(e),null;case 13:return AF(n,e,r);case 4:return DC(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=qd(e,null,i,r):bi(n,e,i,r),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:ns(i,o),_A(n,e,i,o,r);case 7:return bi(n,e,e.pendingProps,r),e.child;case 8:return bi(n,e,e.pendingProps.children,r),e.child;case 12:return bi(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,s=e.memoizedProps,a=o.value,zn(L0,i._currentValue),i._currentValue=a,s!==null)if(bs(s.value,a)){if(s.children===o.children&&!qi.current){e=$a(n,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Aa(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),X1(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(tt(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),X1(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}bi(n,e,o.children,r),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,Od(e,r),o=Go(o),i=i(o),e.flags|=1,bi(n,e,i,r),e.child;case 14:return i=e.type,o=ns(i,e.pendingProps),o=ns(i.type,o),xA(n,e,i,o,r);case 15:return CF(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:ns(i,o),Yv(n,e),e.tag=1,Xi(i)?(n=!0,O0(e)):n=!1,Od(e,r),SF(e,i,o),Y1(e,i,o,r),J1(null,e,i,!0,n,r);case 19:return NF(n,e,r);case 22:return TF(n,e,r)}throw Error(tt(156,e.tag))};function WF(n,e){return _L(n,e)}function G6(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uo(n,e,r,i){return new G6(n,e,r,i)}function KC(n){return n=n.prototype,!(!n||!n.isReactComponent)}function H6(n){if(typeof n=="function")return KC(n)?1:0;if(n!=null){if(n=n.$$typeof,n===pC)return 11;if(n===mC)return 14}return 2}function zl(n,e){var r=n.alternate;return r===null?(r=Uo(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function Jv(n,e,r,i,o,s){var a=2;if(i=n,typeof n=="function")KC(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case ad:return Hc(r.children,o,s,e);case hC:a=8,o|=8;break;case x1:return n=Uo(12,r,e,o|2),n.elementType=x1,n.lanes=s,n;case b1:return n=Uo(13,r,e,o),n.elementType=b1,n.lanes=s,n;case S1:return n=Uo(19,r,e,o),n.elementType=S1,n.lanes=s,n;case nL:return Jy(r,o,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case eL:a=10;break e;case tL:a=9;break e;case pC:a=11;break e;case mC:a=14;break e;case _l:a=16,i=null;break e}throw Error(tt(130,n==null?n:typeof n,""))}return e=Uo(a,r,e,o),e.elementType=n,e.type=i,e.lanes=s,e}function Hc(n,e,r,i){return n=Uo(7,n,i,e),n.lanes=r,n}function Jy(n,e,r,i){return n=Uo(22,n,i,e),n.elementType=nL,n.lanes=r,n.stateNode={isHidden:!1},n}function Xx(n,e,r){return n=Uo(6,n,null,e),n.lanes=r,n}function Kx(n,e,r){return e=Uo(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function j6(n,e,r,i,o){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ax(0),this.expirationTimes=Ax(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ax(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function YC(n,e,r,i,o,s,a,l,c){return n=new j6(n,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Uo(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},IC(s),n}function W6(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sd,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function qF(n){if(!n)return ql;n=n._reactInternals;e:{if(_u(n)!==n||n.tag!==1)throw Error(tt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(tt(171))}if(n.tag===1){var r=n.type;if(Xi(r))return qL(n,r,e)}return e}function XF(n,e,r,i,o,s,a,l,c){return n=YC(r,i,!0,n,o,s,a,l,c),n.context=qF(null),r=n.current,i=Ti(),o=$l(r),s=Aa(i,o),s.callback=e??null,Ul(r,s,o),n.current.lanes=o,Lm(n,o,i),Ki(n,i),n}function e_(n,e,r,i){var o=e.current,s=Ti(),a=$l(o);return r=qF(r),e.context===null?e.context=r:e.pendingContext=r,e=Aa(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ul(o,e,a),n!==null&&(vs(n,o,a,s),qv(n,o,a)),a}function j0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function OA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function QC(n,e){OA(n,e),(n=n.alternate)&&OA(n,e)}function q6(){return null}var KF=typeof reportError=="function"?reportError:function(n){console.error(n)};function ZC(n){this._internalRoot=n}t_.prototype.render=ZC.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(tt(409));e_(n,e,null,null)};t_.prototype.unmount=ZC.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;nu(function(){e_(null,n,null,null)}),e[Ua]=null}};function t_(n){this._internalRoot=n}t_.prototype.unstable_scheduleHydration=function(n){if(n){var e=TL();n={blockedOn:null,target:n,priority:e};for(var r=0;r<wl.length&&e!==0&&e<wl[r].priority;r++);wl.splice(r,0,n),r===0&&RL(n)}};function JC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function n_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function IA(){}function X6(n,e,r,i,o){if(o){if(typeof i=="function"){var s=i;i=function(){var u=j0(a);s.call(u)}}var a=XF(e,i,n,0,null,!1,!1,"",IA);return n._reactRootContainer=a,n[Ua]=a.current,Lp(n.nodeType===8?n.parentNode:n),nu(),a}for(;o=n.lastChild;)n.removeChild(o);if(typeof i=="function"){var l=i;i=function(){var u=j0(c);l.call(u)}}var c=YC(n,0,!1,null,null,!1,!1,"",IA);return n._reactRootContainer=c,n[Ua]=c.current,Lp(n.nodeType===8?n.parentNode:n),nu(function(){e_(e,c,r,i)}),c}function r_(n,e,r,i,o){var s=r._reactRootContainer;if(s){var a=s;if(typeof o=="function"){var l=o;o=function(){var c=j0(a);l.call(c)}}e_(e,a,n,o)}else a=X6(r,e,n,o,i);return j0(a)}EL=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=qh(e.pendingLanes);r!==0&&(yC(e,r|1),Ki(e,fr()),!(gn&6)&&(Yd=fr()+500,tc()))}break;case 13:nu(function(){var i=Ba(n,1);if(i!==null){var o=Ti();vs(i,n,1,o)}}),QC(n,1)}};_C=function(n){if(n.tag===13){var e=Ba(n,134217728);if(e!==null){var r=Ti();vs(e,n,134217728,r)}QC(n,134217728)}};CL=function(n){if(n.tag===13){var e=$l(n),r=Ba(n,e);if(r!==null){var i=Ti();vs(r,n,e,i)}QC(n,e)}};TL=function(){return Nn};ML=function(n,e){var r=Nn;try{return Nn=n,e()}finally{Nn=r}};O1=function(n,e,r){switch(e){case"input":if(C1(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var o=qy(i);if(!o)throw Error(tt(90));iL(i),C1(i,o)}}}break;case"textarea":sL(n,r);break;case"select":e=r.value,e!=null&&Rd(n,!!r.multiple,e,!1)}};hL=WC;pL=nu;var K6={usingClientEntryPoint:!1,Events:[Um,dd,qy,dL,fL,WC]},dh={findFiberByHostInstance:Uc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y6={bundleType:dh.bundleType,version:dh.version,rendererPackageName:dh.rendererPackageName,rendererConfig:dh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xa.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=vL(n),n===null?null:n.stateNode},findFiberByHostInstance:dh.findFiberByHostInstance||q6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pg.isDisabled&&Pg.supportsFiber)try{Gy=Pg.inject(Y6),Vs=Pg}catch{}}So.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K6;So.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!JC(e))throw Error(tt(200));return W6(n,e,null,r)};So.createRoot=function(n,e){if(!JC(n))throw Error(tt(299));var r=!1,i="",o=KF;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=YC(n,1,!1,null,null,r,!1,i,o),n[Ua]=e.current,Lp(n.nodeType===8?n.parentNode:n),new ZC(e)};So.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(tt(188)):(n=Object.keys(n).join(","),Error(tt(268,n)));return n=vL(e),n=n===null?null:n.stateNode,n};So.flushSync=function(n){return nu(n)};So.hydrate=function(n,e,r){if(!n_(e))throw Error(tt(200));return r_(null,n,e,!0,r)};So.hydrateRoot=function(n,e,r){if(!JC(n))throw Error(tt(405));var i=r!=null&&r.hydratedSources||null,o=!1,s="",a=KF;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=XF(e,null,n,1,r??null,o,!1,s,a),n[Ua]=e.current,Lp(n),i)for(n=0;n<i.length;n++)r=i[n],o=r._getVersion,o=o(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,o]:e.mutableSourceEagerHydrationData.push(r,o);return new t_(e)};So.render=function(n,e,r){if(!n_(e))throw Error(tt(200));return r_(null,n,e,!1,r)};So.unmountComponentAtNode=function(n){if(!n_(n))throw Error(tt(40));return n._reactRootContainer?(nu(function(){r_(null,null,n,!1,function(){n._reactRootContainer=null,n[Ua]=null})}),!0):!1};So.unstable_batchedUpdates=WC;So.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!n_(r))throw Error(tt(200));if(n==null||n._reactInternals===void 0)throw Error(tt(38));return r_(n,e,r,!1,i)};So.version="18.3.1-next-f1338f8080-20240426";function YF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YF)}catch(n){console.error(n)}}YF(),YD.exports=So;var ru=YD.exports;const dw=vu(ru),Q6=BD({__proto__:null,default:dw},[ru]);var QF,DA=ru;QF=DA.createRoot,DA.hydrateRoot;var ZF={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function r(){for(var s="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(s=o(s,i(l)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return r.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var l in s)e.call(s,l)&&s[l]&&(a=o(a,l));return a}function o(s,a){return a?s?s+" "+a:s+a:s}n.exports?(r.default=r,n.exports=r):window.classNames=r})()})(ZF);var Z6=ZF.exports;const we=vu(Z6);function pt(){return pt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},pt.apply(null,arguments)}function Ot(n){"@babel/helpers - typeof";return Ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(n)}var J6=Symbol.for("react.element"),eG=Symbol.for("react.transitional.element"),tG=Symbol.for("react.fragment");function JF(n){return n&&Ot(n)==="object"&&(n.$$typeof===J6||n.$$typeof===eG)&&n.type===tG}function iu(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return de.Children.forEach(n,function(i){i==null&&!e.keepEmpty||(Array.isArray(i)?r=r.concat(iu(i)):JF(i)&&i.props?r=r.concat(iu(i.props.children,e)):r.push(i))}),r}var fw={},nG=function(e){};function rG(n,e){}function iG(n,e){}function oG(){fw={}}function e3(n,e,r){!e&&!fw[r]&&(n(!1,r),fw[r]=!0)}function Yi(n,e){e3(rG,n,e)}function sG(n,e){e3(iG,n,e)}Yi.preMessage=nG;Yi.resetWarned=oG;Yi.noteOnce=sG;function aG(n,e){if(Ot(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(Ot(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function t3(n){var e=aG(n,"string");return Ot(e)=="symbol"?e:e+""}function ee(n,e,r){return(e=t3(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function LA(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function re(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LA(Object(r),!0).forEach(function(i){ee(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):LA(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Hp(n){return n instanceof HTMLElement||n instanceof SVGElement}function lG(n){return n&&Ot(n)==="object"&&Hp(n.nativeElement)?n.nativeElement:Hp(n)?n:null}function hp(n){var e=lG(n);if(e)return e;if(n instanceof de.Component){var r;return(r=dw.findDOMNode)===null||r===void 0?void 0:r.call(dw,n)}return null}var n3={exports:{}},On={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT=Symbol.for("react.element"),tT=Symbol.for("react.portal"),i_=Symbol.for("react.fragment"),o_=Symbol.for("react.strict_mode"),s_=Symbol.for("react.profiler"),a_=Symbol.for("react.provider"),l_=Symbol.for("react.context"),cG=Symbol.for("react.server_context"),c_=Symbol.for("react.forward_ref"),u_=Symbol.for("react.suspense"),d_=Symbol.for("react.suspense_list"),f_=Symbol.for("react.memo"),h_=Symbol.for("react.lazy"),uG=Symbol.for("react.offscreen"),r3;r3=Symbol.for("react.module.reference");function Xo(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case eT:switch(n=n.type,n){case i_:case s_:case o_:case u_:case d_:return n;default:switch(n=n&&n.$$typeof,n){case cG:case l_:case c_:case h_:case f_:case a_:return n;default:return e}}case tT:return e}}}On.ContextConsumer=l_;On.ContextProvider=a_;On.Element=eT;On.ForwardRef=c_;On.Fragment=i_;On.Lazy=h_;On.Memo=f_;On.Portal=tT;On.Profiler=s_;On.StrictMode=o_;On.Suspense=u_;On.SuspenseList=d_;On.isAsyncMode=function(){return!1};On.isConcurrentMode=function(){return!1};On.isContextConsumer=function(n){return Xo(n)===l_};On.isContextProvider=function(n){return Xo(n)===a_};On.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===eT};On.isForwardRef=function(n){return Xo(n)===c_};On.isFragment=function(n){return Xo(n)===i_};On.isLazy=function(n){return Xo(n)===h_};On.isMemo=function(n){return Xo(n)===f_};On.isPortal=function(n){return Xo(n)===tT};On.isProfiler=function(n){return Xo(n)===s_};On.isStrictMode=function(n){return Xo(n)===o_};On.isSuspense=function(n){return Xo(n)===u_};On.isSuspenseList=function(n){return Xo(n)===d_};On.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===i_||n===s_||n===o_||n===u_||n===d_||n===uG||typeof n=="object"&&n!==null&&(n.$$typeof===h_||n.$$typeof===f_||n.$$typeof===a_||n.$$typeof===l_||n.$$typeof===c_||n.$$typeof===r3||n.getModuleId!==void 0)};On.typeOf=Xo;n3.exports=On;var Yx=n3.exports;function p_(n,e,r){var i=b.useRef({});return(!("value"in i.current)||r(i.current.condition,e))&&(i.current.value=n(),i.current.condition=e),i.current.value}var nT=function(e,r){typeof e=="function"?e(r):Ot(e)==="object"&&e&&"current"in e&&(e.current=r)},Js=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=r.filter(Boolean);return o.length<=1?o[0]:function(s){r.forEach(function(a){nT(a,s)})}},Uf=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return p_(function(){return Js.apply(void 0,r)},r,function(o,s){return o.length!==s.length||o.every(function(a,l){return a!==s[l]})})},$m=function(e){var r,i;if(!e)return!1;if(i3(e)&&e.props.propertyIsEnumerable("ref"))return!0;var o=Yx.isMemo(e)?e.type.type:e.type;return!(typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render)&&o.$$typeof!==Yx.ForwardRef||typeof e=="function"&&!((i=e.prototype)!==null&&i!==void 0&&i.render)&&e.$$typeof!==Yx.ForwardRef)};function i3(n){return b.isValidElement(n)&&!JF(n)}var m_=function(e){if(e&&i3(e)){var r=e;return r.props.propertyIsEnumerable("ref")?r.props.ref:r.ref}return null},hw=b.createContext(null);function dG(n){var e=n.children,r=n.onBatchResize,i=b.useRef(0),o=b.useRef([]),s=b.useContext(hw),a=b.useCallback(function(l,c,u){i.current+=1;var d=i.current;o.current.push({size:l,element:c,data:u}),Promise.resolve().then(function(){d===i.current&&(r==null||r(o.current),o.current=[])}),s==null||s(l,c,u)},[r,s]);return b.createElement(hw.Provider,{value:a},e)}var o3=function(){if(typeof Map<"u")return Map;function n(e,r){var i=-1;return e.some(function(o,s){return o[0]===r?(i=s,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var i=n(this.__entries__,r),o=this.__entries__[i];return o&&o[1]},e.prototype.set=function(r,i){var o=n(this.__entries__,r);~o?this.__entries__[o][1]=i:this.__entries__.push([r,i])},e.prototype.delete=function(r){var i=this.__entries__,o=n(i,r);~o&&i.splice(o,1)},e.prototype.has=function(r){return!!~n(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,i){i===void 0&&(i=null);for(var o=0,s=this.__entries__;o<s.length;o++){var a=s[o];r.call(i,a[1],a[0])}},e}()}(),pw=typeof window<"u"&&typeof document<"u"&&window.document===document,W0=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),fG=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(W0):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),hG=2;function pG(n,e){var r=!1,i=!1,o=0;function s(){r&&(r=!1,n()),i&&l()}function a(){fG(s)}function l(){var c=Date.now();if(r){if(c-o<hG)return;i=!0}else r=!0,i=!1,setTimeout(a,e);o=c}return l}var mG=20,gG=["top","right","bottom","left","width","height","size","weight"],vG=typeof MutationObserver<"u",yG=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=pG(this.refresh.bind(this),mG)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var r=this.observers_,i=r.indexOf(e);~i&&r.splice(i,1),!r.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!pw||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),vG?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!pw||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var r=e.propertyName,i=r===void 0?"":r,o=gG.some(function(s){return!!~i.indexOf(s)});o&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),s3=function(n,e){for(var r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];Object.defineProperty(n,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return n},Qd=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||W0},a3=g_(0,0,0,0);function q0(n){return parseFloat(n)||0}function FA(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(i,o){var s=n["border-"+o+"-width"];return i+q0(s)},0)}function _G(n){for(var e=["top","right","bottom","left"],r={},i=0,o=e;i<o.length;i++){var s=o[i],a=n["padding-"+s];r[s]=q0(a)}return r}function xG(n){var e=n.getBBox();return g_(0,0,e.width,e.height)}function bG(n){var e=n.clientWidth,r=n.clientHeight;if(!e&&!r)return a3;var i=Qd(n).getComputedStyle(n),o=_G(i),s=o.left+o.right,a=o.top+o.bottom,l=q0(i.width),c=q0(i.height);if(i.boxSizing==="border-box"&&(Math.round(l+s)!==e&&(l-=FA(i,"left","right")+s),Math.round(c+a)!==r&&(c-=FA(i,"top","bottom")+a)),!wG(n)){var u=Math.round(l+s)-e,d=Math.round(c+a)-r;Math.abs(u)!==1&&(l-=u),Math.abs(d)!==1&&(c-=d)}return g_(o.left,o.top,l,c)}var SG=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof Qd(n).SVGGraphicsElement}:function(n){return n instanceof Qd(n).SVGElement&&typeof n.getBBox=="function"}}();function wG(n){return n===Qd(n).document.documentElement}function EG(n){return pw?SG(n)?xG(n):bG(n):a3}function CG(n){var e=n.x,r=n.y,i=n.width,o=n.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(s.prototype);return s3(a,{x:e,y:r,width:i,height:o,top:r,right:e+i,bottom:o+r,left:e}),a}function g_(n,e,r,i){return{x:n,y:e,width:r,height:i}}var TG=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g_(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=EG(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),MG=function(){function n(e,r){var i=CG(r);s3(this,{target:e,contentRect:i})}return n}(),RG=function(){function n(e,r,i){if(this.activeObservations_=[],this.observations_=new o3,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Qd(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)||(r.set(e,new TG(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Qd(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)&&(r.delete(e),r.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(i){return new MG(i.target,i.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),l3=typeof WeakMap<"u"?new WeakMap:new o3,c3=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=yG.getInstance(),i=new RG(e,r,this);l3.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){c3.prototype[n]=function(){var e;return(e=l3.get(this))[n].apply(e,arguments)}});var AG=function(){return typeof W0.ResizeObserver<"u"?W0.ResizeObserver:c3}(),Nl=new Map;function NG(n){n.forEach(function(e){var r,i=e.target;(r=Nl.get(i))===null||r===void 0||r.forEach(function(o){return o(i)})})}var u3=new AG(NG);function PG(n,e){Nl.has(n)||(Nl.set(n,new Set),u3.observe(n)),Nl.get(n).add(e)}function OG(n,e){Nl.has(n)&&(Nl.get(n).delete(e),Nl.get(n).size||(u3.unobserve(n),Nl.delete(n)))}function Gr(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function UA(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,t3(i.key),i)}}function Hr(n,e,r){return e&&UA(n.prototype,e),r&&UA(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}function Zd(n,e){return Zd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Zd(n,e)}function nc(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Zd(n,e)}function jp(n){return jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jp(n)}function rT(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rT=function(){return!!n})()}function nn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function IG(n,e){if(e&&(Ot(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nn(n)}function rc(n){var e=rT();return function(){var r,i=jp(n);if(e){var o=jp(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return IG(this,r)}}var DG=function(n){nc(r,n);var e=rc(r);function r(){return Gr(this,r),e.apply(this,arguments)}return Hr(r,[{key:"render",value:function(){return this.props.children}}]),r}(b.Component);function LG(n,e){var r=n.children,i=n.disabled,o=b.useRef(null),s=b.useRef(null),a=b.useContext(hw),l=typeof r=="function",c=l?r(o):r,u=b.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!l&&b.isValidElement(c)&&$m(c),f=d?m_(c):null,h=Uf(f,o),p=function(){var m;return hp(o.current)||(o.current&&Ot(o.current)==="object"?hp((m=o.current)===null||m===void 0?void 0:m.nativeElement):null)||hp(s.current)};b.useImperativeHandle(e,function(){return p()});var g=b.useRef(n);g.current=n;var y=b.useCallback(function(v){var m=g.current,_=m.onResize,x=m.data,S=v.getBoundingClientRect(),w=S.width,E=S.height,C=v.offsetWidth,T=v.offsetHeight,M=Math.floor(w),R=Math.floor(E);if(u.current.width!==M||u.current.height!==R||u.current.offsetWidth!==C||u.current.offsetHeight!==T){var P={width:M,height:R,offsetWidth:C,offsetHeight:T};u.current=P;var D=C===Math.round(w)?w:C,F=T===Math.round(E)?E:T,A=re(re({},P),{},{offsetWidth:D,offsetHeight:F});a==null||a(A,v,x),_&&Promise.resolve().then(function(){_(A,v)})}},[]);return b.useEffect(function(){var v=p();return v&&!i&&PG(v,y),function(){return OG(v,y)}},[o.current,i]),b.createElement(DG,{ref:s},d?b.cloneElement(c,{ref:h}):c)}var FG=b.forwardRef(LG),UG="rc-observer-key";function BG(n,e){var r=n.children,i=typeof r=="function"?[r]:iu(r);return i.map(function(o,s){var a=(o==null?void 0:o.key)||"".concat(UG,"-").concat(s);return b.createElement(FG,pt({},n,{key:a,ref:s===0?e:void 0}),o)})}var Ka=b.forwardRef(BG);Ka.Collection=dG;function ea(n,e){var r=Object.assign({},n);return Array.isArray(e)&&e.forEach(function(i){delete r[i]}),r}function mw(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function $G(n){if(Array.isArray(n))return mw(n)}function d3(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function iT(n,e){if(n){if(typeof n=="string")return mw(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mw(n,e):void 0}}function zG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ht(n){return $G(n)||d3(n)||iT(n)||zG()}var f3=function(e){return+setTimeout(e,16)},h3=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(f3=function(e){return window.requestAnimationFrame(e)},h3=function(e){return window.cancelAnimationFrame(e)});var BA=0,oT=new Map;function p3(n){oT.delete(n)}var pr=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;BA+=1;var i=BA;function o(s){if(s===0)p3(i),e();else{var a=f3(function(){o(s-1)});oT.set(i,a)}}return o(r),i};pr.cancel=function(n){var e=oT.get(n);return p3(n),h3(e)};function m3(n){if(Array.isArray(n))return n}function kG(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function g3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ce(n,e){return m3(n)||kG(n,e)||iT(n,e)||g3()}function Wp(n){for(var e=0,r,i=0,o=n.length;o>=4;++i,o-=4)r=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(o){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function pi(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function gw(n,e){if(!n)return!1;if(n.contains)return n.contains(e);for(var r=e;r;){if(r===n)return!0;r=r.parentNode}return!1}var $A="data-rc-order",zA="data-rc-priority",VG="rc-util-key",vw=new Map;function v3(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.mark;return e?e.startsWith("data-")?e:"data-".concat(e):VG}function v_(n){if(n.attachTo)return n.attachTo;var e=document.querySelector("head");return e||document.body}function GG(n){return n==="queue"?"prependQueue":n?"prepend":"append"}function sT(n){return Array.from((vw.get(n)||n).children).filter(function(e){return e.tagName==="STYLE"})}function y3(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!pi())return null;var r=e.csp,i=e.prepend,o=e.priority,s=o===void 0?0:o,a=GG(i),l=a==="prependQueue",c=document.createElement("style");c.setAttribute($A,a),l&&s&&c.setAttribute(zA,"".concat(s)),r!=null&&r.nonce&&(c.nonce=r==null?void 0:r.nonce),c.innerHTML=n;var u=v_(e),d=u.firstChild;if(i){if(l){var f=(e.styles||sT(u)).filter(function(h){if(!["prepend","prependQueue"].includes(h.getAttribute($A)))return!1;var p=Number(h.getAttribute(zA)||0);return s>=p});if(f.length)return u.insertBefore(c,f[f.length-1].nextSibling),c}u.insertBefore(c,d)}else u.appendChild(c);return c}function _3(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=v_(e);return(e.styles||sT(r)).find(function(i){return i.getAttribute(v3(e))===n})}function qp(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=_3(n,e);if(r){var i=v_(e);i.removeChild(r)}}function HG(n,e){var r=vw.get(n);if(!r||!gw(document,r)){var i=y3("",e),o=i.parentNode;vw.set(n,o),n.removeChild(i)}}function Na(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=v_(r),o=sT(i),s=re(re({},r),{},{styles:o});HG(i,s);var a=_3(e,s);if(a){var l,c;if((l=s.csp)!==null&&l!==void 0&&l.nonce&&a.nonce!==((c=s.csp)===null||c===void 0?void 0:c.nonce)){var u;a.nonce=(u=s.csp)===null||u===void 0?void 0:u.nonce}return a.innerHTML!==n&&(a.innerHTML=n),a}var d=y3(n,s);return d.setAttribute(v3(s),e),d}function jG(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function Pn(n,e){if(n==null)return{};var r,i,o=jG(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function yw(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=new Set;function o(s,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=i.has(s);if(Yi(!c,"Warning: There may be circular references"),c)return!1;if(s===a)return!0;if(r&&l>1)return!1;i.add(s);var u=l+1;if(Array.isArray(s)){if(!Array.isArray(a)||s.length!==a.length)return!1;for(var d=0;d<s.length;d++)if(!o(s[d],a[d],u))return!1;return!0}if(s&&a&&Ot(s)==="object"&&Ot(a)==="object"){var f=Object.keys(s);return f.length!==Object.keys(a).length?!1:f.every(function(h){return o(s[h],a[h],u)})}return!1}return o(n,e)}var WG="%";function _w(n){return n.join(WG)}var qG=function(){function n(e){Gr(this,n),ee(this,"instanceId",void 0),ee(this,"cache",new Map),this.instanceId=e}return Hr(n,[{key:"get",value:function(r){return this.opGet(_w(r))}},{key:"opGet",value:function(r){return this.cache.get(r)||null}},{key:"update",value:function(r,i){return this.opUpdate(_w(r),i)}},{key:"opUpdate",value:function(r,i){var o=this.cache.get(r),s=i(o);s===null?this.cache.delete(r):this.cache.set(r,s)}}]),n}(),Jd="data-token-hash",ys="data-css-hash",Pl="__cssinjs_instance__";function XG(){var n=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(ys,"]"))||[],r=document.head.firstChild;Array.from(e).forEach(function(o){o[Pl]=o[Pl]||n,o[Pl]===n&&document.head.insertBefore(o,r)});var i={};Array.from(document.querySelectorAll("style[".concat(ys,"]"))).forEach(function(o){var s=o.getAttribute(ys);if(i[s]){if(o[Pl]===n){var a;(a=o.parentNode)===null||a===void 0||a.removeChild(o)}}else i[s]=!0})}return new qG(n)}var y_=b.createContext({hashPriority:"low",cache:XG(),defaultCache:!0});function KG(n,e){if(n.length!==e.length)return!1;for(var r=0;r<n.length;r++)if(n[r]!==e[r])return!1;return!0}var aT=function(){function n(){Gr(this,n),ee(this,"cache",void 0),ee(this,"keys",void 0),ee(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Hr(n,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var i,o,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a={map:this.cache};return r.forEach(function(l){if(!a)a=void 0;else{var c;a=(c=a)===null||c===void 0||(c=c.map)===null||c===void 0?void 0:c.get(l)}}),(i=a)!==null&&i!==void 0&&i.value&&s&&(a.value[1]=this.cacheCallTimes++),(o=a)===null||o===void 0?void 0:o.value}},{key:"get",value:function(r){var i;return(i=this.internalGet(r,!0))===null||i===void 0?void 0:i[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,i){var o=this;if(!this.has(r)){if(this.size()+1>n.MAX_CACHE_SIZE+n.MAX_CACHE_OFFSET){var s=this.keys.reduce(function(u,d){var f=Ce(u,2),h=f[1];return o.internalGet(d)[1]<h?[d,o.internalGet(d)[1]]:u},[this.keys[0],this.cacheCallTimes]),a=Ce(s,1),l=a[0];this.delete(l)}this.keys.push(r)}var c=this.cache;r.forEach(function(u,d){if(d===r.length-1)c.set(u,{value:[i,o.cacheCallTimes++]});else{var f=c.get(u);f?f.map||(f.map=new Map):c.set(u,{map:new Map}),c=c.get(u).map}})}},{key:"deleteByPath",value:function(r,i){var o=r.get(i[0]);if(i.length===1){var s;return o.map?r.set(i[0],{map:o.map}):r.delete(i[0]),(s=o.value)===null||s===void 0?void 0:s[0]}var a=this.deleteByPath(o.map,i.slice(1));return(!o.map||o.map.size===0)&&!o.value&&r.delete(i[0]),a}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(i){return!KG(i,r)}),this.deleteByPath(this.cache,r)}}]),n}();ee(aT,"MAX_CACHE_SIZE",20);ee(aT,"MAX_CACHE_OFFSET",5);var kA=0,x3=function(){function n(e){Gr(this,n),ee(this,"derivatives",void 0),ee(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=kA,e.length===0&&(e.length>0,void 0),kA+=1}return Hr(n,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(i,o){return o(r,i)},void 0)}}]),n}(),Qx=new aT;function xw(n){var e=Array.isArray(n)?n:[n];return Qx.has(e)||Qx.set(e,new x3(e)),Qx.get(e)}var YG=new WeakMap,Zx={};function QG(n,e){for(var r=YG,i=0;i<e.length;i+=1){var o=e[i];r.has(o)||r.set(o,new WeakMap),r=r.get(o)}return r.has(Zx)||r.set(Zx,n()),r.get(Zx)}var VA=new WeakMap;function pp(n){var e=VA.get(n)||"";return e||(Object.keys(n).forEach(function(r){var i=n[r];e+=r,i instanceof x3?e+=i.id:i&&Ot(i)==="object"?e+=pp(i):e+=i}),e=Wp(e),VA.set(n,e)),e}function GA(n,e){return Wp("".concat(e,"_").concat(pp(n)))}var bw=pi();function De(n){return typeof n=="number"?"".concat(n,"px"):n}function X0(n,e,r){var i,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(s)return n;var a=re(re({},o),{},(i={},ee(i,Jd,e),ee(i,ys,r),i)),l=Object.keys(a).map(function(c){var u=a[c];return u?"".concat(c,'="').concat(u,'"'):null}).filter(function(c){return c}).join(" ");return"<style ".concat(l,">").concat(n,"</style>")}var e0=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(r?"".concat(r,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},ZG=function(e,r,i){return Object.keys(e).length?".".concat(r).concat(i!=null&&i.scope?".".concat(i.scope):"","{").concat(Object.entries(e).map(function(o){var s=Ce(o,2),a=s[0],l=s[1];return"".concat(a,":").concat(l,";")}).join(""),"}"):""},b3=function(e,r,i){var o={},s={};return Object.entries(e).forEach(function(a){var l,c,u=Ce(a,2),d=u[0],f=u[1];if(i!=null&&(l=i.preserve)!==null&&l!==void 0&&l[d])s[d]=f;else if((typeof f=="string"||typeof f=="number")&&!(i!=null&&(c=i.ignore)!==null&&c!==void 0&&c[d])){var h,p=e0(d,i==null?void 0:i.prefix);o[p]=typeof f=="number"&&!(i!=null&&(h=i.unitless)!==null&&h!==void 0&&h[d])?"".concat(f,"px"):String(f),s[d]="var(".concat(p,")")}}),[s,ZG(o,r,{scope:i==null?void 0:i.scope})]},HA=pi()?b.useLayoutEffect:b.useEffect,xn=function(e,r){var i=b.useRef(!0);HA(function(){return e(i.current)},r),HA(function(){return i.current=!1,function(){i.current=!0}},[])},jA=function(e,r){xn(function(i){if(!i)return e()},r)},JG=re({},Vy),WA=JG.useInsertionEffect,eH=function(e,r,i){b.useMemo(e,i),xn(function(){return r(!0)},i)},tH=WA?function(n,e,r){return WA(function(){return n(),e()},r)}:eH,nH=re({},Vy),rH=nH.useInsertionEffect,iH=function(e){var r=[],i=!1;function o(s){i||r.push(s)}return b.useEffect(function(){return i=!1,function(){i=!0,r.length&&r.forEach(function(s){return s()})}},e),o},oH=function(){return function(e){e()}},sH=typeof rH<"u"?iH:oH;function lT(n,e,r,i,o){var s=b.useContext(y_),a=s.cache,l=[n].concat(ht(e)),c=_w(l),u=sH([c]),d=function(g){a.opUpdate(c,function(y){var v=y||[void 0,void 0],m=Ce(v,2),_=m[0],x=_===void 0?0:_,S=m[1],w=S,E=w||r(),C=[x,E];return g?g(C):C})};b.useMemo(function(){d()},[c]);var f=a.opGet(c),h=f[1];return tH(function(){o==null||o(h)},function(p){return d(function(g){var y=Ce(g,2),v=y[0],m=y[1];return p&&v===0&&(o==null||o(h)),[v+1,m]}),function(){a.opUpdate(c,function(g){var y=g||[],v=Ce(y,2),m=v[0],_=m===void 0?0:m,x=v[1],S=_-1;return S===0?(u(function(){(p||!a.opGet(c))&&(i==null||i(x,!1))}),null):[_-1,x]})}},[c]),h}var aH={},lH="css",Ac=new Map;function cH(n){Ac.set(n,(Ac.get(n)||0)+1)}function uH(n,e){if(typeof document<"u"){var r=document.querySelectorAll("style[".concat(Jd,'="').concat(n,'"]'));r.forEach(function(i){if(i[Pl]===e){var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)}})}}var dH=0;function fH(n,e){Ac.set(n,(Ac.get(n)||0)-1);var r=Array.from(Ac.keys()),i=r.filter(function(o){var s=Ac.get(o)||0;return s<=0});r.length-i.length>dH&&i.forEach(function(o){uH(o,e),Ac.delete(o)})}var hH=function(e,r,i,o){var s=i.getDerivativeToken(e),a=re(re({},s),r);return o&&(a=o(a)),a},S3="token";function pH(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=b.useContext(y_),o=i.cache.instanceId,s=i.container,a=r.salt,l=a===void 0?"":a,c=r.override,u=c===void 0?aH:c,d=r.formatToken,f=r.getComputedToken,h=r.cssVar,p=QG(function(){return Object.assign.apply(Object,[{}].concat(ht(e)))},e),g=pp(p),y=pp(u),v=h?pp(h):"",m=lT(S3,[l,n.id,g,y,v],function(){var _,x=f?f(p,u,n):hH(p,u,n,d),S=re({},x),w="";if(h){var E=b3(x,h.key,{prefix:h.prefix,ignore:h.ignore,unitless:h.unitless,preserve:h.preserve}),C=Ce(E,2);x=C[0],w=C[1]}var T=GA(x,l);x._tokenKey=T,S._tokenKey=GA(S,l);var M=(_=h==null?void 0:h.key)!==null&&_!==void 0?_:T;x._themeKey=M,cH(M);var R="".concat(lH,"-").concat(Wp(T));return x._hashId=R,[x,R,S,w,(h==null?void 0:h.key)||""]},function(_){fH(_[0]._themeKey,o)},function(_){var x=Ce(_,4),S=x[0],w=x[3];if(h&&w){var E=Na(w,Wp("css-variables-".concat(S._themeKey)),{mark:ys,prepend:"queue",attachTo:s,priority:-999});E[Pl]=o,E.setAttribute(Jd,S._themeKey)}});return m}var mH=function(e,r,i){var o=Ce(e,5),s=o[2],a=o[3],l=o[4],c=i||{},u=c.plain;if(!a)return null;var d=s._tokenKey,f=-999,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(f)},p=X0(a,l,d,h,u);return[f,d,p]},gH={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},w3="comm",E3="rule",C3="decl",vH="@import",yH="@keyframes",_H="@layer",T3=Math.abs,cT=String.fromCharCode;function M3(n){return n.trim()}function t0(n,e,r){return n.replace(e,r)}function xH(n,e,r){return n.indexOf(e,r)}function Xp(n,e){return n.charCodeAt(e)|0}function ef(n,e,r){return n.slice(e,r)}function Ds(n){return n.length}function bH(n){return n.length}function Og(n,e){return e.push(n),n}var __=1,tf=1,R3=0,jo=0,xr=0,Bf="";function uT(n,e,r,i,o,s,a,l){return{value:n,root:e,parent:r,type:i,props:o,children:s,line:__,column:tf,length:a,return:"",siblings:l}}function SH(){return xr}function wH(){return xr=jo>0?Xp(Bf,--jo):0,tf--,xr===10&&(tf=1,__--),xr}function _s(){return xr=jo<R3?Xp(Bf,jo++):0,tf++,xr===10&&(tf=1,__++),xr}function Ol(){return Xp(Bf,jo)}function n0(){return jo}function x_(n,e){return ef(Bf,n,e)}function Kp(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function EH(n){return __=tf=1,R3=Ds(Bf=n),jo=0,[]}function CH(n){return Bf="",n}function Jx(n){return M3(x_(jo-1,Sw(n===91?n+2:n===40?n+1:n)))}function TH(n){for(;(xr=Ol())&&xr<33;)_s();return Kp(n)>2||Kp(xr)>3?"":" "}function MH(n,e){for(;--e&&_s()&&!(xr<48||xr>102||xr>57&&xr<65||xr>70&&xr<97););return x_(n,n0()+(e<6&&Ol()==32&&_s()==32))}function Sw(n){for(;_s();)switch(xr){case n:return jo;case 34:case 39:n!==34&&n!==39&&Sw(xr);break;case 40:n===41&&Sw(n);break;case 92:_s();break}return jo}function RH(n,e){for(;_s()&&n+xr!==57;)if(n+xr===84&&Ol()===47)break;return"/*"+x_(e,jo-1)+"*"+cT(n===47?n:_s())}function AH(n){for(;!Kp(Ol());)_s();return x_(n,jo)}function NH(n){return CH(r0("",null,null,null,[""],n=EH(n),0,[0],n))}function r0(n,e,r,i,o,s,a,l,c){for(var u=0,d=0,f=a,h=0,p=0,g=0,y=1,v=1,m=1,_=0,x="",S=o,w=s,E=i,C=x;v;)switch(g=_,_=_s()){case 40:if(g!=108&&Xp(C,f-1)==58){xH(C+=t0(Jx(_),"&","&\f"),"&\f",T3(u?l[u-1]:0))!=-1&&(m=-1);break}case 34:case 39:case 91:C+=Jx(_);break;case 9:case 10:case 13:case 32:C+=TH(g);break;case 92:C+=MH(n0()-1,7);continue;case 47:switch(Ol()){case 42:case 47:Og(PH(RH(_s(),n0()),e,r,c),c),(Kp(g||1)==5||Kp(Ol()||1)==5)&&Ds(C)&&ef(C,-1,void 0)!==" "&&(C+=" ");break;default:C+="/"}break;case 123*y:l[u++]=Ds(C)*m;case 125*y:case 59:case 0:switch(_){case 0:case 125:v=0;case 59+d:m==-1&&(C=t0(C,/\f/g,"")),p>0&&(Ds(C)-f||y===0&&g===47)&&Og(p>32?XA(C+";",i,r,f-1,c):XA(t0(C," ","")+";",i,r,f-2,c),c);break;case 59:C+=";";default:if(Og(E=qA(C,e,r,u,d,o,l,x,S=[],w=[],f,s),s),_===123)if(d===0)r0(C,e,E,E,S,s,f,l,w);else switch(h===99&&Xp(C,3)===110?100:h){case 100:case 108:case 109:case 115:r0(n,E,E,i&&Og(qA(n,E,E,0,0,o,l,x,o,S=[],f,w),w),o,w,f,l,i?S:w);break;default:r0(C,E,E,E,[""],w,0,l,w)}}u=d=p=0,y=m=1,x=C="",f=a;break;case 58:f=1+Ds(C),p=g;default:if(y<1){if(_==123)--y;else if(_==125&&y++==0&&wH()==125)continue}switch(C+=cT(_),_*y){case 38:m=d>0?1:(C+="\f",-1);break;case 44:l[u++]=(Ds(C)-1)*m,m=1;break;case 64:Ol()===45&&(C+=Jx(_s())),h=Ol(),d=f=Ds(x=C+=AH(n0())),_++;break;case 45:g===45&&Ds(C)==2&&(y=0)}}return s}function qA(n,e,r,i,o,s,a,l,c,u,d,f){for(var h=o-1,p=o===0?s:[""],g=bH(p),y=0,v=0,m=0;y<i;++y)for(var _=0,x=ef(n,h+1,h=T3(v=a[y])),S=n;_<g;++_)(S=M3(v>0?p[_]+" "+x:t0(x,/&\f/g,p[_])))&&(c[m++]=S);return uT(n,e,r,o===0?E3:l,c,u,d,f)}function PH(n,e,r,i){return uT(n,e,r,w3,cT(SH()),ef(n,2,-2),0,i)}function XA(n,e,r,i,o){return uT(n,e,r,C3,ef(n,0,i),ef(n,i+1,-1),i,o)}function ww(n,e){for(var r="",i=0;i<n.length;i++)r+=e(n[i],i,n,e)||"";return r}function OH(n,e,r,i){switch(n.type){case _H:if(n.children.length)break;case vH:case C3:return n.return=n.return||n.value;case w3:return"";case yH:return n.return=n.value+"{"+ww(n.children,i)+"}";case E3:if(!Ds(n.value=n.props.join(",")))return""}return Ds(r=ww(n.children,i))?n.return=n.value+"{"+r+"}":""}var KA="data-ant-cssinjs-cache-path",A3="_FILE_STYLE__",jc,N3=!0;function IH(){if(!jc&&(jc={},pi())){var n=document.createElement("div");n.className=KA,n.style.position="fixed",n.style.visibility="hidden",n.style.top="-9999px",document.body.appendChild(n);var e=getComputedStyle(n).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(o){var s=o.split(":"),a=Ce(s,2),l=a[0],c=a[1];jc[l]=c});var r=document.querySelector("style[".concat(KA,"]"));if(r){var i;N3=!1,(i=r.parentNode)===null||i===void 0||i.removeChild(r)}document.body.removeChild(n)}}function DH(n){return IH(),!!jc[n]}function LH(n){var e=jc[n],r=null;if(e&&pi())if(N3)r=A3;else{var i=document.querySelector("style[".concat(ys,'="').concat(jc[n],'"]'));i?r=i.innerHTML:delete jc[n]}return[r,e]}var FH="_skip_check_",P3="_multi_value_";function i0(n){var e=ww(NH(n),OH);return e.replace(/\{%%%\:[^;];}/g,";")}function UH(n){return Ot(n)==="object"&&n&&(FH in n||P3 in n)}function YA(n,e,r){if(!e)return n;var i=".".concat(e),o=r==="low"?":where(".concat(i,")"):i,s=n.split(",").map(function(a){var l,c=a.trim().split(/\s+/),u=c[0]||"",d=((l=u.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return u="".concat(d).concat(o).concat(u.slice(d.length)),[u].concat(ht(c.slice(1))).join(" ")});return s.join(",")}var BH=function n(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},o=i.root,s=i.injectHash,a=i.parentSelectors,l=r.hashId,c=r.layer;r.path;var u=r.hashPriority,d=r.transformers,f=d===void 0?[]:d;r.linters;var h="",p={};function g(m){var _=m.getName(l);if(!p[_]){var x=n(m.style,r,{root:!1,parentSelectors:a}),S=Ce(x,1),w=S[0];p[_]="@keyframes ".concat(m.getName(l)).concat(w)}}function y(m){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return m.forEach(function(x){Array.isArray(x)?y(x,_):x&&_.push(x)}),_}var v=y(Array.isArray(e)?e:[e]);return v.forEach(function(m){var _=typeof m=="string"&&!o?{}:m;if(typeof _=="string")h+="".concat(_,`
`);else if(_._keyframe)g(_);else{var x=f.reduce(function(S,w){var E;return(w==null||(E=w.visit)===null||E===void 0?void 0:E.call(w,S))||S},_);Object.keys(x).forEach(function(S){var w=x[S];if(Ot(w)==="object"&&w&&(S!=="animationName"||!w._keyframe)&&!UH(w)){var E=!1,C=S.trim(),T=!1;(o||s)&&l?C.startsWith("@")?E=!0:C==="&"?C=YA("",l,u):C=YA(S,l,u):o&&!l&&(C==="&"||C==="")&&(C="",T=!0);var M=n(w,r,{root:T,injectHash:E,parentSelectors:[].concat(ht(a),[C])}),R=Ce(M,2),P=R[0],D=R[1];p=re(re({},p),D),h+="".concat(C).concat(P)}else{let I=function(N,L){var O=N.replace(/[A-Z]/g,function(B){return"-".concat(B.toLowerCase())}),V=L;!gH[N]&&typeof V=="number"&&V!==0&&(V="".concat(V,"px")),N==="animationName"&&L!==null&&L!==void 0&&L._keyframe&&(g(L),V=L.getName(l)),h+="".concat(O,":").concat(V,";")};var F,A=(F=w==null?void 0:w.value)!==null&&F!==void 0?F:w;Ot(w)==="object"&&w!==null&&w!==void 0&&w[P3]&&Array.isArray(A)?A.forEach(function(N){I(S,N)}):I(S,A)}})}}),o?c&&(h&&(h="@layer ".concat(c.name," {").concat(h,"}")),c.dependencies&&(p["@layer ".concat(c.name)]=c.dependencies.map(function(m){return"@layer ".concat(m,", ").concat(c.name,";")}).join(`
`))):h="{".concat(h,"}"),[h,p]};function O3(n,e){return Wp("".concat(n.join("%")).concat(e))}function $H(){return null}var I3="style";function Ew(n,e){var r=n.token,i=n.path,o=n.hashId,s=n.layer,a=n.nonce,l=n.clientOnly,c=n.order,u=c===void 0?0:c,d=b.useContext(y_),f=d.autoClear;d.mock;var h=d.defaultCache,p=d.hashPriority,g=d.container,y=d.ssrInline,v=d.transformers,m=d.linters,_=d.cache,x=d.layer,S=r._tokenKey,w=[S];x&&w.push("layer"),w.push.apply(w,ht(i));var E=bw,C=lT(I3,w,function(){var D=w.join("|");if(DH(D)){var F=LH(D),A=Ce(F,2),I=A[0],N=A[1];if(I)return[I,S,N,{},l,u]}var L=e(),O=BH(L,{hashId:o,hashPriority:p,layer:x?s:void 0,path:i.join("-"),transformers:v,linters:m}),V=Ce(O,2),B=V[0],z=V[1],W=i0(B),ie=O3(w,W);return[W,S,ie,z,l,u]},function(D,F){var A=Ce(D,3),I=A[2];(F||f)&&bw&&qp(I,{mark:ys})},function(D){var F=Ce(D,4),A=F[0];F[1];var I=F[2],N=F[3];if(E&&A!==A3){var L={mark:ys,prepend:x?!1:"queue",attachTo:g,priority:u},O=typeof a=="function"?a():a;O&&(L.csp={nonce:O});var V=[],B=[];Object.keys(N).forEach(function(W){W.startsWith("@layer")?V.push(W):B.push(W)}),V.forEach(function(W){Na(i0(N[W]),"_layer-".concat(W),re(re({},L),{},{prepend:!0}))});var z=Na(A,I,L);z[Pl]=_.instanceId,z.setAttribute(Jd,S),B.forEach(function(W){Na(i0(N[W]),"_effect-".concat(W),L)})}}),T=Ce(C,3),M=T[0],R=T[1],P=T[2];return function(D){var F;if(!y||E||!h)F=b.createElement($H,null);else{var A;F=b.createElement("style",pt({},(A={},ee(A,Jd,R),ee(A,ys,P),A),{dangerouslySetInnerHTML:{__html:M}}))}return b.createElement(b.Fragment,null,F,D)}}var zH=function(e,r,i){var o=Ce(e,6),s=o[0],a=o[1],l=o[2],c=o[3],u=o[4],d=o[5],f=i||{},h=f.plain;if(u)return null;var p=s,g={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)};return p=X0(s,a,l,g,h),c&&Object.keys(c).forEach(function(y){if(!r[y]){r[y]=!0;var v=i0(c[y]),m=X0(v,a,"_effect-".concat(y),g,h);y.startsWith("@layer")?p=m+p:p+=m}}),[d,l,p]},D3="cssVar",kH=function(e,r){var i=e.key,o=e.prefix,s=e.unitless,a=e.ignore,l=e.token,c=e.scope,u=c===void 0?"":c,d=b.useContext(y_),f=d.cache.instanceId,h=d.container,p=l._tokenKey,g=[].concat(ht(e.path),[i,u,p]),y=lT(D3,g,function(){var v=r(),m=b3(v,i,{prefix:o,unitless:s,ignore:a,scope:u}),_=Ce(m,2),x=_[0],S=_[1],w=O3(g,S);return[x,S,w,i]},function(v){var m=Ce(v,3),_=m[2];bw&&qp(_,{mark:ys})},function(v){var m=Ce(v,3),_=m[1],x=m[2];if(_){var S=Na(_,x,{mark:ys,prepend:"queue",attachTo:h,priority:-999});S[Pl]=f,S.setAttribute(Jd,i)}});return y},VH=function(e,r,i){var o=Ce(e,4),s=o[1],a=o[2],l=o[3],c=i||{},u=c.plain;if(!s)return null;var d=-999,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},h=X0(s,l,a,f,u);return[d,a,h]},fh;fh={},ee(fh,I3,zH),ee(fh,S3,mH),ee(fh,D3,VH);var vn=function(){function n(e,r){Gr(this,n),ee(this,"name",void 0),ee(this,"style",void 0),ee(this,"_keyframe",!0),this.name=e,this.style=r}return Hr(n,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),n}();function Ou(n){return n.notSplit=!0,n}Ou(["borderTop","borderBottom"]),Ou(["borderTop"]),Ou(["borderBottom"]),Ou(["borderLeft","borderRight"]),Ou(["borderLeft"]),Ou(["borderRight"]);var dT=b.createContext({});function L3(n){return m3(n)||d3(n)||iT(n)||g3()}function Us(n,e){for(var r=n,i=0;i<e.length;i+=1){if(r==null)return;r=r[e[i]]}return r}function F3(n,e,r,i){if(!e.length)return r;var o=L3(e),s=o[0],a=o.slice(1),l;return!n&&typeof s=="number"?l=[]:Array.isArray(n)?l=ht(n):l=re({},n),i&&r===void 0&&a.length===1?delete l[s][a[0]]:l[s]=F3(l[s],a,r,i),l}function is(n,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&i&&r===void 0&&!Us(n,e.slice(0,-1))?n:F3(n,e,r,i)}function GH(n){return Ot(n)==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype}function QA(n){return Array.isArray(n)?[]:{}}var HH=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function yd(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=QA(e[0]);return e.forEach(function(o){function s(a,l){var c=new Set(l),u=Us(o,a),d=Array.isArray(u);if(d||GH(u)){if(!c.has(u)){c.add(u);var f=Us(i,a);d?i=is(i,a,[]):(!f||Ot(f)!=="object")&&(i=is(i,a,QA(u))),HH(u).forEach(function(h){s([].concat(ht(a),[h]),c)})}}else i=is(i,a,u)}s([])}),i}function jH(){}const WH=b.createContext({}),U3=()=>{const n=()=>{};return n.deprecated=jH,n},qH=b.createContext(void 0);var B3={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},XH={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},KH=re(re({},XH),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const $3={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},ZA={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},KH),timePickerLocale:Object.assign({},$3)},no="${label} is not a valid ${type}",ou={locale:"en",Pagination:B3,DatePicker:ZA,TimePicker:$3,Calendar:ZA,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:no,method:no,array:no,object:no,number:no,date:no,boolean:no,integer:no,float:no,regexp:no,email:no,url:no,hex:no},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let o0=Object.assign({},ou.Modal),s0=[];const JA=()=>s0.reduce((n,e)=>Object.assign(Object.assign({},n),e),ou.Modal);function YH(n){if(n){const e=Object.assign({},n);return s0.push(e),o0=JA(),()=>{s0=s0.filter(r=>r!==e),o0=JA()}}o0=Object.assign({},ou.Modal)}function z3(){return o0}const fT=b.createContext(void 0),ic=(n,e)=>{const r=b.useContext(fT),i=b.useMemo(()=>{var s;const a=e||ou[n],l=(s=r==null?void 0:r[n])!==null&&s!==void 0?s:{};return Object.assign(Object.assign({},typeof a=="function"?a():a),l||{})},[n,e,r]),o=b.useMemo(()=>{const s=r==null?void 0:r.locale;return r!=null&&r.exist&&!s?ou.locale:s},[r]);return[i,o]},QH="internalMark",ZH=n=>{const{locale:e={},children:r,_ANT_MARK__:i}=n;b.useEffect(()=>YH(e==null?void 0:e.Modal),[e]);const o=b.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return b.createElement(fT.Provider,{value:o},r)},jr=Math.round;function eb(n,e){const r=n.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],i=r.map(o=>parseFloat(o));for(let o=0;o<3;o+=1)i[o]=e(i[o]||0,r[o]||"",o);return r[3]?i[3]=r[3].includes("%")?i[3]/100:i[3]:i[3]=1,i}const e2=(n,e,r)=>r===0?n:n/100;function hh(n,e){const r=e||255;return n>r?r:n<0?0:n}class Ln{constructor(e){ee(this,"isValid",!0),ee(this,"r",0),ee(this,"g",0),ee(this,"b",0),ee(this,"a",1),ee(this,"_h",void 0),ee(this,"_s",void 0),ee(this,"_l",void 0),ee(this,"_v",void 0),ee(this,"_max",void 0),ee(this,"_min",void 0),ee(this,"_brightness",void 0);function r(o){return o[0]in e&&o[1]in e&&o[2]in e}if(e)if(typeof e=="string"){let s=function(a){return o.startsWith(a)};var i=s;const o=e.trim();/^#?[A-F\d]{3,8}$/i.test(o)?this.fromHexString(o):s("rgb")?this.fromRgbString(o):s("hsl")?this.fromHslString(o):(s("hsv")||s("hsb"))&&this.fromHsvString(o)}else if(e instanceof Ln)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(r("rgb"))this.r=hh(e.r),this.g=hh(e.g),this.b=hh(e.b),this.a=typeof e.a=="number"?hh(e.a,1):1;else if(r("hsl"))this.fromHsl(e);else if(r("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const r=this.toHsv();return r.h=e,this._c(r)}getLuminance(){function e(s){const a=s/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}const r=e(this.r),i=e(this.g),o=e(this.b);return .2126*r+.7152*i+.0722*o}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=jr(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const r=this.getHue(),i=this.getSaturation();let o=this.getLightness()-e/100;return o<0&&(o=0),this._c({h:r,s:i,l:o,a:this.a})}lighten(e=10){const r=this.getHue(),i=this.getSaturation();let o=this.getLightness()+e/100;return o>1&&(o=1),this._c({h:r,s:i,l:o,a:this.a})}mix(e,r=50){const i=this._c(e),o=r/100,s=l=>(i[l]-this[l])*o+this[l],a={r:jr(s("r")),g:jr(s("g")),b:jr(s("b")),a:jr(s("a")*100)/100};return this._c(a)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const r=this._c(e),i=this.a+r.a*(1-this.a),o=s=>jr((this[s]*this.a+r[s]*r.a*(1-this.a))/i);return this._c({r:o("r"),g:o("g"),b:o("b"),a:i})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const r=(this.r||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.g||0).toString(16);e+=i.length===2?i:"0"+i;const o=(this.b||0).toString(16);if(e+=o.length===2?o:"0"+o,typeof this.a=="number"&&this.a>=0&&this.a<1){const s=jr(this.a*255).toString(16);e+=s.length===2?s:"0"+s}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),r=jr(this.getSaturation()*100),i=jr(this.getLightness()*100);return this.a!==1?`hsla(${e},${r}%,${i}%,${this.a})`:`hsl(${e},${r}%,${i}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,r,i){const o=this.clone();return o[e]=hh(r,i),o}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const r=e.replace("#","");function i(o,s){return parseInt(r[o]+r[s||o],16)}r.length<6?(this.r=i(0),this.g=i(1),this.b=i(2),this.a=r[3]?i(3)/255:1):(this.r=i(0,1),this.g=i(2,3),this.b=i(4,5),this.a=r[6]?i(6,7)/255:1)}fromHsl({h:e,s:r,l:i,a:o}){if(this._h=e%360,this._s=r,this._l=i,this.a=typeof o=="number"?o:1,r<=0){const h=jr(i*255);this.r=h,this.g=h,this.b=h}let s=0,a=0,l=0;const c=e/60,u=(1-Math.abs(2*i-1))*r,d=u*(1-Math.abs(c%2-1));c>=0&&c<1?(s=u,a=d):c>=1&&c<2?(s=d,a=u):c>=2&&c<3?(a=u,l=d):c>=3&&c<4?(a=d,l=u):c>=4&&c<5?(s=d,l=u):c>=5&&c<6&&(s=u,l=d);const f=i-u/2;this.r=jr((s+f)*255),this.g=jr((a+f)*255),this.b=jr((l+f)*255)}fromHsv({h:e,s:r,v:i,a:o}){this._h=e%360,this._s=r,this._v=i,this.a=typeof o=="number"?o:1;const s=jr(i*255);if(this.r=s,this.g=s,this.b=s,r<=0)return;const a=e/60,l=Math.floor(a),c=a-l,u=jr(i*(1-r)*255),d=jr(i*(1-r*c)*255),f=jr(i*(1-r*(1-c))*255);switch(l){case 0:this.g=f,this.b=u;break;case 1:this.r=d,this.b=u;break;case 2:this.r=u,this.b=f;break;case 3:this.r=u,this.g=d;break;case 4:this.r=f,this.g=u;break;case 5:default:this.g=u,this.b=d;break}}fromHsvString(e){const r=eb(e,e2);this.fromHsv({h:r[0],s:r[1],v:r[2],a:r[3]})}fromHslString(e){const r=eb(e,e2);this.fromHsl({h:r[0],s:r[1],l:r[2],a:r[3]})}fromRgbString(e){const r=eb(e,(i,o)=>o.includes("%")?jr(i/100*255):i);this.r=r[0],this.g=r[1],this.b=r[2],this.a=r[3]}}var Ig=2,t2=.16,JH=.05,e8=.05,t8=.15,k3=5,V3=4,n8=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function n2(n,e,r){var i;return Math.round(n.h)>=60&&Math.round(n.h)<=240?i=r?Math.round(n.h)-Ig*e:Math.round(n.h)+Ig*e:i=r?Math.round(n.h)+Ig*e:Math.round(n.h)-Ig*e,i<0?i+=360:i>=360&&(i-=360),i}function r2(n,e,r){if(n.h===0&&n.s===0)return n.s;var i;return r?i=n.s-t2*e:e===V3?i=n.s+t2:i=n.s+JH*e,i>1&&(i=1),r&&e===k3&&i>.1&&(i=.1),i<.06&&(i=.06),Math.round(i*100)/100}function i2(n,e,r){var i;return r?i=n.v+e8*e:i=n.v-t8*e,i=Math.max(0,Math.min(1,i)),Math.round(i*100)/100}function Yp(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],i=new Ln(n),o=i.toHsv(),s=k3;s>0;s-=1){var a=new Ln({h:n2(o,s,!0),s:r2(o,s,!0),v:i2(o,s,!0)});r.push(a)}r.push(i);for(var l=1;l<=V3;l+=1){var c=new Ln({h:n2(o,l),s:r2(o,l),v:i2(o,l)});r.push(c)}return e.theme==="dark"?n8.map(function(u){var d=u.index,f=u.amount;return new Ln(e.backgroundColor||"#141414").mix(r[d],f).toHexString()}):r.map(function(u){return u.toHexString()})}var tb={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Cw=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];Cw.primary=Cw[5];var Tw=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];Tw.primary=Tw[5];var Mw=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];Mw.primary=Mw[5];var K0=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];K0.primary=K0[5];var Rw=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];Rw.primary=Rw[5];var Aw=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];Aw.primary=Aw[5];var Nw=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];Nw.primary=Nw[5];var Pw=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];Pw.primary=Pw[5];var Y0=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];Y0.primary=Y0[5];var Ow=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];Ow.primary=Ow[5];var Iw=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];Iw.primary=Iw[5];var Dw=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];Dw.primary=Dw[5];var Lw=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];Lw.primary=Lw[5];var nb={red:Cw,volcano:Tw,orange:Mw,gold:K0,yellow:Rw,lime:Aw,green:Nw,cyan:Pw,blue:Y0,geekblue:Ow,purple:Iw,magenta:Dw,grey:Lw};const G3={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Qp=Object.assign(Object.assign({},G3),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function r8(n,e){let{generateColorPalettes:r,generateNeutralColorPalettes:i}=e;const{colorSuccess:o,colorWarning:s,colorError:a,colorInfo:l,colorPrimary:c,colorBgBase:u,colorTextBase:d}=n,f=r(c),h=r(o),p=r(s),g=r(a),y=r(l),v=i(u,d),m=n.colorLink||n.colorInfo,_=r(m),x=new Ln(g[1]).mix(new Ln(g[3]),50).toHexString();return Object.assign(Object.assign({},v),{colorPrimaryBg:f[1],colorPrimaryBgHover:f[2],colorPrimaryBorder:f[3],colorPrimaryBorderHover:f[4],colorPrimaryHover:f[5],colorPrimary:f[6],colorPrimaryActive:f[7],colorPrimaryTextHover:f[8],colorPrimaryText:f[9],colorPrimaryTextActive:f[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:g[1],colorErrorBgHover:g[2],colorErrorBgFilledHover:x,colorErrorBgActive:g[3],colorErrorBorder:g[3],colorErrorBorderHover:g[4],colorErrorHover:g[5],colorError:g[6],colorErrorActive:g[7],colorErrorTextHover:g[8],colorErrorText:g[9],colorErrorTextActive:g[10],colorWarningBg:p[1],colorWarningBgHover:p[2],colorWarningBorder:p[3],colorWarningBorderHover:p[4],colorWarningHover:p[4],colorWarning:p[6],colorWarningActive:p[7],colorWarningTextHover:p[8],colorWarningText:p[9],colorWarningTextActive:p[10],colorInfoBg:y[1],colorInfoBgHover:y[2],colorInfoBorder:y[3],colorInfoBorderHover:y[4],colorInfoHover:y[4],colorInfo:y[6],colorInfoActive:y[7],colorInfoTextHover:y[8],colorInfoText:y[9],colorInfoTextActive:y[10],colorLinkHover:_[4],colorLink:_[6],colorLinkActive:_[7],colorBgMask:new Ln("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const i8=n=>{let e=n,r=n,i=n,o=n;return n<6&&n>=5?e=n+1:n<16&&n>=6?e=n+2:n>=16&&(e=16),n<7&&n>=5?r=4:n<8&&n>=7?r=5:n<14&&n>=8?r=6:n<16&&n>=14?r=7:n>=16&&(r=8),n<6&&n>=2?i=1:n>=6&&(i=2),n>4&&n<8?o=4:n>=8&&(o=6),{borderRadius:n,borderRadiusXS:i,borderRadiusSM:r,borderRadiusLG:e,borderRadiusOuter:o}};function o8(n){const{motionUnit:e,motionBase:r,borderRadius:i,lineWidth:o}=n;return Object.assign({motionDurationFast:`${(r+e).toFixed(1)}s`,motionDurationMid:`${(r+e*2).toFixed(1)}s`,motionDurationSlow:`${(r+e*3).toFixed(1)}s`,lineWidthBold:o+1},i8(i))}const s8=n=>{const{controlHeight:e}=n;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}};function a0(n){return(n+8)/n}function a8(n){const e=new Array(10).fill(null).map((r,i)=>{const o=i-1,s=n*Math.pow(Math.E,o/5),a=i>1?Math.floor(s):Math.ceil(s);return Math.floor(a/2)*2});return e[1]=n,e.map(r=>({size:r,lineHeight:a0(r)}))}const l8=n=>{const e=a8(n),r=e.map(d=>d.size),i=e.map(d=>d.lineHeight),o=r[1],s=r[0],a=r[2],l=i[1],c=i[0],u=i[2];return{fontSizeSM:s,fontSize:o,fontSizeLG:a,fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:l,lineHeightLG:u,lineHeightSM:c,fontHeight:Math.round(l*o),fontHeightLG:Math.round(u*a),fontHeightSM:Math.round(c*s),lineHeightHeading1:i[6],lineHeightHeading2:i[5],lineHeightHeading3:i[4],lineHeightHeading4:i[3],lineHeightHeading5:i[2]}};function c8(n){const{sizeUnit:e,sizeStep:r}=n;return{sizeXXL:e*(r+8),sizeXL:e*(r+4),sizeLG:e*(r+2),sizeMD:e*(r+1),sizeMS:e*r,size:e*r,sizeSM:e*(r-1),sizeXS:e*(r-2),sizeXXS:e*(r-3)}}const Co=(n,e)=>new Ln(n).setA(e).toRgbString(),ph=(n,e)=>new Ln(n).darken(e).toHexString(),u8=n=>{const e=Yp(n);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},d8=(n,e)=>{const r=n||"#fff",i=e||"#000";return{colorBgBase:r,colorTextBase:i,colorText:Co(i,.88),colorTextSecondary:Co(i,.65),colorTextTertiary:Co(i,.45),colorTextQuaternary:Co(i,.25),colorFill:Co(i,.15),colorFillSecondary:Co(i,.06),colorFillTertiary:Co(i,.04),colorFillQuaternary:Co(i,.02),colorBgSolid:Co(i,1),colorBgSolidHover:Co(i,.75),colorBgSolidActive:Co(i,.95),colorBgLayout:ph(r,4),colorBgContainer:ph(r,0),colorBgElevated:ph(r,0),colorBgSpotlight:Co(i,.85),colorBgBlur:"transparent",colorBorder:ph(r,15),colorBorderSecondary:ph(r,6)}};function f8(n){tb.pink=tb.magenta,nb.pink=nb.magenta;const e=Object.keys(G3).map(r=>{const i=n[r]===tb[r]?nb[r]:Yp(n[r]);return new Array(10).fill(1).reduce((o,s,a)=>(o[`${r}-${a+1}`]=i[a],o[`${r}${a+1}`]=i[a],o),{})}).reduce((r,i)=>(r=Object.assign(Object.assign({},r),i),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),e),r8(n,{generateColorPalettes:u8,generateNeutralColorPalettes:d8})),l8(n.fontSize)),c8(n)),s8(n)),o8(n))}const H3=xw(f8),Fw={token:Qp,override:{override:Qp},hashed:!0},j3=de.createContext(Fw),Q0="ant",b_="anticon",h8=["outlined","borderless","filled"],p8=(n,e)=>e||(n?`${Q0}-${n}`:Q0),Yt=b.createContext({getPrefixCls:p8,iconPrefixCls:b_}),{Consumer:Zwe}=Yt,m8=`-ant-${Date.now()}-${Math.random()}`;function g8(n,e){const r={},i=(a,l)=>{let c=a.clone();return c=(l==null?void 0:l(c))||c,c.toRgbString()},o=(a,l)=>{const c=new Ln(a),u=Yp(c.toRgbString());r[`${l}-color`]=i(c),r[`${l}-color-disabled`]=u[1],r[`${l}-color-hover`]=u[4],r[`${l}-color-active`]=u[6],r[`${l}-color-outline`]=c.clone().setA(.2).toRgbString(),r[`${l}-color-deprecated-bg`]=u[0],r[`${l}-color-deprecated-border`]=u[2]};if(e.primaryColor){o(e.primaryColor,"primary");const a=new Ln(e.primaryColor),l=Yp(a.toRgbString());l.forEach((u,d)=>{r[`primary-${d+1}`]=u}),r["primary-color-deprecated-l-35"]=i(a,u=>u.lighten(35)),r["primary-color-deprecated-l-20"]=i(a,u=>u.lighten(20)),r["primary-color-deprecated-t-20"]=i(a,u=>u.tint(20)),r["primary-color-deprecated-t-50"]=i(a,u=>u.tint(50)),r["primary-color-deprecated-f-12"]=i(a,u=>u.setA(u.a*.12));const c=new Ln(l[0]);r["primary-color-active-deprecated-f-30"]=i(c,u=>u.setA(u.a*.3)),r["primary-color-active-deprecated-d-02"]=i(c,u=>u.darken(2))}return e.successColor&&o(e.successColor,"success"),e.warningColor&&o(e.warningColor,"warning"),e.errorColor&&o(e.errorColor,"error"),e.infoColor&&o(e.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(a=>`--${n}-${a}: ${r[a]};`).join(`
`)}
  }
  `.trim()}function v8(n,e){const r=g8(n,e);pi()&&Na(r,`${m8}-dynamic-theme`)}const za=b.createContext(!1),W3=n=>{let{children:e,disabled:r}=n;const i=b.useContext(za);return b.createElement(za.Provider,{value:r??i},e)},nf=b.createContext(void 0),y8=n=>{let{children:e,size:r}=n;const i=b.useContext(nf);return b.createElement(nf.Provider,{value:r||i},e)};function _8(){const n=b.useContext(za),e=b.useContext(nf);return{componentDisabled:n,componentSize:e}}var q3=Hr(function n(){Gr(this,n)}),X3="CALC_UNIT",x8=new RegExp(X3,"g");function rb(n){return typeof n=="number"?"".concat(n).concat(X3):n}var b8=function(n){nc(r,n);var e=rc(r);function r(i,o){var s;Gr(this,r),s=e.call(this),ee(nn(s),"result",""),ee(nn(s),"unitlessCssVar",void 0),ee(nn(s),"lowPriority",void 0);var a=Ot(i);return s.unitlessCssVar=o,i instanceof r?s.result="(".concat(i.result,")"):a==="number"?s.result=rb(i):a==="string"&&(s.result=i),s}return Hr(r,[{key:"add",value:function(o){return o instanceof r?this.result="".concat(this.result," + ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," + ").concat(rb(o))),this.lowPriority=!0,this}},{key:"sub",value:function(o){return o instanceof r?this.result="".concat(this.result," - ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," - ").concat(rb(o))),this.lowPriority=!0,this}},{key:"mul",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof r?this.result="".concat(this.result," * ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," * ").concat(o)),this.lowPriority=!1,this}},{key:"div",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof r?this.result="".concat(this.result," / ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," / ").concat(o)),this.lowPriority=!1,this}},{key:"getResult",value:function(o){return this.lowPriority||o?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(o){var s=this,a=o||{},l=a.unit,c=!0;return typeof l=="boolean"?c=l:Array.from(this.unitlessCssVar).some(function(u){return s.result.includes(u)})&&(c=!1),this.result=this.result.replace(x8,c?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),r}(q3),S8=function(n){nc(r,n);var e=rc(r);function r(i){var o;return Gr(this,r),o=e.call(this),ee(nn(o),"result",0),i instanceof r?o.result=i.result:typeof i=="number"&&(o.result=i),o}return Hr(r,[{key:"add",value:function(o){return o instanceof r?this.result+=o.result:typeof o=="number"&&(this.result+=o),this}},{key:"sub",value:function(o){return o instanceof r?this.result-=o.result:typeof o=="number"&&(this.result-=o),this}},{key:"mul",value:function(o){return o instanceof r?this.result*=o.result:typeof o=="number"&&(this.result*=o),this}},{key:"div",value:function(o){return o instanceof r?this.result/=o.result:typeof o=="number"&&(this.result/=o),this}},{key:"equal",value:function(){return this.result}}]),r}(q3),w8=function(e,r){var i=e==="css"?b8:S8;return function(o){return new i(o,r)}},o2=function(e,r){return"".concat([r,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function br(n){var e=b.useRef();e.current=n;var r=b.useCallback(function(){for(var i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(i=e.current)===null||i===void 0?void 0:i.call.apply(i,[e].concat(s))},[]);return r}function rf(n){var e=b.useRef(!1),r=b.useState(n),i=Ce(r,2),o=i[0],s=i[1];b.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function a(l,c){c&&e.current||s(l)}return[o,a]}function ib(n){return n!==void 0}function Zi(n,e){var r=e||{},i=r.defaultValue,o=r.value,s=r.onChange,a=r.postState,l=rf(function(){return ib(o)?o:ib(i)?typeof i=="function"?i():i:typeof n=="function"?n():n}),c=Ce(l,2),u=c[0],d=c[1],f=o!==void 0?o:u,h=a?a(f):f,p=br(s),g=rf([f]),y=Ce(g,2),v=y[0],m=y[1];jA(function(){var x=v[0];u!==x&&p(u,x)},[v]),jA(function(){ib(o)||d(o)},[o]);var _=br(function(x,S){d(x,S),m([f],S)});return[h,_]}function s2(n,e,r,i){var o=re({},e[n]);if(i!=null&&i.deprecatedTokens){var s=i.deprecatedTokens;s.forEach(function(l){var c=Ce(l,2),u=c[0],d=c[1];if(o!=null&&o[u]||o!=null&&o[d]){var f;(f=o[d])!==null&&f!==void 0||(o[d]=o==null?void 0:o[u])}})}var a=re(re({},r),o);return Object.keys(a).forEach(function(l){a[l]===e[l]&&delete a[l]}),a}var K3=typeof CSSINJS_STATISTIC<"u",Uw=!0;function Xn(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(!K3)return Object.assign.apply(Object,[{}].concat(e));Uw=!1;var i={};return e.forEach(function(o){if(Ot(o)==="object"){var s=Object.keys(o);s.forEach(function(a){Object.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return o[a]}})})}}),Uw=!0,i}var a2={};function E8(){}var C8=function(e){var r,i=e,o=E8;return K3&&typeof Proxy<"u"&&(r=new Set,i=new Proxy(e,{get:function(a,l){if(Uw){var c;(c=r)===null||c===void 0||c.add(l)}return a[l]}}),o=function(a,l){var c;a2[a]={global:Array.from(r),component:re(re({},(c=a2[a])===null||c===void 0?void 0:c.component),l)}}),{token:i,keys:r,flush:o}};function l2(n,e,r){if(typeof r=="function"){var i;return r(Xn(e,(i=e[n])!==null&&i!==void 0?i:{}))}return r??{}}function T8(n){return n==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return"max(".concat(i.map(function(s){return De(s)}).join(","),")")},min:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return"min(".concat(i.map(function(s){return De(s)}).join(","),")")}}}var M8=1e3*60*10,R8=function(){function n(){Gr(this,n),ee(this,"map",new Map),ee(this,"objectIDMap",new WeakMap),ee(this,"nextID",0),ee(this,"lastAccessBeat",new Map),ee(this,"accessBeat",0)}return Hr(n,[{key:"set",value:function(r,i){this.clear();var o=this.getCompositeKey(r);this.map.set(o,i),this.lastAccessBeat.set(o,Date.now())}},{key:"get",value:function(r){var i=this.getCompositeKey(r),o=this.map.get(i);return this.lastAccessBeat.set(i,Date.now()),this.accessBeat+=1,o}},{key:"getCompositeKey",value:function(r){var i=this,o=r.map(function(s){return s&&Ot(s)==="object"?"obj_".concat(i.getObjectID(s)):"".concat(Ot(s),"_").concat(s)});return o.join("|")}},{key:"getObjectID",value:function(r){if(this.objectIDMap.has(r))return this.objectIDMap.get(r);var i=this.nextID;return this.objectIDMap.set(r,i),this.nextID+=1,i}},{key:"clear",value:function(){var r=this;if(this.accessBeat>1e4){var i=Date.now();this.lastAccessBeat.forEach(function(o,s){i-o>M8&&(r.map.delete(s),r.lastAccessBeat.delete(s))}),this.accessBeat=0}}}]),n}(),c2=new R8;function A8(n,e){return de.useMemo(function(){var r=c2.get(e);if(r)return r;var i=n();return c2.set(e,i),i},e)}var N8=function(){return{}};function P8(n){var e=n.useCSP,r=e===void 0?N8:e,i=n.useToken,o=n.usePrefix,s=n.getResetStyles,a=n.getCommonStyle,l=n.getCompUnitless;function c(h,p,g,y){var v=Array.isArray(h)?h[0]:h;function m(T){return"".concat(String(v)).concat(T.slice(0,1).toUpperCase()).concat(T.slice(1))}var _=(y==null?void 0:y.unitless)||{},x=typeof l=="function"?l(h):{},S=re(re({},x),{},ee({},m("zIndexPopup"),!0));Object.keys(_).forEach(function(T){S[m(T)]=_[T]});var w=re(re({},y),{},{unitless:S,prefixToken:m}),E=d(h,p,g,w),C=u(v,g,w);return function(T){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T,R=E(T,M),P=Ce(R,2),D=P[1],F=C(M),A=Ce(F,2),I=A[0],N=A[1];return[I,D,N]}}function u(h,p,g){var y=g.unitless,v=g.injectStyle,m=v===void 0?!0:v,_=g.prefixToken,x=g.ignore,S=function(C){var T=C.rootCls,M=C.cssVar,R=M===void 0?{}:M,P=i(),D=P.realToken;return kH({path:[h],prefix:R.prefix,key:R.key,unitless:y,ignore:x,token:D,scope:T},function(){var F=l2(h,D,p),A=s2(h,D,F,{deprecatedTokens:g==null?void 0:g.deprecatedTokens});return Object.keys(F).forEach(function(I){A[_(I)]=A[I],delete A[I]}),A}),null},w=function(C){var T=i(),M=T.cssVar;return[function(R){return m&&M?de.createElement(de.Fragment,null,de.createElement(S,{rootCls:C,cssVar:M,component:h}),R):R},M==null?void 0:M.key]};return w}function d(h,p,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=Array.isArray(h)?h:[h,h],m=Ce(v,1),_=m[0],x=v.join("-"),S=n.layer||{name:"antd"};return function(w){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,C=i(),T=C.theme,M=C.realToken,R=C.hashId,P=C.token,D=C.cssVar,F=o(),A=F.rootPrefixCls,I=F.iconPrefixCls,N=r(),L=D?"css":"js",O=A8(function(){var k=new Set;return D&&Object.keys(y.unitless||{}).forEach(function(j){k.add(e0(j,D.prefix)),k.add(e0(j,o2(_,D.prefix)))}),w8(L,k)},[L,_,D==null?void 0:D.prefix]),V=T8(L),B=V.max,z=V.min,W={theme:T,token:P,hashId:R,nonce:function(){return N.nonce},clientOnly:y.clientOnly,layer:S,order:y.order||-999};typeof s=="function"&&Ew(re(re({},W),{},{clientOnly:!1,path:["Shared",A]}),function(){return s(P,{prefix:{rootPrefixCls:A,iconPrefixCls:I},csp:N})});var ie=Ew(re(re({},W),{},{path:[x,w,I]}),function(){if(y.injectStyle===!1)return[];var k=C8(P),j=k.token,Q=k.flush,Y=l2(_,M,g),ne=".".concat(w),ye=s2(_,M,Y,{deprecatedTokens:y.deprecatedTokens});D&&Y&&Ot(Y)==="object"&&Object.keys(Y).forEach(function(ve){Y[ve]="var(".concat(e0(ve,o2(_,D.prefix)),")")});var me=Xn(j,{componentCls:ne,prefixCls:w,iconCls:".".concat(I),antCls:".".concat(A),calc:O,max:B,min:z},D?Y:ye),fe=p(me,{hashId:R,prefixCls:w,rootPrefixCls:A,iconPrefixCls:I});Q(_,ye);var ae=typeof a=="function"?a(me,w,E,y.resetFont):null;return[y.resetStyle===!1?null:ae,fe]});return[ie,R]}}function f(h,p,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=d(h,p,g,re({resetStyle:!1,order:-998},y)),m=function(x){var S=x.prefixCls,w=x.rootCls,E=w===void 0?S:w;return v(S,E),null};return m}return{genStyleHooks:c,genSubStyleComponent:f,genComponentStyleHook:d}}const of=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],O8="5.23.0";function ob(n){return n>=0&&n<=255}function Dg(n,e){const{r,g:i,b:o,a:s}=new Ln(n).toRgb();if(s<1)return n;const{r:a,g:l,b:c}=new Ln(e).toRgb();for(let u=.01;u<=1;u+=.01){const d=Math.round((r-a*(1-u))/u),f=Math.round((i-l*(1-u))/u),h=Math.round((o-c*(1-u))/u);if(ob(d)&&ob(f)&&ob(h))return new Ln({r:d,g:f,b:h,a:Math.round(u*100)/100}).toRgbString()}return new Ln({r,g:i,b:o,a:1}).toRgbString()}var I8=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function Y3(n){const{override:e}=n,r=I8(n,["override"]),i=Object.assign({},e);Object.keys(Qp).forEach(h=>{delete i[h]});const o=Object.assign(Object.assign({},r),i),s=480,a=576,l=768,c=992,u=1200,d=1600;if(o.motion===!1){const h="0s";o.motionDurationFast=h,o.motionDurationMid=h,o.motionDurationSlow=h}return Object.assign(Object.assign(Object.assign({},o),{colorFillContent:o.colorFillSecondary,colorFillContentHover:o.colorFill,colorFillAlter:o.colorFillQuaternary,colorBgContainerDisabled:o.colorFillTertiary,colorBorderBg:o.colorBgContainer,colorSplit:Dg(o.colorBorderSecondary,o.colorBgContainer),colorTextPlaceholder:o.colorTextQuaternary,colorTextDisabled:o.colorTextQuaternary,colorTextHeading:o.colorText,colorTextLabel:o.colorTextSecondary,colorTextDescription:o.colorTextTertiary,colorTextLightSolid:o.colorWhite,colorHighlight:o.colorError,colorBgTextHover:o.colorFillSecondary,colorBgTextActive:o.colorFill,colorIcon:o.colorTextTertiary,colorIconHover:o.colorText,colorErrorOutline:Dg(o.colorErrorBg,o.colorBgContainer),colorWarningOutline:Dg(o.colorWarningBg,o.colorBgContainer),fontSizeIcon:o.fontSizeSM,lineWidthFocus:o.lineWidth*3,lineWidth:o.lineWidth,controlOutlineWidth:o.lineWidth*2,controlInteractiveSize:o.controlHeight/2,controlItemBgHover:o.colorFillTertiary,controlItemBgActive:o.colorPrimaryBg,controlItemBgActiveHover:o.colorPrimaryBgHover,controlItemBgActiveDisabled:o.colorFill,controlTmpOutline:o.colorFillQuaternary,controlOutline:Dg(o.colorPrimaryBg,o.colorBgContainer),lineType:o.lineType,borderRadius:o.borderRadius,borderRadiusXS:o.borderRadiusXS,borderRadiusSM:o.borderRadiusSM,borderRadiusLG:o.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:o.sizeXXS,paddingXS:o.sizeXS,paddingSM:o.sizeSM,padding:o.size,paddingMD:o.sizeMD,paddingLG:o.sizeLG,paddingXL:o.sizeXL,paddingContentHorizontalLG:o.sizeLG,paddingContentVerticalLG:o.sizeMS,paddingContentHorizontal:o.sizeMS,paddingContentVertical:o.sizeSM,paddingContentHorizontalSM:o.size,paddingContentVerticalSM:o.sizeXS,marginXXS:o.sizeXXS,marginXS:o.sizeXS,marginSM:o.sizeSM,margin:o.size,marginMD:o.sizeMD,marginLG:o.sizeLG,marginXL:o.sizeXL,marginXXL:o.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:s,screenXSMin:s,screenXSMax:a-1,screenSM:a,screenSMMin:a,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:c-1,screenLG:c,screenLGMin:c,screenLGMax:u-1,screenXL:u,screenXLMin:u,screenXLMax:d-1,screenXXL:d,screenXXLMin:d,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ln("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ln("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ln("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),i)}var u2=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const Q3={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},D8={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},L8={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},Z3=(n,e,r)=>{const i=r.getDerivativeToken(n),{override:o}=e,s=u2(e,["override"]);let a=Object.assign(Object.assign({},i),{override:o});return a=Y3(a),s&&Object.entries(s).forEach(l=>{let[c,u]=l;const{theme:d}=u,f=u2(u,["theme"]);let h=f;d&&(h=Z3(Object.assign(Object.assign({},a),f),{override:f},d)),a[c]=h}),a};function eo(){const{token:n,hashed:e,theme:r,override:i,cssVar:o}=de.useContext(j3),s=`${O8}-${e||""}`,a=r||H3,[l,c,u]=pH(a,[Qp,n],{salt:s,override:i,getComputedToken:Z3,formatToken:Y3,cssVar:o&&{prefix:o.prefix,key:o.key,unitless:Q3,ignore:D8,preserve:L8}});return[a,u,e?c:"",l,o]}const Bw={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Es=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:n.colorText,fontSize:n.fontSize,lineHeight:n.lineHeight,listStyle:"none",fontFamily:e?"inherit":n.fontFamily}},S_=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),J3=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),F8=n=>({a:{color:n.colorLink,textDecoration:n.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${n.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:n.colorLinkHover},"&:active":{color:n.colorLinkActive},"&:active, &:hover":{textDecoration:n.linkHoverDecoration,outline:0},"&:focus":{textDecoration:n.linkFocusDecoration,outline:0},"&[disabled]":{color:n.colorTextDisabled,cursor:"not-allowed"}}}),U8=(n,e,r,i)=>{const o=`[class^="${e}"], [class*=" ${e}"]`,s=r?`.${r}`:o,a={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let l={};return i!==!1&&(l={fontFamily:n.fontFamily,fontSize:n.fontSize}),{[s]:Object.assign(Object.assign(Object.assign({},l),a),{[o]:a})}},$w=(n,e)=>({outline:`${De(n.lineWidthFocus)} solid ${n.colorPrimaryBorder}`,outlineOffset:e??1,transition:"outline-offset 0s, outline 0s"}),zm=(n,e)=>({"&:focus-visible":Object.assign({},$w(n,e))}),eU=n=>({[`.${n}`]:Object.assign(Object.assign({},S_()),{[`.${n} .${n}-icon`]:{display:"block"}})}),tU=n=>Object.assign(Object.assign({color:n.colorLink,textDecoration:n.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${n.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},zm(n)),{"&:focus, &:hover":{color:n.colorLinkHover},"&:active":{color:n.colorLinkActive}}),{genStyleHooks:Ii,genComponentStyleHook:B8,genSubStyleComponent:hT}=P8({usePrefix:()=>{const{getPrefixCls:n,iconPrefixCls:e}=b.useContext(Yt);return{rootPrefixCls:n(),iconPrefixCls:e}},useToken:()=>{const[n,e,r,i,o]=eo();return{theme:n,realToken:e,hashId:r,token:i,cssVar:o}},useCSP:()=>{const{csp:n}=b.useContext(Yt);return n??{}},getResetStyles:(n,e)=>{var r;return[{"&":F8(n)},eU((r=e==null?void 0:e.prefix.iconPrefixCls)!==null&&r!==void 0?r:b_)]},getCommonStyle:U8,getCompUnitless:()=>Q3});function $8(n,e){return of.reduce((r,i)=>{const o=n[`${i}1`],s=n[`${i}3`],a=n[`${i}6`],l=n[`${i}7`];return Object.assign(Object.assign({},r),e(i,{lightColor:o,lightBorderColor:s,darkColor:a,textColor:l}))},{})}const z8=(n,e)=>{const[r,i]=eo();return Ew({token:i,hashId:"",path:["ant-design-icons",n],nonce:()=>e==null?void 0:e.nonce,layer:{name:"antd"}},()=>[eU(n)])},k8=Object.assign({},Vy),{useId:d2}=k8,V8=()=>"",G8=typeof d2>"u"?V8:d2;function H8(n,e,r){var i;U3();const o=n||{},s=o.inherit===!1||!e?Object.assign(Object.assign({},Fw),{hashed:(i=e==null?void 0:e.hashed)!==null&&i!==void 0?i:Fw.hashed,cssVar:e==null?void 0:e.cssVar}):e,a=G8();return p_(()=>{var l,c;if(!n)return e;const u=Object.assign({},s.components);Object.keys(n.components||{}).forEach(h=>{u[h]=Object.assign(Object.assign({},u[h]),n.components[h])});const d=`css-var-${a.replace(/:/g,"")}`,f=((l=o.cssVar)!==null&&l!==void 0?l:s.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:r==null?void 0:r.prefixCls},typeof s.cssVar=="object"?s.cssVar:{}),typeof o.cssVar=="object"?o.cssVar:{}),{key:typeof o.cssVar=="object"&&((c=o.cssVar)===null||c===void 0?void 0:c.key)||d});return Object.assign(Object.assign(Object.assign({},s),o),{token:Object.assign(Object.assign({},s.token),o.token),components:u,cssVar:f})},[o,s],(l,c)=>l.some((u,d)=>{const f=c[d];return!yw(u,f,!0)}))}var j8=["children"],nU=b.createContext({});function W8(n){var e=n.children,r=Pn(n,j8);return b.createElement(nU.Provider,{value:r},e)}var q8=function(n){nc(r,n);var e=rc(r);function r(){return Gr(this,r),e.apply(this,arguments)}return Hr(r,[{key:"render",value:function(){return this.props.children}}]),r}(b.Component);function X8(n){var e=b.useReducer(function(l){return l+1},0),r=Ce(e,2),i=r[1],o=b.useRef(n),s=br(function(){return o.current}),a=br(function(l){o.current=typeof l=="function"?l(o.current):l,i()});return[s,a]}var vl="none",Lg="appear",Fg="enter",Ug="leave",f2="none",os="prepare",_d="start",xd="active",pT="end",rU="prepared";function h2(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit".concat(n)]="webkit".concat(e),r["Moz".concat(n)]="moz".concat(e),r["ms".concat(n)]="MS".concat(e),r["O".concat(n)]="o".concat(e.toLowerCase()),r}function K8(n,e){var r={animationend:h2("Animation","AnimationEnd"),transitionend:h2("Transition","TransitionEnd")};return n&&("AnimationEvent"in e||delete r.animationend.animation,"TransitionEvent"in e||delete r.transitionend.transition),r}var Y8=K8(pi(),typeof window<"u"?window:{}),iU={};if(pi()){var Q8=document.createElement("div");iU=Q8.style}var Bg={};function oU(n){if(Bg[n])return Bg[n];var e=Y8[n];if(e)for(var r=Object.keys(e),i=r.length,o=0;o<i;o+=1){var s=r[o];if(Object.prototype.hasOwnProperty.call(e,s)&&s in iU)return Bg[n]=e[s],Bg[n]}return""}var sU=oU("animationend"),aU=oU("transitionend"),lU=!!(sU&&aU),p2=sU||"animationend",m2=aU||"transitionend";function g2(n,e){if(!n)return null;if(Ot(n)==="object"){var r=e.replace(/-\w/g,function(i){return i[1].toUpperCase()});return n[r]}return"".concat(n,"-").concat(e)}const Z8=function(n){var e=b.useRef();function r(o){o&&(o.removeEventListener(m2,n),o.removeEventListener(p2,n))}function i(o){e.current&&e.current!==o&&r(e.current),o&&o!==e.current&&(o.addEventListener(m2,n),o.addEventListener(p2,n),e.current=o)}return b.useEffect(function(){return function(){r(e.current)}},[]),[i,r]};var cU=pi()?b.useLayoutEffect:b.useEffect;const J8=function(){var n=b.useRef(null);function e(){pr.cancel(n.current)}function r(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=pr(function(){o<=1?i({isCanceled:function(){return s!==n.current}}):r(i,o-1)});n.current=s}return b.useEffect(function(){return function(){e()}},[]),[r,e]};var ej=[os,_d,xd,pT],tj=[os,rU],uU=!1,nj=!0;function dU(n){return n===xd||n===pT}const rj=function(n,e,r){var i=rf(f2),o=Ce(i,2),s=o[0],a=o[1],l=J8(),c=Ce(l,2),u=c[0],d=c[1];function f(){a(os,!0)}var h=e?tj:ej;return cU(function(){if(s!==f2&&s!==pT){var p=h.indexOf(s),g=h[p+1],y=r(s);y===uU?a(g,!0):g&&u(function(v){function m(){v.isCanceled()||a(g,!0)}y===!0?m():Promise.resolve(y).then(m)})}},[n,s]),b.useEffect(function(){return function(){d()}},[]),[f,s]};function ij(n,e,r,i){var o=i.motionEnter,s=o===void 0?!0:o,a=i.motionAppear,l=a===void 0?!0:a,c=i.motionLeave,u=c===void 0?!0:c,d=i.motionDeadline,f=i.motionLeaveImmediately,h=i.onAppearPrepare,p=i.onEnterPrepare,g=i.onLeavePrepare,y=i.onAppearStart,v=i.onEnterStart,m=i.onLeaveStart,_=i.onAppearActive,x=i.onEnterActive,S=i.onLeaveActive,w=i.onAppearEnd,E=i.onEnterEnd,C=i.onLeaveEnd,T=i.onVisibleChanged,M=rf(),R=Ce(M,2),P=R[0],D=R[1],F=X8(vl),A=Ce(F,2),I=A[0],N=A[1],L=rf(null),O=Ce(L,2),V=O[0],B=O[1],z=I(),W=b.useRef(!1),ie=b.useRef(null);function k(){return r()}var j=b.useRef(!1);function Q(){N(vl),B(null,!0)}var Y=br(function(H){var U=I();if(U!==vl){var X=k();if(!(H&&!H.deadline&&H.target!==X)){var oe=j.current,pe;U===Lg&&oe?pe=w==null?void 0:w(X,H):U===Fg&&oe?pe=E==null?void 0:E(X,H):U===Ug&&oe&&(pe=C==null?void 0:C(X,H)),oe&&pe!==!1&&Q()}}}),ne=Z8(Y),ye=Ce(ne,1),me=ye[0],fe=function(U){switch(U){case Lg:return ee(ee(ee({},os,h),_d,y),xd,_);case Fg:return ee(ee(ee({},os,p),_d,v),xd,x);case Ug:return ee(ee(ee({},os,g),_d,m),xd,S);default:return{}}},ae=b.useMemo(function(){return fe(z)},[z]),ve=rj(z,!n,function(H){if(H===os){var U=ae[os];return U?U(k()):uU}if(xe in ae){var X;B(((X=ae[xe])===null||X===void 0?void 0:X.call(ae,k(),null))||null)}return xe===xd&&z!==vl&&(me(k()),d>0&&(clearTimeout(ie.current),ie.current=setTimeout(function(){Y({deadline:!0})},d))),xe===rU&&Q(),nj}),q=Ce(ve,2),ge=q[0],xe=q[1],_e=dU(xe);j.current=_e;var Se=b.useRef(null);cU(function(){if(!(W.current&&Se.current===e)){D(e);var H=W.current;W.current=!0;var U;!H&&e&&l&&(U=Lg),H&&e&&s&&(U=Fg),(H&&!e&&u||!H&&f&&!e&&u)&&(U=Ug);var X=fe(U);U&&(n||X[os])?(N(U),ge()):N(vl),Se.current=e}},[e]),b.useEffect(function(){(z===Lg&&!l||z===Fg&&!s||z===Ug&&!u)&&N(vl)},[l,s,u]),b.useEffect(function(){return function(){W.current=!1,clearTimeout(ie.current)}},[]);var Ke=b.useRef(!1);b.useEffect(function(){P&&(Ke.current=!0),P!==void 0&&z===vl&&((Ke.current||P)&&(T==null||T(P)),Ke.current=!0)},[P,z]);var Ue=V;return ae[os]&&xe===_d&&(Ue=re({transition:"none"},Ue)),[z,xe,Ue,P??e]}function oj(n){var e=n;Ot(n)==="object"&&(e=n.transitionSupport);function r(o,s){return!!(o.motionName&&e&&s!==!1)}var i=b.forwardRef(function(o,s){var a=o.visible,l=a===void 0?!0:a,c=o.removeOnLeave,u=c===void 0?!0:c,d=o.forceRender,f=o.children,h=o.motionName,p=o.leavedClassName,g=o.eventProps,y=b.useContext(nU),v=y.motion,m=r(o,v),_=b.useRef(),x=b.useRef();function S(){try{return _.current instanceof HTMLElement?_.current:hp(x.current)}catch{return null}}var w=ij(m,l,S,o),E=Ce(w,4),C=E[0],T=E[1],M=E[2],R=E[3],P=b.useRef(R);R&&(P.current=!0);var D=b.useCallback(function(O){_.current=O,nT(s,O)},[s]),F,A=re(re({},g),{},{visible:l});if(!f)F=null;else if(C===vl)R?F=f(re({},A),D):!u&&P.current&&p?F=f(re(re({},A),{},{className:p}),D):d||!u&&!p?F=f(re(re({},A),{},{style:{display:"none"}}),D):F=null;else{var I;T===os?I="prepare":dU(T)?I="active":T===_d&&(I="start");var N=g2(h,"".concat(C,"-").concat(I));F=f(re(re({},A),{},{className:we(g2(h,C),ee(ee({},N,N&&I),h,typeof h=="string")),style:M}),D)}if(b.isValidElement(F)&&$m(F)){var L=m_(F);L||(F=b.cloneElement(F,{ref:D}))}return b.createElement(q8,{ref:x},F)});return i.displayName="CSSMotion",i}const xu=oj(lU);var zw="add",kw="keep",Vw="remove",sb="removed";function sj(n){var e;return n&&Ot(n)==="object"&&"key"in n?e=n:e={key:n},re(re({},e),{},{key:String(e.key)})}function Gw(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(sj)}function aj(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],i=0,o=e.length,s=Gw(n),a=Gw(e);s.forEach(function(u){for(var d=!1,f=i;f<o;f+=1){var h=a[f];if(h.key===u.key){i<f&&(r=r.concat(a.slice(i,f).map(function(p){return re(re({},p),{},{status:zw})})),i=f),r.push(re(re({},h),{},{status:kw})),i+=1,d=!0;break}}d||r.push(re(re({},u),{},{status:Vw}))}),i<o&&(r=r.concat(a.slice(i).map(function(u){return re(re({},u),{},{status:zw})})));var l={};r.forEach(function(u){var d=u.key;l[d]=(l[d]||0)+1});var c=Object.keys(l).filter(function(u){return l[u]>1});return c.forEach(function(u){r=r.filter(function(d){var f=d.key,h=d.status;return f!==u||h!==Vw}),r.forEach(function(d){d.key===u&&(d.status=kw)})}),r}var lj=["component","children","onVisibleChanged","onAllRemoved"],cj=["status"],uj=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function dj(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xu,r=function(i){nc(s,i);var o=rc(s);function s(){var a;Gr(this,s);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=o.call.apply(o,[this].concat(c)),ee(nn(a),"state",{keyEntities:[]}),ee(nn(a),"removeKey",function(d){a.setState(function(f){var h=f.keyEntities.map(function(p){return p.key!==d?p:re(re({},p),{},{status:sb})});return{keyEntities:h}},function(){var f=a.state.keyEntities,h=f.filter(function(p){var g=p.status;return g!==sb}).length;h===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return Hr(s,[{key:"render",value:function(){var l=this,c=this.state.keyEntities,u=this.props,d=u.component,f=u.children,h=u.onVisibleChanged;u.onAllRemoved;var p=Pn(u,lj),g=d||b.Fragment,y={};return uj.forEach(function(v){y[v]=p[v],delete p[v]}),delete p.keys,b.createElement(g,p,c.map(function(v,m){var _=v.status,x=Pn(v,cj),S=_===zw||_===kw;return b.createElement(e,pt({},y,{key:x.key,visible:S,eventProps:x,onVisibleChanged:function(E){h==null||h(E,{key:x.key}),E||l.removeKey(x.key)}}),function(w,E){return f(re(re({},w),{},{index:m}),E)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,c){var u=l.keys,d=c.keyEntities,f=Gw(u),h=aj(d,f);return{keyEntities:h.filter(function(p){var g=d.find(function(y){var v=y.key;return p.key===v});return!(g&&g.status===sb&&p.status===Vw)})}}}]),s}(b.Component);return ee(r,"defaultProps",{component:"div"}),r}dj(lU);function fj(n){const{children:e}=n,[,r]=eo(),{motion:i}=r,o=b.useRef(!1);return o.current=o.current||i===!1,o.current?b.createElement(W8,{motion:i},e):e}const hj=()=>null;var pj=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const mj=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let Z0,fU,hU,pU;function l0(){return Z0||Q0}function gj(){return fU||b_}function vj(n){return Object.keys(n).some(e=>e.endsWith("Color"))}const yj=n=>{const{prefixCls:e,iconPrefixCls:r,theme:i,holderRender:o}=n;e!==void 0&&(Z0=e),r!==void 0&&(fU=r),"holderRender"in n&&(pU=o),i&&(vj(i)?v8(l0(),i):hU=i)},_j=()=>({getPrefixCls:(n,e)=>e||(n?`${l0()}-${n}`:l0()),getIconPrefixCls:gj,getRootPrefixCls:()=>Z0||l0(),getTheme:()=>hU,holderRender:pU}),xj=n=>{const{children:e,csp:r,autoInsertSpaceInButton:i,alert:o,anchor:s,form:a,locale:l,componentSize:c,direction:u,space:d,splitter:f,virtual:h,dropdownMatchSelectWidth:p,popupMatchSelectWidth:g,popupOverflow:y,legacyLocale:v,parentContext:m,iconPrefixCls:_,theme:x,componentDisabled:S,segmented:w,statistic:E,spin:C,calendar:T,carousel:M,cascader:R,collapse:P,typography:D,checkbox:F,descriptions:A,divider:I,drawer:N,skeleton:L,steps:O,image:V,layout:B,list:z,mentions:W,modal:ie,progress:k,result:j,slider:Q,breadcrumb:Y,menu:ne,pagination:ye,input:me,textArea:fe,empty:ae,badge:ve,radio:q,rate:ge,switch:xe,transfer:_e,avatar:Se,message:Ke,tag:Ue,table:H,card:U,tabs:X,timeline:oe,timePicker:pe,upload:ce,notification:Fe,tree:Re,colorPicker:Le,datePicker:Je,rangePicker:Me,flex:ze,wave:Ee,dropdown:Pe,warning:ke,tour:Ve,tooltip:$e,popover:_t,popconfirm:J,floatButtonGroup:Qe,variant:be,inputNumber:Oe,treeSelect:Ze}=n,We=b.useCallback((ut,bt)=>{const{prefixCls:It}=n;if(bt)return bt;const yn=It||m.getPrefixCls("");return ut?`${yn}-${ut}`:yn},[m.getPrefixCls,n.prefixCls]),wt=_||m.iconPrefixCls||b_,Mt=r||m.csp;z8(wt,Mt);const ct=H8(x,m.theme,{prefixCls:We("")}),qe={csp:Mt,autoInsertSpaceInButton:i,alert:o,anchor:s,locale:l||v,direction:u,space:d,splitter:f,virtual:h,popupMatchSelectWidth:g??p,popupOverflow:y,getPrefixCls:We,iconPrefixCls:wt,theme:ct,segmented:w,statistic:E,spin:C,calendar:T,carousel:M,cascader:R,collapse:P,typography:D,checkbox:F,descriptions:A,divider:I,drawer:N,skeleton:L,steps:O,image:V,input:me,textArea:fe,layout:B,list:z,mentions:W,modal:ie,progress:k,result:j,slider:Q,breadcrumb:Y,menu:ne,pagination:ye,empty:ae,badge:ve,radio:q,rate:ge,switch:xe,transfer:_e,avatar:Se,message:Ke,tag:Ue,table:H,card:U,tabs:X,timeline:oe,timePicker:pe,upload:ce,notification:Fe,tree:Re,colorPicker:Le,datePicker:Je,rangePicker:Me,flex:ze,wave:Ee,dropdown:Pe,warning:ke,tour:Ve,tooltip:$e,popover:_t,popconfirm:J,floatButtonGroup:Qe,variant:be,inputNumber:Oe,treeSelect:Ze},rt=Object.assign({},m);Object.keys(qe).forEach(ut=>{qe[ut]!==void 0&&(rt[ut]=qe[ut])}),mj.forEach(ut=>{const bt=n[ut];bt&&(rt[ut]=bt)}),typeof i<"u"&&(rt.button=Object.assign({autoInsertSpace:i},rt.button));const Lt=p_(()=>rt,rt,(ut,bt)=>{const It=Object.keys(ut),yn=Object.keys(bt);return It.length!==yn.length||It.some(un=>ut[un]!==bt[un])}),bn=b.useMemo(()=>({prefixCls:wt,csp:Mt}),[wt,Mt]);let Xe=b.createElement(b.Fragment,null,b.createElement(hj,{dropdownMatchSelectWidth:p}),e);const ot=b.useMemo(()=>{var ut,bt,It,yn;return yd(((ut=ou.Form)===null||ut===void 0?void 0:ut.defaultValidateMessages)||{},((It=(bt=Lt.locale)===null||bt===void 0?void 0:bt.Form)===null||It===void 0?void 0:It.defaultValidateMessages)||{},((yn=Lt.form)===null||yn===void 0?void 0:yn.validateMessages)||{},(a==null?void 0:a.validateMessages)||{})},[Lt,a==null?void 0:a.validateMessages]);Object.keys(ot).length>0&&(Xe=b.createElement(qH.Provider,{value:ot},Xe)),l&&(Xe=b.createElement(ZH,{locale:l,_ANT_MARK__:QH},Xe)),(wt||Mt)&&(Xe=b.createElement(dT.Provider,{value:bn},Xe)),c&&(Xe=b.createElement(y8,{size:c},Xe)),Xe=b.createElement(fj,null,Xe);const yt=b.useMemo(()=>{const ut=ct||{},{algorithm:bt,token:It,components:yn,cssVar:un}=ut,Un=pj(ut,["algorithm","token","components","cssVar"]),en=bt&&(!Array.isArray(bt)||bt.length>0)?xw(bt):H3,En={};Object.entries(yn||{}).forEach(kn=>{let[Ar,vt]=kn;const $=Object.assign({},vt);"algorithm"in $&&($.algorithm===!0?$.theme=en:(Array.isArray($.algorithm)||typeof $.algorithm=="function")&&($.theme=xw($.algorithm)),delete $.algorithm),En[Ar]=$});const ar=Object.assign(Object.assign({},Qp),It);return Object.assign(Object.assign({},Un),{theme:en,token:ar,components:En,override:Object.assign({override:ar},En),cssVar:un})},[ct]);return x&&(Xe=b.createElement(j3.Provider,{value:yt},Xe)),Lt.warning&&(Xe=b.createElement(WH.Provider,{value:Lt.warning},Xe)),S!==void 0&&(Xe=b.createElement(W3,{disabled:S},Xe)),b.createElement(Yt.Provider,{value:Lt},Xe)},oc=n=>{const e=b.useContext(Yt),r=b.useContext(fT);return b.createElement(xj,Object.assign({parentContext:e,legacyLocale:r},n))};oc.ConfigContext=Yt;oc.SizeContext=nf;oc.config=yj;oc.useConfig=_8;Object.defineProperty(oc,"SizeContext",{get:()=>nf});var bj={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function mU(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}function Sj(n){return mU(n)instanceof ShadowRoot}function J0(n){return Sj(n)?mU(n):null}function wj(n){return n.replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function Ej(n,e){Yi(n,"[@ant-design/icons] ".concat(e))}function v2(n){return Ot(n)==="object"&&typeof n.name=="string"&&typeof n.theme=="string"&&(Ot(n.icon)==="object"||typeof n.icon=="function")}function y2(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(n).reduce(function(e,r){var i=n[r];switch(r){case"class":e.className=i,delete e.class;break;default:delete e[r],e[wj(r)]=i}return e},{})}function Hw(n,e,r){return r?de.createElement(n.tag,re(re({key:e},y2(n.attrs)),r),(n.children||[]).map(function(i,o){return Hw(i,"".concat(e,"-").concat(n.tag,"-").concat(o))})):de.createElement(n.tag,re({key:e},y2(n.attrs)),(n.children||[]).map(function(i,o){return Hw(i,"".concat(e,"-").concat(n.tag,"-").concat(o))}))}function gU(n){return Yp(n)[0]}function vU(n){return n?Array.isArray(n)?n:[n]:[]}var Cj=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Tj=function(e){var r=b.useContext(dT),i=r.csp,o=r.prefixCls,s=Cj;o&&(s=s.replace(/anticon/g,o)),b.useEffect(function(){var a=e.current,l=J0(a);Na(s,"@ant-design-icons",{prepend:!0,csp:i,attachTo:l})},[])},Mj=["icon","className","onClick","style","primaryColor","secondaryColor"],mp={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Rj(n){var e=n.primaryColor,r=n.secondaryColor;mp.primaryColor=e,mp.secondaryColor=r||gU(e),mp.calculated=!!r}function Aj(){return re({},mp)}var $f=function(e){var r=e.icon,i=e.className,o=e.onClick,s=e.style,a=e.primaryColor,l=e.secondaryColor,c=Pn(e,Mj),u=b.useRef(),d=mp;if(a&&(d={primaryColor:a,secondaryColor:l||gU(a)}),Tj(u),Ej(v2(r),"icon should be icon definiton, but got ".concat(r)),!v2(r))return null;var f=r;return f&&typeof f.icon=="function"&&(f=re(re({},f),{},{icon:f.icon(d.primaryColor,d.secondaryColor)})),Hw(f.icon,"svg-".concat(f.name),re(re({className:i,onClick:o,style:s,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c),{},{ref:u}))};$f.displayName="IconReact";$f.getTwoToneColors=Aj;$f.setTwoToneColors=Rj;function yU(n){var e=vU(n),r=Ce(e,2),i=r[0],o=r[1];return $f.setTwoToneColors({primaryColor:i,secondaryColor:o})}function Nj(){var n=$f.getTwoToneColors();return n.calculated?[n.primaryColor,n.secondaryColor]:n.primaryColor}var Pj=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];yU(Y0.primary);var gr=b.forwardRef(function(n,e){var r=n.className,i=n.icon,o=n.spin,s=n.rotate,a=n.tabIndex,l=n.onClick,c=n.twoToneColor,u=Pn(n,Pj),d=b.useContext(dT),f=d.prefixCls,h=f===void 0?"anticon":f,p=d.rootClassName,g=we(p,h,ee(ee({},"".concat(h,"-").concat(i.name),!!i.name),"".concat(h,"-spin"),!!o||i.name==="loading"),r),y=a;y===void 0&&l&&(y=-1);var v=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,m=vU(c),_=Ce(m,2),x=_[0],S=_[1];return b.createElement("span",pt({role:"img","aria-label":i.name},u,{ref:e,tabIndex:y,onClick:l,className:g}),b.createElement($f,{icon:i,primaryColor:x,secondaryColor:S,style:v}))});gr.displayName="AntdIcon";gr.getTwoToneColor=Nj;gr.setTwoToneColor=yU;var Oj=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:bj}))},Ij=b.forwardRef(Oj),Dj={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},Lj=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:Dj}))},mT=b.forwardRef(Lj),Fj={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},Uj=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:Fj}))},w_=b.forwardRef(Uj),Bj={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},$j=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:Bj}))},zj=b.forwardRef($j),kj={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Vj=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:kj}))},Gj=b.forwardRef(Vj),Hj=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,jj=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,Wj="".concat(Hj," ").concat(jj).split(/[\s\n]+/),qj="aria-",Xj="data-";function _2(n,e){return n.indexOf(e)===0}function ka(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;e===!1?r={aria:!0,data:!0,attr:!0}:e===!0?r={aria:!0}:r=re({},e);var i={};return Object.keys(n).forEach(function(o){(r.aria&&(o==="role"||_2(o,qj))||r.data&&_2(o,Xj)||r.attr&&Wj.includes(o))&&(i[o]=n[o])}),i}function _U(n){return n&&de.isValidElement(n)&&n.type===de.Fragment}const Kj=(n,e,r)=>de.isValidElement(n)?de.cloneElement(n,typeof r=="function"?r(n.props||{}):r):e;function Xl(n,e){return Kj(n,n,e)}const zf=n=>{const[,,,,e]=eo();return e?`${n}-css-var`:""};var He={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var r=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||r>=He.F1&&r<=He.F12)return!1;switch(r){case He.ALT:case He.CAPS_LOCK:case He.CONTEXT_MENU:case He.CTRL:case He.DOWN:case He.END:case He.ESC:case He.HOME:case He.INSERT:case He.LEFT:case He.MAC_FF_META:case He.META:case He.NUMLOCK:case He.NUM_CENTER:case He.PAGE_DOWN:case He.PAGE_UP:case He.PAUSE:case He.PRINT_SCREEN:case He.RIGHT:case He.SHIFT:case He.UP:case He.WIN_KEY:case He.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=He.ZERO&&e<=He.NINE||e>=He.NUM_ZERO&&e<=He.NUM_MULTIPLY||e>=He.A&&e<=He.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case He.SPACE:case He.QUESTION_MARK:case He.NUM_PLUS:case He.NUM_MINUS:case He.NUM_PERIOD:case He.NUM_DIVISION:case He.SEMICOLON:case He.DASH:case He.EQUALS:case He.COMMA:case He.PERIOD:case He.SLASH:case He.APOSTROPHE:case He.SINGLE_QUOTE:case He.OPEN_SQUARE_BRACKET:case He.BACKSLASH:case He.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Yj={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},Qj=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:Yj}))},E_=b.forwardRef(Qj);const gT=de.createContext(void 0),yl=100,Zj=10,Jj=yl*Zj,xU={Modal:yl,Drawer:yl,Popover:yl,Popconfirm:yl,Tooltip:yl,Tour:yl,FloatButton:yl},eW={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function tW(n){return n in xU}const vT=(n,e)=>{const[,r]=eo(),i=de.useContext(gT),o=tW(n);let s;if(e!==void 0)s=[e,e];else{let a=i??0;o?a+=(i?0:r.zIndexPopupBase)+xU[n]:a+=eW[n],s=[i===void 0?e:a,a]}return s};function nW(){const[n,e]=b.useState([]),r=b.useCallback(i=>(e(o=>[].concat(ht(o),[i])),()=>{e(o=>o.filter(s=>s!==i))}),[]);return[n,r]}function Ri(){Ri=function(){return e};var n,e={},r=Object.prototype,i=r.hasOwnProperty,o=Object.defineProperty||function(N,L,O){N[L]=O.value},s=typeof Symbol=="function"?Symbol:{},a=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function u(N,L,O){return Object.defineProperty(N,L,{value:O,enumerable:!0,configurable:!0,writable:!0}),N[L]}try{u({},"")}catch{u=function(O,V,B){return O[V]=B}}function d(N,L,O,V){var B=L&&L.prototype instanceof m?L:m,z=Object.create(B.prototype),W=new A(V||[]);return o(z,"_invoke",{value:R(N,O,W)}),z}function f(N,L,O){try{return{type:"normal",arg:N.call(L,O)}}catch(V){return{type:"throw",arg:V}}}e.wrap=d;var h="suspendedStart",p="suspendedYield",g="executing",y="completed",v={};function m(){}function _(){}function x(){}var S={};u(S,a,function(){return this});var w=Object.getPrototypeOf,E=w&&w(w(I([])));E&&E!==r&&i.call(E,a)&&(S=E);var C=x.prototype=m.prototype=Object.create(S);function T(N){["next","throw","return"].forEach(function(L){u(N,L,function(O){return this._invoke(L,O)})})}function M(N,L){function O(B,z,W,ie){var k=f(N[B],N,z);if(k.type!=="throw"){var j=k.arg,Q=j.value;return Q&&Ot(Q)=="object"&&i.call(Q,"__await")?L.resolve(Q.__await).then(function(Y){O("next",Y,W,ie)},function(Y){O("throw",Y,W,ie)}):L.resolve(Q).then(function(Y){j.value=Y,W(j)},function(Y){return O("throw",Y,W,ie)})}ie(k.arg)}var V;o(this,"_invoke",{value:function(z,W){function ie(){return new L(function(k,j){O(z,W,k,j)})}return V=V?V.then(ie,ie):ie()}})}function R(N,L,O){var V=h;return function(B,z){if(V===g)throw Error("Generator is already running");if(V===y){if(B==="throw")throw z;return{value:n,done:!0}}for(O.method=B,O.arg=z;;){var W=O.delegate;if(W){var ie=P(W,O);if(ie){if(ie===v)continue;return ie}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(V===h)throw V=y,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);V=g;var k=f(N,L,O);if(k.type==="normal"){if(V=O.done?y:p,k.arg===v)continue;return{value:k.arg,done:O.done}}k.type==="throw"&&(V=y,O.method="throw",O.arg=k.arg)}}}function P(N,L){var O=L.method,V=N.iterator[O];if(V===n)return L.delegate=null,O==="throw"&&N.iterator.return&&(L.method="return",L.arg=n,P(N,L),L.method==="throw")||O!=="return"&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+O+"' method")),v;var B=f(V,N.iterator,L.arg);if(B.type==="throw")return L.method="throw",L.arg=B.arg,L.delegate=null,v;var z=B.arg;return z?z.done?(L[N.resultName]=z.value,L.next=N.nextLoc,L.method!=="return"&&(L.method="next",L.arg=n),L.delegate=null,v):z:(L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,v)}function D(N){var L={tryLoc:N[0]};1 in N&&(L.catchLoc=N[1]),2 in N&&(L.finallyLoc=N[2],L.afterLoc=N[3]),this.tryEntries.push(L)}function F(N){var L=N.completion||{};L.type="normal",delete L.arg,N.completion=L}function A(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(D,this),this.reset(!0)}function I(N){if(N||N===""){var L=N[a];if(L)return L.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var O=-1,V=function B(){for(;++O<N.length;)if(i.call(N,O))return B.value=N[O],B.done=!1,B;return B.value=n,B.done=!0,B};return V.next=V}}throw new TypeError(Ot(N)+" is not iterable")}return _.prototype=x,o(C,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:_,configurable:!0}),_.displayName=u(x,c,"GeneratorFunction"),e.isGeneratorFunction=function(N){var L=typeof N=="function"&&N.constructor;return!!L&&(L===_||(L.displayName||L.name)==="GeneratorFunction")},e.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,x):(N.__proto__=x,u(N,c,"GeneratorFunction")),N.prototype=Object.create(C),N},e.awrap=function(N){return{__await:N}},T(M.prototype),u(M.prototype,l,function(){return this}),e.AsyncIterator=M,e.async=function(N,L,O,V,B){B===void 0&&(B=Promise);var z=new M(d(N,L,O,V),B);return e.isGeneratorFunction(L)?z:z.next().then(function(W){return W.done?W.value:z.next()})},T(C),u(C,c,"Generator"),u(C,a,function(){return this}),u(C,"toString",function(){return"[object Generator]"}),e.keys=function(N){var L=Object(N),O=[];for(var V in L)O.push(V);return O.reverse(),function B(){for(;O.length;){var z=O.pop();if(z in L)return B.value=z,B.done=!1,B}return B.done=!0,B}},e.values=I,A.prototype={constructor:A,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(F),!L)for(var O in this)O.charAt(0)==="t"&&i.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=n)},stop:function(){this.done=!0;var L=this.tryEntries[0].completion;if(L.type==="throw")throw L.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var O=this;function V(j,Q){return W.type="throw",W.arg=L,O.next=j,Q&&(O.method="next",O.arg=n),!!Q}for(var B=this.tryEntries.length-1;B>=0;--B){var z=this.tryEntries[B],W=z.completion;if(z.tryLoc==="root")return V("end");if(z.tryLoc<=this.prev){var ie=i.call(z,"catchLoc"),k=i.call(z,"finallyLoc");if(ie&&k){if(this.prev<z.catchLoc)return V(z.catchLoc,!0);if(this.prev<z.finallyLoc)return V(z.finallyLoc)}else if(ie){if(this.prev<z.catchLoc)return V(z.catchLoc,!0)}else{if(!k)throw Error("try statement without catch or finally");if(this.prev<z.finallyLoc)return V(z.finallyLoc)}}}},abrupt:function(L,O){for(var V=this.tryEntries.length-1;V>=0;--V){var B=this.tryEntries[V];if(B.tryLoc<=this.prev&&i.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var z=B;break}}z&&(L==="break"||L==="continue")&&z.tryLoc<=O&&O<=z.finallyLoc&&(z=null);var W=z?z.completion:{};return W.type=L,W.arg=O,z?(this.method="next",this.next=z.finallyLoc,v):this.complete(W)},complete:function(L,O){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&O&&(this.next=O),v},finish:function(L){for(var O=this.tryEntries.length-1;O>=0;--O){var V=this.tryEntries[O];if(V.finallyLoc===L)return this.complete(V.completion,V.afterLoc),F(V),v}},catch:function(L){for(var O=this.tryEntries.length-1;O>=0;--O){var V=this.tryEntries[O];if(V.tryLoc===L){var B=V.completion;if(B.type==="throw"){var z=B.arg;F(V)}return z}}throw Error("illegal catch attempt")},delegateYield:function(L,O,V){return this.delegate={iterator:I(L),resultName:O,nextLoc:V},this.method==="next"&&(this.arg=n),v}},e}function x2(n,e,r,i,o,s,a){try{var l=n[s](a),c=l.value}catch(u){return void r(u)}l.done?e(c):Promise.resolve(c).then(i,o)}function bu(n){return function(){var e=this,r=arguments;return new Promise(function(i,o){var s=n.apply(e,r);function a(c){x2(s,i,o,a,l,"next",c)}function l(c){x2(s,i,o,a,l,"throw",c)}a(void 0)})}}var km=re({},Q6),rW=km.version,ab=km.render,iW=km.unmountComponentAtNode,C_;try{var oW=Number((rW||"").split(".")[0]);oW>=18&&(C_=km.createRoot)}catch{}function b2(n){var e=km.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&Ot(e)==="object"&&(e.usingClientEntryPoint=n)}var ey="__rc_react_root__";function sW(n,e){b2(!0);var r=e[ey]||C_(e);b2(!1),r.render(n),e[ey]=r}function aW(n,e){ab==null||ab(n,e)}function lW(n,e){if(C_){sW(n,e);return}aW(n,e)}function cW(n){return jw.apply(this,arguments)}function jw(){return jw=bu(Ri().mark(function n(e){return Ri().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.resolve().then(function(){var o;(o=e[ey])===null||o===void 0||o.unmount(),delete e[ey]}));case 1:case"end":return i.stop()}},n)})),jw.apply(this,arguments)}function uW(n){iW(n)}function dW(n){return Ww.apply(this,arguments)}function Ww(){return Ww=bu(Ri().mark(function n(e){return Ri().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(C_===void 0){i.next=2;break}return i.abrupt("return",cW(e));case 2:uW(e);case 3:case"end":return i.stop()}},n)})),Ww.apply(this,arguments)}const fW=(n,e)=>(lW(n,e),()=>dW(e));let hW=fW;function bU(){return hW}const sf=(n,e,r)=>r!==void 0?r:`${n}-${e}`,SU=function(n){if(!n)return!1;if(n instanceof Element){if(n.offsetParent)return!0;if(n.getBBox){var e=n.getBBox(),r=e.width,i=e.height;if(r||i)return!0}if(n.getBoundingClientRect){var o=n.getBoundingClientRect(),s=o.width,a=o.height;if(s||a)return!0}}return!1},pW=n=>{const{componentCls:e,colorPrimary:r}=n;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${n.motionEaseOutCirc}`,`opacity 2s ${n.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${n.motionDurationSlow} ${n.motionEaseInOut}`,`opacity ${n.motionDurationSlow} ${n.motionEaseInOut}`].join(",")}}}}},mW=B8("Wave",n=>[pW(n)]),wU=`${Q0}-wave-target`;function lb(n){return n&&n!=="#fff"&&n!=="#ffffff"&&n!=="rgb(255, 255, 255)"&&n!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&n!=="transparent"}function gW(n){const{borderTopColor:e,borderColor:r,backgroundColor:i}=getComputedStyle(n);return lb(e)?e:lb(r)?r:lb(i)?i:null}function cb(n){return Number.isNaN(n)?0:n}const vW=n=>{const{className:e,target:r,component:i,registerUnmount:o}=n,s=b.useRef(null),a=b.useRef(null);b.useEffect(()=>{a.current=o()},[]);const[l,c]=b.useState(null),[u,d]=b.useState([]),[f,h]=b.useState(0),[p,g]=b.useState(0),[y,v]=b.useState(0),[m,_]=b.useState(0),[x,S]=b.useState(!1),w={left:f,top:p,width:y,height:m,borderRadius:u.map(T=>`${T}px`).join(" ")};l&&(w["--wave-color"]=l);function E(){const T=getComputedStyle(r);c(gW(r));const M=T.position==="static",{borderLeftWidth:R,borderTopWidth:P}=T;h(M?r.offsetLeft:cb(-parseFloat(R))),g(M?r.offsetTop:cb(-parseFloat(P))),v(r.offsetWidth),_(r.offsetHeight);const{borderTopLeftRadius:D,borderTopRightRadius:F,borderBottomLeftRadius:A,borderBottomRightRadius:I}=T;d([D,F,I,A].map(N=>cb(parseFloat(N))))}if(b.useEffect(()=>{if(r){const T=pr(()=>{E(),S(!0)});let M;return typeof ResizeObserver<"u"&&(M=new ResizeObserver(E),M.observe(r)),()=>{pr.cancel(T),M==null||M.disconnect()}}},[]),!x)return null;const C=(i==="Checkbox"||i==="Radio")&&(r==null?void 0:r.classList.contains(wU));return b.createElement(xu,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(T,M)=>{var R,P;if(M.deadline||M.propertyName==="opacity"){const D=(R=s.current)===null||R===void 0?void 0:R.parentElement;(P=a.current)===null||P===void 0||P.call(a).then(()=>{D==null||D.remove()})}return!1}},(T,M)=>{let{className:R}=T;return b.createElement("div",{ref:Js(s,M),className:we(e,R,{"wave-quick":C}),style:w})})},yW=(n,e)=>{var r;const{component:i}=e;if(i==="Checkbox"&&!(!((r=n.querySelector("input"))===null||r===void 0)&&r.checked))return;const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",n==null||n.insertBefore(o,n==null?void 0:n.firstChild);const s=bU();let a=null;function l(){return a}a=s(b.createElement(vW,Object.assign({},e,{target:n,registerUnmount:l})),o)},_W=(n,e,r)=>{const{wave:i}=b.useContext(Yt),[,o,s]=eo(),a=br(u=>{const d=n.current;if(i!=null&&i.disabled||!d)return;const f=d.querySelector(`.${wU}`)||d,{showEffect:h}=i||{};(h||yW)(f,{className:e,token:o,component:r,event:u,hashId:s})}),l=b.useRef(null);return u=>{pr.cancel(l.current),l.current=pr(()=>{a(u)})}},EU=n=>{const{children:e,disabled:r,component:i}=n,{getPrefixCls:o}=b.useContext(Yt),s=b.useRef(null),a=o("wave"),[,l]=mW(a),c=_W(s,we(a,l),i);if(de.useEffect(()=>{const d=s.current;if(!d||d.nodeType!==1||r)return;const f=h=>{!SU(h.target)||!d.getAttribute||d.getAttribute("disabled")||d.disabled||d.className.includes("disabled")||d.className.includes("-leave")||c(h)};return d.addEventListener("click",f,!0),()=>{d.removeEventListener("click",f,!0)}},[r]),!de.isValidElement(e))return e??null;const u=$m(e)?Js(m_(e),s):s;return Xl(e,{ref:u})},Ya=n=>{const e=de.useContext(nf);return de.useMemo(()=>n?typeof n=="string"?n??e:n instanceof Function?n(e):e:e,[n,e])},CU=b.createContext(null),T_=(n,e)=>{const r=b.useContext(CU),i=b.useMemo(()=>{if(!r)return"";const{compactDirection:o,isFirstItem:s,isLastItem:a}=r,l=o==="vertical"?"-vertical-":"-";return we(`${n}-compact${l}item`,{[`${n}-compact${l}first-item`]:s,[`${n}-compact${l}last-item`]:a,[`${n}-compact${l}item-rtl`]:e==="rtl"})},[n,e,r]);return{compactSize:r==null?void 0:r.compactSize,compactDirection:r==null?void 0:r.compactDirection,compactItemClassnames:i}},xW=n=>{let{children:e}=n;return b.createElement(CU.Provider,{value:null},e)};var bW=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const TU=b.createContext(void 0),SW=n=>{const{getPrefixCls:e,direction:r}=b.useContext(Yt),{prefixCls:i,size:o,className:s}=n,a=bW(n,["prefixCls","size","className"]),l=e("btn-group",i),[,,c]=eo();let u="";switch(o){case"large":u="lg";break;case"small":u="sm";break}const d=we(l,{[`${l}-${u}`]:u,[`${l}-rtl`]:r==="rtl"},s,c);return b.createElement(TU.Provider,{value:o},b.createElement("div",Object.assign({},a,{className:d})))},S2=/^[\u4E00-\u9FA5]{2}$/,qw=S2.test.bind(S2);function MU(n){return n==="danger"?{danger:!0}:{type:n}}function w2(n){return typeof n=="string"}function ub(n){return n==="text"||n==="link"}function wW(n,e){if(n==null)return;const r=e?" ":"";return typeof n!="string"&&typeof n!="number"&&w2(n.type)&&qw(n.props.children)?Xl(n,{children:n.props.children.split("").join(r)}):w2(n)?qw(n)?de.createElement("span",null,n.split("").join(r)):de.createElement("span",null,n):_U(n)?de.createElement("span",null,n):n}function EW(n,e){let r=!1;const i=[];return de.Children.forEach(n,o=>{const s=typeof o,a=s==="string"||s==="number";if(r&&a){const l=i.length-1,c=i[l];i[l]=`${c}${o}`}else i.push(o);r=a}),de.Children.map(i,o=>wW(o,e))}["default","primary","danger"].concat(ht(of));const Xw=b.forwardRef((n,e)=>{const{className:r,style:i,children:o,prefixCls:s}=n,a=we(`${s}-icon`,r);return de.createElement("span",{ref:e,className:a,style:i},o)}),E2=b.forwardRef((n,e)=>{const{prefixCls:r,className:i,style:o,iconClassName:s}=n,a=we(`${r}-loading-icon`,i);return de.createElement(Xw,{prefixCls:r,className:a,style:o,ref:e},de.createElement(E_,{className:s}))}),db=()=>({width:0,opacity:0,transform:"scale(0)"}),fb=n=>({width:n.scrollWidth,opacity:1,transform:"scale(1)"}),CW=n=>{const{prefixCls:e,loading:r,existIcon:i,className:o,style:s,mount:a}=n,l=!!r;return i?de.createElement(E2,{prefixCls:e,className:o,style:s}):de.createElement(xu,{visible:l,motionName:`${e}-loading-icon-motion`,motionAppear:!a,motionEnter:!a,motionLeave:!a,removeOnLeave:!0,onAppearStart:db,onAppearActive:fb,onEnterStart:db,onEnterActive:fb,onLeaveStart:fb,onLeaveActive:db},(c,u)=>{let{className:d,style:f}=c;const h=Object.assign(Object.assign({},s),f);return de.createElement(E2,{prefixCls:e,className:we(o,d),style:h,ref:u})})},C2=(n,e)=>({[`> span, > ${n}`]:{"&:not(:last-child)":{[`&, & > ${n}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${n}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}}),TW=n=>{const{componentCls:e,fontSize:r,lineWidth:i,groupBorderColor:o,colorErrorHover:s}=n;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:n.calc(i).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:r}},C2(`${e}-primary`,o),C2(`${e}-danger`,s)]}};var MW=["b"],RW=["v"],hb=function(e){return Math.round(Number(e||0))},AW=function(e){if(e instanceof Ln)return e;if(e&&Ot(e)==="object"&&"h"in e&&"b"in e){var r=e,i=r.b,o=Pn(r,MW);return re(re({},o),{},{v:i})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},Zp=function(n){nc(r,n);var e=rc(r);function r(i){return Gr(this,r),e.call(this,AW(i))}return Hr(r,[{key:"toHsbString",value:function(){var o=this.toHsb(),s=hb(o.s*100),a=hb(o.b*100),l=hb(o.h),c=o.a,u="hsb(".concat(l,", ").concat(s,"%, ").concat(a,"%)"),d="hsba(".concat(l,", ").concat(s,"%, ").concat(a,"%, ").concat(c.toFixed(c===0?0:2),")");return c===1?u:d}},{key:"toHsb",value:function(){var o=this.toHsv(),s=o.v,a=Pn(o,RW);return re(re({},a),{},{b:s,a:this.a})}}]),r}(Ln),NW=function(e){return e instanceof Zp?e:new Zp(e)};NW("#1677ff");const PW=(n,e)=>(n==null?void 0:n.replace(/[^\w/]/g,"").slice(0,e?8:6))||"",OW=(n,e)=>n?PW(n,e):"";let IW=function(){function n(e){Gr(this,n);var r;if(this.cleared=!1,e instanceof n){this.metaColor=e.metaColor.clone(),this.colors=(r=e.colors)===null||r===void 0?void 0:r.map(o=>({color:new n(o.color),percent:o.percent})),this.cleared=e.cleared;return}const i=Array.isArray(e);i&&e.length?(this.colors=e.map(o=>{let{color:s,percent:a}=o;return{color:new n(s),percent:a}}),this.metaColor=new Zp(this.colors[0].color.metaColor)):this.metaColor=new Zp(i?"":e),(!e||i&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return Hr(n,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return OW(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:r}=this;return r?`linear-gradient(90deg, ${r.map(o=>`${o.color.toRgbString()} ${o.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(r){return!r||this.isGradient()!==r.isGradient()?!1:this.isGradient()?this.colors.length===r.colors.length&&this.colors.every((i,o)=>{const s=r.colors[o];return i.percent===s.percent&&i.color.equals(s.color)}):this.toHexString()===r.toHexString()}}])}();var DW={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},LW=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:DW}))},T2=b.forwardRef(LW);const FW=n=>({animationDuration:n,animationFillMode:"both"}),UW=n=>({animationDuration:n,animationFillMode:"both"}),M_=function(n,e,r,i){const s=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${s}${n}-enter,
      ${s}${n}-appear
    `]:Object.assign(Object.assign({},FW(i)),{animationPlayState:"paused"}),[`${s}${n}-leave`]:Object.assign(Object.assign({},UW(i)),{animationPlayState:"paused"}),[`
      ${s}${n}-enter${n}-enter-active,
      ${s}${n}-appear${n}-appear-active
    `]:{animationName:e,animationPlayState:"running"},[`${s}${n}-leave${n}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},BW=new vn("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),$W=new vn("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),zW=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:r}=n,i=`${r}-fade`,o=e?"&":"";return[M_(i,BW,$W,n.motionDurationMid,e),{[`
        ${o}${i}-enter,
        ${o}${i}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${o}${i}-leave`]:{animationTimingFunction:"linear"}}]},kW=new vn("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),VW=new vn("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),GW=new vn("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),HW=new vn("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),jW=new vn("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),WW=new vn("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),qW=new vn("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),XW=new vn("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),KW={"move-up":{inKeyframes:qW,outKeyframes:XW},"move-down":{inKeyframes:kW,outKeyframes:VW},"move-left":{inKeyframes:GW,outKeyframes:HW},"move-right":{inKeyframes:jW,outKeyframes:WW}},M2=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:o,outKeyframes:s}=KW[e];return[M_(i,o,s,n.motionDurationMid),{[`
        ${i}-enter,
        ${i}-appear
      `]:{opacity:0,animationTimingFunction:n.motionEaseOutCirc},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInOutCirc}}]},RU=new vn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),AU=new vn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),NU=new vn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),PU=new vn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),YW=new vn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),QW=new vn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),ZW=new vn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),JW=new vn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),e9={"slide-up":{inKeyframes:RU,outKeyframes:AU},"slide-down":{inKeyframes:NU,outKeyframes:PU},"slide-left":{inKeyframes:YW,outKeyframes:QW},"slide-right":{inKeyframes:ZW,outKeyframes:JW}},R2=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:o,outKeyframes:s}=e9[e];return[M_(i,o,s,n.motionDurationMid),{[`
      ${i}-enter,
      ${i}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:n.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInQuint}}]},t9=new vn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),n9=new vn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),A2=new vn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),N2=new vn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),r9=new vn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),i9=new vn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),o9=new vn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),s9=new vn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),a9=new vn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),l9=new vn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),c9=new vn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),u9=new vn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),d9={zoom:{inKeyframes:t9,outKeyframes:n9},"zoom-big":{inKeyframes:A2,outKeyframes:N2},"zoom-big-fast":{inKeyframes:A2,outKeyframes:N2},"zoom-left":{inKeyframes:o9,outKeyframes:s9},"zoom-right":{inKeyframes:a9,outKeyframes:l9},"zoom-up":{inKeyframes:r9,outKeyframes:i9},"zoom-down":{inKeyframes:c9,outKeyframes:u9}},OU=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:o,outKeyframes:s}=d9[e];return[M_(i,o,s,e==="zoom-big-fast"?n.motionDurationFast:n.motionDurationMid),{[`
        ${i}-enter,
        ${i}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:n.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInOutCirc}}]},f9=(n,e)=>{const{r,g:i,b:o,a:s}=n.toRgb(),a=new Zp(n.toRgbString()).onBackground(e).toHsv();return s<=.5?a.v>.5:r*.299+i*.587+o*.114>192},IU=n=>{const{paddingInline:e,onlyIconSize:r}=n;return Xn(n,{buttonPaddingHorizontal:e,buttonPaddingVertical:0,buttonIconOnlyFontSize:r})},DU=n=>{var e,r,i,o,s,a;const l=(e=n.contentFontSize)!==null&&e!==void 0?e:n.fontSize,c=(r=n.contentFontSizeSM)!==null&&r!==void 0?r:n.fontSize,u=(i=n.contentFontSizeLG)!==null&&i!==void 0?i:n.fontSizeLG,d=(o=n.contentLineHeight)!==null&&o!==void 0?o:a0(l),f=(s=n.contentLineHeightSM)!==null&&s!==void 0?s:a0(c),h=(a=n.contentLineHeightLG)!==null&&a!==void 0?a:a0(u),p=f9(new IW(n.colorBgSolid),"#fff")?"#000":"#fff";return{fontWeight:400,defaultShadow:`0 ${n.controlOutlineWidth}px 0 ${n.controlTmpOutline}`,primaryShadow:`0 ${n.controlOutlineWidth}px 0 ${n.controlOutline}`,dangerShadow:`0 ${n.controlOutlineWidth}px 0 ${n.colorErrorOutline}`,primaryColor:n.colorTextLightSolid,dangerColor:n.colorTextLightSolid,borderColorDisabled:n.colorBorder,defaultGhostColor:n.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:n.colorBgContainer,paddingInline:n.paddingContentHorizontal-n.lineWidth,paddingInlineLG:n.paddingContentHorizontal-n.lineWidth,paddingInlineSM:8-n.lineWidth,onlyIconSize:n.fontSizeLG,onlyIconSizeSM:n.fontSizeLG-2,onlyIconSizeLG:n.fontSizeLG+2,groupBorderColor:n.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:n.colorText,textTextHoverColor:n.colorText,textTextActiveColor:n.colorText,textHoverBg:n.colorFillTertiary,defaultColor:n.colorText,defaultBg:n.colorBgContainer,defaultBorderColor:n.colorBorder,defaultBorderColorDisabled:n.colorBorder,defaultHoverBg:n.colorBgContainer,defaultHoverColor:n.colorPrimaryHover,defaultHoverBorderColor:n.colorPrimaryHover,defaultActiveBg:n.colorBgContainer,defaultActiveColor:n.colorPrimaryActive,defaultActiveBorderColor:n.colorPrimaryActive,solidTextColor:p,contentFontSize:l,contentFontSizeSM:c,contentFontSizeLG:u,contentLineHeight:d,contentLineHeightSM:f,contentLineHeightLG:h,paddingBlock:Math.max((n.controlHeight-l*d)/2-n.lineWidth,0),paddingBlockSM:Math.max((n.controlHeightSM-c*f)/2-n.lineWidth,0),paddingBlockLG:Math.max((n.controlHeightLG-u*h)/2-n.lineWidth,0)}},h9=n=>{const{componentCls:e,iconCls:r,fontWeight:i,opacityLoading:o,motionDurationSlow:s,motionEaseInOut:a,marginXS:l,calc:c}=n;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:n.marginXS,alignItems:"center",justifyContent:"center",fontWeight:i,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${De(n.lineWidth)} ${n.lineType} transparent`,cursor:"pointer",transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:n.colorText,"&:disabled > *":{pointerEvents:"none"},[`${e}-icon > svg`]:S_(),"> a":{color:"currentColor"},"&:not(:disabled)":zm(n),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${r})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${e}-icon-only`]:{paddingInline:0,[`&${e}-compact-item`]:{flex:"none"},[`&${e}-round`]:{width:"auto"}},[`&${e}-loading`]:{opacity:o,cursor:"default"},[`${e}-loading-icon`]:{transition:["width","opacity","margin"].map(u=>`${u} ${s} ${a}`).join(",")},[`&:not(${e}-icon-end)`]:{[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:c(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:c(l).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:c(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:c(l).mul(-1).equal()}}}}}},LU=(n,e,r)=>({[`&:not(:disabled):not(${n}-disabled)`]:{"&:hover":e,"&:active":r}}),p9=n=>({minWidth:n.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),m9=n=>({borderRadius:n.controlHeight,paddingInlineStart:n.calc(n.controlHeight).div(2).equal(),paddingInlineEnd:n.calc(n.controlHeight).div(2).equal()}),g9=n=>({cursor:"not-allowed",borderColor:n.borderColorDisabled,color:n.colorTextDisabled,background:n.colorBgContainerDisabled,boxShadow:"none"}),yT=(n,e,r,i,o,s,a,l)=>({[`&${n}-background-ghost`]:Object.assign(Object.assign({color:r||void 0,background:e,borderColor:i||void 0,boxShadow:"none"},LU(n,Object.assign({background:e},a),Object.assign({background:e},l))),{"&:disabled":{cursor:"not-allowed",color:o||void 0,borderColor:s||void 0}})}),v9=n=>({[`&:disabled, &${n.componentCls}-disabled`]:Object.assign({},g9(n))}),y9=n=>({[`&:disabled, &${n.componentCls}-disabled`]:{cursor:"not-allowed",color:n.colorTextDisabled}}),R_=(n,e,r,i)=>{const s=i&&["link","text"].includes(i)?y9:v9;return Object.assign(Object.assign({},s(n)),LU(n.componentCls,e,r))},A_=(n,e,r,i,o)=>({[`&${n.componentCls}-variant-solid`]:Object.assign({color:e,background:r},R_(n,i,o))}),N_=(n,e,r,i,o)=>({[`&${n.componentCls}-variant-outlined, &${n.componentCls}-variant-dashed`]:Object.assign({borderColor:e,background:r},R_(n,i,o))}),P_=n=>({[`&${n.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),O_=(n,e,r,i)=>({[`&${n.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:e},R_(n,r,i))}),Kl=(n,e,r,i,o)=>({[`&${n.componentCls}-variant-${r}`]:Object.assign({color:e,boxShadow:"none"},R_(n,i,o,r))}),_9=n=>{const{componentCls:e}=n;return of.reduce((r,i)=>{const o=n[`${i}6`],s=n[`${i}1`],a=n[`${i}5`],l=n[`${i}2`],c=n[`${i}3`],u=n[`${i}7`],d=`0 ${n.controlOutlineWidth} 0 ${n[`${i}1`]}`;return Object.assign(Object.assign({},r),{[`&${e}-color-${i}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:o,boxShadow:d},A_(n,n.colorTextLightSolid,o,{background:a},{background:u})),N_(n,o,n.colorBgContainer,{color:a,borderColor:a,background:n.colorBgContainer},{color:u,borderColor:u,background:n.colorBgContainer})),P_(n)),O_(n,s,{background:l},{background:c})),Kl(n,o,"link",{color:a},{color:u})),Kl(n,o,"text",{color:a,background:s},{color:u,background:c}))})},{})},x9=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.defaultColor,boxShadow:n.defaultShadow},A_(n,n.solidTextColor,n.colorBgSolid,{color:n.solidTextColor,background:n.colorBgSolidHover},{color:n.solidTextColor,background:n.colorBgSolidActive})),P_(n)),O_(n,n.colorFillTertiary,{background:n.colorFillSecondary},{background:n.colorFill})),Kl(n,n.textTextColor,"link",{color:n.colorLinkHover,background:n.linkHoverBg},{color:n.colorLinkActive})),yT(n.componentCls,n.ghostBg,n.defaultGhostColor,n.defaultGhostBorderColor,n.colorTextDisabled,n.colorBorder)),b9=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorPrimary,boxShadow:n.primaryShadow},N_(n,n.colorPrimary,n.colorBgContainer,{color:n.colorPrimaryTextHover,borderColor:n.colorPrimaryHover,background:n.colorBgContainer},{color:n.colorPrimaryTextActive,borderColor:n.colorPrimaryActive,background:n.colorBgContainer})),P_(n)),O_(n,n.colorPrimaryBg,{background:n.colorPrimaryBgHover},{background:n.colorPrimaryBorder})),Kl(n,n.colorLink,"text",{color:n.colorPrimaryTextHover,background:n.colorPrimaryBg},{color:n.colorPrimaryTextActive,background:n.colorPrimaryBorder})),yT(n.componentCls,n.ghostBg,n.colorPrimary,n.colorPrimary,n.colorTextDisabled,n.colorBorder,{color:n.colorPrimaryHover,borderColor:n.colorPrimaryHover},{color:n.colorPrimaryActive,borderColor:n.colorPrimaryActive})),S9=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorError,boxShadow:n.dangerShadow},A_(n,n.dangerColor,n.colorError,{background:n.colorErrorHover},{background:n.colorErrorActive})),N_(n,n.colorError,n.colorBgContainer,{color:n.colorErrorHover,borderColor:n.colorErrorBorderHover},{color:n.colorErrorActive,borderColor:n.colorErrorActive})),P_(n)),O_(n,n.colorErrorBg,{background:n.colorErrorBgFilledHover},{background:n.colorErrorBgActive})),Kl(n,n.colorError,"text",{color:n.colorErrorHover,background:n.colorErrorBg},{color:n.colorErrorHover,background:n.colorErrorBgActive})),Kl(n,n.colorError,"link",{color:n.colorErrorHover},{color:n.colorErrorActive})),yT(n.componentCls,n.ghostBg,n.colorError,n.colorError,n.colorTextDisabled,n.colorBorder,{color:n.colorErrorHover,borderColor:n.colorErrorHover},{color:n.colorErrorActive,borderColor:n.colorErrorActive})),w9=n=>{const{componentCls:e}=n;return Object.assign({[`${e}-color-default`]:x9(n),[`${e}-color-primary`]:b9(n),[`${e}-color-dangerous`]:S9(n)},_9(n))},E9=n=>Object.assign(Object.assign(Object.assign(Object.assign({},N_(n,n.defaultBorderColor,n.defaultBg,{color:n.defaultHoverColor,borderColor:n.defaultHoverBorderColor,background:n.defaultHoverBg},{color:n.defaultActiveColor,borderColor:n.defaultActiveBorderColor,background:n.defaultActiveBg})),Kl(n,n.textTextColor,"text",{color:n.textTextHoverColor,background:n.textHoverBg},{color:n.textTextActiveColor,background:n.colorBgTextActive})),A_(n,n.primaryColor,n.colorPrimary,{background:n.colorPrimaryHover,color:n.primaryColor},{background:n.colorPrimaryActive,color:n.primaryColor})),Kl(n,n.colorLink,"link",{color:n.colorLinkHover,background:n.linkHoverBg},{color:n.colorLinkActive})),_T=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,controlHeight:i,fontSize:o,borderRadius:s,buttonPaddingHorizontal:a,iconCls:l,buttonPaddingVertical:c,buttonIconOnlyFontSize:u}=n;return[{[e]:{fontSize:o,height:i,padding:`${De(c)} ${De(a)}`,borderRadius:s,[`&${r}-icon-only`]:{width:i,[l]:{fontSize:u,verticalAlign:"calc(-0.125em - 1px)"}}}},{[`${r}${r}-circle${e}`]:p9(n)},{[`${r}${r}-round${e}`]:m9(n)}]},C9=n=>{const e=Xn(n,{fontSize:n.contentFontSize});return _T(e,n.componentCls)},T9=n=>{const e=Xn(n,{controlHeight:n.controlHeightSM,fontSize:n.contentFontSizeSM,padding:n.paddingXS,buttonPaddingHorizontal:n.paddingInlineSM,buttonPaddingVertical:0,borderRadius:n.borderRadiusSM,buttonIconOnlyFontSize:n.onlyIconSizeSM});return _T(e,`${n.componentCls}-sm`)},M9=n=>{const e=Xn(n,{controlHeight:n.controlHeightLG,fontSize:n.contentFontSizeLG,buttonPaddingHorizontal:n.paddingInlineLG,buttonPaddingVertical:0,borderRadius:n.borderRadiusLG,buttonIconOnlyFontSize:n.onlyIconSizeLG});return _T(e,`${n.componentCls}-lg`)},R9=n=>{const{componentCls:e}=n;return{[e]:{[`&${e}-block`]:{width:"100%"}}}},A9=Ii("Button",n=>{const e=IU(n);return[h9(e),C9(e),T9(e),M9(e),R9(e),w9(e),E9(e),TW(e)]},DU,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function N9(n,e,r){const{focusElCls:i,focus:o,borderElCls:s}=r,a=s?"> *":"",l=["hover",o?"focus":null,"active"].filter(Boolean).map(c=>`&:${c} ${a}`).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[l]:{zIndex:2}},i?{[`&${i}`]:{zIndex:2}}:{}),{[`&[disabled] ${a}`]:{zIndex:0}})}}function P9(n,e,r){const{borderElCls:i}=r,o=i?`> ${i}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${o}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${o}, &${n}-sm ${o}, &${n}-lg ${o}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${o}, &${n}-sm ${o}, &${n}-lg ${o}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function xT(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=n,i=`${r}-compact`;return{[i]:Object.assign(Object.assign({},N9(n,i,e)),P9(r,i,e))}}function O9(n,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:n.calc(n.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function I9(n,e){return{[`&-item:not(${e}-first-item):not(${e}-last-item)`]:{borderRadius:0},[`&-item${e}-first-item:not(${e}-last-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${e}-last-item:not(${e}-first-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function D9(n){const e=`${n.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},O9(n,e)),I9(n.componentCls,e))}}const L9=n=>{const{componentCls:e,colorPrimaryHover:r,lineWidth:i,calc:o}=n,s=o(i).mul(-1).equal(),a=l=>({[`${e}-compact${l?"-vertical":""}-item${e}-primary:not([disabled])`]:{"& + &::before":{position:"absolute",top:l?s:0,insetInlineStart:l?0:s,backgroundColor:r,content:'""',width:l?"100%":i,height:l?i:"100%"}}});return Object.assign(Object.assign({},a()),a(!0))},F9=hT(["Button","compact"],n=>{const e=IU(n);return[xT(e),D9(e),L9(e)]},DU);var U9=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function B9(n){if(typeof n=="object"&&n){let e=n==null?void 0:n.delay;return e=!Number.isNaN(e)&&typeof e=="number"?e:0,{loading:e<=0,delay:e}}return{loading:!!n,delay:0}}const $9={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["primary","link"],text:["default","text"]},z9=de.forwardRef((n,e)=>{var r,i,o,s;const{loading:a=!1,prefixCls:l,color:c,variant:u,type:d,danger:f=!1,shape:h="default",size:p,styles:g,disabled:y,className:v,rootClassName:m,children:_,icon:x,iconPosition:S="start",ghost:w=!1,block:E=!1,htmlType:C="button",classNames:T,style:M={},autoInsertSpace:R,autoFocus:P}=n,D=U9(n,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),F=d||"default",[A,I]=b.useMemo(()=>{if(c&&u)return[c,u];const Ee=$9[F]||[];return f?["danger",Ee[1]]:Ee},[d,c,u,f]),L=A==="danger"?"dangerous":A,{getPrefixCls:O,direction:V,button:B}=b.useContext(Yt),z=(r=R??(B==null?void 0:B.autoInsertSpace))!==null&&r!==void 0?r:!0,W=O("btn",l),[ie,k,j]=A9(W),Q=b.useContext(za),Y=y??Q,ne=b.useContext(TU),ye=b.useMemo(()=>B9(a),[a]),[me,fe]=b.useState(ye.loading),[ae,ve]=b.useState(!1),q=b.useRef(null),ge=Uf(e,q),xe=b.Children.count(_)===1&&!x&&!ub(I),_e=b.useRef(!0);de.useEffect(()=>(_e.current=!1,()=>{_e.current=!0}),[]),b.useEffect(()=>{let Ee=null;ye.delay>0?Ee=setTimeout(()=>{Ee=null,fe(!0)},ye.delay):fe(ye.loading);function Pe(){Ee&&(clearTimeout(Ee),Ee=null)}return Pe},[ye]),b.useEffect(()=>{if(!q.current||!z)return;const Ee=q.current.textContent||"";xe&&qw(Ee)?ae||ve(!0):ae&&ve(!1)}),b.useEffect(()=>{P&&q.current&&q.current.focus()},[]);const Se=de.useCallback(Ee=>{var Pe;if(me||Y){Ee.preventDefault();return}(Pe=n.onClick)===null||Pe===void 0||Pe.call(n,Ee)},[n.onClick,me,Y]),{compactSize:Ke,compactItemClassnames:Ue}=T_(W,V),H={large:"lg",small:"sm",middle:void 0},U=Ya(Ee=>{var Pe,ke;return(ke=(Pe=p??Ke)!==null&&Pe!==void 0?Pe:ne)!==null&&ke!==void 0?ke:Ee}),X=U&&(i=H[U])!==null&&i!==void 0?i:"",oe=me?"loading":x,pe=ea(D,["navigate"]),ce=we(W,k,j,{[`${W}-${h}`]:h!=="default"&&h,[`${W}-${F}`]:F,[`${W}-dangerous`]:f,[`${W}-color-${L}`]:L,[`${W}-variant-${I}`]:I,[`${W}-${X}`]:X,[`${W}-icon-only`]:!_&&_!==0&&!!oe,[`${W}-background-ghost`]:w&&!ub(I),[`${W}-loading`]:me,[`${W}-two-chinese-chars`]:ae&&z&&!me,[`${W}-block`]:E,[`${W}-rtl`]:V==="rtl",[`${W}-icon-end`]:S==="end"},Ue,v,m,B==null?void 0:B.className),Fe=Object.assign(Object.assign({},B==null?void 0:B.style),M),Re=we(T==null?void 0:T.icon,(o=B==null?void 0:B.classNames)===null||o===void 0?void 0:o.icon),Le=Object.assign(Object.assign({},(g==null?void 0:g.icon)||{}),((s=B==null?void 0:B.styles)===null||s===void 0?void 0:s.icon)||{}),Je=x&&!me?de.createElement(Xw,{prefixCls:W,className:Re,style:Le},x):typeof a=="object"&&a.icon?de.createElement(Xw,{prefixCls:W,className:Re,style:Le},a.icon):de.createElement(CW,{existIcon:!!x,prefixCls:W,loading:me,mount:_e.current}),Me=_||_===0?EW(_,xe&&z):null;if(pe.href!==void 0)return ie(de.createElement("a",Object.assign({},pe,{className:we(ce,{[`${W}-disabled`]:Y}),href:Y?void 0:pe.href,style:Fe,onClick:Se,ref:ge,tabIndex:Y?-1:0}),Je,Me));let ze=de.createElement("button",Object.assign({},D,{type:C,className:ce,style:Fe,onClick:Se,disabled:Y,ref:ge}),Je,Me,Ue&&de.createElement(F9,{prefixCls:W}));return ub(I)||(ze=de.createElement(EU,{component:"Button",disabled:me},ze)),ie(ze)}),kf=z9;kf.Group=SW;kf.__ANT_BUTTON=!0;function pb(n){return!!(n!=null&&n.then)}const FU=n=>{const{type:e,children:r,prefixCls:i,buttonProps:o,close:s,autoFocus:a,emitEvent:l,isSilent:c,quitOnNullishReturnValue:u,actionFn:d}=n,f=b.useRef(!1),h=b.useRef(null),[p,g]=rf(!1),y=function(){s==null||s.apply(void 0,arguments)};b.useEffect(()=>{let _=null;return a&&(_=setTimeout(()=>{var x;(x=h.current)===null||x===void 0||x.focus({preventScroll:!0})})),()=>{_&&clearTimeout(_)}},[]);const v=_=>{pb(_)&&(g(!0),_.then(function(){g(!1,!0),y.apply(void 0,arguments),f.current=!1},x=>{if(g(!1,!0),f.current=!1,!(c!=null&&c()))return Promise.reject(x)}))},m=_=>{if(f.current)return;if(f.current=!0,!d){y();return}let x;if(l){if(x=d(_),u&&!pb(x)){f.current=!1,y(_);return}}else if(d.length)x=d(s),f.current=!1;else if(x=d(),!pb(x)){y();return}v(x)};return b.createElement(kf,Object.assign({},MU(e),{onClick:m,loading:p,prefixCls:i},o,{ref:h}),r)},Vm=de.createContext({}),{Provider:UU}=Vm,P2=()=>{const{autoFocusButton:n,cancelButtonProps:e,cancelTextLocale:r,isSilent:i,mergedOkCancel:o,rootPrefixCls:s,close:a,onCancel:l,onConfirm:c}=b.useContext(Vm);return o?de.createElement(FU,{isSilent:i,actionFn:l,close:function(){a==null||a.apply(void 0,arguments),c==null||c(!1)},autoFocus:n==="cancel",buttonProps:e,prefixCls:`${s}-btn`},r):null},O2=()=>{const{autoFocusButton:n,close:e,isSilent:r,okButtonProps:i,rootPrefixCls:o,okTextLocale:s,okType:a,onConfirm:l,onOk:c}=b.useContext(Vm);return de.createElement(FU,{isSilent:r,type:a||"primary",actionFn:c,close:function(){e==null||e.apply(void 0,arguments),l==null||l(!0)},autoFocus:n==="ok",buttonProps:i,prefixCls:`${o}-btn`},s)};var BU=b.createContext(null),I2=[];function k9(n,e){var r=b.useState(function(){if(!pi())return null;var g=document.createElement("div");return g}),i=Ce(r,1),o=i[0],s=b.useRef(!1),a=b.useContext(BU),l=b.useState(I2),c=Ce(l,2),u=c[0],d=c[1],f=a||(s.current?void 0:function(g){d(function(y){var v=[g].concat(ht(y));return v})});function h(){o.parentElement||document.body.appendChild(o),s.current=!0}function p(){var g;(g=o.parentElement)===null||g===void 0||g.removeChild(o),s.current=!1}return xn(function(){return n?a?a(h):h():p(),p},[n]),xn(function(){u.length&&(u.forEach(function(g){return g()}),d(I2))},[u]),[o,f]}function V9(n){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=e;var i=r.style;i.position="absolute",i.left="0",i.top="0",i.width="100px",i.height="100px",i.overflow="scroll";var o,s;if(n){var a=getComputedStyle(n);i.scrollbarColor=a.scrollbarColor,i.scrollbarWidth=a.scrollbarWidth;var l=getComputedStyle(n,"::-webkit-scrollbar"),c=parseInt(l.width,10),u=parseInt(l.height,10);try{var d=c?"width: ".concat(l.width,";"):"",f=u?"height: ".concat(l.height,";"):"";Na(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(d,`
`).concat(f,`
}`),e)}catch(g){console.error(g),o=c,s=u}}document.body.appendChild(r);var h=n&&o&&!isNaN(o)?o:r.offsetWidth-r.clientWidth,p=n&&s&&!isNaN(s)?s:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),qp(e),{width:h,height:p}}function G9(n){return typeof document>"u"||!n||!(n instanceof Element)?{width:0,height:0}:V9(n)}function H9(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var j9="rc-util-locker-".concat(Date.now()),D2=0;function W9(n){var e=!!n,r=b.useState(function(){return D2+=1,"".concat(j9,"_").concat(D2)}),i=Ce(r,1),o=i[0];xn(function(){if(e){var s=G9(document.body).width,a=H9();Na(`
html body {
  overflow-y: hidden;
  `.concat(a?"width: calc(100% - ".concat(s,"px);"):"",`
}`),o)}else qp(o);return function(){qp(o)}},[e,o])}var q9=!1;function X9(n){return q9}var L2=function(e){return e===!1?!1:!pi()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},bT=b.forwardRef(function(n,e){var r=n.open,i=n.autoLock,o=n.getContainer;n.debug;var s=n.autoDestroy,a=s===void 0?!0:s,l=n.children,c=b.useState(r),u=Ce(c,2),d=u[0],f=u[1],h=d||r;b.useEffect(function(){(a||r)&&f(r)},[r,a]);var p=b.useState(function(){return L2(o)}),g=Ce(p,2),y=g[0],v=g[1];b.useEffect(function(){var P=L2(o);v(P??null)});var m=k9(h&&!y),_=Ce(m,2),x=_[0],S=_[1],w=y??x;W9(i&&r&&pi()&&(w===x||w===document.body));var E=null;if(l&&$m(l)&&e){var C=l;E=C.ref}var T=Uf(E,e);if(!h||!pi()||y===void 0)return null;var M=w===!1||X9(),R=l;return e&&(R=b.cloneElement(l,{ref:T})),b.createElement(BU.Provider,{value:S},M?R:ru.createPortal(R,w))}),$U=b.createContext({});function K9(){var n=re({},Vy);return n.useId}var F2=0,U2=K9();const zU=U2?function(e){var r=U2();return e||r}:function(e){var r=b.useState("ssr-id"),i=Ce(r,2),o=i[0],s=i[1];return b.useEffect(function(){var a=F2;F2+=1,s("rc_unique_".concat(a))},[]),e||o};function B2(n,e,r){var i=e;return!i&&r&&(i="".concat(n,"-").concat(r)),i}function $2(n,e){var r=n["page".concat(e?"Y":"X","Offset")],i="scroll".concat(e?"Top":"Left");if(typeof r!="number"){var o=n.document;r=o.documentElement[i],typeof r!="number"&&(r=o.body[i])}return r}function Y9(n){var e=n.getBoundingClientRect(),r={left:e.left,top:e.top},i=n.ownerDocument,o=i.defaultView||i.parentWindow;return r.left+=$2(o),r.top+=$2(o,!0),r}const Q9=b.memo(function(n){var e=n.children;return e},function(n,e){var r=e.shouldUpdate;return!r});var Z9={width:0,height:0,overflow:"hidden",outline:"none"},J9={outline:"none"},kU=de.forwardRef(function(n,e){var r=n.prefixCls,i=n.className,o=n.style,s=n.title,a=n.ariaId,l=n.footer,c=n.closable,u=n.closeIcon,d=n.onClose,f=n.children,h=n.bodyStyle,p=n.bodyProps,g=n.modalRender,y=n.onMouseDown,v=n.onMouseUp,m=n.holderRef,_=n.visible,x=n.forceRender,S=n.width,w=n.height,E=n.classNames,C=n.styles,T=de.useContext($U),M=T.panel,R=Uf(m,M),P=b.useRef(),D=b.useRef();de.useImperativeHandle(e,function(){return{focus:function(){var W;(W=P.current)===null||W===void 0||W.focus({preventScroll:!0})},changeActive:function(W){var ie=document,k=ie.activeElement;W&&k===D.current?P.current.focus({preventScroll:!0}):!W&&k===P.current&&D.current.focus({preventScroll:!0})}}});var F={};S!==void 0&&(F.width=S),w!==void 0&&(F.height=w);var A=l?de.createElement("div",{className:we("".concat(r,"-footer"),E==null?void 0:E.footer),style:re({},C==null?void 0:C.footer)},l):null,I=s?de.createElement("div",{className:we("".concat(r,"-header"),E==null?void 0:E.header),style:re({},C==null?void 0:C.header)},de.createElement("div",{className:"".concat(r,"-title"),id:a},s)):null,N=b.useMemo(function(){return Ot(c)==="object"&&c!==null?c:c?{closeIcon:u??de.createElement("span",{className:"".concat(r,"-close-x")})}:{}},[c,u,r]),L=ka(N,!0),O=Ot(c)==="object"&&c.disabled,V=c?de.createElement("button",pt({type:"button",onClick:d,"aria-label":"Close"},L,{className:"".concat(r,"-close"),disabled:O}),N.closeIcon):null,B=de.createElement("div",{className:we("".concat(r,"-content"),E==null?void 0:E.content),style:C==null?void 0:C.content},V,I,de.createElement("div",pt({className:we("".concat(r,"-body"),E==null?void 0:E.body),style:re(re({},h),C==null?void 0:C.body)},p),f),A);return de.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":s?a:null,"aria-modal":"true",ref:R,style:re(re({},o),F),className:we(r,i),onMouseDown:y,onMouseUp:v},de.createElement("div",{ref:P,tabIndex:0,style:J9},de.createElement(Q9,{shouldUpdate:_||x},g?g(B):B)),de.createElement("div",{tabIndex:0,ref:D,style:Z9}))}),VU=b.forwardRef(function(n,e){var r=n.prefixCls,i=n.title,o=n.style,s=n.className,a=n.visible,l=n.forceRender,c=n.destroyOnClose,u=n.motionName,d=n.ariaId,f=n.onVisibleChanged,h=n.mousePosition,p=b.useRef(),g=b.useState(),y=Ce(g,2),v=y[0],m=y[1],_={};v&&(_.transformOrigin=v);function x(){var S=Y9(p.current);m(h&&(h.x||h.y)?"".concat(h.x-S.left,"px ").concat(h.y-S.top,"px"):"")}return b.createElement(xu,{visible:a,onVisibleChanged:f,onAppearPrepare:x,onEnterPrepare:x,forceRender:l,motionName:u,removeOnLeave:c,ref:p},function(S,w){var E=S.className,C=S.style;return b.createElement(kU,pt({},n,{ref:e,title:i,ariaId:d,prefixCls:r,holderRef:w,style:re(re(re({},C),o),_),className:we(s,E)}))})});VU.displayName="Content";var e7=function(e){var r=e.prefixCls,i=e.style,o=e.visible,s=e.maskProps,a=e.motionName,l=e.className;return b.createElement(xu,{key:"mask",visible:o,motionName:a,leavedClassName:"".concat(r,"-mask-hidden")},function(c,u){var d=c.className,f=c.style;return b.createElement("div",pt({ref:u,style:re(re({},f),i),className:we("".concat(r,"-mask"),d,l)},s))})},t7=function(e){var r=e.prefixCls,i=r===void 0?"rc-dialog":r,o=e.zIndex,s=e.visible,a=s===void 0?!1:s,l=e.keyboard,c=l===void 0?!0:l,u=e.focusTriggerAfterClose,d=u===void 0?!0:u,f=e.wrapStyle,h=e.wrapClassName,p=e.wrapProps,g=e.onClose,y=e.afterOpenChange,v=e.afterClose,m=e.transitionName,_=e.animation,x=e.closable,S=x===void 0?!0:x,w=e.mask,E=w===void 0?!0:w,C=e.maskTransitionName,T=e.maskAnimation,M=e.maskClosable,R=M===void 0?!0:M,P=e.maskStyle,D=e.maskProps,F=e.rootClassName,A=e.classNames,I=e.styles,N=b.useRef(),L=b.useRef(),O=b.useRef(),V=b.useState(a),B=Ce(V,2),z=B[0],W=B[1],ie=zU();function k(){gw(L.current,document.activeElement)||(N.current=document.activeElement)}function j(){if(!gw(L.current,document.activeElement)){var ge;(ge=O.current)===null||ge===void 0||ge.focus()}}function Q(ge){if(ge)j();else{if(W(!1),E&&N.current&&d){try{N.current.focus({preventScroll:!0})}catch{}N.current=null}z&&(v==null||v())}y==null||y(ge)}function Y(ge){g==null||g(ge)}var ne=b.useRef(!1),ye=b.useRef(),me=function(){clearTimeout(ye.current),ne.current=!0},fe=function(){ye.current=setTimeout(function(){ne.current=!1})},ae=null;R&&(ae=function(xe){ne.current?ne.current=!1:L.current===xe.target&&Y(xe)});function ve(ge){if(c&&ge.keyCode===He.ESC){ge.stopPropagation(),Y(ge);return}a&&ge.keyCode===He.TAB&&O.current.changeActive(!ge.shiftKey)}b.useEffect(function(){a&&(W(!0),k())},[a]),b.useEffect(function(){return function(){clearTimeout(ye.current)}},[]);var q=re(re(re({zIndex:o},f),I==null?void 0:I.wrapper),{},{display:z?null:"none"});return b.createElement("div",pt({className:we("".concat(i,"-root"),F)},ka(e,{data:!0})),b.createElement(e7,{prefixCls:i,visible:E&&a,motionName:B2(i,C,T),style:re(re({zIndex:o},P),I==null?void 0:I.mask),maskProps:D,className:A==null?void 0:A.mask}),b.createElement("div",pt({tabIndex:-1,onKeyDown:ve,className:we("".concat(i,"-wrap"),h,A==null?void 0:A.wrapper),ref:L,onClick:ae,style:q},p),b.createElement(VU,pt({},e,{onMouseDown:me,onMouseUp:fe,ref:O,closable:S,ariaId:ie,prefixCls:i,visible:a&&z,onClose:Y,onVisibleChanged:Q,motionName:B2(i,m,_)}))))},GU=function(e){var r=e.visible,i=e.getContainer,o=e.forceRender,s=e.destroyOnClose,a=s===void 0?!1:s,l=e.afterClose,c=e.panelRef,u=b.useState(r),d=Ce(u,2),f=d[0],h=d[1],p=b.useMemo(function(){return{panel:c}},[c]);return b.useEffect(function(){r&&h(!0)},[r]),!o&&a&&!f?null:b.createElement($U.Provider,{value:p},b.createElement(bT,{open:r||o||f,autoDestroy:!1,getContainer:i,autoLock:r||f},b.createElement(t7,pt({},e,{destroyOnClose:a,afterClose:function(){l==null||l(),h(!1)}}))))};GU.displayName="Dialog";var zc="RC_FORM_INTERNAL_HOOKS",In=function(){Yi(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},af=b.createContext({getFieldValue:In,getFieldsValue:In,getFieldError:In,getFieldWarning:In,getFieldsError:In,isFieldsTouched:In,isFieldTouched:In,isFieldValidating:In,isFieldsValidating:In,resetFields:In,setFields:In,setFieldValue:In,setFieldsValue:In,validateFields:In,submit:In,getInternalHooks:function(){return In(),{dispatch:In,initEntityValue:In,registerField:In,useSubscribe:In,setInitialValues:In,destroyForm:In,setCallbacks:In,registerWatch:In,getFields:In,setValidateMessages:In,setPreserve:In,getInitialValue:In}}}),ty=b.createContext(null);function Kw(n){return n==null?[]:Array.isArray(n)?n:[n]}function n7(n){return n&&!!n._init}function Yw(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Qw=Yw();function r7(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function i7(n,e,r){if(rT())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(n.bind.apply(n,i));return r&&Zd(o,r.prototype),o}function ny(n){var e=typeof Map=="function"?new Map:void 0;return ny=function(i){if(i===null||!r7(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(i))return e.get(i);e.set(i,o)}function o(){return i7(i,arguments,jp(this).constructor)}return o.prototype=Object.create(i.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Zd(o,i)},ny(n)}var o7=/%[sdj%]/g,s7=function(){};function Zw(n){if(!n||!n.length)return null;var e={};return n.forEach(function(r){var i=r.field;e[i]=e[i]||[],e[i].push(r)}),e}function vo(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var o=0,s=r.length;if(typeof n=="function")return n.apply(null,r);if(typeof n=="string"){var a=n.replace(o7,function(l){if(l==="%%")return"%";if(o>=s)return l;switch(l){case"%s":return String(r[o++]);case"%d":return Number(r[o++]);case"%j":try{return JSON.stringify(r[o++])}catch{return"[Circular]"}break;default:return l}});return a}return n}function a7(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function zr(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||a7(e)&&typeof n=="string"&&!n)}function l7(n,e,r){var i=[],o=0,s=n.length;function a(l){i.push.apply(i,ht(l||[])),o++,o===s&&r(i)}n.forEach(function(l){e(l,a)})}function z2(n,e,r){var i=0,o=n.length;function s(a){if(a&&a.length){r(a);return}var l=i;i=i+1,l<o?e(n[l],s):r([])}s([])}function c7(n){var e=[];return Object.keys(n).forEach(function(r){e.push.apply(e,ht(n[r]||[]))}),e}var k2=function(n){nc(r,n);var e=rc(r);function r(i,o){var s;return Gr(this,r),s=e.call(this,"Async Validation Error"),ee(nn(s),"errors",void 0),ee(nn(s),"fields",void 0),s.errors=i,s.fields=o,s}return Hr(r)}(ny(Error));function u7(n,e,r,i,o){if(e.first){var s=new Promise(function(h,p){var g=function(m){return i(m),m.length?p(new k2(m,Zw(m))):h(o)},y=c7(n);z2(y,r,g)});return s.catch(function(h){return h}),s}var a=e.firstFields===!0?Object.keys(n):e.firstFields||[],l=Object.keys(n),c=l.length,u=0,d=[],f=new Promise(function(h,p){var g=function(v){if(d.push.apply(d,v),u++,u===c)return i(d),d.length?p(new k2(d,Zw(d))):h(o)};l.length||(i(d),h(o)),l.forEach(function(y){var v=n[y];a.indexOf(y)!==-1?z2(v,r,g):l7(v,r,g)})});return f.catch(function(h){return h}),f}function d7(n){return!!(n&&n.message!==void 0)}function f7(n,e){for(var r=n,i=0;i<e.length;i++){if(r==null)return r;r=r[e[i]]}return r}function V2(n,e){return function(r){var i;return n.fullFields?i=f7(e,n.fullFields):i=e[r.field||n.fullField],d7(r)?(r.field=r.field||n.fullField,r.fieldValue=i,r):{message:typeof r=="function"?r():r,fieldValue:i,field:r.field||n.fullField}}}function G2(n,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];Ot(i)==="object"&&Ot(n[r])==="object"?n[r]=re(re({},n[r]),i):n[r]=i}}return n}var Iu="enum",h7=function(e,r,i,o,s){e[Iu]=Array.isArray(e[Iu])?e[Iu]:[],e[Iu].indexOf(r)===-1&&o.push(vo(s.messages[Iu],e.fullField,e[Iu].join(", ")))},p7=function(e,r,i,o,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||o.push(vo(s.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(r)||o.push(vo(s.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},m7=function(e,r,i,o,s){var a=typeof e.len=="number",l=typeof e.min=="number",c=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=r,f=null,h=typeof r=="number",p=typeof r=="string",g=Array.isArray(r);if(h?f="number":p?f="string":g&&(f="array"),!f)return!1;g&&(d=r.length),p&&(d=r.replace(u,"_").length),a?d!==e.len&&o.push(vo(s.messages[f].len,e.fullField,e.len)):l&&!c&&d<e.min?o.push(vo(s.messages[f].min,e.fullField,e.min)):c&&!l&&d>e.max?o.push(vo(s.messages[f].max,e.fullField,e.max)):l&&c&&(d<e.min||d>e.max)&&o.push(vo(s.messages[f].range,e.fullField,e.min,e.max))},HU=function(e,r,i,o,s,a){e.required&&(!i.hasOwnProperty(e.field)||zr(r,a||e.type))&&o.push(vo(s.messages.required,e.fullField))},$g;const g7=function(){if($g)return $g;var n="[a-fA-F\\d:]",e=function(E){return E&&E.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(n,")|(?<=").concat(n,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",o=["(?:".concat(i,":){7}(?:").concat(i,"|:)"),"(?:".concat(i,":){6}(?:").concat(r,"|:").concat(i,"|:)"),"(?:".concat(i,":){5}(?::").concat(r,"|(?::").concat(i,"){1,2}|:)"),"(?:".concat(i,":){4}(?:(?::").concat(i,"){0,1}:").concat(r,"|(?::").concat(i,"){1,3}|:)"),"(?:".concat(i,":){3}(?:(?::").concat(i,"){0,2}:").concat(r,"|(?::").concat(i,"){1,4}|:)"),"(?:".concat(i,":){2}(?:(?::").concat(i,"){0,3}:").concat(r,"|(?::").concat(i,"){1,5}|:)"),"(?:".concat(i,":){1}(?:(?::").concat(i,"){0,4}:").concat(r,"|(?::").concat(i,"){1,6}|:)"),"(?::(?:(?::".concat(i,"){0,5}:").concat(r,"|(?::").concat(i,"){1,7}|:))")],s="(?:%[0-9a-zA-Z]{1,})?",a="(?:".concat(o.join("|"),")").concat(s),l=new RegExp("(?:^".concat(r,"$)|(?:^").concat(a,"$)")),c=new RegExp("^".concat(r,"$")),u=new RegExp("^".concat(a,"$")),d=function(E){return E&&E.exact?l:new RegExp("(?:".concat(e(E)).concat(r).concat(e(E),")|(?:").concat(e(E)).concat(a).concat(e(E),")"),"g")};d.v4=function(w){return w&&w.exact?c:new RegExp("".concat(e(w)).concat(r).concat(e(w)),"g")},d.v6=function(w){return w&&w.exact?u:new RegExp("".concat(e(w)).concat(a).concat(e(w)),"g")};var f="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",p=d.v4().source,g=d.v6().source,y="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",v="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",_="(?::\\d{2,5})?",x='(?:[/?#][^\\s"]*)?',S="(?:".concat(f,"|www\\.)").concat(h,"(?:localhost|").concat(p,"|").concat(g,"|").concat(y).concat(v).concat(m,")").concat(_).concat(x);return $g=new RegExp("(?:^".concat(S,"$)"),"i"),$g};var H2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Kh={integer:function(e){return Kh.number(e)&&parseInt(e,10)===e},float:function(e){return Kh.number(e)&&!Kh.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return Ot(e)==="object"&&!Kh.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(H2.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(g7())},hex:function(e){return typeof e=="string"&&!!e.match(H2.hex)}},v7=function(e,r,i,o,s){if(e.required&&r===void 0){HU(e,r,i,o,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=e.type;a.indexOf(l)>-1?Kh[l](r)||o.push(vo(s.messages.types[l],e.fullField,e.type)):l&&Ot(r)!==e.type&&o.push(vo(s.messages.types[l],e.fullField,e.type))},y7=function(e,r,i,o,s){(/^\s+$/.test(r)||r==="")&&o.push(vo(s.messages.whitespace,e.fullField))};const cn={required:HU,whitespace:y7,type:v7,range:m7,enum:h7,pattern:p7};var _7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s)}i(a)},x7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(r==null&&!e.required)return i();cn.required(e,r,o,a,s,"array"),r!=null&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},b7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn.type(e,r,o,a,s)}i(a)},S7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r,"date")&&!e.required)return i();if(cn.required(e,r,o,a,s),!zr(r,"date")){var c;r instanceof Date?c=r:c=new Date(r),cn.type(e,c,o,a,s),c&&cn.range(e,c.getTime(),o,a,s)}}i(a)},w7="enum",E7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn[w7](e,r,o,a,s)}i(a)},C7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},T7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},M7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn.type(e,r,o,a,s)}i(a)},R7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(r===""&&(r=void 0),zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s))}i(a)},A7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),r!==void 0&&cn.type(e,r,o,a,s)}i(a)},N7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r,"string")&&!e.required)return i();cn.required(e,r,o,a,s),zr(r,"string")||cn.pattern(e,r,o,a,s)}i(a)},P7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r)&&!e.required)return i();cn.required(e,r,o,a,s),zr(r)||cn.type(e,r,o,a,s)}i(a)},O7=function(e,r,i,o,s){var a=[],l=Array.isArray(r)?"array":Ot(r);cn.required(e,r,o,a,s,l),i(a)},I7=function(e,r,i,o,s){var a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(zr(r,"string")&&!e.required)return i();cn.required(e,r,o,a,s,"string"),zr(r,"string")||(cn.type(e,r,o,a,s),cn.range(e,r,o,a,s),cn.pattern(e,r,o,a,s),e.whitespace===!0&&cn.whitespace(e,r,o,a,s))}i(a)},mb=function(e,r,i,o,s){var a=e.type,l=[],c=e.required||!e.required&&o.hasOwnProperty(e.field);if(c){if(zr(r,a)&&!e.required)return i();cn.required(e,r,o,l,s,a),zr(r,a)||cn.type(e,r,o,l,s)}i(l)};const gp={string:I7,method:M7,number:R7,boolean:b7,regexp:P7,integer:T7,float:C7,array:x7,object:A7,enum:E7,pattern:N7,date:S7,url:mb,hex:mb,email:mb,required:O7,any:_7};var Gm=function(){function n(e){Gr(this,n),ee(this,"rules",null),ee(this,"_messages",Qw),this.define(e)}return Hr(n,[{key:"define",value:function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(Ot(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(o){var s=r[o];i.rules[o]=Array.isArray(s)?s:[s]})}},{key:"messages",value:function(r){return r&&(this._messages=G2(Yw(),r)),this._messages}},{key:"validate",value:function(r){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},a=r,l=o,c=s;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function u(g){var y=[],v={};function m(x){if(Array.isArray(x)){var S;y=(S=y).concat.apply(S,ht(x))}else y.push(x)}for(var _=0;_<g.length;_++)m(g[_]);y.length?(v=Zw(y),c(y,v)):c(null,a)}if(l.messages){var d=this.messages();d===Qw&&(d=Yw()),G2(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(g){var y=i.rules[g],v=a[g];y.forEach(function(m){var _=m;typeof _.transform=="function"&&(a===r&&(a=re({},a)),v=a[g]=_.transform(v),v!=null&&(_.type=_.type||(Array.isArray(v)?"array":Ot(v)))),typeof _=="function"?_={validator:_}:_=re({},_),_.validator=i.getValidationMethod(_),_.validator&&(_.field=g,_.fullField=_.fullField||g,_.type=i.getType(_),f[g]=f[g]||[],f[g].push({rule:_,value:v,source:a,field:g}))})});var p={};return u7(f,l,function(g,y){var v=g.rule,m=(v.type==="object"||v.type==="array")&&(Ot(v.fields)==="object"||Ot(v.defaultField)==="object");m=m&&(v.required||!v.required&&g.value),v.field=g.field;function _(C,T){return re(re({},T),{},{fullField:"".concat(v.fullField,".").concat(C),fullFields:v.fullFields?[].concat(ht(v.fullFields),[C]):[C]})}function x(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=Array.isArray(C)?C:[C];!l.suppressWarning&&T.length&&n.warning("async-validator:",T),T.length&&v.message!==void 0&&(T=[].concat(v.message));var M=T.map(V2(v,a));if(l.first&&M.length)return p[v.field]=1,y(M);if(!m)y(M);else{if(v.required&&!g.value)return v.message!==void 0?M=[].concat(v.message).map(V2(v,a)):l.error&&(M=[l.error(v,vo(l.messages.required,v.field))]),y(M);var R={};v.defaultField&&Object.keys(g.value).map(function(F){R[F]=v.defaultField}),R=re(re({},R),g.rule.fields);var P={};Object.keys(R).forEach(function(F){var A=R[F],I=Array.isArray(A)?A:[A];P[F]=I.map(_.bind(null,F))});var D=new n(P);D.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),D.validate(g.value,g.rule.options||l,function(F){var A=[];M&&M.length&&A.push.apply(A,ht(M)),F&&F.length&&A.push.apply(A,ht(F)),y(A.length?A:null)})}}var S;if(v.asyncValidator)S=v.asyncValidator(v,g.value,x,g.source,l);else if(v.validator){try{S=v.validator(v,g.value,x,g.source,l)}catch(C){var w,E;(w=(E=console).error)===null||w===void 0||w.call(E,C),l.suppressValidatorError||setTimeout(function(){throw C},0),x(C.message)}S===!0?x():S===!1?x(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||"".concat(v.fullField||v.field," fails")):S instanceof Array?x(S):S instanceof Error&&x(S.message)}S&&S.then&&S.then(function(){return x()},function(C){return x(C)})},function(g){u(g)},a)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!gp.hasOwnProperty(r.type))throw new Error(vo("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),o=i.indexOf("message");return o!==-1&&i.splice(o,1),i.length===1&&i[0]==="required"?gp.required:gp[this.getType(r)]||void 0}}]),n}();ee(Gm,"register",function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");gp[e]=r});ee(Gm,"warning",s7);ee(Gm,"messages",Qw);ee(Gm,"validators",gp);var ro="'${name}' is not a valid ${type}",jU={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:ro,method:ro,array:ro,object:ro,number:ro,date:ro,boolean:ro,integer:ro,float:ro,regexp:ro,email:ro,url:ro,hex:ro},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},j2=Gm;function D7(n,e){return n.replace(/\\?\$\{\w+\}/g,function(r){if(r.startsWith("\\"))return r.slice(1);var i=r.slice(2,-1);return e[i]})}var W2="CODE_LOGIC_ERROR";function Jw(n,e,r,i,o){return eE.apply(this,arguments)}function eE(){return eE=bu(Ri().mark(function n(e,r,i,o,s){var a,l,c,u,d,f,h,p,g;return Ri().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return a=re({},i),delete a.ruleIndex,j2.warning=function(){},a.validator&&(l=a.validator,a.validator=function(){try{return l.apply(void 0,arguments)}catch(m){return console.error(m),Promise.reject(W2)}}),c=null,a&&a.type==="array"&&a.defaultField&&(c=a.defaultField,delete a.defaultField),u=new j2(ee({},e,[a])),d=yd(jU,o.validateMessages),u.messages(d),f=[],v.prev=10,v.next=13,Promise.resolve(u.validate(ee({},e,r),re({},o)));case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(10),v.t0.errors&&(f=v.t0.errors.map(function(m,_){var x=m.message,S=x===W2?d.default:x;return b.isValidElement(S)?b.cloneElement(S,{key:"error_".concat(_)}):S}));case 18:if(!(!f.length&&c)){v.next=23;break}return v.next=21,Promise.all(r.map(function(m,_){return Jw("".concat(e,".").concat(_),m,c,o,s)}));case 21:return h=v.sent,v.abrupt("return",h.reduce(function(m,_){return[].concat(ht(m),ht(_))},[]));case 23:return p=re(re({},i),{},{name:e,enum:(i.enum||[]).join(", ")},s),g=f.map(function(m){return typeof m=="string"?D7(m,p):m}),v.abrupt("return",g);case 26:case"end":return v.stop()}},n,null,[[10,15]])})),eE.apply(this,arguments)}function L7(n,e,r,i,o,s){var a=n.join("."),l=r.map(function(d,f){var h=d.validator,p=re(re({},d),{},{ruleIndex:f});return h&&(p.validator=function(g,y,v){var m=!1,_=function(){for(var w=arguments.length,E=new Array(w),C=0;C<w;C++)E[C]=arguments[C];Promise.resolve().then(function(){Yi(!m,"Your validator function has already return a promise. `callback` will be ignored."),m||v.apply(void 0,E)})},x=h(g,y,_);m=x&&typeof x.then=="function"&&typeof x.catch=="function",Yi(m,"`callback` is deprecated. Please return a promise instead."),m&&x.then(function(){v()}).catch(function(S){v(S||" ")})}),p}).sort(function(d,f){var h=d.warningOnly,p=d.ruleIndex,g=f.warningOnly,y=f.ruleIndex;return!!h==!!g?p-y:h?1:-1}),c;if(o===!0)c=new Promise(function(){var d=bu(Ri().mark(function f(h,p){var g,y,v;return Ri().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:g=0;case 1:if(!(g<l.length)){_.next=12;break}return y=l[g],_.next=5,Jw(a,e,y,i,s);case 5:if(v=_.sent,!v.length){_.next=9;break}return p([{errors:v,rule:y}]),_.abrupt("return");case 9:g+=1,_.next=1;break;case 12:h([]);case 13:case"end":return _.stop()}},f)}));return function(f,h){return d.apply(this,arguments)}}());else{var u=l.map(function(d){return Jw(a,e,d,i,s).then(function(f){return{errors:f,rule:d}})});c=(o?U7(u):F7(u)).then(function(d){return Promise.reject(d)})}return c.catch(function(d){return d}),c}function F7(n){return tE.apply(this,arguments)}function tE(){return tE=bu(Ri().mark(function n(e){return Ri().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(e).then(function(o){var s,a=(s=[]).concat.apply(s,ht(o));return a}));case 1:case"end":return i.stop()}},n)})),tE.apply(this,arguments)}function U7(n){return nE.apply(this,arguments)}function nE(){return nE=bu(Ri().mark(function n(e){var r;return Ri().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=0,o.abrupt("return",new Promise(function(s){e.forEach(function(a){a.then(function(l){l.errors.length&&s([l]),r+=1,r===e.length&&s([])})})}));case 2:case"end":return o.stop()}},n)})),nE.apply(this,arguments)}function dr(n){return Kw(n)}function q2(n,e){var r={};return e.forEach(function(i){var o=Us(n,i);r=is(r,i,o)}),r}function Dd(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return n&&n.some(function(i){return WU(e,i,r)})}function WU(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!n||!e||!r&&n.length!==e.length?!1:e.every(function(i,o){return n[o]===i})}function B7(n,e){if(n===e)return!0;if(!n&&e||n&&!e||!n||!e||Ot(n)!=="object"||Ot(e)!=="object")return!1;var r=Object.keys(n),i=Object.keys(e),o=new Set([].concat(r,i));return ht(o).every(function(s){var a=n[s],l=e[s];return typeof a=="function"&&typeof l=="function"?!0:a===l})}function $7(n){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&Ot(e.target)==="object"&&n in e.target?e.target[n]:e}function X2(n,e,r){var i=n.length;if(e<0||e>=i||r<0||r>=i)return n;var o=n[e],s=e-r;return s>0?[].concat(ht(n.slice(0,r)),[o],ht(n.slice(r,e)),ht(n.slice(e+1,i))):s<0?[].concat(ht(n.slice(0,e)),ht(n.slice(e+1,r+1)),[o],ht(n.slice(r+1,i))):n}var z7=["name"],To=[];function gb(n,e,r,i,o,s){return typeof n=="function"?n(e,r,"source"in s?{source:s.source}:{}):i!==o}var ST=function(n){nc(r,n);var e=rc(r);function r(i){var o;if(Gr(this,r),o=e.call(this,i),ee(nn(o),"state",{resetCount:0}),ee(nn(o),"cancelRegisterFunc",null),ee(nn(o),"mounted",!1),ee(nn(o),"touched",!1),ee(nn(o),"dirty",!1),ee(nn(o),"validatePromise",void 0),ee(nn(o),"prevValidating",void 0),ee(nn(o),"errors",To),ee(nn(o),"warnings",To),ee(nn(o),"cancelRegister",function(){var c=o.props,u=c.preserve,d=c.isListField,f=c.name;o.cancelRegisterFunc&&o.cancelRegisterFunc(d,u,dr(f)),o.cancelRegisterFunc=null}),ee(nn(o),"getNamePath",function(){var c=o.props,u=c.name,d=c.fieldContext,f=d.prefixName,h=f===void 0?[]:f;return u!==void 0?[].concat(ht(h),ht(u)):[]}),ee(nn(o),"getRules",function(){var c=o.props,u=c.rules,d=u===void 0?[]:u,f=c.fieldContext;return d.map(function(h){return typeof h=="function"?h(f):h})}),ee(nn(o),"refresh",function(){o.mounted&&o.setState(function(c){var u=c.resetCount;return{resetCount:u+1}})}),ee(nn(o),"metaCache",null),ee(nn(o),"triggerMetaEvent",function(c){var u=o.props.onMetaChange;if(u){var d=re(re({},o.getMeta()),{},{destroy:c});yw(o.metaCache,d)||u(d),o.metaCache=d}else o.metaCache=null}),ee(nn(o),"onStoreChange",function(c,u,d){var f=o.props,h=f.shouldUpdate,p=f.dependencies,g=p===void 0?[]:p,y=f.onReset,v=d.store,m=o.getNamePath(),_=o.getValue(c),x=o.getValue(v),S=u&&Dd(u,m);switch(d.type==="valueUpdate"&&d.source==="external"&&!yw(_,x)&&(o.touched=!0,o.dirty=!0,o.validatePromise=null,o.errors=To,o.warnings=To,o.triggerMetaEvent()),d.type){case"reset":if(!u||S){o.touched=!1,o.dirty=!1,o.validatePromise=void 0,o.errors=To,o.warnings=To,o.triggerMetaEvent(),y==null||y(),o.refresh();return}break;case"remove":{if(h&&gb(h,c,v,_,x,d)){o.reRender();return}break}case"setField":{var w=d.data;if(S){"touched"in w&&(o.touched=w.touched),"validating"in w&&!("originRCField"in w)&&(o.validatePromise=w.validating?Promise.resolve([]):null),"errors"in w&&(o.errors=w.errors||To),"warnings"in w&&(o.warnings=w.warnings||To),o.dirty=!0,o.triggerMetaEvent(),o.reRender();return}else if("value"in w&&Dd(u,m,!0)){o.reRender();return}if(h&&!m.length&&gb(h,c,v,_,x,d)){o.reRender();return}break}case"dependenciesUpdate":{var E=g.map(dr);if(E.some(function(C){return Dd(d.relatedFields,C)})){o.reRender();return}break}default:if(S||(!g.length||m.length||h)&&gb(h,c,v,_,x,d)){o.reRender();return}break}h===!0&&o.reRender()}),ee(nn(o),"validateRules",function(c){var u=o.getNamePath(),d=o.getValue(),f=c||{},h=f.triggerName,p=f.validateOnly,g=p===void 0?!1:p,y=Promise.resolve().then(bu(Ri().mark(function v(){var m,_,x,S,w,E,C;return Ri().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(o.mounted){M.next=2;break}return M.abrupt("return",[]);case 2:if(m=o.props,_=m.validateFirst,x=_===void 0?!1:_,S=m.messageVariables,w=m.validateDebounce,E=o.getRules(),h&&(E=E.filter(function(R){return R}).filter(function(R){var P=R.validateTrigger;if(!P)return!0;var D=Kw(P);return D.includes(h)})),!(w&&h)){M.next=10;break}return M.next=8,new Promise(function(R){setTimeout(R,w)});case 8:if(o.validatePromise===y){M.next=10;break}return M.abrupt("return",[]);case 10:return C=L7(u,d,E,c,x,S),C.catch(function(R){return R}).then(function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:To;if(o.validatePromise===y){var P;o.validatePromise=null;var D=[],F=[];(P=R.forEach)===null||P===void 0||P.call(R,function(A){var I=A.rule.warningOnly,N=A.errors,L=N===void 0?To:N;I?F.push.apply(F,ht(L)):D.push.apply(D,ht(L))}),o.errors=D,o.warnings=F,o.triggerMetaEvent(),o.reRender()}}),M.abrupt("return",C);case 13:case"end":return M.stop()}},v)})));return g||(o.validatePromise=y,o.dirty=!0,o.errors=To,o.warnings=To,o.triggerMetaEvent(),o.reRender()),y}),ee(nn(o),"isFieldValidating",function(){return!!o.validatePromise}),ee(nn(o),"isFieldTouched",function(){return o.touched}),ee(nn(o),"isFieldDirty",function(){if(o.dirty||o.props.initialValue!==void 0)return!0;var c=o.props.fieldContext,u=c.getInternalHooks(zc),d=u.getInitialValue;return d(o.getNamePath())!==void 0}),ee(nn(o),"getErrors",function(){return o.errors}),ee(nn(o),"getWarnings",function(){return o.warnings}),ee(nn(o),"isListField",function(){return o.props.isListField}),ee(nn(o),"isList",function(){return o.props.isList}),ee(nn(o),"isPreserve",function(){return o.props.preserve}),ee(nn(o),"getMeta",function(){o.prevValidating=o.isFieldValidating();var c={touched:o.isFieldTouched(),validating:o.prevValidating,errors:o.errors,warnings:o.warnings,name:o.getNamePath(),validated:o.validatePromise===null};return c}),ee(nn(o),"getOnlyChild",function(c){if(typeof c=="function"){var u=o.getMeta();return re(re({},o.getOnlyChild(c(o.getControlled(),u,o.props.fieldContext))),{},{isFunction:!0})}var d=iu(c);return d.length!==1||!b.isValidElement(d[0])?{child:d,isFunction:!1}:{child:d[0],isFunction:!1}}),ee(nn(o),"getValue",function(c){var u=o.props.fieldContext.getFieldsValue,d=o.getNamePath();return Us(c||u(!0),d)}),ee(nn(o),"getControlled",function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=o.props,d=u.name,f=u.trigger,h=u.validateTrigger,p=u.getValueFromEvent,g=u.normalize,y=u.valuePropName,v=u.getValueProps,m=u.fieldContext,_=h!==void 0?h:m.validateTrigger,x=o.getNamePath(),S=m.getInternalHooks,w=m.getFieldsValue,E=S(zc),C=E.dispatch,T=o.getValue(),M=v||function(A){return ee({},y,A)},R=c[f],P=d!==void 0?M(T):{},D=re(re({},c),P);D[f]=function(){o.touched=!0,o.dirty=!0,o.triggerMetaEvent();for(var A,I=arguments.length,N=new Array(I),L=0;L<I;L++)N[L]=arguments[L];p?A=p.apply(void 0,N):A=$7.apply(void 0,[y].concat(N)),g&&(A=g(A,T,w(!0))),A!==T&&C({type:"updateValue",namePath:x,value:A}),R&&R.apply(void 0,N)};var F=Kw(_||[]);return F.forEach(function(A){var I=D[A];D[A]=function(){I&&I.apply(void 0,arguments);var N=o.props.rules;N&&N.length&&C({type:"validateField",namePath:x,triggerName:A})}}),D}),i.fieldContext){var s=i.fieldContext.getInternalHooks,a=s(zc),l=a.initEntityValue;l(nn(o))}return o}return Hr(r,[{key:"componentDidMount",value:function(){var o=this.props,s=o.shouldUpdate,a=o.fieldContext;if(this.mounted=!0,a){var l=a.getInternalHooks,c=l(zc),u=c.registerField;this.cancelRegisterFunc=u(this)}s===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var o=this.state.resetCount,s=this.props.children,a=this.getOnlyChild(s),l=a.child,c=a.isFunction,u;return c?u=l:b.isValidElement(l)?u=b.cloneElement(l,this.getControlled(l.props)):(Yi(!l,"`children` of Field is not validate ReactElement."),u=l),b.createElement(b.Fragment,{key:o},u)}}]),r}(b.Component);ee(ST,"contextType",af);ee(ST,"defaultProps",{trigger:"onChange",valuePropName:"value"});function qU(n){var e,r=n.name,i=Pn(n,z7),o=b.useContext(af),s=b.useContext(ty),a=r!==void 0?dr(r):void 0,l=(e=i.isListField)!==null&&e!==void 0?e:!!s,c="keep";return l||(c="_".concat((a||[]).join("_"))),b.createElement(ST,pt({key:c,name:a,isListField:l},i,{fieldContext:o}))}function k7(n){var e=n.name,r=n.initialValue,i=n.children,o=n.rules,s=n.validateTrigger,a=n.isListField,l=b.useContext(af),c=b.useContext(ty),u=b.useRef({keys:[],id:0}),d=u.current,f=b.useMemo(function(){var y=dr(l.prefixName)||[];return[].concat(ht(y),ht(dr(e)))},[l.prefixName,e]),h=b.useMemo(function(){return re(re({},l),{},{prefixName:f})},[l,f]),p=b.useMemo(function(){return{getKey:function(v){var m=f.length,_=v[m];return[d.keys[_],v.slice(m+1)]}}},[f]);if(typeof i!="function")return Yi(!1,"Form.List only accepts function as children."),null;var g=function(v,m,_){var x=_.source;return x==="internal"?!1:v!==m};return b.createElement(ty.Provider,{value:p},b.createElement(af.Provider,{value:h},b.createElement(qU,{name:[],shouldUpdate:g,rules:o,validateTrigger:s,initialValue:r,isList:!0,isListField:a??!!c},function(y,v){var m=y.value,_=m===void 0?[]:m,x=y.onChange,S=l.getFieldValue,w=function(){var M=S(f||[]);return M||[]},E={add:function(M,R){var P=w();R>=0&&R<=P.length?(d.keys=[].concat(ht(d.keys.slice(0,R)),[d.id],ht(d.keys.slice(R))),x([].concat(ht(P.slice(0,R)),[M],ht(P.slice(R))))):(d.keys=[].concat(ht(d.keys),[d.id]),x([].concat(ht(P),[M]))),d.id+=1},remove:function(M){var R=w(),P=new Set(Array.isArray(M)?M:[M]);P.size<=0||(d.keys=d.keys.filter(function(D,F){return!P.has(F)}),x(R.filter(function(D,F){return!P.has(F)})))},move:function(M,R){if(M!==R){var P=w();M<0||M>=P.length||R<0||R>=P.length||(d.keys=X2(d.keys,M,R),x(X2(P,M,R)))}}},C=_||[];return Array.isArray(C)||(C=[]),i(C.map(function(T,M){var R=d.keys[M];return R===void 0&&(d.keys[M]=d.id,R=d.keys[M],d.id+=1),{name:M,key:R,isListField:!0}}),E,v)})))}function V7(n){var e=!1,r=n.length,i=[];return n.length?new Promise(function(o,s){n.forEach(function(a,l){a.catch(function(c){return e=!0,c}).then(function(c){r-=1,i[l]=c,!(r>0)&&(e&&s(i),o(i))})})}):Promise.resolve([])}var XU="__@field_split__";function vb(n){return n.map(function(e){return"".concat(Ot(e),":").concat(e)}).join(XU)}var Du=function(){function n(){Gr(this,n),ee(this,"kvs",new Map)}return Hr(n,[{key:"set",value:function(r,i){this.kvs.set(vb(r),i)}},{key:"get",value:function(r){return this.kvs.get(vb(r))}},{key:"update",value:function(r,i){var o=this.get(r),s=i(o);s?this.set(r,s):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(vb(r))}},{key:"map",value:function(r){return ht(this.kvs.entries()).map(function(i){var o=Ce(i,2),s=o[0],a=o[1],l=s.split(XU);return r({key:l.map(function(c){var u=c.match(/^([^:]*):(.*)$/),d=Ce(u,3),f=d[1],h=d[2];return f==="number"?Number(h):h}),value:a})})}},{key:"toJSON",value:function(){var r={};return this.map(function(i){var o=i.key,s=i.value;return r[o.join(".")]=s,null}),r}}]),n}(),G7=["name"],H7=Hr(function n(e){var r=this;Gr(this,n),ee(this,"formHooked",!1),ee(this,"forceRootUpdate",void 0),ee(this,"subscribable",!0),ee(this,"store",{}),ee(this,"fieldEntities",[]),ee(this,"initialValues",{}),ee(this,"callbacks",{}),ee(this,"validateMessages",null),ee(this,"preserve",null),ee(this,"lastValidatePromise",null),ee(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),ee(this,"getInternalHooks",function(i){return i===zc?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(Yi(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),ee(this,"useSubscribe",function(i){r.subscribable=i}),ee(this,"prevWithoutPreserves",null),ee(this,"setInitialValues",function(i,o){if(r.initialValues=i||{},o){var s,a=yd(i,r.store);(s=r.prevWithoutPreserves)===null||s===void 0||s.map(function(l){var c=l.key;a=is(a,c,Us(i,c))}),r.prevWithoutPreserves=null,r.updateStore(a)}}),ee(this,"destroyForm",function(i){if(i)r.updateStore({});else{var o=new Du;r.getFieldEntities(!0).forEach(function(s){r.isMergedPreserve(s.isPreserve())||o.set(s.getNamePath(),!0)}),r.prevWithoutPreserves=o}}),ee(this,"getInitialValue",function(i){var o=Us(r.initialValues,i);return i.length?yd(o):o}),ee(this,"setCallbacks",function(i){r.callbacks=i}),ee(this,"setValidateMessages",function(i){r.validateMessages=i}),ee(this,"setPreserve",function(i){r.preserve=i}),ee(this,"watchList",[]),ee(this,"registerWatch",function(i){return r.watchList.push(i),function(){r.watchList=r.watchList.filter(function(o){return o!==i})}}),ee(this,"notifyWatch",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var o=r.getFieldsValue(),s=r.getFieldsValue(!0);r.watchList.forEach(function(a){a(o,s,i)})}}),ee(this,"timeoutId",null),ee(this,"warningUnhooked",function(){}),ee(this,"updateStore",function(i){r.store=i}),ee(this,"getFieldEntities",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return i?r.fieldEntities.filter(function(o){return o.getNamePath().length}):r.fieldEntities}),ee(this,"getFieldsMap",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=new Du;return r.getFieldEntities(i).forEach(function(s){var a=s.getNamePath();o.set(a,s)}),o}),ee(this,"getFieldEntitiesForNamePathList",function(i){if(!i)return r.getFieldEntities(!0);var o=r.getFieldsMap(!0);return i.map(function(s){var a=dr(s);return o.get(a)||{INVALIDATE_NAME_PATH:dr(s)}})}),ee(this,"getFieldsValue",function(i,o){r.warningUnhooked();var s,a,l;if(i===!0||Array.isArray(i)?(s=i,a=o):i&&Ot(i)==="object"&&(l=i.strict,a=i.filter),s===!0&&!a)return r.store;var c=r.getFieldEntitiesForNamePathList(Array.isArray(s)?s:null),u=[];return c.forEach(function(d){var f,h,p="INVALIDATE_NAME_PATH"in d?d.INVALIDATE_NAME_PATH:d.getNamePath();if(l){var g,y;if((g=(y=d).isList)!==null&&g!==void 0&&g.call(y))return}else if(!s&&(f=(h=d).isListField)!==null&&f!==void 0&&f.call(h))return;if(!a)u.push(p);else{var v="getMeta"in d?d.getMeta():null;a(v)&&u.push(p)}}),q2(r.store,u.map(dr))}),ee(this,"getFieldValue",function(i){r.warningUnhooked();var o=dr(i);return Us(r.store,o)}),ee(this,"getFieldsError",function(i){r.warningUnhooked();var o=r.getFieldEntitiesForNamePathList(i);return o.map(function(s,a){return s&&!("INVALIDATE_NAME_PATH"in s)?{name:s.getNamePath(),errors:s.getErrors(),warnings:s.getWarnings()}:{name:dr(i[a]),errors:[],warnings:[]}})}),ee(this,"getFieldError",function(i){r.warningUnhooked();var o=dr(i),s=r.getFieldsError([o])[0];return s.errors}),ee(this,"getFieldWarning",function(i){r.warningUnhooked();var o=dr(i),s=r.getFieldsError([o])[0];return s.warnings}),ee(this,"isFieldsTouched",function(){r.warningUnhooked();for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var a=o[0],l=o[1],c,u=!1;o.length===0?c=null:o.length===1?Array.isArray(a)?(c=a.map(dr),u=!1):(c=null,u=a):(c=a.map(dr),u=l);var d=r.getFieldEntities(!0),f=function(v){return v.isFieldTouched()};if(!c)return u?d.every(function(y){return f(y)||y.isList()}):d.some(f);var h=new Du;c.forEach(function(y){h.set(y,[])}),d.forEach(function(y){var v=y.getNamePath();c.forEach(function(m){m.every(function(_,x){return v[x]===_})&&h.update(m,function(_){return[].concat(ht(_),[y])})})});var p=function(v){return v.some(f)},g=h.map(function(y){var v=y.value;return v});return u?g.every(p):g.some(p)}),ee(this,"isFieldTouched",function(i){return r.warningUnhooked(),r.isFieldsTouched([i])}),ee(this,"isFieldsValidating",function(i){r.warningUnhooked();var o=r.getFieldEntities();if(!i)return o.some(function(a){return a.isFieldValidating()});var s=i.map(dr);return o.some(function(a){var l=a.getNamePath();return Dd(s,l)&&a.isFieldValidating()})}),ee(this,"isFieldValidating",function(i){return r.warningUnhooked(),r.isFieldsValidating([i])}),ee(this,"resetWithFieldInitialValue",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=new Du,s=r.getFieldEntities(!0);s.forEach(function(c){var u=c.props.initialValue,d=c.getNamePath();if(u!==void 0){var f=o.get(d)||new Set;f.add({entity:c,value:u}),o.set(d,f)}});var a=function(u){u.forEach(function(d){var f=d.props.initialValue;if(f!==void 0){var h=d.getNamePath(),p=r.getInitialValue(h);if(p!==void 0)Yi(!1,"Form already set 'initialValues' with path '".concat(h.join("."),"'. Field can not overwrite it."));else{var g=o.get(h);if(g&&g.size>1)Yi(!1,"Multiple Field with path '".concat(h.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(g){var y=r.getFieldValue(h),v=d.isListField();!v&&(!i.skipExist||y===void 0)&&r.updateStore(is(r.store,h,ht(g)[0].value))}}}})},l;i.entities?l=i.entities:i.namePathList?(l=[],i.namePathList.forEach(function(c){var u=o.get(c);if(u){var d;(d=l).push.apply(d,ht(ht(u).map(function(f){return f.entity})))}})):l=s,a(l)}),ee(this,"resetFields",function(i){r.warningUnhooked();var o=r.store;if(!i){r.updateStore(yd(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(o,null,{type:"reset"}),r.notifyWatch();return}var s=i.map(dr);s.forEach(function(a){var l=r.getInitialValue(a);r.updateStore(is(r.store,a,l))}),r.resetWithFieldInitialValue({namePathList:s}),r.notifyObservers(o,s,{type:"reset"}),r.notifyWatch(s)}),ee(this,"setFields",function(i){r.warningUnhooked();var o=r.store,s=[];i.forEach(function(a){var l=a.name,c=Pn(a,G7),u=dr(l);s.push(u),"value"in c&&r.updateStore(is(r.store,u,c.value)),r.notifyObservers(o,[u],{type:"setField",data:a})}),r.notifyWatch(s)}),ee(this,"getFields",function(){var i=r.getFieldEntities(!0),o=i.map(function(s){var a=s.getNamePath(),l=s.getMeta(),c=re(re({},l),{},{name:a,value:r.getFieldValue(a)});return Object.defineProperty(c,"originRCField",{value:!0}),c});return o}),ee(this,"initEntityValue",function(i){var o=i.props.initialValue;if(o!==void 0){var s=i.getNamePath(),a=Us(r.store,s);a===void 0&&r.updateStore(is(r.store,s,o))}}),ee(this,"isMergedPreserve",function(i){var o=i!==void 0?i:r.preserve;return o??!0}),ee(this,"registerField",function(i){r.fieldEntities.push(i);var o=i.getNamePath();if(r.notifyWatch([o]),i.props.initialValue!==void 0){var s=r.store;r.resetWithFieldInitialValue({entities:[i],skipExist:!0}),r.notifyObservers(s,[i.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(a,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(f){return f!==i}),!r.isMergedPreserve(l)&&(!a||c.length>1)){var u=a?void 0:r.getInitialValue(o);if(o.length&&r.getFieldValue(o)!==u&&r.fieldEntities.every(function(f){return!WU(f.getNamePath(),o)})){var d=r.store;r.updateStore(is(d,o,u,!0)),r.notifyObservers(d,[o],{type:"remove"}),r.triggerDependenciesUpdate(d,o)}}r.notifyWatch([o])}}),ee(this,"dispatch",function(i){switch(i.type){case"updateValue":{var o=i.namePath,s=i.value;r.updateValue(o,s);break}case"validateField":{var a=i.namePath,l=i.triggerName;r.validateFields([a],{triggerName:l});break}}}),ee(this,"notifyObservers",function(i,o,s){if(r.subscribable){var a=re(re({},s),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(l){var c=l.onStoreChange;c(i,o,a)})}else r.forceRootUpdate()}),ee(this,"triggerDependenciesUpdate",function(i,o){var s=r.getDependencyChildrenFields(o);return s.length&&r.validateFields(s),r.notifyObservers(i,s,{type:"dependenciesUpdate",relatedFields:[o].concat(ht(s))}),s}),ee(this,"updateValue",function(i,o){var s=dr(i),a=r.store;r.updateStore(is(r.store,s,o)),r.notifyObservers(a,[s],{type:"valueUpdate",source:"internal"}),r.notifyWatch([s]);var l=r.triggerDependenciesUpdate(a,s),c=r.callbacks.onValuesChange;if(c){var u=q2(r.store,[s]);c(u,r.getFieldsValue())}r.triggerOnFieldsChange([s].concat(ht(l)))}),ee(this,"setFieldsValue",function(i){r.warningUnhooked();var o=r.store;if(i){var s=yd(r.store,i);r.updateStore(s)}r.notifyObservers(o,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),ee(this,"setFieldValue",function(i,o){r.setFields([{name:i,value:o,errors:[],warnings:[]}])}),ee(this,"getDependencyChildrenFields",function(i){var o=new Set,s=[],a=new Du;r.getFieldEntities().forEach(function(c){var u=c.props.dependencies;(u||[]).forEach(function(d){var f=dr(d);a.update(f,function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return h.add(c),h})})});var l=function c(u){var d=a.get(u)||new Set;d.forEach(function(f){if(!o.has(f)){o.add(f);var h=f.getNamePath();f.isFieldDirty()&&h.length&&(s.push(h),c(h))}})};return l(i),s}),ee(this,"triggerOnFieldsChange",function(i,o){var s=r.callbacks.onFieldsChange;if(s){var a=r.getFields();if(o){var l=new Du;o.forEach(function(u){var d=u.name,f=u.errors;l.set(d,f)}),a.forEach(function(u){u.errors=l.get(u.name)||u.errors})}var c=a.filter(function(u){var d=u.name;return Dd(i,d)});c.length&&s(c,a)}}),ee(this,"validateFields",function(i,o){r.warningUnhooked();var s,a;Array.isArray(i)||typeof i=="string"||typeof o=="string"?(s=i,a=o):a=i;var l=!!s,c=l?s.map(dr):[],u=[],d=String(Date.now()),f=new Set,h=a||{},p=h.recursive,g=h.dirty;r.getFieldEntities(!0).forEach(function(_){if(l||c.push(_.getNamePath()),!(!_.props.rules||!_.props.rules.length)&&!(g&&!_.isFieldDirty())){var x=_.getNamePath();if(f.add(x.join(d)),!l||Dd(c,x,p)){var S=_.validateRules(re({validateMessages:re(re({},jU),r.validateMessages)},a));u.push(S.then(function(){return{name:x,errors:[],warnings:[]}}).catch(function(w){var E,C=[],T=[];return(E=w.forEach)===null||E===void 0||E.call(w,function(M){var R=M.rule.warningOnly,P=M.errors;R?T.push.apply(T,ht(P)):C.push.apply(C,ht(P))}),C.length?Promise.reject({name:x,errors:C,warnings:T}):{name:x,errors:C,warnings:T}}))}}});var y=V7(u);r.lastValidatePromise=y,y.catch(function(_){return _}).then(function(_){var x=_.map(function(S){var w=S.name;return w});r.notifyObservers(r.store,x,{type:"validateFinish"}),r.triggerOnFieldsChange(x,_)});var v=y.then(function(){return r.lastValidatePromise===y?Promise.resolve(r.getFieldsValue(c)):Promise.reject([])}).catch(function(_){var x=_.filter(function(S){return S&&S.errors.length});return Promise.reject({values:r.getFieldsValue(c),errorFields:x,outOfDate:r.lastValidatePromise!==y})});v.catch(function(_){return _});var m=c.filter(function(_){return f.has(_.join(d))});return r.triggerOnFieldsChange(m),v}),ee(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(i){var o=r.callbacks.onFinish;if(o)try{o(i)}catch(s){console.error(s)}}).catch(function(i){var o=r.callbacks.onFinishFailed;o&&o(i)})}),this.forceRootUpdate=e});function KU(n){var e=b.useRef(),r=b.useState({}),i=Ce(r,2),o=i[1];if(!e.current)if(n)e.current=n;else{var s=function(){o({})},a=new H7(s);e.current=a.getForm()}return[e.current]}var rE=b.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),j7=function(e){var r=e.validateMessages,i=e.onFormChange,o=e.onFormFinish,s=e.children,a=b.useContext(rE),l=b.useRef({});return b.createElement(rE.Provider,{value:re(re({},a),{},{validateMessages:re(re({},a.validateMessages),r),triggerFormChange:function(u,d){i&&i(u,{changedFields:d,forms:l.current}),a.triggerFormChange(u,d)},triggerFormFinish:function(u,d){o&&o(u,{values:d,forms:l.current}),a.triggerFormFinish(u,d)},registerForm:function(u,d){u&&(l.current=re(re({},l.current),{},ee({},u,d))),a.registerForm(u,d)},unregisterForm:function(u){var d=re({},l.current);delete d[u],l.current=d,a.unregisterForm(u)}})},s)},W7=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],q7=function(e,r){var i=e.name,o=e.initialValues,s=e.fields,a=e.form,l=e.preserve,c=e.children,u=e.component,d=u===void 0?"form":u,f=e.validateMessages,h=e.validateTrigger,p=h===void 0?"onChange":h,g=e.onValuesChange,y=e.onFieldsChange,v=e.onFinish,m=e.onFinishFailed,_=e.clearOnDestroy,x=Pn(e,W7),S=b.useRef(null),w=b.useContext(rE),E=KU(a),C=Ce(E,1),T=C[0],M=T.getInternalHooks(zc),R=M.useSubscribe,P=M.setInitialValues,D=M.setCallbacks,F=M.setValidateMessages,A=M.setPreserve,I=M.destroyForm;b.useImperativeHandle(r,function(){return re(re({},T),{},{nativeElement:S.current})}),b.useEffect(function(){return w.registerForm(i,T),function(){w.unregisterForm(i)}},[w,T,i]),F(re(re({},w.validateMessages),f)),D({onValuesChange:g,onFieldsChange:function(k){if(w.triggerFormChange(i,k),y){for(var j=arguments.length,Q=new Array(j>1?j-1:0),Y=1;Y<j;Y++)Q[Y-1]=arguments[Y];y.apply(void 0,[k].concat(Q))}},onFinish:function(k){w.triggerFormFinish(i,k),v&&v(k)},onFinishFailed:m}),A(l);var N=b.useRef(null);P(o,!N.current),N.current||(N.current=!0),b.useEffect(function(){return function(){return I(_)}},[]);var L,O=typeof c=="function";if(O){var V=T.getFieldsValue(!0);L=c(V,T)}else L=c;R(!O);var B=b.useRef();b.useEffect(function(){B7(B.current||[],s||[])||T.setFields(s||[]),B.current=s},[s,T]);var z=b.useMemo(function(){return re(re({},T),{},{validateTrigger:p})},[T,p]),W=b.createElement(ty.Provider,{value:null},b.createElement(af.Provider,{value:z},L));return d===!1?W:b.createElement(d,pt({},x,{ref:S,onSubmit:function(k){k.preventDefault(),k.stopPropagation(),T.submit()},onReset:function(k){var j;k.preventDefault(),T.resetFields(),(j=x.onReset)===null||j===void 0||j.call(x,k)}}),W)};function K2(n){try{return JSON.stringify(n)}catch{return Math.random()}}function X7(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=e[0],o=e[1],s=o===void 0?{}:o,a=n7(s)?{form:s}:s,l=a.form,c=b.useState(),u=Ce(c,2),d=u[0],f=u[1],h=b.useMemo(function(){return K2(d)},[d]),p=b.useRef(h);p.current=h;var g=b.useContext(af),y=l||g,v=y&&y._init,m=dr(i),_=b.useRef(m);return _.current=m,b.useEffect(function(){if(v){var x=y.getFieldsValue,S=y.getInternalHooks,w=S(zc),E=w.registerWatch,C=function(P,D){var F=a.preserve?D:P;return typeof i=="function"?i(F):Us(F,_.current)},T=E(function(R,P){var D=C(R,P),F=K2(D);p.current!==F&&(p.current=F,f(D))}),M=C(x(),x(!0));return d!==M&&f(M),T}},[v]),d}var K7=b.forwardRef(q7),Hm=K7;Hm.FormProvider=j7;Hm.Field=qU;Hm.List=k7;Hm.useForm=KU;Hm.useWatch=X7;const Va=b.createContext({}),Y7=n=>{let{children:e,status:r,override:i}=n;const o=b.useContext(Va),s=b.useMemo(()=>{const a=Object.assign({},o);return i&&delete a.isFormItemInput,r&&(delete a.status,delete a.hasFeedback,delete a.feedbackIcon),a},[r,i,o]);return b.createElement(Va.Provider,{value:s},e)},Q7=b.createContext(void 0),ry=n=>{const{space:e,form:r,children:i}=n;if(i==null)return null;let o=i;return r&&(o=de.createElement(Y7,{override:!0,status:!0},o)),e&&(o=de.createElement(xW,null,o)),o};function Y2(n){if(n)return{closable:n.closable,closeIcon:n.closeIcon}}function Q2(n){const{closable:e,closeIcon:r}=n||{};return de.useMemo(()=>{if(!e&&(e===!1||r===!1||r===null))return!1;if(e===void 0&&r===void 0)return null;let i={closeIcon:typeof r!="boolean"&&r!==null?r:void 0};return e&&typeof e=="object"&&(i=Object.assign(Object.assign({},i),e)),i},[e,r])}function Z2(){const n={};for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach(o=>{o&&Object.keys(o).forEach(s=>{o[s]!==void 0&&(n[s]=o[s])})}),n}const Z7={};function J7(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Z7;const i=Q2(n),o=Q2(e),s=typeof i!="boolean"?!!(i!=null&&i.disabled):!1,a=de.useMemo(()=>Object.assign({closeIcon:de.createElement(w_,null)},r),[r]),l=de.useMemo(()=>i===!1?!1:i?Z2(a,o,i):o===!1?!1:o?Z2(a,o):a.closable?a:!1,[i,o,a]);return de.useMemo(()=>{if(l===!1)return[!1,null,s];const{closeIconRender:c}=a,{closeIcon:u}=l;let d=u;if(d!=null){c&&(d=c(u));const f=ka(l,!0);Object.keys(f).length&&(d=de.isValidElement(d)?de.cloneElement(d,f):de.createElement("span",Object.assign({},f),d))}return[!0,d,s]},[l,a])}var YU=function(e){if(pi()&&window.document.documentElement){var r=Array.isArray(e)?e:[e],i=window.document.documentElement;return r.some(function(o){return o in i.style})}return!1},eq=function(e,r){if(!YU(e))return!1;var i=document.createElement("div"),o=i.style[e];return i.style[e]=r,i.style[e]!==o};function J2(n,e){return!Array.isArray(n)&&e!==void 0?eq(n,e):YU(n)}const tq=()=>pi()&&window.document.documentElement,I_=n=>{const{prefixCls:e,className:r,style:i,size:o,shape:s}=n,a=we({[`${e}-lg`]:o==="large",[`${e}-sm`]:o==="small"}),l=we({[`${e}-circle`]:s==="circle",[`${e}-square`]:s==="square",[`${e}-round`]:s==="round"}),c=b.useMemo(()=>typeof o=="number"?{width:o,height:o,lineHeight:`${o}px`}:{},[o]);return b.createElement("span",{className:we(e,a,l,r),style:Object.assign(Object.assign({},c),i)})},nq=new vn("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),D_=n=>({height:n,lineHeight:De(n)}),Ld=n=>Object.assign({width:n},D_(n)),rq=n=>({background:n.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:nq,animationDuration:n.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),yb=(n,e)=>Object.assign({width:e(n).mul(5).equal(),minWidth:e(n).mul(5).equal()},D_(n)),iq=n=>{const{skeletonAvatarCls:e,gradientFromColor:r,controlHeight:i,controlHeightLG:o,controlHeightSM:s}=n;return{[e]:Object.assign({display:"inline-block",verticalAlign:"top",background:r},Ld(i)),[`${e}${e}-circle`]:{borderRadius:"50%"},[`${e}${e}-lg`]:Object.assign({},Ld(o)),[`${e}${e}-sm`]:Object.assign({},Ld(s))}},oq=n=>{const{controlHeight:e,borderRadiusSM:r,skeletonInputCls:i,controlHeightLG:o,controlHeightSM:s,gradientFromColor:a,calc:l}=n;return{[i]:Object.assign({display:"inline-block",verticalAlign:"top",background:a,borderRadius:r},yb(e,l)),[`${i}-lg`]:Object.assign({},yb(o,l)),[`${i}-sm`]:Object.assign({},yb(s,l))}},eN=n=>Object.assign({width:n},D_(n)),sq=n=>{const{skeletonImageCls:e,imageSizeBase:r,gradientFromColor:i,borderRadiusSM:o,calc:s}=n;return{[e]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:i,borderRadius:o},eN(s(r).mul(2).equal())),{[`${e}-path`]:{fill:"#bfbfbf"},[`${e}-svg`]:Object.assign(Object.assign({},eN(r)),{maxWidth:s(r).mul(4).equal(),maxHeight:s(r).mul(4).equal()}),[`${e}-svg${e}-svg-circle`]:{borderRadius:"50%"}}),[`${e}${e}-circle`]:{borderRadius:"50%"}}},_b=(n,e,r)=>{const{skeletonButtonCls:i}=n;return{[`${r}${i}-circle`]:{width:e,minWidth:e,borderRadius:"50%"},[`${r}${i}-round`]:{borderRadius:e}}},xb=(n,e)=>Object.assign({width:e(n).mul(2).equal(),minWidth:e(n).mul(2).equal()},D_(n)),aq=n=>{const{borderRadiusSM:e,skeletonButtonCls:r,controlHeight:i,controlHeightLG:o,controlHeightSM:s,gradientFromColor:a,calc:l}=n;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:a,borderRadius:e,width:l(i).mul(2).equal(),minWidth:l(i).mul(2).equal()},xb(i,l))},_b(n,i,r)),{[`${r}-lg`]:Object.assign({},xb(o,l))}),_b(n,o,`${r}-lg`)),{[`${r}-sm`]:Object.assign({},xb(s,l))}),_b(n,s,`${r}-sm`))},lq=n=>{const{componentCls:e,skeletonAvatarCls:r,skeletonTitleCls:i,skeletonParagraphCls:o,skeletonButtonCls:s,skeletonInputCls:a,skeletonImageCls:l,controlHeight:c,controlHeightLG:u,controlHeightSM:d,gradientFromColor:f,padding:h,marginSM:p,borderRadius:g,titleHeight:y,blockRadius:v,paragraphLiHeight:m,controlHeightXS:_,paragraphMarginTop:x}=n;return{[e]:{display:"table",width:"100%",[`${e}-header`]:{display:"table-cell",paddingInlineEnd:h,verticalAlign:"top",[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:f},Ld(c)),[`${r}-circle`]:{borderRadius:"50%"},[`${r}-lg`]:Object.assign({},Ld(u)),[`${r}-sm`]:Object.assign({},Ld(d))},[`${e}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[i]:{width:"100%",height:y,background:f,borderRadius:v,[`+ ${o}`]:{marginBlockStart:d}},[o]:{padding:0,"> li":{width:"100%",height:m,listStyle:"none",background:f,borderRadius:v,"+ li":{marginBlockStart:_}}},[`${o}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${e}-content`]:{[`${i}, ${o} > li`]:{borderRadius:g}}},[`${e}-with-avatar ${e}-content`]:{[i]:{marginBlockStart:p,[`+ ${o}`]:{marginBlockStart:x}}},[`${e}${e}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},aq(n)),iq(n)),oq(n)),sq(n)),[`${e}${e}-block`]:{width:"100%",[s]:{width:"100%"},[a]:{width:"100%"}},[`${e}${e}-active`]:{[`
        ${i},
        ${o} > li,
        ${r},
        ${s},
        ${a},
        ${l}
      `]:Object.assign({},rq(n))}}},cq=n=>{const{colorFillContent:e,colorFill:r}=n,i=e,o=r;return{color:i,colorGradientEnd:o,gradientFromColor:i,gradientToColor:o,titleHeight:n.controlHeight/2,blockRadius:n.borderRadiusSM,paragraphMarginTop:n.marginLG+n.marginXXS,paragraphLiHeight:n.controlHeight/2}},Vf=Ii("Skeleton",n=>{const{componentCls:e,calc:r}=n,i=Xn(n,{skeletonAvatarCls:`${e}-avatar`,skeletonTitleCls:`${e}-title`,skeletonParagraphCls:`${e}-paragraph`,skeletonButtonCls:`${e}-button`,skeletonInputCls:`${e}-input`,skeletonImageCls:`${e}-image`,imageSizeBase:r(n.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${n.gradientFromColor} 25%, ${n.gradientToColor} 37%, ${n.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[lq(i)]},cq,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),uq=n=>{const{prefixCls:e,className:r,rootClassName:i,active:o,shape:s="circle",size:a="default"}=n,{getPrefixCls:l}=b.useContext(Yt),c=l("skeleton",e),[u,d,f]=Vf(c),h=ea(n,["prefixCls","className"]),p=we(c,`${c}-element`,{[`${c}-active`]:o},r,i,d,f);return u(b.createElement("div",{className:p},b.createElement(I_,Object.assign({prefixCls:`${c}-avatar`,shape:s,size:a},h))))},dq=n=>{const{prefixCls:e,className:r,rootClassName:i,active:o,block:s=!1,size:a="default"}=n,{getPrefixCls:l}=b.useContext(Yt),c=l("skeleton",e),[u,d,f]=Vf(c),h=ea(n,["prefixCls"]),p=we(c,`${c}-element`,{[`${c}-active`]:o,[`${c}-block`]:s},r,i,d,f);return u(b.createElement("div",{className:p},b.createElement(I_,Object.assign({prefixCls:`${c}-button`,size:a},h))))},fq="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",hq=n=>{const{prefixCls:e,className:r,rootClassName:i,style:o,active:s}=n,{getPrefixCls:a}=b.useContext(Yt),l=a("skeleton",e),[c,u,d]=Vf(l),f=we(l,`${l}-element`,{[`${l}-active`]:s},r,i,u,d);return c(b.createElement("div",{className:f},b.createElement("div",{className:we(`${l}-image`,r),style:o},b.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${l}-image-svg`},b.createElement("title",null,"Image placeholder"),b.createElement("path",{d:fq,className:`${l}-image-path`})))))},pq=n=>{const{prefixCls:e,className:r,rootClassName:i,active:o,block:s,size:a="default"}=n,{getPrefixCls:l}=b.useContext(Yt),c=l("skeleton",e),[u,d,f]=Vf(c),h=ea(n,["prefixCls"]),p=we(c,`${c}-element`,{[`${c}-active`]:o,[`${c}-block`]:s},r,i,d,f);return u(b.createElement("div",{className:p},b.createElement(I_,Object.assign({prefixCls:`${c}-input`,size:a},h))))},mq=n=>{const{prefixCls:e,className:r,rootClassName:i,style:o,active:s,children:a}=n,{getPrefixCls:l}=b.useContext(Yt),c=l("skeleton",e),[u,d,f]=Vf(c),h=we(c,`${c}-element`,{[`${c}-active`]:s},d,r,i,f);return u(b.createElement("div",{className:h},b.createElement("div",{className:we(`${c}-image`,r),style:o},a)))},gq=(n,e)=>{const{width:r,rows:i=2}=e;if(Array.isArray(r))return r[n];if(i-1===n)return r},vq=n=>{const{prefixCls:e,className:r,style:i,rows:o}=n,s=ht(new Array(o)).map((a,l)=>b.createElement("li",{key:l,style:{width:gq(l,n)}}));return b.createElement("ul",{className:we(e,r),style:i},s)},yq=n=>{let{prefixCls:e,className:r,width:i,style:o}=n;return b.createElement("h3",{className:we(e,r),style:Object.assign({width:i},o)})};function bb(n){return n&&typeof n=="object"?n:{}}function _q(n,e){return n&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function xq(n,e){return!n&&e?{width:"38%"}:n&&e?{width:"50%"}:{}}function bq(n,e){const r={};return(!n||!e)&&(r.width="61%"),!n&&e?r.rows=3:r.rows=2,r}const Gf=n=>{const{prefixCls:e,loading:r,className:i,rootClassName:o,style:s,children:a,avatar:l=!1,title:c=!0,paragraph:u=!0,active:d,round:f}=n,{getPrefixCls:h,direction:p,skeleton:g}=b.useContext(Yt),y=h("skeleton",e),[v,m,_]=Vf(y);if(r||!("loading"in n)){const x=!!l,S=!!c,w=!!u;let E;if(x){const M=Object.assign(Object.assign({prefixCls:`${y}-avatar`},_q(S,w)),bb(l));E=b.createElement("div",{className:`${y}-header`},b.createElement(I_,Object.assign({},M)))}let C;if(S||w){let M;if(S){const P=Object.assign(Object.assign({prefixCls:`${y}-title`},xq(x,w)),bb(c));M=b.createElement(yq,Object.assign({},P))}let R;if(w){const P=Object.assign(Object.assign({prefixCls:`${y}-paragraph`},bq(x,S)),bb(u));R=b.createElement(vq,Object.assign({},P))}C=b.createElement("div",{className:`${y}-content`},M,R)}const T=we(y,{[`${y}-with-avatar`]:x,[`${y}-active`]:d,[`${y}-rtl`]:p==="rtl",[`${y}-round`]:f},g==null?void 0:g.className,i,o,m,_);return v(b.createElement("div",{className:T,style:Object.assign(Object.assign({},g==null?void 0:g.style),s)},E,C))}return a??null};Gf.Button=dq;Gf.Avatar=uq;Gf.Input=pq;Gf.Image=hq;Gf.Node=mq;function tN(){}const Sq=b.createContext({add:tN,remove:tN});function wq(n){const e=b.useContext(Sq),r=b.useRef(null);return br(o=>{if(o){const s=n?o.querySelector(n):o;e.add(s),r.current=s}else e.remove(r.current)})}const nN=()=>{const{cancelButtonProps:n,cancelTextLocale:e,onCancel:r}=b.useContext(Vm);return de.createElement(kf,Object.assign({onClick:r},n),e)},rN=()=>{const{confirmLoading:n,okButtonProps:e,okType:r,okTextLocale:i,onOk:o}=b.useContext(Vm);return de.createElement(kf,Object.assign({},MU(r),{loading:n,onClick:o},e),i)};function QU(n,e){return de.createElement("span",{className:`${n}-close-x`},e||de.createElement(w_,{className:`${n}-close-icon`}))}const ZU=n=>{const{okText:e,okType:r="primary",cancelText:i,confirmLoading:o,onOk:s,onCancel:a,okButtonProps:l,cancelButtonProps:c,footer:u}=n,[d]=ic("Modal",z3()),f=e||(d==null?void 0:d.okText),h=i||(d==null?void 0:d.cancelText),p={confirmLoading:o,okButtonProps:l,cancelButtonProps:c,okTextLocale:f,cancelTextLocale:h,okType:r,onOk:s,onCancel:a},g=de.useMemo(()=>p,ht(Object.values(p)));let y;return typeof u=="function"||typeof u>"u"?(y=de.createElement(de.Fragment,null,de.createElement(nN,null),de.createElement(rN,null)),typeof u=="function"&&(y=u(y,{OkBtn:rN,CancelBtn:nN})),y=de.createElement(UU,{value:g},y)):y=u,de.createElement(W3,{disabled:!1},y)},Eq=n=>{const{componentCls:e}=n;return{[e]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},Cq=n=>{const{componentCls:e}=n;return{[e]:{position:"relative",maxWidth:"100%",minHeight:1}}},Tq=(n,e)=>{const{prefixCls:r,componentCls:i,gridColumns:o}=n,s={};for(let a=o;a>=0;a--)a===0?(s[`${i}${e}-${a}`]={display:"none"},s[`${i}-push-${a}`]={insetInlineStart:"auto"},s[`${i}-pull-${a}`]={insetInlineEnd:"auto"},s[`${i}${e}-push-${a}`]={insetInlineStart:"auto"},s[`${i}${e}-pull-${a}`]={insetInlineEnd:"auto"},s[`${i}${e}-offset-${a}`]={marginInlineStart:0},s[`${i}${e}-order-${a}`]={order:0}):(s[`${i}${e}-${a}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${a/o*100}%`,maxWidth:`${a/o*100}%`}],s[`${i}${e}-push-${a}`]={insetInlineStart:`${a/o*100}%`},s[`${i}${e}-pull-${a}`]={insetInlineEnd:`${a/o*100}%`},s[`${i}${e}-offset-${a}`]={marginInlineStart:`${a/o*100}%`},s[`${i}${e}-order-${a}`]={order:a});return s[`${i}${e}-flex`]={flex:`var(--${r}${e}-flex)`},s},iE=(n,e)=>Tq(n,e),Mq=(n,e,r)=>({[`@media (min-width: ${De(e)})`]:Object.assign({},iE(n,r))}),Rq=()=>({}),Aq=()=>({}),Nq=Ii("Grid",Eq,Rq),JU=n=>({xs:n.screenXSMin,sm:n.screenSMMin,md:n.screenMDMin,lg:n.screenLGMin,xl:n.screenXLMin,xxl:n.screenXXLMin}),Pq=Ii("Grid",n=>{const e=Xn(n,{gridColumns:24}),r=JU(e);return delete r.xs,[Cq(e),iE(e,""),iE(e,"-xs"),Object.keys(r).map(i=>Mq(e,r[i],`-${i}`)).reduce((i,o)=>Object.assign(Object.assign({},i),o),{})]},Aq);function iN(n){return{position:n,inset:0}}const Oq=n=>{const{componentCls:e,antCls:r}=n;return[{[`${e}-root`]:{[`${e}${r}-zoom-enter, ${e}${r}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:n.motionDurationSlow,userSelect:"none"},[`${e}${r}-zoom-leave ${e}-content`]:{pointerEvents:"none"},[`${e}-mask`]:Object.assign(Object.assign({},iN("fixed")),{zIndex:n.zIndexPopupBase,height:"100%",backgroundColor:n.colorBgMask,pointerEvents:"none",[`${e}-hidden`]:{display:"none"}}),[`${e}-wrap`]:Object.assign(Object.assign({},iN("fixed")),{zIndex:n.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${e}-root`]:zW(n)}]},Iq=n=>{const{componentCls:e}=n;return[{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl"},[`${e}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[e]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${n.screenSMMax}px)`]:{[e]:{maxWidth:"calc(100vw - 16px)",margin:`${De(n.marginXS)} auto`},[`${e}-centered`]:{[e]:{flex:1}}}}},{[e]:Object.assign(Object.assign({},Es(n)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${De(n.calc(n.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:n.paddingLG,[`${e}-title`]:{margin:0,color:n.titleColor,fontWeight:n.fontWeightStrong,fontSize:n.titleFontSize,lineHeight:n.titleLineHeight,wordWrap:"break-word"},[`${e}-content`]:{position:"relative",backgroundColor:n.contentBg,backgroundClip:"padding-box",border:0,borderRadius:n.borderRadiusLG,boxShadow:n.boxShadow,pointerEvents:"auto",padding:n.contentPadding},[`${e}-close`]:Object.assign({position:"absolute",top:n.calc(n.modalHeaderHeight).sub(n.modalCloseBtnSize).div(2).equal(),insetInlineEnd:n.calc(n.modalHeaderHeight).sub(n.modalCloseBtnSize).div(2).equal(),zIndex:n.calc(n.zIndexPopupBase).add(10).equal(),padding:0,color:n.modalCloseIconColor,fontWeight:n.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:n.borderRadiusSM,width:n.modalCloseBtnSize,height:n.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${n.motionDurationMid}, background-color ${n.motionDurationMid}`,"&-x":{display:"flex",fontSize:n.fontSizeLG,fontStyle:"normal",lineHeight:De(n.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:n.modalCloseIconHoverColor,backgroundColor:n.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:n.colorBgTextActive}},zm(n)),[`${e}-header`]:{color:n.colorText,background:n.headerBg,borderRadius:`${De(n.borderRadiusLG)} ${De(n.borderRadiusLG)} 0 0`,marginBottom:n.headerMarginBottom,padding:n.headerPadding,borderBottom:n.headerBorderBottom},[`${e}-body`]:{fontSize:n.fontSize,lineHeight:n.lineHeight,wordWrap:"break-word",padding:n.bodyPadding,[`${e}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${De(n.margin)} auto`}},[`${e}-footer`]:{textAlign:"end",background:n.footerBg,marginTop:n.footerMarginTop,padding:n.footerPadding,borderTop:n.footerBorderTop,borderRadius:n.footerBorderRadius,[`> ${n.antCls}-btn + ${n.antCls}-btn`]:{marginInlineStart:n.marginXS}},[`${e}-open`]:{overflow:"hidden"}})},{[`${e}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${e}-content,
          ${e}-body,
          ${e}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${e}-confirm-body`]:{marginBottom:"auto"}}}]},Dq=n=>{const{componentCls:e}=n;return{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl",[`${e}-confirm-body`]:{direction:"rtl"}}}}},Lq=n=>{const{componentCls:e}=n,r=JU(n);delete r.xs;const i=Object.keys(r).map(o=>({[`@media (min-width: ${De(r[o])})`]:{width:`var(--${e.replace(".","")}-${o}-width)`}}));return{[`${e}-root`]:{[e]:[{width:`var(--${e.replace(".","")}-xs-width)`}].concat(ht(i))}}},eB=n=>{const e=n.padding,r=n.fontSizeHeading5,i=n.lineHeightHeading5;return Xn(n,{modalHeaderHeight:n.calc(n.calc(i).mul(r).equal()).add(n.calc(e).mul(2).equal()).equal(),modalFooterBorderColorSplit:n.colorSplit,modalFooterBorderStyle:n.lineType,modalFooterBorderWidth:n.lineWidth,modalCloseIconColor:n.colorIcon,modalCloseIconHoverColor:n.colorIconHover,modalCloseBtnSize:n.controlHeight,modalConfirmIconSize:n.fontHeight,modalTitleHeight:n.calc(n.titleFontSize).mul(n.titleLineHeight).equal()})},tB=n=>({footerBg:"transparent",headerBg:n.colorBgElevated,titleLineHeight:n.lineHeightHeading5,titleFontSize:n.fontSizeHeading5,contentBg:n.colorBgElevated,titleColor:n.colorTextHeading,contentPadding:n.wireframe?0:`${De(n.paddingMD)} ${De(n.paddingContentHorizontalLG)}`,headerPadding:n.wireframe?`${De(n.padding)} ${De(n.paddingLG)}`:0,headerBorderBottom:n.wireframe?`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`:"none",headerMarginBottom:n.wireframe?0:n.marginXS,bodyPadding:n.wireframe?n.paddingLG:0,footerPadding:n.wireframe?`${De(n.paddingXS)} ${De(n.padding)}`:0,footerBorderTop:n.wireframe?`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`:"none",footerBorderRadius:n.wireframe?`0 0 ${De(n.borderRadiusLG)} ${De(n.borderRadiusLG)}`:0,footerMarginTop:n.wireframe?0:n.marginSM,confirmBodyPadding:n.wireframe?`${De(n.padding*2)} ${De(n.padding*2)} ${De(n.paddingLG)}`:0,confirmIconMarginInlineEnd:n.wireframe?n.margin:n.marginSM,confirmBtnsMarginTop:n.wireframe?n.marginLG:n.marginSM}),nB=Ii("Modal",n=>{const e=eB(n);return[Iq(e),Dq(e),Oq(e),OU(e,"zoom"),Lq(e)]},tB,{unitless:{titleLineHeight:!0}});var Fq=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};let oE;const Uq=n=>{oE={x:n.pageX,y:n.pageY},setTimeout(()=>{oE=null},100)};tq()&&document.documentElement.addEventListener("click",Uq,!0);const rB=n=>{var e;const{getPopupContainer:r,getPrefixCls:i,direction:o,modal:s}=b.useContext(Yt),a=Q=>{const{onCancel:Y}=n;Y==null||Y(Q)},l=Q=>{const{onOk:Y}=n;Y==null||Y(Q)},{prefixCls:c,className:u,rootClassName:d,open:f,wrapClassName:h,centered:p,getContainer:g,focusTriggerAfterClose:y=!0,style:v,visible:m,width:_=520,footer:x,classNames:S,styles:w,children:E,loading:C}=n,T=Fq(n,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),M=i("modal",c),R=i(),P=zf(M),[D,F,A]=nB(M,P),I=we(h,{[`${M}-centered`]:!!p,[`${M}-wrap-rtl`]:o==="rtl"}),N=x!==null&&!C?b.createElement(ZU,Object.assign({},n,{onOk:l,onCancel:a})):null,[L,O,V]=J7(Y2(n),Y2(s),{closable:!0,closeIcon:b.createElement(w_,{className:`${M}-close-icon`}),closeIconRender:Q=>QU(M,Q)}),B=wq(`.${M}-content`),[z,W]=vT("Modal",T.zIndex),[ie,k]=b.useMemo(()=>_&&typeof _=="object"?[void 0,_]:[_,void 0],[_]),j=b.useMemo(()=>{const Q={};return k&&Object.keys(k).forEach(Y=>{const ne=k[Y];ne!==void 0&&(Q[`--${M}-${Y}-width`]=typeof ne=="number"?`${ne}px`:ne)}),Q},[k]);return D(b.createElement(ry,{form:!0,space:!0},b.createElement(gT.Provider,{value:W},b.createElement(GU,Object.assign({width:ie},T,{zIndex:z,getContainer:g===void 0?r:g,prefixCls:M,rootClassName:we(F,d,A,P),footer:N,visible:f??m,mousePosition:(e=T.mousePosition)!==null&&e!==void 0?e:oE,onClose:a,closable:L&&{disabled:V,closeIcon:O},closeIcon:O,focusTriggerAfterClose:y,transitionName:sf(R,"zoom",n.transitionName),maskTransitionName:sf(R,"fade",n.maskTransitionName),className:we(F,u,s==null?void 0:s.className),style:Object.assign(Object.assign(Object.assign({},s==null?void 0:s.style),v),j),classNames:Object.assign(Object.assign(Object.assign({},s==null?void 0:s.classNames),S),{wrapper:we(I,S==null?void 0:S.wrapper)}),styles:Object.assign(Object.assign({},s==null?void 0:s.styles),w),panelRef:B}),C?b.createElement(Gf,{active:!0,title:!1,paragraph:{rows:4},className:`${M}-body-skeleton`}):E))))},Bq=n=>{const{componentCls:e,titleFontSize:r,titleLineHeight:i,modalConfirmIconSize:o,fontSize:s,lineHeight:a,modalTitleHeight:l,fontHeight:c,confirmBodyPadding:u}=n,d=`${e}-confirm`;return{[d]:{"&-rtl":{direction:"rtl"},[`${n.antCls}-modal-header`]:{display:"none"},[`${d}-body-wrapper`]:Object.assign({},J3()),[`&${e} ${e}-body`]:{padding:u},[`${d}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:n.confirmIconMarginInlineEnd,marginTop:n.calc(n.calc(c).sub(o).equal()).div(2).equal()},[`&-has-title > ${n.iconCls}`]:{marginTop:n.calc(n.calc(l).sub(o).equal()).div(2).equal()}},[`${d}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:n.marginXS,maxWidth:`calc(100% - ${De(n.marginSM)})`},[`${n.iconCls} + ${d}-paragraph`]:{maxWidth:`calc(100% - ${De(n.calc(n.modalConfirmIconSize).add(n.marginSM).equal())})`},[`${d}-title`]:{color:n.colorTextHeading,fontWeight:n.fontWeightStrong,fontSize:r,lineHeight:i},[`${d}-content`]:{color:n.colorText,fontSize:s,lineHeight:a},[`${d}-btns`]:{textAlign:"end",marginTop:n.confirmBtnsMarginTop,[`${n.antCls}-btn + ${n.antCls}-btn`]:{marginBottom:0,marginInlineStart:n.marginXS}}},[`${d}-error ${d}-body > ${n.iconCls}`]:{color:n.colorError},[`${d}-warning ${d}-body > ${n.iconCls},
        ${d}-confirm ${d}-body > ${n.iconCls}`]:{color:n.colorWarning},[`${d}-info ${d}-body > ${n.iconCls}`]:{color:n.colorInfo},[`${d}-success ${d}-body > ${n.iconCls}`]:{color:n.colorSuccess}}},$q=hT(["Modal","confirm"],n=>{const e=eB(n);return[Bq(e)]},tB,{order:-1e3});var zq=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function iB(n){const{prefixCls:e,icon:r,okText:i,cancelText:o,confirmPrefixCls:s,type:a,okCancel:l,footer:c,locale:u}=n,d=zq(n,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=r;if(!r&&r!==null)switch(a){case"info":f=b.createElement(Gj,null);break;case"success":f=b.createElement(Ij,null);break;case"error":f=b.createElement(mT,null);break;default:f=b.createElement(zj,null)}const h=l??a==="confirm",p=n.autoFocusButton===null?!1:n.autoFocusButton||"ok",[g]=ic("Modal"),y=u||g,v=i||(h?y==null?void 0:y.okText:y==null?void 0:y.justOkText),m=o||(y==null?void 0:y.cancelText),_=Object.assign({autoFocusButton:p,cancelTextLocale:m,okTextLocale:v,mergedOkCancel:h},d),x=b.useMemo(()=>_,ht(Object.values(_))),S=b.createElement(b.Fragment,null,b.createElement(P2,null),b.createElement(O2,null)),w=n.title!==void 0&&n.title!==null,E=`${s}-body`;return b.createElement("div",{className:`${s}-body-wrapper`},b.createElement("div",{className:we(E,{[`${E}-has-title`]:w})},f,b.createElement("div",{className:`${s}-paragraph`},w&&b.createElement("span",{className:`${s}-title`},n.title),b.createElement("div",{className:`${s}-content`},n.content))),c===void 0||typeof c=="function"?b.createElement(UU,{value:x},b.createElement("div",{className:`${s}-btns`},typeof c=="function"?c(S,{OkBtn:O2,CancelBtn:P2}):S)):c,b.createElement($q,{prefixCls:e}))}const kq=n=>{const{close:e,zIndex:r,maskStyle:i,direction:o,prefixCls:s,wrapClassName:a,rootPrefixCls:l,bodyStyle:c,closable:u=!1,onConfirm:d,styles:f}=n,h=`${s}-confirm`,p=n.width||416,g=n.style||{},y=n.mask===void 0?!0:n.mask,v=n.maskClosable===void 0?!1:n.maskClosable,m=we(h,`${h}-${n.type}`,{[`${h}-rtl`]:o==="rtl"},n.className),[,_]=eo(),x=b.useMemo(()=>r!==void 0?r:_.zIndexPopupBase+Jj,[r,_]);return b.createElement(rB,Object.assign({},n,{className:m,wrapClassName:we({[`${h}-centered`]:!!n.centered},a),onCancel:()=>{e==null||e({triggerCancel:!0}),d==null||d(!1)},title:"",footer:null,transitionName:sf(l||"","zoom",n.transitionName),maskTransitionName:sf(l||"","fade",n.maskTransitionName),mask:y,maskClosable:v,style:g,styles:Object.assign({body:c,mask:i},f),width:p,zIndex:x,closable:u}),b.createElement(iB,Object.assign({},n,{confirmPrefixCls:h})))},oB=n=>{const{rootPrefixCls:e,iconPrefixCls:r,direction:i,theme:o}=n;return b.createElement(oc,{prefixCls:e,iconPrefixCls:r,direction:i,theme:o},b.createElement(kq,Object.assign({},n)))},kc=[];let sB="";function aB(){return sB}const Vq=n=>{var e,r;const{prefixCls:i,getContainer:o,direction:s}=n,a=z3(),l=b.useContext(Yt),c=aB()||l.getPrefixCls(),u=i||`${c}-modal`;let d=o;return d===!1&&(d=void 0),de.createElement(oB,Object.assign({},n,{rootPrefixCls:c,prefixCls:u,iconPrefixCls:l.iconPrefixCls,theme:l.theme,direction:s??l.direction,locale:(r=(e=l.locale)===null||e===void 0?void 0:e.Modal)!==null&&r!==void 0?r:a,getContainer:d}))};function jm(n){const e=_j(),r=document.createDocumentFragment();let i=Object.assign(Object.assign({},n),{close:c,open:!0}),o,s;function a(){for(var d,f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];if(h.some(v=>v==null?void 0:v.triggerCancel)){var y;(d=n.onCancel)===null||d===void 0||(y=d).call.apply(y,[n,()=>{}].concat(ht(h.slice(1))))}for(let v=0;v<kc.length;v++)if(kc[v]===c){kc.splice(v,1);break}s()}function l(d){clearTimeout(o),o=setTimeout(()=>{const f=e.getPrefixCls(void 0,aB()),h=e.getIconPrefixCls(),p=e.getTheme(),g=de.createElement(Vq,Object.assign({},d));s=bU()(de.createElement(oc,{prefixCls:f,iconPrefixCls:h,theme:p},e.holderRender?e.holderRender(g):g),r)})}function c(){for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];i=Object.assign(Object.assign({},i),{open:!1,afterClose:()=>{typeof n.afterClose=="function"&&n.afterClose(),a.apply(this,f)}}),i.visible&&delete i.visible,l(i)}function u(d){typeof d=="function"?i=d(i):i=Object.assign(Object.assign({},i),d),l(i)}return l(i),kc.push(c),{destroy:c,update:u}}function lB(n){return Object.assign(Object.assign({},n),{type:"warning"})}function cB(n){return Object.assign(Object.assign({},n),{type:"info"})}function uB(n){return Object.assign(Object.assign({},n),{type:"success"})}function dB(n){return Object.assign(Object.assign({},n),{type:"error"})}function fB(n){return Object.assign(Object.assign({},n),{type:"confirm"})}function Gq(n){let{rootPrefixCls:e}=n;sB=e}var Hq=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const jq=(n,e)=>{var r,{afterClose:i,config:o}=n,s=Hq(n,["afterClose","config"]);const[a,l]=b.useState(!0),[c,u]=b.useState(o),{direction:d,getPrefixCls:f}=b.useContext(Yt),h=f("modal"),p=f(),g=()=>{var _;i(),(_=c.afterClose)===null||_===void 0||_.call(c)},y=function(){var _;l(!1);for(var x=arguments.length,S=new Array(x),w=0;w<x;w++)S[w]=arguments[w];if(S.some(T=>T==null?void 0:T.triggerCancel)){var C;(_=c.onCancel)===null||_===void 0||(C=_).call.apply(C,[c,()=>{}].concat(ht(S.slice(1))))}};b.useImperativeHandle(e,()=>({destroy:y,update:_=>{u(x=>Object.assign(Object.assign({},x),_))}}));const v=(r=c.okCancel)!==null&&r!==void 0?r:c.type==="confirm",[m]=ic("Modal",ou.Modal);return b.createElement(oB,Object.assign({prefixCls:h,rootPrefixCls:p},c,{close:y,open:a,afterClose:g,okText:c.okText||(v?m==null?void 0:m.okText:m==null?void 0:m.justOkText),direction:c.direction||d,cancelText:c.cancelText||(m==null?void 0:m.cancelText)},s))},Wq=b.forwardRef(jq);let oN=0;const qq=b.memo(b.forwardRef((n,e)=>{const[r,i]=nW();return b.useImperativeHandle(e,()=>({patchElement:i}),[]),b.createElement(b.Fragment,null,r)}));function Xq(){const n=b.useRef(null),[e,r]=b.useState([]);b.useEffect(()=>{e.length&&(ht(e).forEach(a=>{a()}),r([]))},[e]);const i=b.useCallback(s=>function(l){var c;oN+=1;const u=b.createRef();let d;const f=new Promise(v=>{d=v});let h=!1,p;const g=b.createElement(Wq,{key:`modal-${oN}`,config:s(l),ref:u,afterClose:()=>{p==null||p()},isSilent:()=>h,onConfirm:v=>{d(v)}});return p=(c=n.current)===null||c===void 0?void 0:c.patchElement(g),p&&kc.push(p),{destroy:()=>{function v(){var m;(m=u.current)===null||m===void 0||m.destroy()}u.current?v():r(m=>[].concat(ht(m),[v]))},update:v=>{function m(){var _;(_=u.current)===null||_===void 0||_.update(v)}u.current?m():r(_=>[].concat(ht(_),[m]))},then:v=>(h=!0,f.then(v))}},[]);return[b.useMemo(()=>({info:i(cB),success:i(uB),error:i(dB),warning:i(lB),confirm:i(fB)}),[]),b.createElement(qq,{key:"modal-holder",ref:n})]}function hB(n){return e=>b.createElement(oc,{theme:{token:{motion:!1,zIndexPopupBase:0}}},b.createElement(n,Object.assign({},e)))}const Kq=(n,e,r,i,o)=>hB(a=>{const{prefixCls:l,style:c}=a,u=b.useRef(null),[d,f]=b.useState(0),[h,p]=b.useState(0),[g,y]=Zi(!1,{value:a.open}),{getPrefixCls:v}=b.useContext(Yt),m=v("select",l);b.useEffect(()=>{if(y(!0),typeof ResizeObserver<"u"){const S=new ResizeObserver(E=>{const C=E[0].target;f(C.offsetHeight+8),p(C.offsetWidth)}),w=setInterval(()=>{var E;const C=`.${m}-dropdown`,T=(E=u.current)===null||E===void 0?void 0:E.querySelector(C);T&&(clearInterval(w),S.observe(T))},10);return()=>{clearInterval(w),S.disconnect()}}},[]);let _=Object.assign(Object.assign({},a),{style:Object.assign(Object.assign({},c),{margin:0}),open:g,visible:g,getPopupContainer:()=>u.current});Object.assign(_,{[e]:{overflow:{adjustX:!1,adjustY:!1}}});const x={paddingBottom:d,position:"relative",minWidth:h};return b.createElement("div",{ref:u,style:x},b.createElement(n,Object.assign({},_)))}),pB=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var n=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n==null?void 0:n.substr(0,4))};var L_=function(e){var r=e.className,i=e.customizeIcon,o=e.customizeIconProps,s=e.children,a=e.onMouseDown,l=e.onClick,c=typeof i=="function"?i(o):i;return b.createElement("span",{className:r,onMouseDown:function(d){d.preventDefault(),a==null||a(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:l,"aria-hidden":!0},c!==void 0?c:b.createElement("span",{className:we(r.split(/\s+/).map(function(u){return"".concat(u,"-icon")}))},s))},Yq=function(e,r,i,o,s){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,u=de.useMemo(function(){if(Ot(o)==="object")return o.clearIcon;if(s)return s},[o,s]),d=de.useMemo(function(){return!!(!a&&o&&(i.length||l)&&!(c==="combobox"&&l===""))},[o,a,i.length,l,c]);return{allowClear:d,clearIcon:de.createElement(L_,{className:"".concat(e,"-clear"),onMouseDown:r,customizeIcon:u},"×")}},mB=b.createContext(null);function Qq(){return b.useContext(mB)}function Zq(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=b.useState(!1),r=Ce(e,2),i=r[0],o=r[1],s=b.useRef(null),a=function(){window.clearTimeout(s.current)};b.useEffect(function(){return a},[]);var l=function(u,d){a(),s.current=window.setTimeout(function(){o(u),d&&d()},n)};return[i,l,a]}function gB(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=b.useRef(null),r=b.useRef(null);b.useEffect(function(){return function(){window.clearTimeout(r.current)}},[]);function i(o){(o||e.current===null)&&(e.current=o),window.clearTimeout(r.current),r.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},i]}function Jq(n,e,r,i){var o=b.useRef(null);o.current={open:e,triggerOpen:r,customizedTrigger:i},b.useEffect(function(){function s(a){var l;if(!((l=o.current)!==null&&l!==void 0&&l.customizedTrigger)){var c=a.target;c.shadowRoot&&a.composed&&(c=a.composedPath()[0]||c),o.current.open&&n().filter(function(u){return u}).every(function(u){return!u.contains(c)&&u!==c})&&o.current.triggerOpen(!1)}}return window.addEventListener("mousedown",s),function(){return window.removeEventListener("mousedown",s)}},[])}function eX(n){return n&&![He.ESC,He.SHIFT,He.BACKSPACE,He.TAB,He.WIN_KEY,He.ALT,He.META,He.WIN_KEY_RIGHT,He.CTRL,He.SEMICOLON,He.EQUALS,He.CAPS_LOCK,He.CONTEXT_MENU,He.F1,He.F2,He.F3,He.F4,He.F5,He.F6,He.F7,He.F8,He.F9,He.F10,He.F11,He.F12].includes(n)}var tX=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Lu=void 0;function nX(n,e){var r=n.prefixCls,i=n.invalidate,o=n.item,s=n.renderItem,a=n.responsive,l=n.responsiveDisabled,c=n.registerSize,u=n.itemKey,d=n.className,f=n.style,h=n.children,p=n.display,g=n.order,y=n.component,v=y===void 0?"div":y,m=Pn(n,tX),_=a&&!p;function x(T){c(u,T)}b.useEffect(function(){return function(){x(null)}},[]);var S=s&&o!==Lu?s(o,{index:g}):h,w;i||(w={opacity:_?0:1,height:_?0:Lu,overflowY:_?"hidden":Lu,order:a?g:Lu,pointerEvents:_?"none":Lu,position:_?"absolute":Lu});var E={};_&&(E["aria-hidden"]=!0);var C=b.createElement(v,pt({className:we(!i&&r,d),style:re(re({},w),f)},E,m,{ref:e}),S);return a&&(C=b.createElement(Ka,{onResize:function(M){var R=M.offsetWidth;x(R)},disabled:l},C)),C}var vp=b.forwardRef(nX);vp.displayName="Item";function rX(n){if(typeof MessageChannel>"u")pr(n);else{var e=new MessageChannel;e.port1.onmessage=function(){return n()},e.port2.postMessage(void 0)}}function iX(){var n=b.useRef(null),e=function(i){n.current||(n.current=[],rX(function(){ru.unstable_batchedUpdates(function(){n.current.forEach(function(o){o()}),n.current=null})})),n.current.push(i)};return e}function mh(n,e){var r=b.useState(e),i=Ce(r,2),o=i[0],s=i[1],a=br(function(l){n(function(){s(l)})});return[o,a]}var iy=de.createContext(null),oX=["component"],sX=["className"],aX=["className"],lX=function(e,r){var i=b.useContext(iy);if(!i){var o=e.component,s=o===void 0?"div":o,a=Pn(e,oX);return b.createElement(s,pt({},a,{ref:r}))}var l=i.className,c=Pn(i,sX),u=e.className,d=Pn(e,aX);return b.createElement(iy.Provider,{value:null},b.createElement(vp,pt({ref:r,className:we(l,u)},c,d)))},vB=b.forwardRef(lX);vB.displayName="RawItem";var cX=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],yB="responsive",_B="invalidate";function uX(n){return"+ ".concat(n.length," ...")}function dX(n,e){var r=n.prefixCls,i=r===void 0?"rc-overflow":r,o=n.data,s=o===void 0?[]:o,a=n.renderItem,l=n.renderRawItem,c=n.itemKey,u=n.itemWidth,d=u===void 0?10:u,f=n.ssr,h=n.style,p=n.className,g=n.maxCount,y=n.renderRest,v=n.renderRawRest,m=n.suffix,_=n.component,x=_===void 0?"div":_,S=n.itemComponent,w=n.onVisibleChange,E=Pn(n,cX),C=f==="full",T=iX(),M=mh(T,null),R=Ce(M,2),P=R[0],D=R[1],F=P||0,A=mh(T,new Map),I=Ce(A,2),N=I[0],L=I[1],O=mh(T,0),V=Ce(O,2),B=V[0],z=V[1],W=mh(T,0),ie=Ce(W,2),k=ie[0],j=ie[1],Q=mh(T,0),Y=Ce(Q,2),ne=Y[0],ye=Y[1],me=b.useState(null),fe=Ce(me,2),ae=fe[0],ve=fe[1],q=b.useState(null),ge=Ce(q,2),xe=ge[0],_e=ge[1],Se=b.useMemo(function(){return xe===null&&C?Number.MAX_SAFE_INTEGER:xe||0},[xe,P]),Ke=b.useState(!1),Ue=Ce(Ke,2),H=Ue[0],U=Ue[1],X="".concat(i,"-item"),oe=Math.max(B,k),pe=g===yB,ce=s.length&&pe,Fe=g===_B,Re=ce||typeof g=="number"&&s.length>g,Le=b.useMemo(function(){var ct=s;return ce?P===null&&C?ct=s:ct=s.slice(0,Math.min(s.length,F/d)):typeof g=="number"&&(ct=s.slice(0,g)),ct},[s,d,P,g,ce]),Je=b.useMemo(function(){return ce?s.slice(Se+1):s.slice(Le.length)},[s,Le,ce,Se]),Me=b.useCallback(function(ct,qe){var rt;return typeof c=="function"?c(ct):(rt=c&&(ct==null?void 0:ct[c]))!==null&&rt!==void 0?rt:qe},[c]),ze=b.useCallback(a||function(ct){return ct},[a]);function Ee(ct,qe,rt){xe===ct&&(qe===void 0||qe===ae)||(_e(ct),rt||(U(ct<s.length-1),w==null||w(ct)),qe!==void 0&&ve(qe))}function Pe(ct,qe){D(qe.clientWidth)}function ke(ct,qe){L(function(rt){var Lt=new Map(rt);return qe===null?Lt.delete(ct):Lt.set(ct,qe),Lt})}function Ve(ct,qe){j(qe),z(k)}function $e(ct,qe){ye(qe)}function _t(ct){return N.get(Me(Le[ct],ct))}xn(function(){if(F&&typeof oe=="number"&&Le){var ct=ne,qe=Le.length,rt=qe-1;if(!qe){Ee(0,null);return}for(var Lt=0;Lt<qe;Lt+=1){var bn=_t(Lt);if(C&&(bn=bn||0),bn===void 0){Ee(Lt-1,void 0,!0);break}if(ct+=bn,rt===0&&ct<=F||Lt===rt-1&&ct+_t(rt)<=F){Ee(rt,null);break}else if(ct+oe>F){Ee(Lt-1,ct-bn-ne+k);break}}m&&_t(0)+ne>F&&ve(null)}},[F,N,k,ne,Me,Le]);var J=H&&!!Je.length,Qe={};ae!==null&&ce&&(Qe={position:"absolute",left:ae,top:0});var be={prefixCls:X,responsive:ce,component:S,invalidate:Fe},Oe=l?function(ct,qe){var rt=Me(ct,qe);return b.createElement(iy.Provider,{key:rt,value:re(re({},be),{},{order:qe,item:ct,itemKey:rt,registerSize:ke,display:qe<=Se})},l(ct,qe))}:function(ct,qe){var rt=Me(ct,qe);return b.createElement(vp,pt({},be,{order:qe,key:rt,item:ct,renderItem:ze,itemKey:rt,registerSize:ke,display:qe<=Se}))},Ze={order:J?Se:Number.MAX_SAFE_INTEGER,className:"".concat(X,"-rest"),registerSize:Ve,display:J},We=y||uX,wt=v?b.createElement(iy.Provider,{value:re(re({},be),Ze)},v(Je)):b.createElement(vp,pt({},be,Ze),typeof We=="function"?We(Je):We),Mt=b.createElement(x,pt({className:we(!Fe&&i,p),style:h,ref:e},E),Le.map(Oe),Re?wt:null,m&&b.createElement(vp,pt({},be,{responsive:pe,responsiveDisabled:!ce,order:Se,className:"".concat(X,"-suffix"),registerSize:$e,display:!0,style:Qe}),m));return pe?b.createElement(Ka,{onResize:Pe,disabled:!ce},Mt):Mt}var Wm=b.forwardRef(dX);Wm.displayName="Overflow";Wm.Item=vB;Wm.RESPONSIVE=yB;Wm.INVALIDATE=_B;var fX=function(e,r){var i,o=e.prefixCls,s=e.id,a=e.inputElement,l=e.disabled,c=e.tabIndex,u=e.autoFocus,d=e.autoComplete,f=e.editable,h=e.activeDescendantId,p=e.value,g=e.maxLength,y=e.onKeyDown,v=e.onMouseDown,m=e.onChange,_=e.onPaste,x=e.onCompositionStart,S=e.onCompositionEnd,w=e.open,E=e.attrs,C=a||b.createElement("input",null),T=C,M=T.ref,R=T.props,P=R.onKeyDown,D=R.onChange,F=R.onMouseDown,A=R.onCompositionStart,I=R.onCompositionEnd,N=R.style;return"maxLength"in C.props,C=b.cloneElement(C,re(re(re({type:"search"},R),{},{id:s,ref:Js(r,M),disabled:l,tabIndex:c,autoComplete:d||"off",autoFocus:u,className:we("".concat(o,"-selection-search-input"),(i=C)===null||i===void 0||(i=i.props)===null||i===void 0?void 0:i.className),role:"combobox","aria-expanded":w||!1,"aria-haspopup":"listbox","aria-owns":"".concat(s,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(s,"_list"),"aria-activedescendant":w?h:void 0},E),{},{value:f?p:"",maxLength:g,readOnly:!f,unselectable:f?null:"on",style:re(re({},N),{},{opacity:f?null:0}),onKeyDown:function(O){y(O),P&&P(O)},onMouseDown:function(O){v(O),F&&F(O)},onChange:function(O){m(O),D&&D(O)},onCompositionStart:function(O){x(O),A&&A(O)},onCompositionEnd:function(O){S(O),I&&I(O)},onPaste:_})),C},xB=b.forwardRef(fX);function bB(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var hX=typeof window<"u"&&window.document&&window.document.documentElement,pX=hX;function mX(n){return n!=null}function gX(n){return!n&&n!==0}function sN(n){return["string","number"].includes(Ot(n))}function SB(n){var e=void 0;return n&&(sN(n.title)?e=n.title.toString():sN(n.label)&&(e=n.label.toString())),e}function vX(n,e){pX?b.useLayoutEffect(n,e):b.useEffect(n,e)}function yX(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var aN=function(e){e.preventDefault(),e.stopPropagation()},_X=function(e){var r=e.id,i=e.prefixCls,o=e.values,s=e.open,a=e.searchValue,l=e.autoClearSearchValue,c=e.inputRef,u=e.placeholder,d=e.disabled,f=e.mode,h=e.showSearch,p=e.autoFocus,g=e.autoComplete,y=e.activeDescendantId,v=e.tabIndex,m=e.removeIcon,_=e.maxTagCount,x=e.maxTagTextLength,S=e.maxTagPlaceholder,w=S===void 0?function(ve){return"+ ".concat(ve.length," ...")}:S,E=e.tagRender,C=e.onToggleOpen,T=e.onRemove,M=e.onInputChange,R=e.onInputPaste,P=e.onInputKeyDown,D=e.onInputMouseDown,F=e.onInputCompositionStart,A=e.onInputCompositionEnd,I=b.useRef(null),N=b.useState(0),L=Ce(N,2),O=L[0],V=L[1],B=b.useState(!1),z=Ce(B,2),W=z[0],ie=z[1],k="".concat(i,"-selection"),j=s||f==="multiple"&&l===!1||f==="tags"?a:"",Q=f==="tags"||f==="multiple"&&l===!1||h&&(s||W);vX(function(){V(I.current.scrollWidth)},[j]);var Y=function(q,ge,xe,_e,Se){return b.createElement("span",{title:SB(q),className:we("".concat(k,"-item"),ee({},"".concat(k,"-item-disabled"),xe))},b.createElement("span",{className:"".concat(k,"-item-content")},ge),_e&&b.createElement(L_,{className:"".concat(k,"-item-remove"),onMouseDown:aN,onClick:Se,customizeIcon:m},"×"))},ne=function(q,ge,xe,_e,Se,Ke){var Ue=function(U){aN(U),C(!s)};return b.createElement("span",{onMouseDown:Ue},E({label:ge,value:q,disabled:xe,closable:_e,onClose:Se,isMaxTag:!!Ke}))},ye=function(q){var ge=q.disabled,xe=q.label,_e=q.value,Se=!d&&!ge,Ke=xe;if(typeof x=="number"&&(typeof xe=="string"||typeof xe=="number")){var Ue=String(Ke);Ue.length>x&&(Ke="".concat(Ue.slice(0,x),"..."))}var H=function(X){X&&X.stopPropagation(),T(q)};return typeof E=="function"?ne(_e,Ke,ge,Se,H):Y(q,Ke,ge,Se,H)},me=function(q){var ge=typeof w=="function"?w(q):w;return typeof E=="function"?ne(void 0,ge,!1,!1,void 0,!0):Y({title:ge},ge,!1)},fe=b.createElement("div",{className:"".concat(k,"-search"),style:{width:O},onFocus:function(){ie(!0)},onBlur:function(){ie(!1)}},b.createElement(xB,{ref:c,open:s,prefixCls:i,id:r,inputElement:null,disabled:d,autoFocus:p,autoComplete:g,editable:Q,activeDescendantId:y,value:j,onKeyDown:P,onMouseDown:D,onChange:M,onPaste:R,onCompositionStart:F,onCompositionEnd:A,tabIndex:v,attrs:ka(e,!0)}),b.createElement("span",{ref:I,className:"".concat(k,"-search-mirror"),"aria-hidden":!0},j," ")),ae=b.createElement(Wm,{prefixCls:"".concat(k,"-overflow"),data:o,renderItem:ye,renderRest:me,suffix:fe,itemKey:yX,maxCount:_});return b.createElement("span",{className:"".concat(k,"-wrap")},ae,!o.length&&!j&&b.createElement("span",{className:"".concat(k,"-placeholder")},u))},xX=function(e){var r=e.inputElement,i=e.prefixCls,o=e.id,s=e.inputRef,a=e.disabled,l=e.autoFocus,c=e.autoComplete,u=e.activeDescendantId,d=e.mode,f=e.open,h=e.values,p=e.placeholder,g=e.tabIndex,y=e.showSearch,v=e.searchValue,m=e.activeValue,_=e.maxLength,x=e.onInputKeyDown,S=e.onInputMouseDown,w=e.onInputChange,E=e.onInputPaste,C=e.onInputCompositionStart,T=e.onInputCompositionEnd,M=e.title,R=b.useState(!1),P=Ce(R,2),D=P[0],F=P[1],A=d==="combobox",I=A||y,N=h[0],L=v||"";A&&m&&!D&&(L=m),b.useEffect(function(){A&&F(!1)},[A,m]);var O=d!=="combobox"&&!f&&!y?!1:!!L,V=M===void 0?SB(N):M,B=b.useMemo(function(){return N?null:b.createElement("span",{className:"".concat(i,"-selection-placeholder"),style:O?{visibility:"hidden"}:void 0},p)},[N,O,p,i]);return b.createElement("span",{className:"".concat(i,"-selection-wrap")},b.createElement("span",{className:"".concat(i,"-selection-search")},b.createElement(xB,{ref:s,prefixCls:i,id:o,open:f,inputElement:r,disabled:a,autoFocus:l,autoComplete:c,editable:I,activeDescendantId:u,value:L,onKeyDown:x,onMouseDown:S,onChange:function(W){F(!0),w(W)},onPaste:E,onCompositionStart:C,onCompositionEnd:T,tabIndex:g,attrs:ka(e,!0),maxLength:A?_:void 0})),!A&&N?b.createElement("span",{className:"".concat(i,"-selection-item"),title:V,style:O?{visibility:"hidden"}:void 0},N.label):null,B)},bX=function(e,r){var i=b.useRef(null),o=b.useRef(!1),s=e.prefixCls,a=e.open,l=e.mode,c=e.showSearch,u=e.tokenWithEnter,d=e.disabled,f=e.prefix,h=e.autoClearSearchValue,p=e.onSearch,g=e.onSearchSubmit,y=e.onToggleOpen,v=e.onInputKeyDown,m=e.domRef;b.useImperativeHandle(r,function(){return{focus:function(V){i.current.focus(V)},blur:function(){i.current.blur()}}});var _=gB(0),x=Ce(_,2),S=x[0],w=x[1],E=function(V){var B=V.which,z=i.current instanceof HTMLTextAreaElement;!z&&a&&(B===He.UP||B===He.DOWN)&&V.preventDefault(),v&&v(V),B===He.ENTER&&l==="tags"&&!o.current&&!a&&(g==null||g(V.target.value)),!(z&&!a&&~[He.UP,He.DOWN,He.LEFT,He.RIGHT].indexOf(B))&&eX(B)&&y(!0)},C=function(){w(!0)},T=b.useRef(null),M=function(V){p(V,!0,o.current)!==!1&&y(!0)},R=function(){o.current=!0},P=function(V){o.current=!1,l!=="combobox"&&M(V.target.value)},D=function(V){var B=V.target.value;if(u&&T.current&&/[\r\n]/.test(T.current)){var z=T.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");B=B.replace(z,T.current)}T.current=null,M(B)},F=function(V){var B=V.clipboardData,z=B==null?void 0:B.getData("text");T.current=z||""},A=function(V){var B=V.target;if(B!==i.current){var z=document.body.style.msTouchAction!==void 0;z?setTimeout(function(){i.current.focus()}):i.current.focus()}},I=function(V){var B=S();V.target!==i.current&&!B&&!(l==="combobox"&&d)&&V.preventDefault(),(l!=="combobox"&&(!c||!B)||!a)&&(a&&h!==!1&&p("",!0,!1),y())},N={inputRef:i,onInputKeyDown:E,onInputMouseDown:C,onInputChange:D,onInputPaste:F,onInputCompositionStart:R,onInputCompositionEnd:P},L=l==="multiple"||l==="tags"?b.createElement(_X,pt({},e,N)):b.createElement(xX,pt({},e,N));return b.createElement("div",{ref:m,className:"".concat(s,"-selector"),onClick:A,onMouseDown:I},f&&b.createElement("div",{className:"".concat(s,"-prefix")},f),L)},SX=b.forwardRef(bX);function wX(n){var e=n.prefixCls,r=n.align,i=n.arrow,o=n.arrowPos,s=i||{},a=s.className,l=s.content,c=o.x,u=c===void 0?0:c,d=o.y,f=d===void 0?0:d,h=b.useRef();if(!r||!r.points)return null;var p={position:"absolute"};if(r.autoArrow!==!1){var g=r.points[0],y=r.points[1],v=g[0],m=g[1],_=y[0],x=y[1];v===_||!["t","b"].includes(v)?p.top=f:v==="t"?p.top=0:p.bottom=0,m===x||!["l","r"].includes(m)?p.left=u:m==="l"?p.left=0:p.right=0}return b.createElement("div",{ref:h,className:we("".concat(e,"-arrow"),a),style:p},l)}function EX(n){var e=n.prefixCls,r=n.open,i=n.zIndex,o=n.mask,s=n.motion;return o?b.createElement(xu,pt({},s,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(a){var l=a.className;return b.createElement("div",{style:{zIndex:i},className:we("".concat(e,"-mask"),l)})}):null}var CX=b.memo(function(n){var e=n.children;return e},function(n,e){return e.cache}),TX=b.forwardRef(function(n,e){var r=n.popup,i=n.className,o=n.prefixCls,s=n.style,a=n.target,l=n.onVisibleChanged,c=n.open,u=n.keepDom,d=n.fresh,f=n.onClick,h=n.mask,p=n.arrow,g=n.arrowPos,y=n.align,v=n.motion,m=n.maskMotion,_=n.forceRender,x=n.getPopupContainer,S=n.autoDestroy,w=n.portal,E=n.zIndex,C=n.onMouseEnter,T=n.onMouseLeave,M=n.onPointerEnter,R=n.onPointerDownCapture,P=n.ready,D=n.offsetX,F=n.offsetY,A=n.offsetR,I=n.offsetB,N=n.onAlign,L=n.onPrepare,O=n.stretch,V=n.targetWidth,B=n.targetHeight,z=typeof r=="function"?r():r,W=c||u,ie=(x==null?void 0:x.length)>0,k=b.useState(!x||!ie),j=Ce(k,2),Q=j[0],Y=j[1];if(xn(function(){!Q&&ie&&a&&Y(!0)},[Q,ie,a]),!Q)return null;var ne="auto",ye={left:"-1000vw",top:"-1000vh",right:ne,bottom:ne};if(P||!c){var me,fe=y.points,ae=y.dynamicInset||((me=y._experimental)===null||me===void 0?void 0:me.dynamicInset),ve=ae&&fe[0][1]==="r",q=ae&&fe[0][0]==="b";ve?(ye.right=A,ye.left=ne):(ye.left=D,ye.right=ne),q?(ye.bottom=I,ye.top=ne):(ye.top=F,ye.bottom=ne)}var ge={};return O&&(O.includes("height")&&B?ge.height=B:O.includes("minHeight")&&B&&(ge.minHeight=B),O.includes("width")&&V?ge.width=V:O.includes("minWidth")&&V&&(ge.minWidth=V)),c||(ge.pointerEvents="none"),b.createElement(w,{open:_||W,getContainer:x&&function(){return x(a)},autoDestroy:S},b.createElement(EX,{prefixCls:o,open:c,zIndex:E,mask:h,motion:m}),b.createElement(Ka,{onResize:N,disabled:!c},function(xe){return b.createElement(xu,pt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:_,leavedClassName:"".concat(o,"-hidden")},v,{onAppearPrepare:L,onEnterPrepare:L,visible:c,onVisibleChanged:function(Se){var Ke;v==null||(Ke=v.onVisibleChanged)===null||Ke===void 0||Ke.call(v,Se),l(Se)}}),function(_e,Se){var Ke=_e.className,Ue=_e.style,H=we(o,Ke,i);return b.createElement("div",{ref:Js(xe,e,Se),className:H,style:re(re(re(re({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},ye),ge),Ue),{},{boxSizing:"border-box",zIndex:E},s),onMouseEnter:C,onMouseLeave:T,onPointerEnter:M,onClick:f,onPointerDownCapture:R},p&&b.createElement(wX,{prefixCls:o,arrow:p,arrowPos:g,align:y}),b.createElement(CX,{cache:!c&&!d},z))})}))}),MX=b.forwardRef(function(n,e){var r=n.children,i=n.getTriggerDOMNode,o=$m(r),s=b.useCallback(function(l){nT(e,i?i(l):l)},[i]),a=Uf(s,m_(r));return o?b.cloneElement(r,{ref:a}):r}),lN=b.createContext(null);function cN(n){return n?Array.isArray(n)?n:[n]:[]}function RX(n,e,r,i){return b.useMemo(function(){var o=cN(r??e),s=cN(i??e),a=new Set(o),l=new Set(s);return n&&(a.has("hover")&&(a.delete("hover"),a.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[a,l]},[n,e,r,i])}function AX(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?n[0]===e[0]:n[0]===e[0]&&n[1]===e[1]}function NX(n,e,r,i){for(var o=r.points,s=Object.keys(n),a=0;a<s.length;a+=1){var l,c=s[a];if(AX((l=n[c])===null||l===void 0?void 0:l.points,o,i))return"".concat(e,"-placement-").concat(c)}return""}function uN(n,e,r,i){return e||(r?{motionName:"".concat(n,"-").concat(r)}:i?{motionName:i}:null)}function qm(n){return n.ownerDocument.defaultView}function sE(n){for(var e=[],r=n==null?void 0:n.parentElement,i=["hidden","scroll","clip","auto"];r;){var o=qm(r).getComputedStyle(r),s=o.overflowX,a=o.overflowY,l=o.overflow;[s,a,l].some(function(c){return i.includes(c)})&&e.push(r),r=r.parentElement}return e}function Jp(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(n)?e:n}function gh(n){return Jp(parseFloat(n),0)}function dN(n,e){var r=re({},n);return(e||[]).forEach(function(i){if(!(i instanceof HTMLBodyElement||i instanceof HTMLHtmlElement)){var o=qm(i).getComputedStyle(i),s=o.overflow,a=o.overflowClipMargin,l=o.borderTopWidth,c=o.borderBottomWidth,u=o.borderLeftWidth,d=o.borderRightWidth,f=i.getBoundingClientRect(),h=i.offsetHeight,p=i.clientHeight,g=i.offsetWidth,y=i.clientWidth,v=gh(l),m=gh(c),_=gh(u),x=gh(d),S=Jp(Math.round(f.width/g*1e3)/1e3),w=Jp(Math.round(f.height/h*1e3)/1e3),E=(g-y-_-x)*S,C=(h-p-v-m)*w,T=v*w,M=m*w,R=_*S,P=x*S,D=0,F=0;if(s==="clip"){var A=gh(a);D=A*S,F=A*w}var I=f.x+R-D,N=f.y+T-F,L=I+f.width+2*D-R-P-E,O=N+f.height+2*F-T-M-C;r.left=Math.max(r.left,I),r.top=Math.max(r.top,N),r.right=Math.min(r.right,L),r.bottom=Math.min(r.bottom,O)}}),r}function fN(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(e),i=r.match(/^(.*)\%$/);return i?n*(parseFloat(i[1])/100):parseFloat(r)}function hN(n,e){var r=e||[],i=Ce(r,2),o=i[0],s=i[1];return[fN(n.width,o),fN(n.height,s)]}function pN(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[n[0],n[1]]}function Fu(n,e){var r=e[0],i=e[1],o,s;return r==="t"?s=n.y:r==="b"?s=n.y+n.height:s=n.y+n.height/2,i==="l"?o=n.x:i==="r"?o=n.x+n.width:o=n.x+n.width/2,{x:o,y:s}}function il(n,e){var r={t:"b",b:"t",l:"r",r:"l"};return n.map(function(i,o){return o===e?r[i]||"c":i}).join("")}function PX(n,e,r,i,o,s,a){var l=b.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[i]||{}}),c=Ce(l,2),u=c[0],d=c[1],f=b.useRef(0),h=b.useMemo(function(){return e?sE(e):[]},[e]),p=b.useRef({}),g=function(){p.current={}};n||g();var y=br(function(){if(e&&r&&n){let yi=function(Au,nl){var Nu=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe,dg=k.x+Au,fg=k.y+nl,Sx=dg+ve,Et=fg+ae,Bt=Math.max(dg,Nu.left),Kn=Math.max(fg,Nu.top),ur=Math.min(Sx,Nu.right),Yn=Math.min(Et,Nu.bottom);return Math.max(0,(ur-Bt)*(Yn-Kn))},Ru=function(){En=k.y+rt,ar=En+ae,kn=k.x+qe,Ar=kn+ve};var wR=yi,ER=Ru,_,x,S,w,E=e,C=E.ownerDocument,T=qm(E),M=T.getComputedStyle(E),R=M.width,P=M.height,D=M.position,F=E.style.left,A=E.style.top,I=E.style.right,N=E.style.bottom,L=E.style.overflow,O=re(re({},o[i]),s),V=C.createElement("div");(_=E.parentElement)===null||_===void 0||_.appendChild(V),V.style.left="".concat(E.offsetLeft,"px"),V.style.top="".concat(E.offsetTop,"px"),V.style.position=D,V.style.height="".concat(E.offsetHeight,"px"),V.style.width="".concat(E.offsetWidth,"px"),E.style.left="0",E.style.top="0",E.style.right="auto",E.style.bottom="auto",E.style.overflow="hidden";var B;if(Array.isArray(r))B={x:r[0],y:r[1],width:0,height:0};else{var z,W,ie=r.getBoundingClientRect();ie.x=(z=ie.x)!==null&&z!==void 0?z:ie.left,ie.y=(W=ie.y)!==null&&W!==void 0?W:ie.top,B={x:ie.x,y:ie.y,width:ie.width,height:ie.height}}var k=E.getBoundingClientRect();k.x=(x=k.x)!==null&&x!==void 0?x:k.left,k.y=(S=k.y)!==null&&S!==void 0?S:k.top;var j=C.documentElement,Q=j.clientWidth,Y=j.clientHeight,ne=j.scrollWidth,ye=j.scrollHeight,me=j.scrollTop,fe=j.scrollLeft,ae=k.height,ve=k.width,q=B.height,ge=B.width,xe={left:0,top:0,right:Q,bottom:Y},_e={left:-fe,top:-me,right:ne-fe,bottom:ye-me},Se=O.htmlRegion,Ke="visible",Ue="visibleFirst";Se!=="scroll"&&Se!==Ue&&(Se=Ke);var H=Se===Ue,U=dN(_e,h),X=dN(xe,h),oe=Se===Ke?X:U,pe=H?X:oe;E.style.left="auto",E.style.top="auto",E.style.right="0",E.style.bottom="0";var ce=E.getBoundingClientRect();E.style.left=F,E.style.top=A,E.style.right=I,E.style.bottom=N,E.style.overflow=L,(w=E.parentElement)===null||w===void 0||w.removeChild(V);var Fe=Jp(Math.round(ve/parseFloat(R)*1e3)/1e3),Re=Jp(Math.round(ae/parseFloat(P)*1e3)/1e3);if(Fe===0||Re===0||Hp(r)&&!SU(r))return;var Le=O.offset,Je=O.targetOffset,Me=hN(k,Le),ze=Ce(Me,2),Ee=ze[0],Pe=ze[1],ke=hN(B,Je),Ve=Ce(ke,2),$e=Ve[0],_t=Ve[1];B.x-=$e,B.y-=_t;var J=O.points||[],Qe=Ce(J,2),be=Qe[0],Oe=Qe[1],Ze=pN(Oe),We=pN(be),wt=Fu(B,Ze),Mt=Fu(k,We),ct=re({},O),qe=wt.x-Mt.x+Ee,rt=wt.y-Mt.y+Pe,Lt=yi(qe,rt),bn=yi(qe,rt,X),Xe=Fu(B,["t","l"]),ot=Fu(k,["t","l"]),yt=Fu(B,["b","r"]),ut=Fu(k,["b","r"]),bt=O.overflow||{},It=bt.adjustX,yn=bt.adjustY,un=bt.shiftX,Un=bt.shiftY,en=function(nl){return typeof nl=="boolean"?nl:nl>=0},En,ar,kn,Ar;Ru();var vt=en(yn),$=We[0]===Ze[0];if(vt&&We[0]==="t"&&(ar>pe.bottom||p.current.bt)){var Z=rt;$?Z-=ae-q:Z=Xe.y-ut.y-Pe;var ue=yi(qe,Z),he=yi(qe,Z,X);ue>Lt||ue===Lt&&(!H||he>=bn)?(p.current.bt=!0,rt=Z,Pe=-Pe,ct.points=[il(We,0),il(Ze,0)]):p.current.bt=!1}if(vt&&We[0]==="b"&&(En<pe.top||p.current.tb)){var se=rt;$?se+=ae-q:se=yt.y-ot.y-Pe;var Ge=yi(qe,se),st=yi(qe,se,X);Ge>Lt||Ge===Lt&&(!H||st>=bn)?(p.current.tb=!0,rt=se,Pe=-Pe,ct.points=[il(We,0),il(Ze,0)]):p.current.tb=!1}var dt=en(It),mt=We[1]===Ze[1];if(dt&&We[1]==="l"&&(Ar>pe.right||p.current.rl)){var Ct=qe;mt?Ct-=ve-ge:Ct=Xe.x-ut.x-Ee;var Ye=yi(Ct,rt),et=yi(Ct,rt,X);Ye>Lt||Ye===Lt&&(!H||et>=bn)?(p.current.rl=!0,qe=Ct,Ee=-Ee,ct.points=[il(We,1),il(Ze,1)]):p.current.rl=!1}if(dt&&We[1]==="r"&&(kn<pe.left||p.current.lr)){var xt=qe;mt?xt+=ve-ge:xt=yt.x-ot.x-Ee;var $t=yi(xt,rt),hn=yi(xt,rt,X);$t>Lt||$t===Lt&&(!H||hn>=bn)?(p.current.lr=!0,qe=xt,Ee=-Ee,ct.points=[il(We,1),il(Ze,1)]):p.current.lr=!1}Ru();var dn=un===!0?0:un;typeof dn=="number"&&(kn<X.left&&(qe-=kn-X.left-Ee,B.x+ge<X.left+dn&&(qe+=B.x-X.left+ge-dn)),Ar>X.right&&(qe-=Ar-X.right-Ee,B.x>X.right-dn&&(qe+=B.x-X.right+dn)));var zt=Un===!0?0:Un;typeof zt=="number"&&(En<X.top&&(rt-=En-X.top-Pe,B.y+q<X.top+zt&&(rt+=B.y-X.top+q-zt)),ar>X.bottom&&(rt-=ar-X.bottom-Pe,B.y>X.bottom-zt&&(rt+=B.y-X.bottom+zt)));var Rt=k.x+qe,Bn=Rt+ve,jt=k.y+rt,Nr=jt+ae,Vt=B.x,Nt=Vt+ge,$n=B.y,Xt=$n+q,ln=Math.max(Rt,Vt),pn=Math.min(Bn,Nt),Cn=(ln+pn)/2,Rn=Cn-Rt,vi=Math.max(jt,$n),Pr=Math.min(Nr,Xt),Ko=(vi+Pr)/2,tl=Ko-jt;a==null||a(e,ct);var Ms=ce.right-k.x-(qe+k.width),Rs=ce.bottom-k.y-(rt+k.height);Fe===1&&(qe=Math.round(qe),Ms=Math.round(Ms)),Re===1&&(rt=Math.round(rt),Rs=Math.round(Rs));var bx={ready:!0,offsetX:qe/Fe,offsetY:rt/Re,offsetR:Ms/Fe,offsetB:Rs/Re,arrowX:Rn/Fe,arrowY:tl/Re,scaleX:Fe,scaleY:Re,align:ct};d(bx)}}),v=function(){f.current+=1;var x=f.current;Promise.resolve().then(function(){f.current===x&&y()})},m=function(){d(function(x){return re(re({},x),{},{ready:!1})})};return xn(m,[i]),xn(function(){n||m()},[n]),[u.ready,u.offsetX,u.offsetY,u.offsetR,u.offsetB,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,v]}function OX(n,e,r,i,o){xn(function(){if(n&&e&&r){let h=function(){i(),o()};var f=h,s=e,a=r,l=sE(s),c=sE(a),u=qm(a),d=new Set([u].concat(ht(l),ht(c)));return d.forEach(function(p){p.addEventListener("scroll",h,{passive:!0})}),u.addEventListener("resize",h,{passive:!0}),i(),function(){d.forEach(function(p){p.removeEventListener("scroll",h),u.removeEventListener("resize",h)})}}},[n,e,r])}function IX(n,e,r,i,o,s,a,l){var c=b.useRef(n);c.current=n;var u=b.useRef(!1);b.useEffect(function(){if(e&&i&&(!o||s)){var f=function(){u.current=!1},h=function(v){var m;c.current&&!a(((m=v.composedPath)===null||m===void 0||(m=m.call(v))===null||m===void 0?void 0:m[0])||v.target)&&!u.current&&l(!1)},p=qm(i);p.addEventListener("pointerdown",f,!0),p.addEventListener("mousedown",h,!0),p.addEventListener("contextmenu",h,!0);var g=J0(r);return g&&(g.addEventListener("mousedown",h,!0),g.addEventListener("contextmenu",h,!0)),function(){p.removeEventListener("pointerdown",f,!0),p.removeEventListener("mousedown",h,!0),p.removeEventListener("contextmenu",h,!0),g&&(g.removeEventListener("mousedown",h,!0),g.removeEventListener("contextmenu",h,!0))}}},[e,r,i,o,s]);function d(){u.current=!0}return d}var DX=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function LX(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bT,e=b.forwardRef(function(r,i){var o=r.prefixCls,s=o===void 0?"rc-trigger-popup":o,a=r.children,l=r.action,c=l===void 0?"hover":l,u=r.showAction,d=r.hideAction,f=r.popupVisible,h=r.defaultPopupVisible,p=r.onPopupVisibleChange,g=r.afterPopupVisibleChange,y=r.mouseEnterDelay,v=r.mouseLeaveDelay,m=v===void 0?.1:v,_=r.focusDelay,x=r.blurDelay,S=r.mask,w=r.maskClosable,E=w===void 0?!0:w,C=r.getPopupContainer,T=r.forceRender,M=r.autoDestroy,R=r.destroyPopupOnHide,P=r.popup,D=r.popupClassName,F=r.popupStyle,A=r.popupPlacement,I=r.builtinPlacements,N=I===void 0?{}:I,L=r.popupAlign,O=r.zIndex,V=r.stretch,B=r.getPopupClassNameFromAlign,z=r.fresh,W=r.alignPoint,ie=r.onPopupClick,k=r.onPopupAlign,j=r.arrow,Q=r.popupMotion,Y=r.maskMotion,ne=r.popupTransitionName,ye=r.popupAnimation,me=r.maskTransitionName,fe=r.maskAnimation,ae=r.className,ve=r.getTriggerDOMNode,q=Pn(r,DX),ge=M||R||!1,xe=b.useState(!1),_e=Ce(xe,2),Se=_e[0],Ke=_e[1];xn(function(){Ke(pB())},[]);var Ue=b.useRef({}),H=b.useContext(lN),U=b.useMemo(function(){return{registerSubPopup:function(Bt,Kn){Ue.current[Bt]=Kn,H==null||H.registerSubPopup(Bt,Kn)}}},[H]),X=zU(),oe=b.useState(null),pe=Ce(oe,2),ce=pe[0],Fe=pe[1],Re=b.useRef(null),Le=br(function(Et){Re.current=Et,Hp(Et)&&ce!==Et&&Fe(Et),H==null||H.registerSubPopup(X,Et)}),Je=b.useState(null),Me=Ce(Je,2),ze=Me[0],Ee=Me[1],Pe=b.useRef(null),ke=br(function(Et){Hp(Et)&&ze!==Et&&(Ee(Et),Pe.current=Et)}),Ve=b.Children.only(a),$e=(Ve==null?void 0:Ve.props)||{},_t={},J=br(function(Et){var Bt,Kn,ur=ze;return(ur==null?void 0:ur.contains(Et))||((Bt=J0(ur))===null||Bt===void 0?void 0:Bt.host)===Et||Et===ur||(ce==null?void 0:ce.contains(Et))||((Kn=J0(ce))===null||Kn===void 0?void 0:Kn.host)===Et||Et===ce||Object.values(Ue.current).some(function(Yn){return(Yn==null?void 0:Yn.contains(Et))||Et===Yn})}),Qe=uN(s,Q,ye,ne),be=uN(s,Y,fe,me),Oe=b.useState(h||!1),Ze=Ce(Oe,2),We=Ze[0],wt=Ze[1],Mt=f??We,ct=br(function(Et){f===void 0&&wt(Et)});xn(function(){wt(f||!1)},[f]);var qe=b.useRef(Mt);qe.current=Mt;var rt=b.useRef([]);rt.current=[];var Lt=br(function(Et){var Bt;ct(Et),((Bt=rt.current[rt.current.length-1])!==null&&Bt!==void 0?Bt:Mt)!==Et&&(rt.current.push(Et),p==null||p(Et))}),bn=b.useRef(),Xe=function(){clearTimeout(bn.current)},ot=function(Bt){var Kn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Xe(),Kn===0?Lt(Bt):bn.current=setTimeout(function(){Lt(Bt)},Kn*1e3)};b.useEffect(function(){return Xe},[]);var yt=b.useState(!1),ut=Ce(yt,2),bt=ut[0],It=ut[1];xn(function(Et){(!Et||Mt)&&It(!0)},[Mt]);var yn=b.useState(null),un=Ce(yn,2),Un=un[0],en=un[1],En=b.useState(null),ar=Ce(En,2),kn=ar[0],Ar=ar[1],vt=function(Bt){Ar([Bt.clientX,Bt.clientY])},$=PX(Mt,ce,W&&kn!==null?kn:ze,A,N,L,k),Z=Ce($,11),ue=Z[0],he=Z[1],se=Z[2],Ge=Z[3],st=Z[4],dt=Z[5],mt=Z[6],Ct=Z[7],Ye=Z[8],et=Z[9],xt=Z[10],$t=RX(Se,c,u,d),hn=Ce($t,2),dn=hn[0],zt=hn[1],Rt=dn.has("click"),Bn=zt.has("click")||zt.has("contextMenu"),jt=br(function(){bt||xt()}),Nr=function(){qe.current&&W&&Bn&&ot(!1)};OX(Mt,ze,ce,jt,Nr),xn(function(){jt()},[kn,A]),xn(function(){Mt&&!(N!=null&&N[A])&&jt()},[JSON.stringify(L)]);var Vt=b.useMemo(function(){var Et=NX(N,s,et,W);return we(Et,B==null?void 0:B(et))},[et,B,N,s,W]);b.useImperativeHandle(i,function(){return{nativeElement:Pe.current,popupElement:Re.current,forceAlign:jt}});var Nt=b.useState(0),$n=Ce(Nt,2),Xt=$n[0],ln=$n[1],pn=b.useState(0),Cn=Ce(pn,2),Rn=Cn[0],vi=Cn[1],Pr=function(){if(V&&ze){var Bt=ze.getBoundingClientRect();ln(Bt.width),vi(Bt.height)}},Ko=function(){Pr(),jt()},tl=function(Bt){It(!1),xt(),g==null||g(Bt)},Ms=function(){return new Promise(function(Bt){Pr(),en(function(){return Bt})})};xn(function(){Un&&(xt(),Un(),en(null))},[Un]);function Rs(Et,Bt,Kn,ur){_t[Et]=function(Yn){var hg;ur==null||ur(Yn),ot(Bt,Kn);for(var wx=arguments.length,CR=new Array(wx>1?wx-1:0),pg=1;pg<wx;pg++)CR[pg-1]=arguments[pg];(hg=$e[Et])===null||hg===void 0||hg.call.apply(hg,[$e,Yn].concat(CR))}}(Rt||Bn)&&(_t.onClick=function(Et){var Bt;qe.current&&Bn?ot(!1):!qe.current&&Rt&&(vt(Et),ot(!0));for(var Kn=arguments.length,ur=new Array(Kn>1?Kn-1:0),Yn=1;Yn<Kn;Yn++)ur[Yn-1]=arguments[Yn];(Bt=$e.onClick)===null||Bt===void 0||Bt.call.apply(Bt,[$e,Et].concat(ur))});var bx=IX(Mt,Bn,ze,ce,S,E,J,ot),wR=dn.has("hover"),ER=zt.has("hover"),yi,Ru;wR&&(Rs("onMouseEnter",!0,y,function(Et){vt(Et)}),Rs("onPointerEnter",!0,y,function(Et){vt(Et)}),yi=function(Bt){(Mt||bt)&&ce!==null&&ce!==void 0&&ce.contains(Bt.target)&&ot(!0,y)},W&&(_t.onMouseMove=function(Et){var Bt;(Bt=$e.onMouseMove)===null||Bt===void 0||Bt.call($e,Et)})),ER&&(Rs("onMouseLeave",!1,m),Rs("onPointerLeave",!1,m),Ru=function(){ot(!1,m)}),dn.has("focus")&&Rs("onFocus",!0,_),zt.has("focus")&&Rs("onBlur",!1,x),dn.has("contextMenu")&&(_t.onContextMenu=function(Et){var Bt;qe.current&&zt.has("contextMenu")?ot(!1):(vt(Et),ot(!0)),Et.preventDefault();for(var Kn=arguments.length,ur=new Array(Kn>1?Kn-1:0),Yn=1;Yn<Kn;Yn++)ur[Yn-1]=arguments[Yn];(Bt=$e.onContextMenu)===null||Bt===void 0||Bt.call.apply(Bt,[$e,Et].concat(ur))}),ae&&(_t.className=we($e.className,ae));var Au=re(re({},$e),_t),nl={},Nu=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Nu.forEach(function(Et){q[Et]&&(nl[Et]=function(){for(var Bt,Kn=arguments.length,ur=new Array(Kn),Yn=0;Yn<Kn;Yn++)ur[Yn]=arguments[Yn];(Bt=Au[Et])===null||Bt===void 0||Bt.call.apply(Bt,[Au].concat(ur)),q[Et].apply(q,ur)})});var dg=b.cloneElement(Ve,re(re({},Au),nl)),fg={x:dt,y:mt},Sx=j?re({},j!==!0?j:{}):null;return b.createElement(b.Fragment,null,b.createElement(Ka,{disabled:!Mt,ref:ke,onResize:Ko},b.createElement(MX,{getTriggerDOMNode:ve},dg)),b.createElement(lN.Provider,{value:U},b.createElement(TX,{portal:n,ref:Le,prefixCls:s,popup:P,className:we(D,Vt),style:F,target:ze,onMouseEnter:yi,onMouseLeave:Ru,onPointerEnter:yi,zIndex:O,open:Mt,keepDom:bt,fresh:z,onClick:ie,onPointerDownCapture:bx,mask:S,motion:Qe,maskMotion:be,onVisibleChanged:tl,onPrepare:Ms,forceRender:T,autoDestroy:ge,getPopupContainer:C,align:et,arrow:Sx,arrowPos:fg,ready:ue,offsetX:he,offsetY:se,offsetR:Ge,offsetB:st,onAlign:jt,stretch:V,targetWidth:Xt/Ct,targetHeight:Rn/Ye})))});return e}const wB=LX(bT);var FX=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],UX=function(e){var r=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"}}},BX=function(e,r){var i=e.prefixCls;e.disabled;var o=e.visible,s=e.children,a=e.popupElement,l=e.animation,c=e.transitionName,u=e.dropdownStyle,d=e.dropdownClassName,f=e.direction,h=f===void 0?"ltr":f,p=e.placement,g=e.builtinPlacements,y=e.dropdownMatchSelectWidth,v=e.dropdownRender,m=e.dropdownAlign,_=e.getPopupContainer,x=e.empty,S=e.getTriggerDOMNode,w=e.onPopupVisibleChange,E=e.onPopupMouseEnter,C=Pn(e,FX),T="".concat(i,"-dropdown"),M=a;v&&(M=v(a));var R=b.useMemo(function(){return g||UX(y)},[g,y]),P=l?"".concat(T,"-").concat(l):c,D=typeof y=="number",F=b.useMemo(function(){return D?null:y===!1?"minWidth":"width"},[y,D]),A=u;D&&(A=re(re({},A),{},{width:y}));var I=b.useRef(null);return b.useImperativeHandle(r,function(){return{getPopupElement:function(){var L;return(L=I.current)===null||L===void 0?void 0:L.popupElement}}}),b.createElement(wB,pt({},C,{showAction:w?["click"]:[],hideAction:w?["click"]:[],popupPlacement:p||(h==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:R,prefixCls:T,popupTransitionName:P,popup:b.createElement("div",{onMouseEnter:E},M),ref:I,stretch:F,popupAlign:m,popupVisible:o,getPopupContainer:_,popupClassName:we(d,ee({},"".concat(T,"-empty"),x)),popupStyle:A,getTriggerDOMNode:S,onPopupVisibleChange:w}),s)},$X=b.forwardRef(BX);function mN(n,e){var r=n.key,i;return"value"in n&&(i=n.value),r??(i!==void 0?i:"rc-index-key-".concat(e))}function aE(n){return typeof n<"u"&&!Number.isNaN(n)}function EB(n,e){var r=n||{},i=r.label,o=r.value,s=r.options,a=r.groupLabel,l=i||(e?"children":"label");return{label:l,value:o||"value",options:s||"options",groupLabel:a||l}}function zX(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.fieldNames,i=e.childrenAsData,o=[],s=EB(r,!1),a=s.label,l=s.value,c=s.options,u=s.groupLabel;function d(f,h){Array.isArray(f)&&f.forEach(function(p){if(h||!(c in p)){var g=p[l];o.push({key:mN(p,o.length),groupOption:h,data:p,label:p[a],value:g})}else{var y=p[u];y===void 0&&i&&(y=p.label),o.push({key:mN(p,o.length),group:!0,data:p,label:y}),d(p[c],!0)}})}return d(n,!1),o}function lE(n){var e=re({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return Yi(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var kX=function(e,r,i){if(!r||!r.length)return null;var o=!1,s=function l(c,u){var d=L3(u),f=d[0],h=d.slice(1);if(!f)return[c];var p=c.split(f);return o=o||p.length>1,p.reduce(function(g,y){return[].concat(ht(g),ht(l(y,h)))},[]).filter(Boolean)},a=s(e,r);return o?typeof i<"u"?a.slice(0,i):a:null},wT=b.createContext(null);function VX(n){var e=n.visible,r=n.values;if(!e)return null;var i=50;return b.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(r.slice(0,i).map(function(o){var s=o.label,a=o.value;return["number","string"].includes(Ot(s))?s:a}).join(", ")),r.length>i?", ...":null)}var GX=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],HX=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],cE=function(e){return e==="tags"||e==="multiple"},jX=b.forwardRef(function(n,e){var r,i=n.id,o=n.prefixCls,s=n.className,a=n.showSearch,l=n.tagRender,c=n.direction,u=n.omitDomProps,d=n.displayValues,f=n.onDisplayValuesChange,h=n.emptyOptions,p=n.notFoundContent,g=p===void 0?"Not Found":p,y=n.onClear,v=n.mode,m=n.disabled,_=n.loading,x=n.getInputElement,S=n.getRawInputElement,w=n.open,E=n.defaultOpen,C=n.onDropdownVisibleChange,T=n.activeValue,M=n.onActiveValueChange,R=n.activeDescendantId,P=n.searchValue,D=n.autoClearSearchValue,F=n.onSearch,A=n.onSearchSplit,I=n.tokenSeparators,N=n.allowClear,L=n.prefix,O=n.suffixIcon,V=n.clearIcon,B=n.OptionList,z=n.animation,W=n.transitionName,ie=n.dropdownStyle,k=n.dropdownClassName,j=n.dropdownMatchSelectWidth,Q=n.dropdownRender,Y=n.dropdownAlign,ne=n.placement,ye=n.builtinPlacements,me=n.getPopupContainer,fe=n.showAction,ae=fe===void 0?[]:fe,ve=n.onFocus,q=n.onBlur,ge=n.onKeyUp,xe=n.onKeyDown,_e=n.onMouseDown,Se=Pn(n,GX),Ke=cE(v),Ue=(a!==void 0?a:Ke)||v==="combobox",H=re({},Se);HX.forEach(function(Vt){delete H[Vt]}),u==null||u.forEach(function(Vt){delete H[Vt]});var U=b.useState(!1),X=Ce(U,2),oe=X[0],pe=X[1];b.useEffect(function(){pe(pB())},[]);var ce=b.useRef(null),Fe=b.useRef(null),Re=b.useRef(null),Le=b.useRef(null),Je=b.useRef(null),Me=b.useRef(!1),ze=Zq(),Ee=Ce(ze,3),Pe=Ee[0],ke=Ee[1],Ve=Ee[2];b.useImperativeHandle(e,function(){var Vt,Nt;return{focus:(Vt=Le.current)===null||Vt===void 0?void 0:Vt.focus,blur:(Nt=Le.current)===null||Nt===void 0?void 0:Nt.blur,scrollTo:function(Xt){var ln;return(ln=Je.current)===null||ln===void 0?void 0:ln.scrollTo(Xt)},nativeElement:ce.current||Fe.current}});var $e=b.useMemo(function(){var Vt;if(v!=="combobox")return P;var Nt=(Vt=d[0])===null||Vt===void 0?void 0:Vt.value;return typeof Nt=="string"||typeof Nt=="number"?String(Nt):""},[P,v,d]),_t=v==="combobox"&&typeof x=="function"&&x()||null,J=typeof S=="function"&&S(),Qe=Uf(Fe,J==null||(r=J.props)===null||r===void 0?void 0:r.ref),be=b.useState(!1),Oe=Ce(be,2),Ze=Oe[0],We=Oe[1];xn(function(){We(!0)},[]);var wt=Zi(!1,{defaultValue:E,value:w}),Mt=Ce(wt,2),ct=Mt[0],qe=Mt[1],rt=Ze?ct:!1,Lt=!g&&h;(m||Lt&&rt&&v==="combobox")&&(rt=!1);var bn=Lt?!1:rt,Xe=b.useCallback(function(Vt){var Nt=Vt!==void 0?Vt:!rt;m||(qe(Nt),rt!==Nt&&(C==null||C(Nt)))},[m,rt,qe,C]),ot=b.useMemo(function(){return(I||[]).some(function(Vt){return[`
`,`\r
`].includes(Vt)})},[I]),yt=b.useContext(wT)||{},ut=yt.maxCount,bt=yt.rawValues,It=function(Nt,$n,Xt){if(!(Ke&&aE(ut)&&(bt==null?void 0:bt.size)>=ut)){var ln=!0,pn=Nt;M==null||M(null);var Cn=kX(Nt,I,aE(ut)?ut-bt.size:void 0),Rn=Xt?null:Cn;return v!=="combobox"&&Rn&&(pn="",A==null||A(Rn),Xe(!1),ln=!1),F&&$e!==pn&&F(pn,{source:$n?"typing":"effect"}),ln}},yn=function(Nt){!Nt||!Nt.trim()||F(Nt,{source:"submit"})};b.useEffect(function(){!rt&&!Ke&&v!=="combobox"&&It("",!1,!1)},[rt]),b.useEffect(function(){ct&&m&&qe(!1),m&&!Me.current&&ke(!1)},[m]);var un=gB(),Un=Ce(un,2),en=Un[0],En=Un[1],ar=b.useRef(!1),kn=function(Nt){var $n=en(),Xt=Nt.key,ln=Xt==="Enter";if(ln&&(v!=="combobox"&&Nt.preventDefault(),rt||Xe(!0)),En(!!$e),Xt==="Backspace"&&!$n&&Ke&&!$e&&d.length){for(var pn=ht(d),Cn=null,Rn=pn.length-1;Rn>=0;Rn-=1){var vi=pn[Rn];if(!vi.disabled){pn.splice(Rn,1),Cn=vi;break}}Cn&&f(pn,{type:"remove",values:[Cn]})}for(var Pr=arguments.length,Ko=new Array(Pr>1?Pr-1:0),tl=1;tl<Pr;tl++)Ko[tl-1]=arguments[tl];if(rt&&(!ln||!ar.current)){var Ms;(Ms=Je.current)===null||Ms===void 0||Ms.onKeyDown.apply(Ms,[Nt].concat(Ko))}ln&&(ar.current=!0),xe==null||xe.apply(void 0,[Nt].concat(Ko))},Ar=function(Nt){for(var $n=arguments.length,Xt=new Array($n>1?$n-1:0),ln=1;ln<$n;ln++)Xt[ln-1]=arguments[ln];if(rt){var pn;(pn=Je.current)===null||pn===void 0||pn.onKeyUp.apply(pn,[Nt].concat(Xt))}Nt.key==="Enter"&&(ar.current=!1),ge==null||ge.apply(void 0,[Nt].concat(Xt))},vt=function(Nt){var $n=d.filter(function(Xt){return Xt!==Nt});f($n,{type:"remove",values:[Nt]})},$=b.useRef(!1),Z=function(){ke(!0),m||(ve&&!$.current&&ve.apply(void 0,arguments),ae.includes("focus")&&Xe(!0)),$.current=!0},ue=function(){Me.current=!0,ke(!1,function(){$.current=!1,Me.current=!1,Xe(!1)}),!m&&($e&&(v==="tags"?F($e,{source:"submit"}):v==="multiple"&&F("",{source:"blur"})),q&&q.apply(void 0,arguments))},he=[];b.useEffect(function(){return function(){he.forEach(function(Vt){return clearTimeout(Vt)}),he.splice(0,he.length)}},[]);var se=function(Nt){var $n,Xt=Nt.target,ln=($n=Re.current)===null||$n===void 0?void 0:$n.getPopupElement();if(ln&&ln.contains(Xt)){var pn=setTimeout(function(){var Pr=he.indexOf(pn);if(Pr!==-1&&he.splice(Pr,1),Ve(),!oe&&!ln.contains(document.activeElement)){var Ko;(Ko=Le.current)===null||Ko===void 0||Ko.focus()}});he.push(pn)}for(var Cn=arguments.length,Rn=new Array(Cn>1?Cn-1:0),vi=1;vi<Cn;vi++)Rn[vi-1]=arguments[vi];_e==null||_e.apply(void 0,[Nt].concat(Rn))},Ge=b.useState({}),st=Ce(Ge,2),dt=st[1];function mt(){dt({})}var Ct;J&&(Ct=function(Nt){Xe(Nt)}),Jq(function(){var Vt;return[ce.current,(Vt=Re.current)===null||Vt===void 0?void 0:Vt.getPopupElement()]},bn,Xe,!!J);var Ye=b.useMemo(function(){return re(re({},n),{},{notFoundContent:g,open:rt,triggerOpen:bn,id:i,showSearch:Ue,multiple:Ke,toggleOpen:Xe})},[n,g,bn,rt,i,Ue,Ke,Xe]),et=!!O||_,xt;et&&(xt=b.createElement(L_,{className:we("".concat(o,"-arrow"),ee({},"".concat(o,"-arrow-loading"),_)),customizeIcon:O,customizeIconProps:{loading:_,searchValue:$e,open:rt,focused:Pe,showSearch:Ue}}));var $t=function(){var Nt;y==null||y(),(Nt=Le.current)===null||Nt===void 0||Nt.focus(),f([],{type:"clear",values:d}),It("",!1,!1)},hn=Yq(o,$t,d,N,V,m,$e,v),dn=hn.allowClear,zt=hn.clearIcon,Rt=b.createElement(B,{ref:Je}),Bn=we(o,s,ee(ee(ee(ee(ee(ee(ee(ee(ee(ee({},"".concat(o,"-focused"),Pe),"".concat(o,"-multiple"),Ke),"".concat(o,"-single"),!Ke),"".concat(o,"-allow-clear"),N),"".concat(o,"-show-arrow"),et),"".concat(o,"-disabled"),m),"".concat(o,"-loading"),_),"".concat(o,"-open"),rt),"".concat(o,"-customize-input"),_t),"".concat(o,"-show-search"),Ue)),jt=b.createElement($X,{ref:Re,disabled:m,prefixCls:o,visible:bn,popupElement:Rt,animation:z,transitionName:W,dropdownStyle:ie,dropdownClassName:k,direction:c,dropdownMatchSelectWidth:j,dropdownRender:Q,dropdownAlign:Y,placement:ne,builtinPlacements:ye,getPopupContainer:me,empty:h,getTriggerDOMNode:function(Nt){return Fe.current||Nt},onPopupVisibleChange:Ct,onPopupMouseEnter:mt},J?b.cloneElement(J,{ref:Qe}):b.createElement(SX,pt({},n,{domRef:Fe,prefixCls:o,inputElement:_t,ref:Le,id:i,prefix:L,showSearch:Ue,autoClearSearchValue:D,mode:v,activeDescendantId:R,tagRender:l,values:d,open:rt,onToggleOpen:Xe,activeValue:T,searchValue:$e,onSearch:It,onSearchSubmit:yn,onRemove:vt,tokenWithEnter:ot}))),Nr;return J?Nr=jt:Nr=b.createElement("div",pt({className:Bn},H,{ref:ce,onMouseDown:se,onKeyDown:kn,onKeyUp:Ar,onFocus:Z,onBlur:ue}),b.createElement(VX,{visible:Pe&&!rt,values:d}),jt,xt,dn&&zt),b.createElement(mB.Provider,{value:Ye},Nr)}),ET=function(){return null};ET.isSelectOptGroup=!0;var CT=function(){return null};CT.isSelectOption=!0;var CB=b.forwardRef(function(n,e){var r=n.height,i=n.offsetY,o=n.offsetX,s=n.children,a=n.prefixCls,l=n.onInnerResize,c=n.innerProps,u=n.rtl,d=n.extra,f={},h={display:"flex",flexDirection:"column"};return i!==void 0&&(f={height:r,position:"relative",overflow:"hidden"},h=re(re({},h),{},ee(ee(ee(ee(ee({transform:"translateY(".concat(i,"px)")},u?"marginRight":"marginLeft",-o),"position","absolute"),"left",0),"right",0),"top",0))),b.createElement("div",{style:f},b.createElement(Ka,{onResize:function(g){var y=g.offsetHeight;y&&l&&l()}},b.createElement("div",pt({style:h,className:we(ee({},"".concat(a,"-holder-inner"),a)),ref:e},c),s,d)))});CB.displayName="Filler";function WX(n){var e=n.children,r=n.setRef,i=b.useCallback(function(o){r(o)},[]);return b.cloneElement(e,{ref:i})}function qX(n,e,r,i,o,s,a,l){var c=l.getKey;return n.slice(e,r+1).map(function(u,d){var f=e+d,h=a(u,f,{style:{width:i},offsetX:o}),p=c(u);return b.createElement(WX,{key:p,setRef:function(y){return s(u,y)}},h)})}function XX(n,e,r){var i=n.length,o=e.length,s,a;if(i===0&&o===0)return null;i<o?(s=n,a=e):(s=e,a=n);var l={__EMPTY_ITEM__:!0};function c(g){return g!==void 0?r(g):l}for(var u=null,d=Math.abs(i-o)!==1,f=0;f<a.length;f+=1){var h=c(s[f]),p=c(a[f]);if(h!==p){u=f,d=d||h!==c(a[f+1]);break}}return u===null?null:{index:u,multiple:d}}function KX(n,e,r){var i=b.useState(n),o=Ce(i,2),s=o[0],a=o[1],l=b.useState(null),c=Ce(l,2),u=c[0],d=c[1];return b.useEffect(function(){var f=XX(s||[],n||[],e);(f==null?void 0:f.index)!==void 0&&d(n[f.index]),a(n)},[n]),[u]}var gN=(typeof navigator>"u"?"undefined":Ot(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const TB=function(n,e,r,i){var o=b.useRef(!1),s=b.useRef(null);function a(){clearTimeout(s.current),o.current=!0,s.current=setTimeout(function(){o.current=!1},50)}var l=b.useRef({top:n,bottom:e,left:r,right:i});return l.current.top=n,l.current.bottom=e,l.current.left=r,l.current.right=i,function(c,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=c?u<0&&l.current.left||u>0&&l.current.right:u<0&&l.current.top||u>0&&l.current.bottom;return d&&f?(clearTimeout(s.current),o.current=!1):(!f||o.current)&&a(),!o.current&&f}};function YX(n,e,r,i,o,s,a){var l=b.useRef(0),c=b.useRef(null),u=b.useRef(null),d=b.useRef(!1),f=TB(e,r,i,o);function h(_,x){if(pr.cancel(c.current),!f(!1,x)){var S=_;if(!S._virtualHandled)S._virtualHandled=!0;else return;l.current+=x,u.current=x,gN||S.preventDefault(),c.current=pr(function(){var w=d.current?10:1;a(l.current*w,!1),l.current=0})}}function p(_,x){a(x,!0),gN||_.preventDefault()}var g=b.useRef(null),y=b.useRef(null);function v(_){if(n){pr.cancel(y.current),y.current=pr(function(){g.current=null},2);var x=_.deltaX,S=_.deltaY,w=_.shiftKey,E=x,C=S;(g.current==="sx"||!g.current&&w&&S&&!x)&&(E=S,C=0,g.current="sx");var T=Math.abs(E),M=Math.abs(C);g.current===null&&(g.current=s&&T>M?"x":"y"),g.current==="y"?h(_,C):p(_,E)}}function m(_){n&&(d.current=_.detail===u.current)}return[v,m]}function QX(n,e,r,i){var o=b.useMemo(function(){return[new Map,[]]},[n,r.id,i]),s=Ce(o,2),a=s[0],l=s[1],c=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,h=a.get(d),p=a.get(f);if(h===void 0||p===void 0)for(var g=n.length,y=l.length;y<g;y+=1){var v,m=n[y],_=e(m);a.set(_,y);var x=(v=r.get(_))!==null&&v!==void 0?v:i;if(l[y]=(l[y-1]||0)+x,_===d&&(h=y),_===f&&(p=y),h!==void 0&&p!==void 0)break}return{top:l[h-1]||0,bottom:l[p]}};return c}var ZX=function(){function n(){Gr(this,n),ee(this,"maps",void 0),ee(this,"id",0),ee(this,"diffKeys",new Set),this.maps=Object.create(null)}return Hr(n,[{key:"set",value:function(r,i){this.maps[r]=i,this.id+=1,this.diffKeys.add(r)}},{key:"get",value:function(r){return this.maps[r]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),n}();function vN(n){var e=parseFloat(n);return isNaN(e)?0:e}function JX(n,e,r){var i=b.useState(0),o=Ce(i,2),s=o[0],a=o[1],l=b.useRef(new Map),c=b.useRef(new ZX),u=b.useRef(0);function d(){u.current+=1}function f(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;d();var g=function(){l.current.forEach(function(m,_){if(m&&m.offsetParent){var x=hp(m),S=x.offsetHeight,w=getComputedStyle(x),E=w.marginTop,C=w.marginBottom,T=vN(E),M=vN(C),R=S+T+M;c.current.get(_)!==R&&c.current.set(_,R)}}),a(function(m){return m+1})};if(p)g();else{u.current+=1;var y=u.current;Promise.resolve().then(function(){y===u.current&&g()})}}function h(p,g){var y=n(p);l.current.get(y),g?(l.current.set(y,g),f()):l.current.delete(y)}return b.useEffect(function(){return d},[]),[h,f,c.current,s]}var yN=14/15;function eK(n,e,r){var i=b.useRef(!1),o=b.useRef(0),s=b.useRef(0),a=b.useRef(null),l=b.useRef(null),c,u=function(p){if(i.current){var g=Math.ceil(p.touches[0].pageX),y=Math.ceil(p.touches[0].pageY),v=o.current-g,m=s.current-y,_=Math.abs(v)>Math.abs(m);_?o.current=g:s.current=y;var x=r(_,_?v:m,!1,p);x&&p.preventDefault(),clearInterval(l.current),x&&(l.current=setInterval(function(){_?v*=yN:m*=yN;var S=Math.floor(_?v:m);(!r(_,S,!0)||Math.abs(S)<=.1)&&clearInterval(l.current)},16))}},d=function(){i.current=!1,c()},f=function(p){c(),p.touches.length===1&&!i.current&&(i.current=!0,o.current=Math.ceil(p.touches[0].pageX),s.current=Math.ceil(p.touches[0].pageY),a.current=p.target,a.current.addEventListener("touchmove",u,{passive:!1}),a.current.addEventListener("touchend",d,{passive:!0}))};c=function(){a.current&&(a.current.removeEventListener("touchmove",u),a.current.removeEventListener("touchend",d))},xn(function(){return n&&e.current.addEventListener("touchstart",f,{passive:!0}),function(){var h;(h=e.current)===null||h===void 0||h.removeEventListener("touchstart",f),c(),clearInterval(l.current)}},[n])}function _N(n){return Math.floor(Math.pow(n,.5))}function uE(n,e){var r="touches"in n?n.touches[0]:n;return r[e?"pageX":"pageY"]-window[e?"scrollX":"scrollY"]}function tK(n,e,r){b.useEffect(function(){var i=e.current;if(n&&i){var o=!1,s,a,l=function(){pr.cancel(s)},c=function h(){l(),s=pr(function(){r(a),h()})},u=function(p){var g=p;g._virtualHandled||(g._virtualHandled=!0,o=!0)},d=function(){o=!1,l()},f=function(p){if(o){var g=uE(p,!1),y=i.getBoundingClientRect(),v=y.top,m=y.bottom;if(g<=v){var _=v-g;a=-_N(_),c()}else if(g>=m){var x=g-m;a=_N(x),c()}else l()}};return i.addEventListener("mousedown",u),i.ownerDocument.addEventListener("mouseup",d),i.ownerDocument.addEventListener("mousemove",f),function(){i.removeEventListener("mousedown",u),i.ownerDocument.removeEventListener("mouseup",d),i.ownerDocument.removeEventListener("mousemove",f),l()}}},[n])}var nK=10;function rK(n,e,r,i,o,s,a,l){var c=b.useRef(),u=b.useState(null),d=Ce(u,2),f=d[0],h=d[1];return xn(function(){if(f&&f.times<nK){if(!n.current){h(function(V){return re({},V)});return}s();var p=f.targetAlign,g=f.originAlign,y=f.index,v=f.offset,m=n.current.clientHeight,_=!1,x=p,S=null;if(m){for(var w=p||g,E=0,C=0,T=0,M=Math.min(e.length-1,y),R=0;R<=M;R+=1){var P=o(e[R]);C=E;var D=r.get(P);T=C+(D===void 0?i:D),E=T}for(var F=w==="top"?v:m-v,A=M;A>=0;A-=1){var I=o(e[A]),N=r.get(I);if(N===void 0){_=!0;break}if(F-=N,F<=0)break}switch(w){case"top":S=C-v;break;case"bottom":S=T-m+v;break;default:{var L=n.current.scrollTop,O=L+m;C<L?x="top":T>O&&(x="bottom")}}S!==null&&a(S),S!==f.lastTop&&(_=!0)}_&&h(re(re({},f),{},{times:f.times+1,targetAlign:x,lastTop:S}))}},[f,n.current]),function(p){if(p==null){l();return}if(pr.cancel(c.current),typeof p=="number")a(p);else if(p&&Ot(p)==="object"){var g,y=p.align;"index"in p?g=p.index:g=e.findIndex(function(_){return o(_)===p.key});var v=p.offset,m=v===void 0?0:v;h({times:0,index:g,offset:m,originAlign:y})}}}var xN=b.forwardRef(function(n,e){var r=n.prefixCls,i=n.rtl,o=n.scrollOffset,s=n.scrollRange,a=n.onStartMove,l=n.onStopMove,c=n.onScroll,u=n.horizontal,d=n.spinSize,f=n.containerSize,h=n.style,p=n.thumbStyle,g=b.useState(!1),y=Ce(g,2),v=y[0],m=y[1],_=b.useState(null),x=Ce(_,2),S=x[0],w=x[1],E=b.useState(null),C=Ce(E,2),T=C[0],M=C[1],R=!i,P=b.useRef(),D=b.useRef(),F=b.useState(!1),A=Ce(F,2),I=A[0],N=A[1],L=b.useRef(),O=function(){clearTimeout(L.current),N(!0),L.current=setTimeout(function(){N(!1)},3e3)},V=s-f||0,B=f-d||0,z=b.useMemo(function(){if(o===0||V===0)return 0;var me=o/V;return me*B},[o,V,B]),W=function(fe){fe.stopPropagation(),fe.preventDefault()},ie=b.useRef({top:z,dragging:v,pageY:S,startTop:T});ie.current={top:z,dragging:v,pageY:S,startTop:T};var k=function(fe){m(!0),w(uE(fe,u)),M(ie.current.top),a(),fe.stopPropagation(),fe.preventDefault()};b.useEffect(function(){var me=function(q){q.preventDefault()},fe=P.current,ae=D.current;return fe.addEventListener("touchstart",me,{passive:!1}),ae.addEventListener("touchstart",k,{passive:!1}),function(){fe.removeEventListener("touchstart",me),ae.removeEventListener("touchstart",k)}},[]);var j=b.useRef();j.current=V;var Q=b.useRef();Q.current=B,b.useEffect(function(){if(v){var me,fe=function(q){var ge=ie.current,xe=ge.dragging,_e=ge.pageY,Se=ge.startTop;pr.cancel(me);var Ke=P.current.getBoundingClientRect(),Ue=f/(u?Ke.width:Ke.height);if(xe){var H=(uE(q,u)-_e)*Ue,U=Se;!R&&u?U-=H:U+=H;var X=j.current,oe=Q.current,pe=oe?U/oe:0,ce=Math.ceil(pe*X);ce=Math.max(ce,0),ce=Math.min(ce,X),me=pr(function(){c(ce,u)})}},ae=function(){m(!1),l()};return window.addEventListener("mousemove",fe,{passive:!0}),window.addEventListener("touchmove",fe,{passive:!0}),window.addEventListener("mouseup",ae,{passive:!0}),window.addEventListener("touchend",ae,{passive:!0}),function(){window.removeEventListener("mousemove",fe),window.removeEventListener("touchmove",fe),window.removeEventListener("mouseup",ae),window.removeEventListener("touchend",ae),pr.cancel(me)}}},[v]),b.useEffect(function(){return O(),function(){clearTimeout(L.current)}},[o]),b.useImperativeHandle(e,function(){return{delayHidden:O}});var Y="".concat(r,"-scrollbar"),ne={position:"absolute",visibility:I?null:"hidden"},ye={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return u?(ne.height=8,ne.left=0,ne.right=0,ne.bottom=0,ye.height="100%",ye.width=d,R?ye.left=z:ye.right=z):(ne.width=8,ne.top=0,ne.bottom=0,R?ne.right=0:ne.left=0,ye.width="100%",ye.height=d,ye.top=z),b.createElement("div",{ref:P,className:we(Y,ee(ee(ee({},"".concat(Y,"-horizontal"),u),"".concat(Y,"-vertical"),!u),"".concat(Y,"-visible"),I)),style:re(re({},ne),h),onMouseDown:W,onMouseMove:O},b.createElement("div",{ref:D,className:we("".concat(Y,"-thumb"),ee({},"".concat(Y,"-thumb-moving"),v)),style:re(re({},ye),p),onMouseDown:k}))}),iK=20;function bN(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=n/e*n;return isNaN(r)&&(r=0),r=Math.max(r,iK),Math.floor(r)}var oK=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],sK=[],aK={overflowY:"auto",overflowAnchor:"none"};function lK(n,e){var r=n.prefixCls,i=r===void 0?"rc-virtual-list":r,o=n.className,s=n.height,a=n.itemHeight,l=n.fullHeight,c=l===void 0?!0:l,u=n.style,d=n.data,f=n.children,h=n.itemKey,p=n.virtual,g=n.direction,y=n.scrollWidth,v=n.component,m=v===void 0?"div":v,_=n.onScroll,x=n.onVirtualScroll,S=n.onVisibleChange,w=n.innerProps,E=n.extraRender,C=n.styles,T=Pn(n,oK),M=b.useCallback(function(vt){return typeof h=="function"?h(vt):vt==null?void 0:vt[h]},[h]),R=JX(M),P=Ce(R,4),D=P[0],F=P[1],A=P[2],I=P[3],N=!!(p!==!1&&s&&a),L=b.useMemo(function(){return Object.values(A.maps).reduce(function(vt,$){return vt+$},0)},[A.id,A.maps]),O=N&&d&&(Math.max(a*d.length,L)>s||!!y),V=g==="rtl",B=we(i,ee({},"".concat(i,"-rtl"),V),o),z=d||sK,W=b.useRef(),ie=b.useRef(),k=b.useRef(),j=b.useState(0),Q=Ce(j,2),Y=Q[0],ne=Q[1],ye=b.useState(0),me=Ce(ye,2),fe=me[0],ae=me[1],ve=b.useState(!1),q=Ce(ve,2),ge=q[0],xe=q[1],_e=function(){xe(!0)},Se=function(){xe(!1)},Ke={getKey:M};function Ue(vt){ne(function($){var Z;typeof vt=="function"?Z=vt($):Z=vt;var ue=Oe(Z);return W.current.scrollTop=ue,ue})}var H=b.useRef({start:0,end:z.length}),U=b.useRef(),X=KX(z,M),oe=Ce(X,1),pe=oe[0];U.current=pe;var ce=b.useMemo(function(){if(!N)return{scrollHeight:void 0,start:0,end:z.length-1,offset:void 0};if(!O){var vt;return{scrollHeight:((vt=ie.current)===null||vt===void 0?void 0:vt.offsetHeight)||0,start:0,end:z.length-1,offset:void 0}}for(var $=0,Z,ue,he,se=z.length,Ge=0;Ge<se;Ge+=1){var st=z[Ge],dt=M(st),mt=A.get(dt),Ct=$+(mt===void 0?a:mt);Ct>=Y&&Z===void 0&&(Z=Ge,ue=$),Ct>Y+s&&he===void 0&&(he=Ge),$=Ct}return Z===void 0&&(Z=0,ue=0,he=Math.ceil(s/a)),he===void 0&&(he=z.length-1),he=Math.min(he+1,z.length-1),{scrollHeight:$,start:Z,end:he,offset:ue}},[O,N,Y,z,I,s]),Fe=ce.scrollHeight,Re=ce.start,Le=ce.end,Je=ce.offset;H.current.start=Re,H.current.end=Le,b.useLayoutEffect(function(){var vt=A.getRecord();if(vt.size===1){var $=Array.from(vt)[0],Z=M(z[Re]);if(Z===$){var ue=A.get($),he=ue-a;Ue(function(se){return se+he})}}A.resetRecord()},[Fe]);var Me=b.useState({width:0,height:s}),ze=Ce(Me,2),Ee=ze[0],Pe=ze[1],ke=function($){Pe({width:$.offsetWidth,height:$.offsetHeight})},Ve=b.useRef(),$e=b.useRef(),_t=b.useMemo(function(){return bN(Ee.width,y)},[Ee.width,y]),J=b.useMemo(function(){return bN(Ee.height,Fe)},[Ee.height,Fe]),Qe=Fe-s,be=b.useRef(Qe);be.current=Qe;function Oe(vt){var $=vt;return Number.isNaN(be.current)||($=Math.min($,be.current)),$=Math.max($,0),$}var Ze=Y<=0,We=Y>=Qe,wt=fe<=0,Mt=fe>=y,ct=TB(Ze,We,wt,Mt),qe=function(){return{x:V?-fe:fe,y:Y}},rt=b.useRef(qe()),Lt=br(function(vt){if(x){var $=re(re({},qe()),vt);(rt.current.x!==$.x||rt.current.y!==$.y)&&(x($),rt.current=$)}});function bn(vt,$){var Z=vt;$?(ru.flushSync(function(){ae(Z)}),Lt()):Ue(Z)}function Xe(vt){var $=vt.currentTarget.scrollTop;$!==Y&&Ue($),_==null||_(vt),Lt()}var ot=function($){var Z=$,ue=y?y-Ee.width:0;return Z=Math.max(Z,0),Z=Math.min(Z,ue),Z},yt=br(function(vt,$){$?(ru.flushSync(function(){ae(function(Z){var ue=Z+(V?-vt:vt);return ot(ue)})}),Lt()):Ue(function(Z){var ue=Z+vt;return ue})}),ut=YX(N,Ze,We,wt,Mt,!!y,yt),bt=Ce(ut,2),It=bt[0],yn=bt[1];eK(N,W,function(vt,$,Z,ue){var he=ue;return ct(vt,$,Z)?!1:!he||!he._virtualHandled?(he&&(he._virtualHandled=!0),It({preventDefault:function(){},deltaX:vt?$:0,deltaY:vt?0:$}),!0):!1}),tK(O,W,function(vt){Ue(function($){return $+vt})}),xn(function(){function vt(Z){var ue=Ze&&Z.detail<0,he=We&&Z.detail>0;N&&!ue&&!he&&Z.preventDefault()}var $=W.current;return $.addEventListener("wheel",It,{passive:!1}),$.addEventListener("DOMMouseScroll",yn,{passive:!0}),$.addEventListener("MozMousePixelScroll",vt,{passive:!1}),function(){$.removeEventListener("wheel",It),$.removeEventListener("DOMMouseScroll",yn),$.removeEventListener("MozMousePixelScroll",vt)}},[N,Ze,We]),xn(function(){if(y){var vt=ot(fe);ae(vt),Lt({x:vt})}},[Ee.width,y]);var un=function(){var $,Z;($=Ve.current)===null||$===void 0||$.delayHidden(),(Z=$e.current)===null||Z===void 0||Z.delayHidden()},Un=rK(W,z,A,a,M,function(){return F(!0)},Ue,un);b.useImperativeHandle(e,function(){return{nativeElement:k.current,getScrollInfo:qe,scrollTo:function($){function Z(ue){return ue&&Ot(ue)==="object"&&("left"in ue||"top"in ue)}Z($)?($.left!==void 0&&ae(ot($.left)),Un($.top)):Un($)}}}),xn(function(){if(S){var vt=z.slice(Re,Le+1);S(vt,z)}},[Re,Le,z]);var en=QX(z,M,A,a),En=E==null?void 0:E({start:Re,end:Le,virtual:O,offsetX:fe,offsetY:Je,rtl:V,getSize:en}),ar=qX(z,Re,Le,y,fe,D,f,Ke),kn=null;s&&(kn=re(ee({},c?"height":"maxHeight",s),aK),N&&(kn.overflowY="hidden",y&&(kn.overflowX="hidden"),ge&&(kn.pointerEvents="none")));var Ar={};return V&&(Ar.dir="rtl"),b.createElement("div",pt({ref:k,style:re(re({},u),{},{position:"relative"}),className:B},Ar,T),b.createElement(Ka,{onResize:ke},b.createElement(m,{className:"".concat(i,"-holder"),style:kn,ref:W,onScroll:Xe,onMouseEnter:un},b.createElement(CB,{prefixCls:i,height:Fe,offsetX:fe,offsetY:Je,scrollWidth:y,onInnerResize:F,ref:ie,innerProps:w,rtl:V,extra:En},ar))),O&&Fe>s&&b.createElement(xN,{ref:Ve,prefixCls:i,scrollOffset:Y,scrollRange:Fe,rtl:V,onScroll:bn,onStartMove:_e,onStopMove:Se,spinSize:J,containerSize:Ee.height,style:C==null?void 0:C.verticalScrollBar,thumbStyle:C==null?void 0:C.verticalScrollBarThumb}),O&&y>Ee.width&&b.createElement(xN,{ref:$e,prefixCls:i,scrollOffset:fe,scrollRange:y,rtl:V,onScroll:bn,onStartMove:_e,onStopMove:Se,spinSize:_t,containerSize:Ee.width,horizontal:!0,style:C==null?void 0:C.horizontalScrollBar,thumbStyle:C==null?void 0:C.horizontalScrollBarThumb}))}var MB=b.forwardRef(lK);MB.displayName="List";function cK(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var uK=["disabled","title","children","style","className"];function SN(n){return typeof n=="string"||typeof n=="number"}var dK=function(e,r){var i=Qq(),o=i.prefixCls,s=i.id,a=i.open,l=i.multiple,c=i.mode,u=i.searchValue,d=i.toggleOpen,f=i.notFoundContent,h=i.onPopupScroll,p=b.useContext(wT),g=p.maxCount,y=p.flattenOptions,v=p.onActiveValue,m=p.defaultActiveFirstOption,_=p.onSelect,x=p.menuItemSelectedIcon,S=p.rawValues,w=p.fieldNames,E=p.virtual,C=p.direction,T=p.listHeight,M=p.listItemHeight,R=p.optionRender,P="".concat(o,"-item"),D=p_(function(){return y},[a,y],function(fe,ae){return ae[0]&&fe[1]!==ae[1]}),F=b.useRef(null),A=b.useMemo(function(){return l&&aE(g)&&(S==null?void 0:S.size)>=g},[l,g,S==null?void 0:S.size]),I=function(ae){ae.preventDefault()},N=function(ae){var ve;(ve=F.current)===null||ve===void 0||ve.scrollTo(typeof ae=="number"?{index:ae}:ae)},L=b.useCallback(function(fe){return c==="combobox"?!1:S.has(fe)},[c,ht(S).toString(),S.size]),O=function(ae){for(var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,q=D.length,ge=0;ge<q;ge+=1){var xe=(ae+ge*ve+q)%q,_e=D[xe]||{},Se=_e.group,Ke=_e.data;if(!Se&&!(Ke!=null&&Ke.disabled)&&(L(Ke.value)||!A))return xe}return-1},V=b.useState(function(){return O(0)}),B=Ce(V,2),z=B[0],W=B[1],ie=function(ae){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;W(ae);var q={source:ve?"keyboard":"mouse"},ge=D[ae];if(!ge){v(null,-1,q);return}v(ge.value,ae,q)};b.useEffect(function(){ie(m!==!1?O(0):-1)},[D.length,u]);var k=b.useCallback(function(fe){return c==="combobox"?String(fe).toLowerCase()===u.toLowerCase():S.has(fe)},[c,u,ht(S).toString(),S.size]);b.useEffect(function(){var fe=setTimeout(function(){if(!l&&a&&S.size===1){var ve=Array.from(S)[0],q=D.findIndex(function(ge){var xe=ge.data;return xe.value===ve});q!==-1&&(ie(q),N(q))}});if(a){var ae;(ae=F.current)===null||ae===void 0||ae.scrollTo(void 0)}return function(){return clearTimeout(fe)}},[a,u]);var j=function(ae){ae!==void 0&&_(ae,{selected:!S.has(ae)}),l||d(!1)};if(b.useImperativeHandle(r,function(){return{onKeyDown:function(ae){var ve=ae.which,q=ae.ctrlKey;switch(ve){case He.N:case He.P:case He.UP:case He.DOWN:{var ge=0;if(ve===He.UP?ge=-1:ve===He.DOWN?ge=1:cK()&&q&&(ve===He.N?ge=1:ve===He.P&&(ge=-1)),ge!==0){var xe=O(z+ge,ge);N(xe),ie(xe,!0)}break}case He.TAB:case He.ENTER:{var _e,Se=D[z];Se&&!(Se!=null&&(_e=Se.data)!==null&&_e!==void 0&&_e.disabled)&&!A?j(Se.value):j(void 0),a&&ae.preventDefault();break}case He.ESC:d(!1),a&&ae.stopPropagation()}},onKeyUp:function(){},scrollTo:function(ae){N(ae)}}}),D.length===0)return b.createElement("div",{role:"listbox",id:"".concat(s,"_list"),className:"".concat(P,"-empty"),onMouseDown:I},f);var Q=Object.keys(w).map(function(fe){return w[fe]}),Y=function(ae){return ae.label};function ne(fe,ae){var ve=fe.group;return{role:ve?"presentation":"option",id:"".concat(s,"_list_").concat(ae)}}var ye=function(ae){var ve=D[ae];if(!ve)return null;var q=ve.data||{},ge=q.value,xe=ve.group,_e=ka(q,!0),Se=Y(ve);return ve?b.createElement("div",pt({"aria-label":typeof Se=="string"&&!xe?Se:null},_e,{key:ae},ne(ve,ae),{"aria-selected":k(ge)}),ge):null},me={role:"listbox",id:"".concat(s,"_list")};return b.createElement(b.Fragment,null,E&&b.createElement("div",pt({},me,{style:{height:0,width:0,overflow:"hidden"}}),ye(z-1),ye(z),ye(z+1)),b.createElement(MB,{itemKey:"key",ref:F,data:D,height:T,itemHeight:M,fullHeight:!1,onMouseDown:I,onScroll:h,virtual:E,direction:C,innerProps:E?null:me},function(fe,ae){var ve=fe.group,q=fe.groupOption,ge=fe.data,xe=fe.label,_e=fe.value,Se=ge.key;if(ve){var Ke,Ue=(Ke=ge.title)!==null&&Ke!==void 0?Ke:SN(xe)?xe.toString():void 0;return b.createElement("div",{className:we(P,"".concat(P,"-group"),ge.className),title:Ue},xe!==void 0?xe:Se)}var H=ge.disabled,U=ge.title;ge.children;var X=ge.style,oe=ge.className,pe=Pn(ge,uK),ce=ea(pe,Q),Fe=L(_e),Re=H||!Fe&&A,Le="".concat(P,"-option"),Je=we(P,Le,oe,ee(ee(ee(ee({},"".concat(Le,"-grouped"),q),"".concat(Le,"-active"),z===ae&&!Re),"".concat(Le,"-disabled"),Re),"".concat(Le,"-selected"),Fe)),Me=Y(fe),ze=!x||typeof x=="function"||Fe,Ee=typeof Me=="number"?Me:Me||_e,Pe=SN(Ee)?Ee.toString():void 0;return U!==void 0&&(Pe=U),b.createElement("div",pt({},ka(ce),E?{}:ne(fe,ae),{"aria-selected":k(_e),className:Je,title:Pe,onMouseMove:function(){z===ae||Re||ie(ae)},onClick:function(){Re||j(_e)},style:X}),b.createElement("div",{className:"".concat(Le,"-content")},typeof R=="function"?R(fe,{index:ae}):Ee),b.isValidElement(x)||Fe,ze&&b.createElement(L_,{className:"".concat(P,"-option-state"),customizeIcon:x,customizeIconProps:{value:_e,disabled:Re,isSelected:Fe}},Fe?"✓":null))}))},fK=b.forwardRef(dK);const hK=function(n,e){var r=b.useRef({values:new Map,options:new Map}),i=b.useMemo(function(){var s=r.current,a=s.values,l=s.options,c=n.map(function(f){if(f.label===void 0){var h;return re(re({},f),{},{label:(h=a.get(f.value))===null||h===void 0?void 0:h.label})}return f}),u=new Map,d=new Map;return c.forEach(function(f){u.set(f.value,f),d.set(f.value,e.get(f.value)||l.get(f.value))}),r.current.values=u,r.current.options=d,c},[n,e]),o=b.useCallback(function(s){return e.get(s)||r.current.options.get(s)},[e]);return[i,o]};function Sb(n,e){return bB(n).join("").toUpperCase().includes(e)}const pK=function(n,e,r,i,o){return b.useMemo(function(){if(!r||i===!1)return n;var s=e.options,a=e.label,l=e.value,c=[],u=typeof i=="function",d=r.toUpperCase(),f=u?i:function(p,g){return o?Sb(g[o],d):g[s]?Sb(g[a!=="children"?a:"label"],d):Sb(g[l],d)},h=u?function(p){return lE(p)}:function(p){return p};return n.forEach(function(p){if(p[s]){var g=f(r,h(p));if(g)c.push(p);else{var y=p[s].filter(function(v){return f(r,h(v))});y.length&&c.push(re(re({},p),{},ee({},s,y)))}return}f(r,h(p))&&c.push(p)}),c},[n,i,o,r,e])};var wN=0,mK=pi();function gK(){var n;return mK?(n=wN,wN+=1):n="TEST_OR_SSR",n}function vK(n){var e=b.useState(),r=Ce(e,2),i=r[0],o=r[1];return b.useEffect(function(){o("rc_select_".concat(gK()))},[]),n||i}var yK=["children","value"],_K=["children"];function xK(n){var e=n,r=e.key,i=e.props,o=i.children,s=i.value,a=Pn(i,yK);return re({key:r,value:s!==void 0?s:r,children:o},a)}function RB(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return iu(n).map(function(r,i){if(!b.isValidElement(r)||!r.type)return null;var o=r,s=o.type.isSelectOptGroup,a=o.key,l=o.props,c=l.children,u=Pn(l,_K);return e||!s?xK(r):re(re({key:"__RC_SELECT_GRP__".concat(a===null?i:a,"__"),label:a},u),{},{options:RB(c)})}).filter(function(r){return r})}var bK=function(e,r,i,o,s){return b.useMemo(function(){var a=e,l=!e;l&&(a=RB(r));var c=new Map,u=new Map,d=function(p,g,y){y&&typeof y=="string"&&p.set(g[y],g)},f=function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=0;y<p.length;y+=1){var v=p[y];!v[i.options]||g?(c.set(v[i.value],v),d(u,v,i.label),d(u,v,o),d(u,v,s)):h(v[i.options],!0)}};return f(a),{options:a,valueOptions:c,labelOptions:u}},[e,r,i,o,s])};function EN(n){var e=b.useRef();e.current=n;var r=b.useCallback(function(){return e.current.apply(e,arguments)},[]);return r}var SK=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],wK=["inputValue"];function EK(n){return!n||Ot(n)!=="object"}var CK=b.forwardRef(function(n,e){var r=n.id,i=n.mode,o=n.prefixCls,s=o===void 0?"rc-select":o,a=n.backfill,l=n.fieldNames,c=n.inputValue,u=n.searchValue,d=n.onSearch,f=n.autoClearSearchValue,h=f===void 0?!0:f,p=n.onSelect,g=n.onDeselect,y=n.dropdownMatchSelectWidth,v=y===void 0?!0:y,m=n.filterOption,_=n.filterSort,x=n.optionFilterProp,S=n.optionLabelProp,w=n.options,E=n.optionRender,C=n.children,T=n.defaultActiveFirstOption,M=n.menuItemSelectedIcon,R=n.virtual,P=n.direction,D=n.listHeight,F=D===void 0?200:D,A=n.listItemHeight,I=A===void 0?20:A,N=n.labelRender,L=n.value,O=n.defaultValue,V=n.labelInValue,B=n.onChange,z=n.maxCount,W=Pn(n,SK),ie=vK(r),k=cE(i),j=!!(!w&&C),Q=b.useMemo(function(){return m===void 0&&i==="combobox"?!1:m},[m,i]),Y=b.useMemo(function(){return EB(l,j)},[JSON.stringify(l),j]),ne=Zi("",{value:u!==void 0?u:c,postState:function(ot){return ot||""}}),ye=Ce(ne,2),me=ye[0],fe=ye[1],ae=bK(w,C,Y,x,S),ve=ae.valueOptions,q=ae.labelOptions,ge=ae.options,xe=b.useCallback(function(Xe){var ot=bB(Xe);return ot.map(function(yt){var ut,bt,It,yn,un;if(EK(yt))ut=yt;else{var Un;It=yt.key,bt=yt.label,ut=(Un=yt.value)!==null&&Un!==void 0?Un:It}var en=ve.get(ut);if(en){var En;bt===void 0&&(bt=en==null?void 0:en[S||Y.label]),It===void 0&&(It=(En=en==null?void 0:en.key)!==null&&En!==void 0?En:ut),yn=en==null?void 0:en.disabled,un=en==null?void 0:en.title}return{label:bt,value:ut,key:It,disabled:yn,title:un}})},[Y,S,ve]),_e=Zi(O,{value:L}),Se=Ce(_e,2),Ke=Se[0],Ue=Se[1],H=b.useMemo(function(){var Xe,ot=k&&Ke===null?[]:Ke,yt=xe(ot);return i==="combobox"&&gX((Xe=yt[0])===null||Xe===void 0?void 0:Xe.value)?[]:yt},[Ke,xe,i,k]),U=hK(H,ve),X=Ce(U,2),oe=X[0],pe=X[1],ce=b.useMemo(function(){if(!i&&oe.length===1){var Xe=oe[0];if(Xe.value===null&&(Xe.label===null||Xe.label===void 0))return[]}return oe.map(function(ot){var yt;return re(re({},ot),{},{label:(yt=typeof N=="function"?N(ot):ot.label)!==null&&yt!==void 0?yt:ot.value})})},[i,oe,N]),Fe=b.useMemo(function(){return new Set(oe.map(function(Xe){return Xe.value}))},[oe]);b.useEffect(function(){if(i==="combobox"){var Xe,ot=(Xe=oe[0])===null||Xe===void 0?void 0:Xe.value;fe(mX(ot)?String(ot):"")}},[oe]);var Re=EN(function(Xe,ot){var yt=ot??Xe;return ee(ee({},Y.value,Xe),Y.label,yt)}),Le=b.useMemo(function(){if(i!=="tags")return ge;var Xe=ht(ge),ot=function(ut){return ve.has(ut)};return ht(oe).sort(function(yt,ut){return yt.value<ut.value?-1:1}).forEach(function(yt){var ut=yt.value;ot(ut)||Xe.push(Re(ut,yt.label))}),Xe},[Re,ge,ve,oe,i]),Je=pK(Le,Y,me,Q,x),Me=b.useMemo(function(){return i!=="tags"||!me||Je.some(function(Xe){return Xe[x||"value"]===me})||Je.some(function(Xe){return Xe[Y.value]===me})?Je:[Re(me)].concat(ht(Je))},[Re,x,i,Je,me,Y]),ze=function Xe(ot){var yt=ht(ot).sort(function(ut,bt){return _(ut,bt,{searchValue:me})});return yt.map(function(ut){return Array.isArray(ut.options)?re(re({},ut),{},{options:ut.options.length>0?Xe(ut.options):ut.options}):ut})},Ee=b.useMemo(function(){return _?ze(Me):Me},[Me,_,me]),Pe=b.useMemo(function(){return zX(Ee,{fieldNames:Y,childrenAsData:j})},[Ee,Y,j]),ke=function(ot){var yt=xe(ot);if(Ue(yt),B&&(yt.length!==oe.length||yt.some(function(It,yn){var un;return((un=oe[yn])===null||un===void 0?void 0:un.value)!==(It==null?void 0:It.value)}))){var ut=V?yt:yt.map(function(It){return It.value}),bt=yt.map(function(It){return lE(pe(It.value))});B(k?ut:ut[0],k?bt:bt[0])}},Ve=b.useState(null),$e=Ce(Ve,2),_t=$e[0],J=$e[1],Qe=b.useState(0),be=Ce(Qe,2),Oe=be[0],Ze=be[1],We=T!==void 0?T:i!=="combobox",wt=b.useCallback(function(Xe,ot){var yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ut=yt.source,bt=ut===void 0?"keyboard":ut;Ze(ot),a&&i==="combobox"&&Xe!==null&&bt==="keyboard"&&J(String(Xe))},[a,i]),Mt=function(ot,yt,ut){var bt=function(){var vt,$=pe(ot);return[V?{label:$==null?void 0:$[Y.label],value:ot,key:(vt=$==null?void 0:$.key)!==null&&vt!==void 0?vt:ot}:ot,lE($)]};if(yt&&p){var It=bt(),yn=Ce(It,2),un=yn[0],Un=yn[1];p(un,Un)}else if(!yt&&g&&ut!=="clear"){var en=bt(),En=Ce(en,2),ar=En[0],kn=En[1];g(ar,kn)}},ct=EN(function(Xe,ot){var yt,ut=k?ot.selected:!0;ut?yt=k?[].concat(ht(oe),[Xe]):[Xe]:yt=oe.filter(function(bt){return bt.value!==Xe}),ke(yt),Mt(Xe,ut),i==="combobox"?J(""):(!cE||h)&&(fe(""),J(""))}),qe=function(ot,yt){ke(ot);var ut=yt.type,bt=yt.values;(ut==="remove"||ut==="clear")&&bt.forEach(function(It){Mt(It.value,!1,ut)})},rt=function(ot,yt){if(fe(ot),J(null),yt.source==="submit"){var ut=(ot||"").trim();if(ut){var bt=Array.from(new Set([].concat(ht(Fe),[ut])));ke(bt),Mt(ut,!0),fe("")}return}yt.source!=="blur"&&(i==="combobox"&&ke(ot),d==null||d(ot))},Lt=function(ot){var yt=ot;i!=="tags"&&(yt=ot.map(function(bt){var It=q.get(bt);return It==null?void 0:It.value}).filter(function(bt){return bt!==void 0}));var ut=Array.from(new Set([].concat(ht(Fe),ht(yt))));ke(ut),ut.forEach(function(bt){Mt(bt,!0)})},bn=b.useMemo(function(){var Xe=R!==!1&&v!==!1;return re(re({},ae),{},{flattenOptions:Pe,onActiveValue:wt,defaultActiveFirstOption:We,onSelect:ct,menuItemSelectedIcon:M,rawValues:Fe,fieldNames:Y,virtual:Xe,direction:P,listHeight:F,listItemHeight:I,childrenAsData:j,maxCount:z,optionRender:E})},[z,ae,Pe,wt,We,ct,M,Fe,Y,R,v,P,F,I,j,E]);return b.createElement(wT.Provider,{value:bn},b.createElement(jX,pt({},W,{id:ie,prefixCls:s,ref:e,omitDomProps:wK,mode:i,displayValues:ce,onDisplayValuesChange:qe,direction:P,searchValue:me,onSearch:rt,autoClearSearchValue:h,onSearchSplit:Lt,dropdownMatchSelectWidth:v,OptionList:fK,emptyOptions:!Pe.length,activeValue:_t,activeDescendantId:"".concat(ie,"_list_").concat(Oe)})))}),TT=CK;TT.Option=CT;TT.OptGroup=ET;function oy(n,e,r){return we({[`${n}-status-success`]:e==="success",[`${n}-status-warning`]:e==="warning",[`${n}-status-error`]:e==="error",[`${n}-status-validating`]:e==="validating",[`${n}-has-feedback`]:r})}const F_=(n,e)=>e||n,TK=()=>{const[,n]=eo(),[e]=ic("Empty"),i=new Ln(n.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return b.createElement("svg",{style:i,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},b.createElement("title",null,(e==null?void 0:e.description)||"Empty"),b.createElement("g",{fill:"none",fillRule:"evenodd"},b.createElement("g",{transform:"translate(24 31.67)"},b.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),b.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),b.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),b.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),b.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),b.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),b.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},b.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),b.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},MK=()=>{const[,n]=eo(),[e]=ic("Empty"),{colorFill:r,colorFillTertiary:i,colorFillQuaternary:o,colorBgContainer:s}=n,{borderColor:a,shadowColor:l,contentColor:c}=b.useMemo(()=>({borderColor:new Ln(r).onBackground(s).toHexString(),shadowColor:new Ln(i).onBackground(s).toHexString(),contentColor:new Ln(o).onBackground(s).toHexString()}),[r,i,o,s]);return b.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},b.createElement("title",null,(e==null?void 0:e.description)||"Empty"),b.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},b.createElement("ellipse",{fill:l,cx:"32",cy:"33",rx:"32",ry:"7"}),b.createElement("g",{fillRule:"nonzero",stroke:a},b.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),b.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:c}))))},RK=n=>{const{componentCls:e,margin:r,marginXS:i,marginXL:o,fontSize:s,lineHeight:a}=n;return{[e]:{marginInline:i,fontSize:s,lineHeight:a,textAlign:"center",[`${e}-image`]:{height:n.emptyImgHeight,marginBottom:i,opacity:n.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${e}-description`]:{color:n.colorTextDescription},[`${e}-footer`]:{marginTop:r},"&-normal":{marginBlock:o,color:n.colorTextDescription,[`${e}-description`]:{color:n.colorTextDescription},[`${e}-image`]:{height:n.emptyImgHeightMD}},"&-small":{marginBlock:i,color:n.colorTextDescription,[`${e}-image`]:{height:n.emptyImgHeightSM}}}}},AK=Ii("Empty",n=>{const{componentCls:e,controlHeightLG:r,calc:i}=n,o=Xn(n,{emptyImgCls:`${e}-img`,emptyImgHeight:i(r).mul(2.5).equal(),emptyImgHeightMD:r,emptyImgHeightSM:i(r).mul(.875).equal()});return[RK(o)]});var NK=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const AB=b.createElement(TK,null),NB=b.createElement(MK,null),Nc=n=>{var e,r,i,o,s,a,l,c;const{className:u,rootClassName:d,prefixCls:f,image:h=AB,description:p,children:g,imageStyle:y,style:v,classNames:m,styles:_}=n,x=NK(n,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:S,direction:w,empty:E}=b.useContext(Yt),C=S("empty",f),[T,M,R]=AK(C),[P]=ic("Empty"),D=typeof p<"u"?p:P==null?void 0:P.description,F=typeof D=="string"?D:"empty";let A=null;return typeof h=="string"?A=b.createElement("img",{alt:F,src:h}):A=h,T(b.createElement("div",Object.assign({className:we(M,R,C,E==null?void 0:E.className,{[`${C}-normal`]:h===NB,[`${C}-rtl`]:w==="rtl"},u,d,(e=E==null?void 0:E.classNames)===null||e===void 0?void 0:e.root,m==null?void 0:m.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},(r=E==null?void 0:E.styles)===null||r===void 0?void 0:r.root),E==null?void 0:E.style),_==null?void 0:_.root),v)},x),b.createElement("div",{className:we(`${C}-image`,(i=E==null?void 0:E.classNames)===null||i===void 0?void 0:i.image,m==null?void 0:m.image),style:Object.assign(Object.assign(Object.assign({},y),(o=E==null?void 0:E.styles)===null||o===void 0?void 0:o.image),_==null?void 0:_.image)},A),D&&b.createElement("div",{className:we(`${C}-description`,(s=E==null?void 0:E.classNames)===null||s===void 0?void 0:s.description,m==null?void 0:m.description),style:Object.assign(Object.assign({},(a=E==null?void 0:E.styles)===null||a===void 0?void 0:a.description),_==null?void 0:_.description)},D),g&&b.createElement("div",{className:we(`${C}-footer`,(l=E==null?void 0:E.classNames)===null||l===void 0?void 0:l.footer,m==null?void 0:m.footer),style:Object.assign(Object.assign({},(c=E==null?void 0:E.styles)===null||c===void 0?void 0:c.footer),_==null?void 0:_.footer)},g)))};Nc.PRESENTED_IMAGE_DEFAULT=AB;Nc.PRESENTED_IMAGE_SIMPLE=NB;const PB=n=>{const{componentName:e}=n,{getPrefixCls:r}=b.useContext(Yt),i=r("empty");switch(e){case"Table":case"List":return de.createElement(Nc,{image:Nc.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return de.createElement(Nc,{image:Nc.PRESENTED_IMAGE_SIMPLE,className:`${i}-small`});case"Table.filter":return null;default:return de.createElement(Nc,null)}},MT=function(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var i,o;const{variant:s,[n]:a}=b.useContext(Yt),l=b.useContext(Q7),c=a==null?void 0:a.variant;let u;typeof e<"u"?u=e:r===!1?u="borderless":u=(o=(i=l??c)!==null&&i!==void 0?i:s)!==null&&o!==void 0?o:"outlined";const d=h8.includes(u);return[u,d]},PK=n=>{const r={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:n==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},r),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},r),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},r),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},r),{points:["br","tr"],offset:[0,-4]})}};function OK(n,e){return n||PK(e)}const CN=n=>{const{optionHeight:e,optionFontSize:r,optionLineHeight:i,optionPadding:o}=n;return{position:"relative",display:"block",minHeight:e,padding:o,color:n.colorText,fontWeight:"normal",fontSize:r,lineHeight:i,boxSizing:"border-box"}},IK=n=>{const{antCls:e,componentCls:r}=n,i=`${r}-item`,o=`&${e}-slide-up-enter${e}-slide-up-enter-active`,s=`&${e}-slide-up-appear${e}-slide-up-appear-active`,a=`&${e}-slide-up-leave${e}-slide-up-leave-active`,l=`${r}-dropdown-placement-`;return[{[`${r}-dropdown`]:Object.assign(Object.assign({},Es(n)),{position:"absolute",top:-9999,zIndex:n.zIndexPopup,boxSizing:"border-box",padding:n.paddingXXS,overflow:"hidden",fontSize:n.fontSize,fontVariant:"initial",backgroundColor:n.colorBgElevated,borderRadius:n.borderRadiusLG,outline:"none",boxShadow:n.boxShadowSecondary,[`
          ${o}${l}bottomLeft,
          ${s}${l}bottomLeft
        `]:{animationName:RU},[`
          ${o}${l}topLeft,
          ${s}${l}topLeft,
          ${o}${l}topRight,
          ${s}${l}topRight
        `]:{animationName:NU},[`${a}${l}bottomLeft`]:{animationName:AU},[`
          ${a}${l}topLeft,
          ${a}${l}topRight
        `]:{animationName:PU},"&-hidden":{display:"none"},[i]:Object.assign(Object.assign({},CN(n)),{cursor:"pointer",transition:`background ${n.motionDurationSlow} ease`,borderRadius:n.borderRadiusSM,"&-group":{color:n.colorTextDescription,fontSize:n.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},Bw),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${i}-option-disabled)`]:{backgroundColor:n.optionActiveBg},[`&-selected:not(${i}-option-disabled)`]:{color:n.optionSelectedColor,fontWeight:n.optionSelectedFontWeight,backgroundColor:n.optionSelectedBg,[`${i}-option-state`]:{color:n.colorPrimary},[`&:has(+ ${i}-option-selected:not(${i}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${i}-option-selected:not(${i}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${i}-option-selected`]:{backgroundColor:n.colorBgContainerDisabled},color:n.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:n.calc(n.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},CN(n)),{color:n.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},R2(n,"slide-up"),R2(n,"slide-down"),M2(n,"move-up"),M2(n,"move-down")]},DK=n=>{const{multipleSelectItemHeight:e,paddingXXS:r,lineWidth:i,INTERNAL_FIXED_ITEM_MARGIN:o}=n,s=n.max(n.calc(r).sub(i).equal(),0),a=n.max(n.calc(s).sub(o).equal(),0);return{basePadding:s,containerPadding:a,itemHeight:De(e),itemLineHeight:De(n.calc(e).sub(n.calc(n.lineWidth).mul(2)).equal())}},LK=n=>{const{multipleSelectItemHeight:e,selectHeight:r,lineWidth:i}=n;return n.calc(r).sub(e).div(2).sub(i).equal()},FK=n=>{const{componentCls:e,iconCls:r,borderRadiusSM:i,motionDurationSlow:o,paddingXS:s,multipleItemColorDisabled:a,multipleItemBorderColorDisabled:l,colorIcon:c,colorIconHover:u,INTERNAL_FIXED_ITEM_MARGIN:d}=n;return{[`${e}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${e}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:d,borderRadius:i,cursor:"default",transition:`font-size ${o}, line-height ${o}, height ${o}`,marginInlineEnd:n.calc(d).mul(2).equal(),paddingInlineStart:s,paddingInlineEnd:n.calc(s).div(2).equal(),[`${e}-disabled&`]:{color:a,borderColor:l,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:n.calc(s).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},S_()),{display:"inline-flex",alignItems:"center",color:c,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${r}`]:{verticalAlign:"-0.2em"},"&:hover":{color:u}})}}}},UK=(n,e)=>{const{componentCls:r,INTERNAL_FIXED_ITEM_MARGIN:i}=n,o=`${r}-selection-overflow`,s=n.multipleSelectItemHeight,a=LK(n),l=e?`${r}-${e}`:"",c=DK(n);return{[`${r}-multiple${l}`]:Object.assign(Object.assign({},FK(n)),{[`${r}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:c.basePadding,paddingBlock:c.containerPadding,borderRadius:n.borderRadius,[`${r}-disabled&`]:{background:n.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${De(i)} 0`,lineHeight:De(s),visibility:"hidden",content:'"\\a0"'}},[`${r}-selection-item`]:{height:c.itemHeight,lineHeight:De(c.itemLineHeight)},[`${r}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:De(s),marginBlock:i}},[`${r}-prefix`]:{marginInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(c.basePadding).equal()},[`${o}-item + ${o}-item,
        ${r}-prefix + ${r}-selection-wrap
      `]:{[`${r}-selection-search`]:{marginInlineStart:0},[`${r}-selection-placeholder`]:{insetInlineStart:0}},[`${o}-item-suffix`]:{minHeight:c.itemHeight,marginBlock:i},[`${r}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(a).equal(),"\n          &-input,\n          &-mirror\n        ":{height:s,fontFamily:n.fontFamily,lineHeight:De(s),transition:`all ${n.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${r}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(c.basePadding).equal(),insetInlineEnd:n.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${n.motionDurationSlow}`}})}};function wb(n,e){const{componentCls:r}=n,i=e?`${r}-${e}`:"",o={[`${r}-multiple${i}`]:{fontSize:n.fontSize,[`${r}-selector`]:{[`${r}-show-search&`]:{cursor:"text"}},[`
        &${r}-show-arrow ${r}-selector,
        &${r}-allow-clear ${r}-selector
      `]:{paddingInlineEnd:n.calc(n.fontSizeIcon).add(n.controlPaddingHorizontal).equal()}}};return[UK(n,e),o]}const BK=n=>{const{componentCls:e}=n,r=Xn(n,{selectHeight:n.controlHeightSM,multipleSelectItemHeight:n.multipleItemHeightSM,borderRadius:n.borderRadiusSM,borderRadiusSM:n.borderRadiusXS}),i=Xn(n,{fontSize:n.fontSizeLG,selectHeight:n.controlHeightLG,multipleSelectItemHeight:n.multipleItemHeightLG,borderRadius:n.borderRadiusLG,borderRadiusSM:n.borderRadius});return[wb(n),wb(r,"sm"),{[`${e}-multiple${e}-sm`]:{[`${e}-selection-placeholder`]:{insetInline:n.calc(n.controlPaddingHorizontalSM).sub(n.lineWidth).equal()},[`${e}-selection-search`]:{marginInlineStart:2}}},wb(i,"lg")]};function Eb(n,e){const{componentCls:r,inputPaddingHorizontalBase:i,borderRadius:o}=n,s=n.calc(n.controlHeight).sub(n.calc(n.lineWidth).mul(2)).equal(),a=e?`${r}-${e}`:"";return{[`${r}-single${a}`]:{fontSize:n.fontSize,height:n.controlHeight,[`${r}-selector`]:Object.assign(Object.assign({},Es(n,!0)),{display:"flex",borderRadius:o,flex:"1 1 auto",[`${r}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${r}-selection-item,
          ${r}-selection-placeholder
        `]:{display:"block",padding:0,lineHeight:De(s),transition:`all ${n.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${r}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${r}-selection-item:empty:after`,`${r}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${r}-show-arrow ${r}-selection-item,
        &${r}-show-arrow ${r}-selection-search,
        &${r}-show-arrow ${r}-selection-placeholder
      `]:{paddingInlineEnd:n.showArrowPaddingInlineEnd},[`&${r}-open ${r}-selection-item`]:{color:n.colorTextPlaceholder},[`&:not(${r}-customize-input)`]:{[`${r}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${De(i)}`,[`${r}-selection-search-input`]:{height:s},"&:after":{lineHeight:De(s)}}},[`&${r}-customize-input`]:{[`${r}-selector`]:{"&:after":{display:"none"},[`${r}-selection-search`]:{position:"static",width:"100%"},[`${r}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${De(i)}`,"&:after":{display:"none"}}}}}}}function $K(n){const{componentCls:e}=n,r=n.calc(n.controlPaddingHorizontalSM).sub(n.lineWidth).equal();return[Eb(n),Eb(Xn(n,{controlHeight:n.controlHeightSM,borderRadius:n.borderRadiusSM}),"sm"),{[`${e}-single${e}-sm`]:{[`&:not(${e}-customize-input)`]:{[`${e}-selector`]:{padding:`0 ${De(r)}`},[`&${e}-show-arrow ${e}-selection-search`]:{insetInlineEnd:n.calc(r).add(n.calc(n.fontSize).mul(1.5)).equal()},[`
            &${e}-show-arrow ${e}-selection-item,
            &${e}-show-arrow ${e}-selection-placeholder
          `]:{paddingInlineEnd:n.calc(n.fontSize).mul(1.5).equal()}}}},Eb(Xn(n,{controlHeight:n.singleItemHeightLG,fontSize:n.fontSizeLG,borderRadius:n.borderRadiusLG}),"lg")]}const zK=n=>{const{fontSize:e,lineHeight:r,lineWidth:i,controlHeight:o,controlHeightSM:s,controlHeightLG:a,paddingXXS:l,controlPaddingHorizontal:c,zIndexPopupBase:u,colorText:d,fontWeightStrong:f,controlItemBgActive:h,controlItemBgHover:p,colorBgContainer:g,colorFillSecondary:y,colorBgContainerDisabled:v,colorTextDisabled:m,colorPrimaryHover:_,colorPrimary:x,controlOutline:S}=n,w=l*2,E=i*2,C=Math.min(o-w,o-E),T=Math.min(s-w,s-E),M=Math.min(a-w,a-E);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(l/2),zIndexPopup:u+50,optionSelectedColor:d,optionSelectedFontWeight:f,optionSelectedBg:h,optionActiveBg:p,optionPadding:`${(o-e*r)/2}px ${c}px`,optionFontSize:e,optionLineHeight:r,optionHeight:o,selectorBg:g,clearBg:g,singleItemHeightLG:a,multipleItemBg:y,multipleItemBorderColor:"transparent",multipleItemHeight:C,multipleItemHeightSM:T,multipleItemHeightLG:M,multipleSelectorBgDisabled:v,multipleItemColorDisabled:m,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(n.fontSize*1.25),hoverBorderColor:_,activeBorderColor:x,activeOutlineColor:S,selectAffixPadding:l}},OB=(n,e)=>{const{componentCls:r,antCls:i,controlOutlineWidth:o}=n;return{[`&:not(${r}-customize-input) ${r}-selector`]:{border:`${De(n.lineWidth)} ${n.lineType} ${e.borderColor}`,background:n.selectorBg},[`&:not(${r}-disabled):not(${r}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${r}-selector`]:{borderColor:e.hoverBorderHover},[`${r}-focused& ${r}-selector`]:{borderColor:e.activeBorderColor,boxShadow:`0 0 0 ${De(o)} ${e.activeOutlineColor}`,outline:0},[`${r}-prefix`]:{color:e.color}}}},TN=(n,e)=>({[`&${n.componentCls}-status-${e.status}`]:Object.assign({},OB(n,e))}),kK=n=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},OB(n,{borderColor:n.colorBorder,hoverBorderHover:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeOutlineColor:n.activeOutlineColor,color:n.colorText})),TN(n,{status:"error",borderColor:n.colorError,hoverBorderHover:n.colorErrorHover,activeBorderColor:n.colorError,activeOutlineColor:n.colorErrorOutline,color:n.colorError})),TN(n,{status:"warning",borderColor:n.colorWarning,hoverBorderHover:n.colorWarningHover,activeBorderColor:n.colorWarning,activeOutlineColor:n.colorWarningOutline,color:n.colorWarning})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{background:n.colorBgContainerDisabled,color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}})}),IB=(n,e)=>{const{componentCls:r,antCls:i}=n;return{[`&:not(${r}-customize-input) ${r}-selector`]:{background:e.bg,border:`${De(n.lineWidth)} ${n.lineType} transparent`,color:e.color},[`&:not(${r}-disabled):not(${r}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${r}-selector`]:{background:e.hoverBg},[`${r}-focused& ${r}-selector`]:{background:n.selectorBg,borderColor:e.activeBorderColor,outline:0}}}},MN=(n,e)=>({[`&${n.componentCls}-status-${e.status}`]:Object.assign({},IB(n,e))}),VK=n=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},IB(n,{bg:n.colorFillTertiary,hoverBg:n.colorFillSecondary,activeBorderColor:n.activeBorderColor,color:n.colorText})),MN(n,{status:"error",bg:n.colorErrorBg,hoverBg:n.colorErrorBgHover,activeBorderColor:n.colorError,color:n.colorError})),MN(n,{status:"warning",bg:n.colorWarningBg,hoverBg:n.colorWarningBgHover,activeBorderColor:n.colorWarning,color:n.colorWarning})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{borderColor:n.colorBorder,background:n.colorBgContainerDisabled,color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.colorBgContainer,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}})}),GK=n=>({"&-borderless":{[`${n.componentCls}-selector`]:{background:"transparent",border:`${De(n.lineWidth)} ${n.lineType} transparent`},[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`},[`&${n.componentCls}-status-error`]:{[`${n.componentCls}-prefix, ${n.componentCls}-selection-item`]:{color:n.colorError}},[`&${n.componentCls}-status-warning`]:{[`${n.componentCls}-prefix, ${n.componentCls}-selection-item`]:{color:n.colorWarning}}}}),HK=n=>({[n.componentCls]:Object.assign(Object.assign(Object.assign({},kK(n)),VK(n)),GK(n))}),jK=n=>{const{componentCls:e}=n;return{position:"relative",transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,input:{cursor:"pointer"},[`${e}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${e}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},WK=n=>{const{componentCls:e}=n;return{[`${e}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},qK=n=>{const{antCls:e,componentCls:r,inputPaddingHorizontalBase:i,iconCls:o}=n;return{[r]:Object.assign(Object.assign({},Es(n)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${r}-customize-input) ${r}-selector`]:Object.assign(Object.assign({},jK(n)),WK(n)),[`${r}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},Bw),{[`> ${e}-typography`]:{display:"inline"}}),[`${r}-selection-placeholder`]:Object.assign(Object.assign({},Bw),{flex:1,color:n.colorTextPlaceholder,pointerEvents:"none"}),[`${r}-arrow`]:Object.assign(Object.assign({},S_()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,height:n.fontSizeIcon,marginTop:n.calc(n.fontSizeIcon).mul(-1).div(2).equal(),color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${n.motionDurationSlow} ease`,[o]:{verticalAlign:"top",transition:`transform ${n.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${r}-suffix)`]:{pointerEvents:"auto"}},[`${r}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${r}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${r}-prefix`]:{flex:"none",marginInlineEnd:n.selectAffixPadding},[`${r}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,zIndex:1,display:"inline-block",width:n.fontSizeIcon,height:n.fontSizeIcon,marginTop:n.calc(n.fontSizeIcon).mul(-1).div(2).equal(),color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${n.motionDurationMid} ease, opacity ${n.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:n.colorTextTertiary}},[`&:hover ${r}-clear`]:{opacity:1,background:n.colorBgBase,borderRadius:"50%"}}),[`${r}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${r}-has-feedback`]:{[`${r}-clear`]:{insetInlineEnd:n.calc(i).add(n.fontSize).add(n.paddingXS).equal()}}}}}},XK=n=>{const{componentCls:e}=n;return[{[e]:{[`&${e}-in-form-item`]:{width:"100%"}}},qK(n),$K(n),BK(n),IK(n),{[`${e}-rtl`]:{direction:"rtl"}},xT(n,{borderElCls:`${e}-selector`,focusElCls:`${e}-focused`})]},KK=Ii("Select",(n,e)=>{let{rootPrefixCls:r}=e;const i=Xn(n,{rootPrefixCls:r,inputPaddingHorizontalBase:n.calc(n.paddingSM).sub(1).equal(),multipleSelectItemHeight:n.multipleItemHeight,selectHeight:n.controlHeight});return[XK(i),HK(i)]},zK,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var YK={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},QK=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:YK}))},DB=b.forwardRef(QK),ZK={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},JK=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:ZK}))},eY=b.forwardRef(JK),tY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},nY=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:tY}))},LB=b.forwardRef(nY);function rY(n){let{suffixIcon:e,clearIcon:r,menuItemSelectedIcon:i,removeIcon:o,loading:s,multiple:a,hasFeedback:l,prefixCls:c,showSuffixIcon:u,feedbackIcon:d,showArrow:f,componentName:h}=n;const p=r??b.createElement(mT,null),g=_=>e===null&&!l&&!f?null:b.createElement(b.Fragment,null,u!==!1&&_,l&&d);let y=null;if(e!==void 0)y=g(e);else if(s)y=g(b.createElement(E_,{spin:!0}));else{const _=`${c}-suffix`;y=x=>{let{open:S,showSearch:w}=x;return g(S&&w?b.createElement(LB,{className:_}):b.createElement(eY,{className:_}))}}let v=null;i!==void 0?v=i:a?v=b.createElement(DB,null):v=null;let m=null;return o!==void 0?m=o:m=b.createElement(w_,null),{clearIcon:p,suffixIcon:y,itemIcon:v,removeIcon:m}}function iY(n,e){return e!==void 0?e:n!==null}var oY=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const FB="SECRET_COMBOBOX_MODE_DO_NOT_USE",sY=(n,e)=>{var r;const{prefixCls:i,bordered:o,className:s,rootClassName:a,getPopupContainer:l,popupClassName:c,dropdownClassName:u,listHeight:d=256,placement:f,listItemHeight:h,size:p,disabled:g,notFoundContent:y,status:v,builtinPlacements:m,dropdownMatchSelectWidth:_,popupMatchSelectWidth:x,direction:S,style:w,allowClear:E,variant:C,dropdownStyle:T,transitionName:M,tagRender:R,maxCount:P,prefix:D}=n,F=oY(n,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix"]),{getPopupContainer:A,getPrefixCls:I,renderEmpty:N,direction:L,virtual:O,popupMatchSelectWidth:V,popupOverflow:B,select:z}=b.useContext(Yt),[,W]=eo(),ie=h??(W==null?void 0:W.controlHeight),k=I("select",i),j=I(),Q=S??L,{compactSize:Y,compactItemClassnames:ne}=T_(k,Q),[ye,me]=MT("select",C,o),fe=zf(k),[ae,ve,q]=KK(k,fe),ge=b.useMemo(()=>{const{mode:_t}=n;if(_t!=="combobox")return _t===FB?"combobox":_t},[n.mode]),xe=ge==="multiple"||ge==="tags",_e=iY(n.suffixIcon,n.showArrow),Se=(r=x??_)!==null&&r!==void 0?r:V,{status:Ke,hasFeedback:Ue,isFormItemInput:H,feedbackIcon:U}=b.useContext(Va),X=F_(Ke,v);let oe;y!==void 0?oe=y:ge==="combobox"?oe=null:oe=(N==null?void 0:N("Select"))||b.createElement(PB,{componentName:"Select"});const{suffixIcon:pe,itemIcon:ce,removeIcon:Fe,clearIcon:Re}=rY(Object.assign(Object.assign({},F),{multiple:xe,hasFeedback:Ue,feedbackIcon:U,showSuffixIcon:_e,prefixCls:k,componentName:"Select"})),Le=E===!0?{clearIcon:Re}:E,Je=ea(F,["suffixIcon","itemIcon"]),Me=we(c||u,{[`${k}-dropdown-${Q}`]:Q==="rtl"},a,q,fe,ve),ze=Ya(_t=>{var J;return(J=p??Y)!==null&&J!==void 0?J:_t}),Ee=b.useContext(za),Pe=g??Ee,ke=we({[`${k}-lg`]:ze==="large",[`${k}-sm`]:ze==="small",[`${k}-rtl`]:Q==="rtl",[`${k}-${ye}`]:me,[`${k}-in-form-item`]:H},oy(k,X,Ue),ne,z==null?void 0:z.className,s,a,q,fe,ve),Ve=b.useMemo(()=>f!==void 0?f:Q==="rtl"?"bottomRight":"bottomLeft",[f,Q]),[$e]=vT("SelectLike",T==null?void 0:T.zIndex);return ae(b.createElement(TT,Object.assign({ref:e,virtual:O,showSearch:z==null?void 0:z.showSearch},Je,{style:Object.assign(Object.assign({},z==null?void 0:z.style),w),dropdownMatchSelectWidth:Se,transitionName:sf(j,"slide-up",M),builtinPlacements:OK(m,B),listHeight:d,listItemHeight:ie,mode:ge,prefixCls:k,placement:Ve,direction:Q,prefix:D,suffixIcon:pe,menuItemSelectedIcon:ce,removeIcon:Fe,allowClear:Le,notFoundContent:oe,className:ke,getPopupContainer:l||A,dropdownClassName:Me,disabled:Pe,dropdownStyle:Object.assign(Object.assign({},T),{zIndex:$e}),maxCount:xe?P:void 0,tagRender:xe?R:void 0})))},Su=b.forwardRef(sY),aY=Kq(Su,"dropdownAlign");Su.SECRET_COMBOBOX_MODE_DO_NOT_USE=FB;Su.Option=CT;Su.OptGroup=ET;Su._InternalPanelDoNotUseOrYouWillBeFired=aY;const su=["xxl","xl","lg","md","sm","xs"],lY=n=>({xs:`(max-width: ${n.screenXSMax}px)`,sm:`(min-width: ${n.screenSM}px)`,md:`(min-width: ${n.screenMD}px)`,lg:`(min-width: ${n.screenLG}px)`,xl:`(min-width: ${n.screenXL}px)`,xxl:`(min-width: ${n.screenXXL}px)`}),cY=n=>{const e=n,r=[].concat(su).reverse();return r.forEach((i,o)=>{const s=i.toUpperCase(),a=`screen${s}Min`,l=`screen${s}`;if(!(e[a]<=e[l]))throw new Error(`${a}<=${l} fails : !(${e[a]}<=${e[l]})`);if(o<r.length-1){const c=`screen${s}Max`;if(!(e[l]<=e[c]))throw new Error(`${l}<=${c} fails : !(${e[l]}<=${e[c]})`);const d=`screen${r[o+1].toUpperCase()}Min`;if(!(e[c]<=e[d]))throw new Error(`${c}<=${d} fails : !(${e[c]}<=${e[d]})`)}}),n};function UB(){const[,n]=eo(),e=lY(cY(n));return de.useMemo(()=>{const r=new Map;let i=-1,o={};return{matchHandlers:{},dispatch(s){return o=s,r.forEach(a=>a(o)),r.size>=1},subscribe(s){return r.size||this.register(),i+=1,r.set(i,s),s(o),i},unsubscribe(s){r.delete(s),r.size||this.unregister()},unregister(){Object.keys(e).forEach(s=>{const a=e[s],l=this.matchHandlers[a];l==null||l.mql.removeListener(l==null?void 0:l.listener)}),r.clear()},register(){Object.keys(e).forEach(s=>{const a=e[s],l=u=>{let{matches:d}=u;this.dispatch(Object.assign(Object.assign({},o),{[s]:d}))},c=window.matchMedia(a);c.addListener(l),this.matchHandlers[a]={mql:c,listener:l},l(c)})},responsiveMap:e}},[n])}function uY(){const[,n]=b.useReducer(e=>e+1,0);return n}function BB(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const e=b.useRef({}),r=uY(),i=UB();return xn(()=>{const o=i.subscribe(s=>{e.current=s,n&&r()});return()=>i.unsubscribe(o)},[]),e.current}function $B(n){var e=n.children,r=n.prefixCls,i=n.id,o=n.overlayInnerStyle,s=n.bodyClassName,a=n.className,l=n.style;return b.createElement("div",{className:we("".concat(r,"-content"),a),style:l},b.createElement("div",{className:we("".concat(r,"-inner"),s),id:i,role:"tooltip",style:o},typeof e=="function"?e():e))}var Uu={shiftX:64,adjustY:1},Bu={adjustX:1,shiftY:!0},Mo=[0,0],dY={left:{points:["cr","cl"],overflow:Bu,offset:[-4,0],targetOffset:Mo},right:{points:["cl","cr"],overflow:Bu,offset:[4,0],targetOffset:Mo},top:{points:["bc","tc"],overflow:Uu,offset:[0,-4],targetOffset:Mo},bottom:{points:["tc","bc"],overflow:Uu,offset:[0,4],targetOffset:Mo},topLeft:{points:["bl","tl"],overflow:Uu,offset:[0,-4],targetOffset:Mo},leftTop:{points:["tr","tl"],overflow:Bu,offset:[-4,0],targetOffset:Mo},topRight:{points:["br","tr"],overflow:Uu,offset:[0,-4],targetOffset:Mo},rightTop:{points:["tl","tr"],overflow:Bu,offset:[4,0],targetOffset:Mo},bottomRight:{points:["tr","br"],overflow:Uu,offset:[0,4],targetOffset:Mo},rightBottom:{points:["bl","br"],overflow:Bu,offset:[4,0],targetOffset:Mo},bottomLeft:{points:["tl","bl"],overflow:Uu,offset:[0,4],targetOffset:Mo},leftBottom:{points:["br","bl"],overflow:Bu,offset:[-4,0],targetOffset:Mo}},fY=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],hY=function(e,r){var i=e.overlayClassName,o=e.trigger,s=o===void 0?["hover"]:o,a=e.mouseEnterDelay,l=a===void 0?0:a,c=e.mouseLeaveDelay,u=c===void 0?.1:c,d=e.overlayStyle,f=e.prefixCls,h=f===void 0?"rc-tooltip":f,p=e.children,g=e.onVisibleChange,y=e.afterVisibleChange,v=e.transitionName,m=e.animation,_=e.motion,x=e.placement,S=x===void 0?"right":x,w=e.align,E=w===void 0?{}:w,C=e.destroyTooltipOnHide,T=C===void 0?!1:C,M=e.defaultVisible,R=e.getTooltipContainer,P=e.overlayInnerStyle;e.arrowContent;var D=e.overlay,F=e.id,A=e.showArrow,I=A===void 0?!0:A,N=e.classNames,L=e.styles,O=Pn(e,fY),V=b.useRef(null);b.useImperativeHandle(r,function(){return V.current});var B=re({},O);"visible"in e&&(B.popupVisible=e.visible);var z=function(){return b.createElement($B,{key:"content",prefixCls:h,id:F,bodyClassName:N==null?void 0:N.body,overlayInnerStyle:re(re({},P),L==null?void 0:L.body)},D)};return b.createElement(wB,pt({popupClassName:we(i,N==null?void 0:N.root),prefixCls:h,popup:z,action:s,builtinPlacements:dY,popupPlacement:S,ref:V,popupAlign:E,getPopupContainer:R,onPopupVisibleChange:g,afterPopupVisibleChange:y,popupTransitionName:v,popupAnimation:m,popupMotion:_,defaultPopupVisible:M,autoDestroy:T,mouseLeaveDelay:u,popupStyle:re(re({},d),L==null?void 0:L.root),mouseEnterDelay:l,arrow:I},B),p)};const pY=b.forwardRef(hY);function mY(n){const{sizePopupArrow:e,borderRadiusXS:r,borderRadiusOuter:i}=n,o=e/2,s=0,a=o,l=i*1/Math.sqrt(2),c=o-i*(1-1/Math.sqrt(2)),u=o-r*(1/Math.sqrt(2)),d=i*(Math.sqrt(2)-1)+r*(1/Math.sqrt(2)),f=2*o-u,h=d,p=2*o-l,g=c,y=2*o-s,v=a,m=o*Math.sqrt(2)+i*(Math.sqrt(2)-2),_=i*(Math.sqrt(2)-1),x=`polygon(${_}px 100%, 50% ${_}px, ${2*o-_}px 100%, ${_}px 100%)`,S=`path('M ${s} ${a} A ${i} ${i} 0 0 0 ${l} ${c} L ${u} ${d} A ${r} ${r} 0 0 1 ${f} ${h} L ${p} ${g} A ${i} ${i} 0 0 0 ${y} ${v} Z')`;return{arrowShadowWidth:m,arrowPath:S,arrowPolygon:x}}const gY=(n,e,r)=>{const{sizePopupArrow:i,arrowPolygon:o,arrowPath:s,arrowShadowWidth:a,borderRadiusXS:l,calc:c}=n;return{pointerEvents:"none",width:i,height:i,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:i,height:c(i).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[o,s]},content:'""'},"&::after":{content:'""',position:"absolute",width:a,height:a,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${De(l)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:r,zIndex:0,background:"transparent"}}},zB=8;function kB(n){const{contentRadius:e,limitVerticalRadius:r}=n,i=e>12?e+2:12;return{arrowOffsetHorizontal:i,arrowOffsetVertical:r?zB:i}}function zg(n,e){return n?e:{}}function vY(n,e,r){const{componentCls:i,boxShadowPopoverArrow:o,arrowOffsetVertical:s,arrowOffsetHorizontal:a}=n,{arrowDistance:l=0,arrowPlacement:c={left:!0,right:!0,top:!0,bottom:!0}}={};return{[i]:Object.assign(Object.assign(Object.assign(Object.assign({[`${i}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},gY(n,e,o)),{"&:before":{background:e}})]},zg(!!c.top,{[[`&-placement-top > ${i}-arrow`,`&-placement-topLeft > ${i}-arrow`,`&-placement-topRight > ${i}-arrow`].join(",")]:{bottom:l,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":a,[`> ${i}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${De(a)})`,[`> ${i}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),zg(!!c.bottom,{[[`&-placement-bottom > ${i}-arrow`,`&-placement-bottomLeft > ${i}-arrow`,`&-placement-bottomRight > ${i}-arrow`].join(",")]:{top:l,transform:"translateY(-100%)"},[`&-placement-bottom > ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":a,[`> ${i}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${De(a)})`,[`> ${i}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),zg(!!c.left,{[[`&-placement-left > ${i}-arrow`,`&-placement-leftTop > ${i}-arrow`,`&-placement-leftBottom > ${i}-arrow`].join(",")]:{right:{_skip_check_:!0,value:l},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${i}-arrow`]:{top:s},[`&-placement-leftBottom > ${i}-arrow`]:{bottom:s}})),zg(!!c.right,{[[`&-placement-right > ${i}-arrow`,`&-placement-rightTop > ${i}-arrow`,`&-placement-rightBottom > ${i}-arrow`].join(",")]:{left:{_skip_check_:!0,value:l},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${i}-arrow`]:{top:s},[`&-placement-rightBottom > ${i}-arrow`]:{bottom:s}}))}}function yY(n,e,r,i){if(i===!1)return{adjustX:!1,adjustY:!1};const o=i&&typeof i=="object"?i:{},s={};switch(n){case"top":case"bottom":s.shiftX=e.arrowOffsetHorizontal*2+r,s.shiftY=!0,s.adjustY=!0;break;case"left":case"right":s.shiftY=e.arrowOffsetVertical*2+r,s.shiftX=!0,s.adjustX=!0;break}const a=Object.assign(Object.assign({},s),o);return a.shiftX||(a.adjustX=!0),a.shiftY||(a.adjustY=!0),a}const RN={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},_Y={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},xY=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function bY(n){const{arrowWidth:e,autoAdjustOverflow:r,arrowPointAtCenter:i,offset:o,borderRadius:s}=n,a=e/2,l={};return Object.keys(RN).forEach(c=>{const u=i&&_Y[c]||RN[c],d=Object.assign(Object.assign({},u),{offset:[0,0],dynamicInset:!0});switch(l[c]=d,xY.has(c)&&(d.autoArrow=!1),c){case"top":case"topLeft":case"topRight":d.offset[1]=-a-o;break;case"bottom":case"bottomLeft":case"bottomRight":d.offset[1]=a+o;break;case"left":case"leftTop":case"leftBottom":d.offset[0]=-a-o;break;case"right":case"rightTop":case"rightBottom":d.offset[0]=a+o;break}const f=kB({contentRadius:s,limitVerticalRadius:!0});if(i)switch(c){case"topLeft":case"bottomLeft":d.offset[0]=-f.arrowOffsetHorizontal-a;break;case"topRight":case"bottomRight":d.offset[0]=f.arrowOffsetHorizontal+a;break;case"leftTop":case"rightTop":d.offset[1]=-f.arrowOffsetHorizontal*2+a;break;case"leftBottom":case"rightBottom":d.offset[1]=f.arrowOffsetHorizontal*2-a;break}d.overflow=yY(c,f,e,r),d.htmlRegion="visibleFirst"}),l}const SY=n=>{const{calc:e,componentCls:r,tooltipMaxWidth:i,tooltipColor:o,tooltipBg:s,tooltipBorderRadius:a,zIndexPopup:l,controlHeight:c,boxShadowSecondary:u,paddingSM:d,paddingXS:f,arrowOffsetHorizontal:h,sizePopupArrow:p}=n,g=e(a).add(p).add(h).equal(),y=e(a).mul(2).add(p).equal();return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},Es(n)),{position:"absolute",zIndex:l,display:"block",width:"max-content",maxWidth:i,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":s,[`${r}-inner`]:{minWidth:y,minHeight:c,padding:`${De(n.calc(d).div(2).equal())} ${De(f)}`,color:o,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:s,borderRadius:a,boxShadow:u,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:g},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${r}-inner`]:{borderRadius:n.min(a,zB)}},[`${r}-content`]:{position:"relative"}}),$8(n,(v,m)=>{let{darkColor:_}=m;return{[`&${r}-${v}`]:{[`${r}-inner`]:{backgroundColor:_},[`${r}-arrow`]:{"--antd-arrow-background-color":_}}}})),{"&-rtl":{direction:"rtl"}})},vY(n,"var(--antd-arrow-background-color)"),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:n.sizePopupArrow}}]},wY=n=>Object.assign(Object.assign({zIndexPopup:n.zIndexPopupBase+70},kB({contentRadius:n.borderRadius,limitVerticalRadius:!0})),mY(Xn(n,{borderRadiusOuter:Math.min(n.borderRadiusOuter,4)}))),VB=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ii("Tooltip",i=>{const{borderRadius:o,colorTextLightSolid:s,colorBgSpotlight:a}=i,l=Xn(i,{tooltipMaxWidth:250,tooltipColor:s,tooltipBorderRadius:o,tooltipBg:a});return[SY(l),OU(i,"zoom-big-fast")]},wY,{resetStyle:!1,injectStyle:e})(n)},EY=of.map(n=>`${n}-inverse`);function CY(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(ht(EY),ht(of)).includes(n):of.includes(n)}function GB(n,e){const r=CY(e),i=we({[`${n}-${e}`]:e&&r}),o={},s={};return e&&!r&&(o.background=e,s["--antd-arrow-background-color"]=e),{className:i,overlayStyle:o,arrowStyle:s}}const TY=n=>{const{prefixCls:e,className:r,placement:i="top",title:o,color:s,overlayInnerStyle:a}=n,{getPrefixCls:l}=b.useContext(Yt),c=l("tooltip",e),[u,d,f]=VB(c),h=GB(c,s),p=h.arrowStyle,g=Object.assign(Object.assign({},a),h.overlayStyle),y=we(d,f,c,`${c}-pure`,`${c}-placement-${i}`,r,h.className);return u(b.createElement("div",{className:y,style:p},b.createElement("div",{className:`${c}-arrow`}),b.createElement($B,Object.assign({},n,{className:d,prefixCls:c,overlayInnerStyle:g}),o)))};var MY=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const RY=b.forwardRef((n,e)=>{var r,i,o,s,a,l;const{prefixCls:c,openClassName:u,getTooltipContainer:d,color:f,overlayInnerStyle:h,children:p,afterOpenChange:g,afterVisibleChange:y,destroyTooltipOnHide:v,arrow:m=!0,title:_,overlay:x,builtinPlacements:S,arrowPointAtCenter:w=!1,autoAdjustOverflow:E=!0}=n,C=!!m,[,T]=eo(),{getPopupContainer:M,getPrefixCls:R,direction:P,tooltip:D}=b.useContext(Yt),F=U3(),A=b.useRef(null),I=()=>{var Je;(Je=A.current)===null||Je===void 0||Je.forceAlign()};b.useImperativeHandle(e,()=>{var Je;return{forceAlign:I,forcePopupAlign:()=>{F.deprecated(!1,"forcePopupAlign","forceAlign"),I()},nativeElement:(Je=A.current)===null||Je===void 0?void 0:Je.nativeElement}});const[N,L]=Zi(!1,{value:(r=n.open)!==null&&r!==void 0?r:n.visible,defaultValue:(i=n.defaultOpen)!==null&&i!==void 0?i:n.defaultVisible}),O=!_&&!x&&_!==0,V=Je=>{var Me,ze;L(O?!1:Je),O||((Me=n.onOpenChange)===null||Me===void 0||Me.call(n,Je),(ze=n.onVisibleChange)===null||ze===void 0||ze.call(n,Je))},B=b.useMemo(()=>{var Je,Me;let ze=w;return typeof m=="object"&&(ze=(Me=(Je=m.pointAtCenter)!==null&&Je!==void 0?Je:m.arrowPointAtCenter)!==null&&Me!==void 0?Me:w),S||bY({arrowPointAtCenter:ze,autoAdjustOverflow:E,arrowWidth:C?T.sizePopupArrow:0,borderRadius:T.borderRadius,offset:T.marginXXS})},[w,m,S,T]),z=b.useMemo(()=>_===0?_:x||_||"",[x,_]),W=b.createElement(ry,{space:!0},typeof z=="function"?z():z),{getPopupContainer:ie,placement:k="top",mouseEnterDelay:j=.1,mouseLeaveDelay:Q=.1,overlayStyle:Y,rootClassName:ne,overlayClassName:ye,styles:me,classNames:fe}=n,ae=MY(n,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),ve=R("tooltip",c),q=R(),ge=n["data-popover-inject"];let xe=N;!("open"in n)&&!("visible"in n)&&O&&(xe=!1);const _e=b.isValidElement(p)&&!_U(p)?p:b.createElement("span",null,p),Se=_e.props,Ke=!Se.className||typeof Se.className=="string"?we(Se.className,u||`${ve}-open`):Se.className,[Ue,H,U]=VB(ve,!ge),X=GB(ve,f),oe=X.arrowStyle,pe=we(ye,{[`${ve}-rtl`]:P==="rtl"},X.className,ne,H,U,D==null?void 0:D.className,(o=D==null?void 0:D.classNames)===null||o===void 0?void 0:o.root,fe==null?void 0:fe.root),ce=we((s=D==null?void 0:D.classNames)===null||s===void 0?void 0:s.body,fe==null?void 0:fe.body),[Fe,Re]=vT("Tooltip",ae.zIndex),Le=b.createElement(pY,Object.assign({},ae,{zIndex:Fe,showArrow:C,placement:k,mouseEnterDelay:j,mouseLeaveDelay:Q,prefixCls:ve,classNames:{root:pe,body:ce},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},oe),(a=D==null?void 0:D.styles)===null||a===void 0?void 0:a.root),D==null?void 0:D.style),Y),me==null?void 0:me.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},(l=D==null?void 0:D.styles)===null||l===void 0?void 0:l.body),h),me==null?void 0:me.body),X.overlayStyle)},getTooltipContainer:ie||d||M,ref:A,builtinPlacements:B,overlay:W,visible:xe,onVisibleChange:V,afterVisibleChange:g??y,arrowContent:b.createElement("span",{className:`${ve}-arrow-content`}),motion:{motionName:sf(q,"zoom-big-fast",n.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!v}),xe?Xl(_e,{className:Ke}):_e);return Ue(b.createElement(gT.Provider,{value:Re},Le))}),Xm=RY;Xm._InternalPanelDoNotUseOrYouWillBeFired=TY;var AY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},NY=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:AY}))},AN=b.forwardRef(NY);function RT(n){return Xn(n,{inputAffixPadding:n.paddingXXS})}const AT=n=>{const{controlHeight:e,fontSize:r,lineHeight:i,lineWidth:o,controlHeightSM:s,controlHeightLG:a,fontSizeLG:l,lineHeightLG:c,paddingSM:u,controlPaddingHorizontalSM:d,controlPaddingHorizontal:f,colorFillAlter:h,colorPrimaryHover:p,colorPrimary:g,controlOutlineWidth:y,controlOutline:v,colorErrorOutline:m,colorWarningOutline:_,colorBgContainer:x}=n;return{paddingBlock:Math.max(Math.round((e-r*i)/2*10)/10-o,0),paddingBlockSM:Math.max(Math.round((s-r*i)/2*10)/10-o,0),paddingBlockLG:Math.ceil((a-l*c)/2*10)/10-o,paddingInline:u-o,paddingInlineSM:d-o,paddingInlineLG:f-o,addonBg:h,activeBorderColor:g,hoverBorderColor:p,activeShadow:`0 0 0 ${y}px ${v}`,errorActiveShadow:`0 0 0 ${y}px ${m}`,warningActiveShadow:`0 0 0 ${y}px ${_}`,hoverBg:x,activeBg:x,inputFontSize:r,inputFontSizeLG:l,inputFontSizeSM:r}},PY=n=>({borderColor:n.hoverBorderColor,backgroundColor:n.hoverBg}),U_=n=>({color:n.colorTextDisabled,backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},PY(Xn(n,{hoverBorderColor:n.colorBorder,hoverBg:n.colorBgContainerDisabled})))}),NT=(n,e)=>({background:n.colorBgContainer,borderWidth:n.lineWidth,borderStyle:n.lineType,borderColor:e.borderColor,"&:hover":{borderColor:e.hoverBorderColor,backgroundColor:n.hoverBg},"&:focus, &:focus-within":{borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:n.activeBg}}),NN=(n,e)=>({[`&${n.componentCls}-status-${e.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},NT(n,e)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:e.affixColor}}),[`&${n.componentCls}-status-${e.status}${n.componentCls}-disabled`]:{borderColor:e.borderColor}}),OY=(n,e)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},NT(n,{borderColor:n.colorBorder,hoverBorderColor:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeShadow:n.activeShadow})),{[`&${n.componentCls}-disabled, &[disabled]`]:Object.assign({},U_(n))}),NN(n,{status:"error",borderColor:n.colorError,hoverBorderColor:n.colorErrorBorderHover,activeBorderColor:n.colorError,activeShadow:n.errorActiveShadow,affixColor:n.colorError})),NN(n,{status:"warning",borderColor:n.colorWarning,hoverBorderColor:n.colorWarningBorderHover,activeBorderColor:n.colorWarning,activeShadow:n.warningActiveShadow,affixColor:n.colorWarning})),e)}),PN=(n,e)=>({[`&${n.componentCls}-group-wrapper-status-${e.status}`]:{[`${n.componentCls}-group-addon`]:{borderColor:e.addonBorderColor,color:e.addonColor}}}),IY=n=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${n.componentCls}-group`]:{"&-addon":{background:n.addonBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},PN(n,{status:"error",addonBorderColor:n.colorError,addonColor:n.colorErrorText})),PN(n,{status:"warning",addonBorderColor:n.colorWarning,addonColor:n.colorWarningText})),{[`&${n.componentCls}-group-wrapper-disabled`]:{[`${n.componentCls}-group-addon`]:Object.assign({},U_(n))}})}),DY=(n,e)=>{const{componentCls:r}=n;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${r}-disabled, &[disabled]`]:{color:n.colorTextDisabled,cursor:"not-allowed"},[`&${r}-status-error`]:{"&, & input, & textarea":{color:n.colorError}},[`&${r}-status-warning`]:{"&, & input, & textarea":{color:n.colorWarning}}},e)}},HB=(n,e)=>({background:e.bg,borderWidth:n.lineWidth,borderStyle:n.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:e==null?void 0:e.inputColor},"&:hover":{background:e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:e.activeBorderColor,backgroundColor:n.activeBg}}),ON=(n,e)=>({[`&${n.componentCls}-status-${e.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},HB(n,e)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:e.affixColor}})}),LY=(n,e)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},HB(n,{bg:n.colorFillTertiary,hoverBg:n.colorFillSecondary,activeBorderColor:n.activeBorderColor})),{[`&${n.componentCls}-disabled, &[disabled]`]:Object.assign({},U_(n))}),ON(n,{status:"error",bg:n.colorErrorBg,hoverBg:n.colorErrorBgHover,activeBorderColor:n.colorError,inputColor:n.colorErrorText,affixColor:n.colorError})),ON(n,{status:"warning",bg:n.colorWarningBg,hoverBg:n.colorWarningBgHover,activeBorderColor:n.colorWarning,inputColor:n.colorWarningText,affixColor:n.colorWarning})),e)}),IN=(n,e)=>({[`&${n.componentCls}-group-wrapper-status-${e.status}`]:{[`${n.componentCls}-group-addon`]:{background:e.addonBg,color:e.addonColor}}}),FY=n=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${n.componentCls}-group`]:{"&-addon":{background:n.colorFillTertiary},[`${n.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}}}},IN(n,{status:"error",addonBg:n.colorErrorBg,addonColor:n.colorErrorText})),IN(n,{status:"warning",addonBg:n.colorWarningBg,addonColor:n.colorWarningText})),{[`&${n.componentCls}-group-wrapper-disabled`]:{[`${n.componentCls}-group`]:{"&-addon":{background:n.colorFillTertiary,color:n.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderTop:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderBottom:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderTop:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderBottom:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`}}}})}),UY=n=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:n,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),jB=n=>{const{paddingBlockLG:e,lineHeightLG:r,borderRadiusLG:i,paddingInlineLG:o}=n;return{padding:`${De(e)} ${De(o)}`,fontSize:n.inputFontSizeLG,lineHeight:r,borderRadius:i}},PT=n=>({padding:`${De(n.paddingBlockSM)} ${De(n.paddingInlineSM)}`,fontSize:n.inputFontSizeSM,borderRadius:n.borderRadiusSM}),OT=n=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${De(n.paddingBlock)} ${De(n.paddingInline)}`,color:n.colorText,fontSize:n.inputFontSize,lineHeight:n.lineHeight,borderRadius:n.borderRadius,transition:`all ${n.motionDurationMid}`},UY(n.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:n.controlHeight,lineHeight:n.lineHeight,verticalAlign:"bottom",transition:`all ${n.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},jB(n)),"&-sm":Object.assign({},PT(n)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),BY=n=>{const{componentCls:e,antCls:r}=n;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:n.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:Object.assign({},jB(n)),[`&-sm ${e}, &-sm > ${e}-group-addon`]:Object.assign({},PT(n)),[`&-lg ${r}-select-single ${r}-select-selector`]:{height:n.controlHeightLG},[`&-sm ${r}-select-single ${r}-select-selector`]:{height:n.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${De(n.paddingInline)}`,color:n.colorText,fontWeight:"normal",fontSize:n.inputFontSize,textAlign:"center",borderRadius:n.borderRadius,transition:`all ${n.motionDurationSlow}`,lineHeight:1,[`${r}-select`]:{margin:`${De(n.calc(n.paddingBlock).add(1).mul(-1).equal())} ${De(n.calc(n.paddingInline).mul(-1).equal())}`,[`&${r}-select-single:not(${r}-select-customize-input):not(${r}-pagination-size-changer)`]:{[`${r}-select-selector`]:{backgroundColor:"inherit",border:`${De(n.lineWidth)} ${n.lineType} transparent`,boxShadow:"none"}}},[`${r}-cascader-picker`]:{margin:`-9px ${De(n.calc(n.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${r}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[e]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${e}-search-with-button &`]:{zIndex:0}}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-search &`]:{borderStartStartRadius:n.borderRadius,borderEndStartRadius:n.borderRadius}},[`&:not(:first-child), ${e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:Object.assign(Object.assign({display:"block"},J3()),{[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:n.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${e}-affix-wrapper,
        & > ${e}-number-affix-wrapper,
        & > ${r}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal(),borderInlineEndWidth:n.lineWidth},[e]:{float:"none"},[`& > ${r}-select > ${r}-select-selector,
      & > ${r}-select-auto-complete ${e},
      & > ${r}-cascader-picker ${e},
      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:n.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${r}-select-focused`]:{zIndex:1},[`& > ${r}-select > ${r}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${r}-select:first-child > ${r}-select-selector,
      & > ${r}-select-auto-complete:first-child ${e},
      & > ${r}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:n.borderRadius,borderEndStartRadius:n.borderRadius},[`& > *:last-child,
      & > ${r}-select:last-child > ${r}-select-selector,
      & > ${r}-cascader-picker:last-child ${e},
      & > ${r}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:n.lineWidth,borderStartEndRadius:n.borderRadius,borderEndEndRadius:n.borderRadius},[`& > ${r}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:n.calc(n.lineWidth).mul(-1).equal(),[`${e}-affix-wrapper`]:{borderRadius:0}},[`${e}-group-wrapper:not(:last-child)`]:{[`&${e}-search > ${e}-group`]:{[`& > ${e}-group-addon > ${e}-search-button`]:{borderRadius:0},[`& > ${e}`]:{borderStartStartRadius:n.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:n.borderRadius}}}})}},$Y=n=>{const{componentCls:e,controlHeightSM:r,lineWidth:i,calc:o}=n,a=o(r).sub(o(i).mul(2)).sub(16).div(2).equal();return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Es(n)),OT(n)),OY(n)),LY(n)),DY(n)),{'&[type="color"]':{height:n.controlHeight,[`&${e}-lg`]:{height:n.controlHeightLG},[`&${e}-sm`]:{height:r,paddingTop:a,paddingBottom:a}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},zY=n=>{const{componentCls:e}=n;return{[`${e}-clear-icon`]:{margin:0,lineHeight:0,color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${n.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:n.colorTextTertiary},"&:active":{color:n.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${De(n.inputAffixPadding)}`}}}},kY=n=>{const{componentCls:e,inputAffixPadding:r,colorTextDescription:i,motionDurationSlow:o,colorIcon:s,colorIconHover:a,iconCls:l}=n,c=`${e}-affix-wrapper`,u=`${e}-affix-wrapper-disabled`;return{[c]:Object.assign(Object.assign(Object.assign(Object.assign({},OT(n)),{display:"inline-flex",[`&:not(${e}-disabled):hover`]:{zIndex:1,[`${e}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${e}`]:{padding:0},[`> input${e}, > textarea${e}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:n.paddingXS}},"&-show-count-suffix":{color:i},"&-show-count-has-suffix":{marginInlineEnd:n.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}}),zY(n)),{[`${l}${e}-password-icon`]:{color:s,cursor:"pointer",transition:`all ${o}`,"&:hover":{color:a}}}),[u]:{[`${l}${e}-password-icon`]:{color:s,cursor:"not-allowed","&:hover":{color:s}}}}},VY=n=>{const{componentCls:e,borderRadiusLG:r,borderRadiusSM:i}=n;return{[`${e}-group`]:Object.assign(Object.assign(Object.assign({},Es(n)),BY(n)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:r,fontSize:n.inputFontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:i}}},IY(n)),FY(n)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},GY=n=>{const{componentCls:e,antCls:r}=n,i=`${e}-search`;return{[i]:{[e]:{"&:hover, &:focus":{[`+ ${e}-group-addon ${i}-button:not(${r}-btn-primary)`]:{borderInlineStartColor:n.colorPrimaryHover}}},[`${e}-affix-wrapper`]:{height:n.controlHeight,borderRadius:0},[`${e}-lg`]:{lineHeight:n.calc(n.lineHeightLG).sub(2e-4).equal()},[`> ${e}-group`]:{[`> ${e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${i}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${i}-button:not(${r}-btn-primary)`]:{color:n.colorTextDescription,"&:hover":{color:n.colorPrimaryHover},"&:active":{color:n.colorPrimaryActive},[`&${r}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${i}-button`]:{height:n.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${e}-affix-wrapper, ${i}-button`]:{height:n.controlHeightLG}},"&-small":{[`${e}-affix-wrapper, ${i}-button`]:{height:n.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${e}-compact-item`]:{[`&:not(${e}-compact-last-item)`]:{[`${e}-group-addon`]:{[`${e}-search-button`]:{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${e}-compact-first-item)`]:{[`${e},${e}-affix-wrapper`]:{borderRadius:0}},[`> ${e}-group-addon ${e}-search-button,
        > ${e},
        ${e}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${e}-affix-wrapper-focused`]:{zIndex:2}}}}},HY=n=>{const{componentCls:e,paddingLG:r}=n,i=`${e}-textarea`;return{[i]:{position:"relative","&-show-count":{[`> ${e}`]:{height:"100%"},[`${e}-data-count`]:{position:"absolute",bottom:n.calc(n.fontSize).mul(n.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:n.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${e},
        &-affix-wrapper${i}-has-feedback ${e}
      `]:{paddingInlineEnd:r},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:n.paddingInline,insetBlockStart:n.paddingXS},[`${i}-suffix`]:{position:"absolute",top:0,insetInlineEnd:n.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${e}-affix-wrapper-sm`]:{[`${e}-suffix`]:{[`${e}-clear-icon`]:{insetInlineEnd:n.paddingInlineSM}}}}}},jY=n=>{const{componentCls:e}=n;return{[`${e}-out-of-range`]:{[`&, & input, & textarea, ${e}-show-count-suffix, ${e}-data-count`]:{color:n.colorError}}}},IT=Ii("Input",n=>{const e=Xn(n,RT(n));return[$Y(e),HY(e),kY(e),VY(e),GY(e),jY(e),xT(e)]},AT,{resetFont:!1});function WY(n,e,r){var i=r||{},o=i.noTrailing,s=o===void 0?!1:o,a=i.noLeading,l=a===void 0?!1:a,c=i.debounceMode,u=c===void 0?void 0:c,d,f=!1,h=0;function p(){d&&clearTimeout(d)}function g(v){var m=v||{},_=m.upcomingOnly,x=_===void 0?!1:_;p(),f=!x}function y(){for(var v=arguments.length,m=new Array(v),_=0;_<v;_++)m[_]=arguments[_];var x=this,S=Date.now()-h;if(f)return;function w(){h=Date.now(),e.apply(x,m)}function E(){d=void 0}!l&&u&&!d&&w(),p(),u===void 0&&S>n?l?(h=Date.now(),s||(d=setTimeout(u?E:w,n))):w():s!==!0&&(d=setTimeout(u?E:w,u===void 0?n-S:n))}return y.cancel=g,y}function qY(n,e,r){var i={},o=i.atBegin,s=o===void 0?!1:o;return WY(n,e,{debounceMode:s!==!1})}const WB=b.createContext({});var XY=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function DN(n){return typeof n=="number"?`${n} ${n} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(n)?`0 0 ${n}`:n}const KY=["xs","sm","md","lg","xl","xxl"],YY=b.forwardRef((n,e)=>{const{getPrefixCls:r,direction:i}=b.useContext(Yt),{gutter:o,wrap:s}=b.useContext(WB),{prefixCls:a,span:l,order:c,offset:u,push:d,pull:f,className:h,children:p,flex:g,style:y}=n,v=XY(n,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),m=r("col",a),[_,x,S]=Pq(m),w={};let E={};KY.forEach(M=>{let R={};const P=n[M];typeof P=="number"?R.span=P:typeof P=="object"&&(R=P||{}),delete v[M],E=Object.assign(Object.assign({},E),{[`${m}-${M}-${R.span}`]:R.span!==void 0,[`${m}-${M}-order-${R.order}`]:R.order||R.order===0,[`${m}-${M}-offset-${R.offset}`]:R.offset||R.offset===0,[`${m}-${M}-push-${R.push}`]:R.push||R.push===0,[`${m}-${M}-pull-${R.pull}`]:R.pull||R.pull===0,[`${m}-rtl`]:i==="rtl"}),R.flex&&(E[`${m}-${M}-flex`]=!0,w[`--${m}-${M}-flex`]=DN(R.flex))});const C=we(m,{[`${m}-${l}`]:l!==void 0,[`${m}-order-${c}`]:c,[`${m}-offset-${u}`]:u,[`${m}-push-${d}`]:d,[`${m}-pull-${f}`]:f},h,E,x,S),T={};if(o&&o[0]>0){const M=o[0]/2;T.paddingLeft=M,T.paddingRight=M}return g&&(T.flex=DN(g),s===!1&&!T.minWidth&&(T.minWidth=0)),_(b.createElement("div",Object.assign({},v,{style:Object.assign(Object.assign(Object.assign({},T),y),w),className:C,ref:e}),p))});var QY=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function LN(n,e){const[r,i]=b.useState(typeof n=="string"?n:""),o=()=>{if(typeof n=="string"&&i(n),typeof n=="object")for(let s=0;s<su.length;s++){const a=su[s];if(!e[a])continue;const l=n[a];if(l!==void 0){i(l);return}}};return b.useEffect(()=>{o()},[JSON.stringify(n),e]),r}const ZY=b.forwardRef((n,e)=>{const{prefixCls:r,justify:i,align:o,className:s,style:a,children:l,gutter:c=0,wrap:u}=n,d=QY(n,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:f,direction:h}=b.useContext(Yt),[p,g]=b.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),[y,v]=b.useState({xs:!1,sm:!1,md:!1,lg:!1,xl:!1,xxl:!1}),m=LN(o,y),_=LN(i,y),x=b.useRef(c),S=UB();b.useEffect(()=>{const L=S.subscribe(O=>{v(O);const V=x.current||0;(!Array.isArray(V)&&typeof V=="object"||Array.isArray(V)&&(typeof V[0]=="object"||typeof V[1]=="object"))&&g(O)});return()=>S.unsubscribe(L)},[]);const w=()=>{const L=[void 0,void 0];return(Array.isArray(c)?c:[c,void 0]).forEach((V,B)=>{if(typeof V=="object")for(let z=0;z<su.length;z++){const W=su[z];if(p[W]&&V[W]!==void 0){L[B]=V[W];break}}else L[B]=V}),L},E=f("row",r),[C,T,M]=Nq(E),R=w(),P=we(E,{[`${E}-no-wrap`]:u===!1,[`${E}-${_}`]:_,[`${E}-${m}`]:m,[`${E}-rtl`]:h==="rtl"},s,T,M),D={},F=R[0]!=null&&R[0]>0?R[0]/-2:void 0;F&&(D.marginLeft=F,D.marginRight=F);const[A,I]=R;D.rowGap=I;const N=b.useMemo(()=>({gutter:[A,I],wrap:u}),[A,I,u]);return C(b.createElement(WB.Provider,{value:N},b.createElement("div",Object.assign({},d,{className:P,style:Object.assign(Object.assign({},D),a),ref:e}),l)))});function JY(n){return!!(n.addonBefore||n.addonAfter)}function eQ(n){return!!(n.prefix||n.suffix||n.allowClear)}function FN(n,e,r){var i=e.cloneNode(!0),o=Object.create(n,{target:{value:i},currentTarget:{value:i}});return i.value=r,typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"&&(i.selectionStart=e.selectionStart,i.selectionEnd=e.selectionEnd),i.setSelectionRange=function(){e.setSelectionRange.apply(e,arguments)},o}function sy(n,e,r,i){if(r){var o=e;if(e.type==="click"){o=FN(e,n,""),r(o);return}if(n.type!=="file"&&i!==void 0){o=FN(e,n,i),r(o);return}r(o)}}function qB(n,e){if(n){n.focus(e);var r=e||{},i=r.cursor;if(i){var o=n.value.length;switch(i){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(o,o);break;default:n.setSelectionRange(0,o)}}}}var XB=de.forwardRef(function(n,e){var r,i,o,s=n.inputElement,a=n.children,l=n.prefixCls,c=n.prefix,u=n.suffix,d=n.addonBefore,f=n.addonAfter,h=n.className,p=n.style,g=n.disabled,y=n.readOnly,v=n.focused,m=n.triggerFocus,_=n.allowClear,x=n.value,S=n.handleReset,w=n.hidden,E=n.classes,C=n.classNames,T=n.dataAttrs,M=n.styles,R=n.components,P=n.onClear,D=a??s,F=(R==null?void 0:R.affixWrapper)||"span",A=(R==null?void 0:R.groupWrapper)||"span",I=(R==null?void 0:R.wrapper)||"span",N=(R==null?void 0:R.groupAddon)||"span",L=b.useRef(null),O=function(ge){var xe;(xe=L.current)!==null&&xe!==void 0&&xe.contains(ge.target)&&(m==null||m())},V=eQ(n),B=b.cloneElement(D,{value:x,className:we((r=D.props)===null||r===void 0?void 0:r.className,!V&&(C==null?void 0:C.variant))||null}),z=b.useRef(null);if(de.useImperativeHandle(e,function(){return{nativeElement:z.current||L.current}}),V){var W=null;if(_){var ie=!g&&!y&&x,k="".concat(l,"-clear-icon"),j=Ot(_)==="object"&&_!==null&&_!==void 0&&_.clearIcon?_.clearIcon:"✖";W=de.createElement("button",{type:"button",onClick:function(ge){S==null||S(ge),P==null||P()},onMouseDown:function(ge){return ge.preventDefault()},className:we(k,ee(ee({},"".concat(k,"-hidden"),!ie),"".concat(k,"-has-suffix"),!!u))},j)}var Q="".concat(l,"-affix-wrapper"),Y=we(Q,ee(ee(ee(ee(ee({},"".concat(l,"-disabled"),g),"".concat(Q,"-disabled"),g),"".concat(Q,"-focused"),v),"".concat(Q,"-readonly"),y),"".concat(Q,"-input-with-clear-btn"),u&&_&&x),E==null?void 0:E.affixWrapper,C==null?void 0:C.affixWrapper,C==null?void 0:C.variant),ne=(u||_)&&de.createElement("span",{className:we("".concat(l,"-suffix"),C==null?void 0:C.suffix),style:M==null?void 0:M.suffix},W,u);B=de.createElement(F,pt({className:Y,style:M==null?void 0:M.affixWrapper,onClick:O},T==null?void 0:T.affixWrapper,{ref:L}),c&&de.createElement("span",{className:we("".concat(l,"-prefix"),C==null?void 0:C.prefix),style:M==null?void 0:M.prefix},c),B,ne)}if(JY(n)){var ye="".concat(l,"-group"),me="".concat(ye,"-addon"),fe="".concat(ye,"-wrapper"),ae=we("".concat(l,"-wrapper"),ye,E==null?void 0:E.wrapper,C==null?void 0:C.wrapper),ve=we(fe,ee({},"".concat(fe,"-disabled"),g),E==null?void 0:E.group,C==null?void 0:C.groupWrapper);B=de.createElement(A,{className:ve,ref:z},de.createElement(I,{className:ae},d&&de.createElement(N,{className:me},d),B,f&&de.createElement(N,{className:me},f)))}return de.cloneElement(B,{className:we((i=B.props)===null||i===void 0?void 0:i.className,h)||null,style:re(re({},(o=B.props)===null||o===void 0?void 0:o.style),p),hidden:w})}),tQ=["show"];function KB(n,e){return b.useMemo(function(){var r={};e&&(r.show=Ot(e)==="object"&&e.formatter?e.formatter:!!e),r=re(re({},r),n);var i=r,o=i.show,s=Pn(i,tQ);return re(re({},s),{},{show:!!o,showFormatter:typeof o=="function"?o:void 0,strategy:s.strategy||function(a){return a.length}})},[n,e])}var nQ=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],rQ=b.forwardRef(function(n,e){var r=n.autoComplete,i=n.onChange,o=n.onFocus,s=n.onBlur,a=n.onPressEnter,l=n.onKeyDown,c=n.onKeyUp,u=n.prefixCls,d=u===void 0?"rc-input":u,f=n.disabled,h=n.htmlSize,p=n.className,g=n.maxLength,y=n.suffix,v=n.showCount,m=n.count,_=n.type,x=_===void 0?"text":_,S=n.classes,w=n.classNames,E=n.styles,C=n.onCompositionStart,T=n.onCompositionEnd,M=Pn(n,nQ),R=b.useState(!1),P=Ce(R,2),D=P[0],F=P[1],A=b.useRef(!1),I=b.useRef(!1),N=b.useRef(null),L=b.useRef(null),O=function(oe){N.current&&qB(N.current,oe)},V=Zi(n.defaultValue,{value:n.value}),B=Ce(V,2),z=B[0],W=B[1],ie=z==null?"":String(z),k=b.useState(null),j=Ce(k,2),Q=j[0],Y=j[1],ne=KB(m,v),ye=ne.max||g,me=ne.strategy(ie),fe=!!ye&&me>ye;b.useImperativeHandle(e,function(){var X;return{focus:O,blur:function(){var pe;(pe=N.current)===null||pe===void 0||pe.blur()},setSelectionRange:function(pe,ce,Fe){var Re;(Re=N.current)===null||Re===void 0||Re.setSelectionRange(pe,ce,Fe)},select:function(){var pe;(pe=N.current)===null||pe===void 0||pe.select()},input:N.current,nativeElement:((X=L.current)===null||X===void 0?void 0:X.nativeElement)||N.current}}),b.useEffect(function(){I.current&&(I.current=!1),F(function(X){return X&&f?!1:X})},[f]);var ae=function(oe,pe,ce){var Fe=pe;if(!A.current&&ne.exceedFormatter&&ne.max&&ne.strategy(pe)>ne.max){if(Fe=ne.exceedFormatter(pe,{max:ne.max}),pe!==Fe){var Re,Le;Y([((Re=N.current)===null||Re===void 0?void 0:Re.selectionStart)||0,((Le=N.current)===null||Le===void 0?void 0:Le.selectionEnd)||0])}}else if(ce.source==="compositionEnd")return;W(Fe),N.current&&sy(N.current,oe,i,Fe)};b.useEffect(function(){if(Q){var X;(X=N.current)===null||X===void 0||X.setSelectionRange.apply(X,ht(Q))}},[Q]);var ve=function(oe){ae(oe,oe.target.value,{source:"change"})},q=function(oe){A.current=!1,ae(oe,oe.currentTarget.value,{source:"compositionEnd"}),T==null||T(oe)},ge=function(oe){a&&oe.key==="Enter"&&!I.current&&(I.current=!0,a(oe)),l==null||l(oe)},xe=function(oe){oe.key==="Enter"&&(I.current=!1),c==null||c(oe)},_e=function(oe){F(!0),o==null||o(oe)},Se=function(oe){I.current&&(I.current=!1),F(!1),s==null||s(oe)},Ke=function(oe){W(""),O(),N.current&&sy(N.current,oe,i)},Ue=fe&&"".concat(d,"-out-of-range"),H=function(){var oe=ea(n,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return de.createElement("input",pt({autoComplete:r},oe,{onChange:ve,onFocus:_e,onBlur:Se,onKeyDown:ge,onKeyUp:xe,className:we(d,ee({},"".concat(d,"-disabled"),f),w==null?void 0:w.input),style:E==null?void 0:E.input,ref:N,size:h,type:x,onCompositionStart:function(ce){A.current=!0,C==null||C(ce)},onCompositionEnd:q}))},U=function(){var oe=Number(ye)>0;if(y||ne.show){var pe=ne.showFormatter?ne.showFormatter({value:ie,count:me,maxLength:ye}):"".concat(me).concat(oe?" / ".concat(ye):"");return de.createElement(de.Fragment,null,ne.show&&de.createElement("span",{className:we("".concat(d,"-show-count-suffix"),ee({},"".concat(d,"-show-count-has-suffix"),!!y),w==null?void 0:w.count),style:re({},E==null?void 0:E.count)},pe),y)}return null};return de.createElement(XB,pt({},M,{prefixCls:d,className:we(p,Ue),handleReset:Ke,value:ie,focused:D,triggerFocus:O,suffix:U(),disabled:f,classes:S,classNames:w,styles:E}),H())});const iQ=n=>{const{getPrefixCls:e,direction:r}=b.useContext(Yt),{prefixCls:i,className:o}=n,s=e("input-group",i),a=e("input"),[l,c]=IT(a),u=we(s,{[`${s}-lg`]:n.size==="large",[`${s}-sm`]:n.size==="small",[`${s}-compact`]:n.compact,[`${s}-rtl`]:r==="rtl"},c,o),d=b.useContext(Va),f=b.useMemo(()=>Object.assign(Object.assign({},d),{isFormItemInput:!1}),[d]);return l(b.createElement("span",{className:u,style:n.style,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onFocus:n.onFocus,onBlur:n.onBlur},b.createElement(Va.Provider,{value:f},n.children)))},YB=n=>{let e;return typeof n=="object"&&(n!=null&&n.clearIcon)?e=n:n&&(e={clearIcon:de.createElement(mT,null)}),e};function QB(n,e){const r=b.useRef([]),i=()=>{r.current.push(setTimeout(()=>{var o,s,a,l;!((o=n.current)===null||o===void 0)&&o.input&&((s=n.current)===null||s===void 0?void 0:s.input.getAttribute("type"))==="password"&&(!((a=n.current)===null||a===void 0)&&a.input.hasAttribute("value"))&&((l=n.current)===null||l===void 0||l.input.removeAttribute("value"))}))};return b.useEffect(()=>(e&&i(),()=>r.current.forEach(o=>{o&&clearTimeout(o)})),[]),i}function oQ(n){return!!(n.prefix||n.suffix||n.allowClear||n.showCount)}var sQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const B_=b.forwardRef((n,e)=>{var r;const{prefixCls:i,bordered:o=!0,status:s,size:a,disabled:l,onBlur:c,onFocus:u,suffix:d,allowClear:f,addonAfter:h,addonBefore:p,className:g,style:y,styles:v,rootClassName:m,onChange:_,classNames:x,variant:S}=n,w=sQ(n,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:E,direction:C,input:T}=de.useContext(Yt),M=E("input",i),R=b.useRef(null),P=zf(M),[D,F,A]=IT(M,P),{compactSize:I,compactItemClassnames:N}=T_(M,C),L=Ya(ve=>{var q;return(q=a??I)!==null&&q!==void 0?q:ve}),O=de.useContext(za),V=l??O,{status:B,hasFeedback:z,feedbackIcon:W}=b.useContext(Va),ie=F_(B,s),k=oQ(n)||!!z;b.useRef(k);const j=QB(R,!0),Q=ve=>{j(),c==null||c(ve)},Y=ve=>{j(),u==null||u(ve)},ne=ve=>{j(),_==null||_(ve)},ye=(z||d)&&de.createElement(de.Fragment,null,d,z&&W),me=YB(f??(T==null?void 0:T.allowClear)),[fe,ae]=MT("input",S,o);return D(de.createElement(rQ,Object.assign({ref:Js(e,R),prefixCls:M,autoComplete:T==null?void 0:T.autoComplete},w,{disabled:V,onBlur:Q,onFocus:Y,style:Object.assign(Object.assign({},T==null?void 0:T.style),y),styles:Object.assign(Object.assign({},T==null?void 0:T.styles),v),suffix:ye,allowClear:me,className:we(g,m,A,P,N,T==null?void 0:T.className),onChange:ne,addonBefore:p&&de.createElement(ry,{form:!0,space:!0},p),addonAfter:h&&de.createElement(ry,{form:!0,space:!0},h),classNames:Object.assign(Object.assign(Object.assign({},x),T==null?void 0:T.classNames),{input:we({[`${M}-sm`]:L==="small",[`${M}-lg`]:L==="large",[`${M}-rtl`]:C==="rtl"},x==null?void 0:x.input,(r=T==null?void 0:T.classNames)===null||r===void 0?void 0:r.input,F),variant:we({[`${M}-${fe}`]:ae},oy(M,ie)),affixWrapper:we({[`${M}-affix-wrapper-sm`]:L==="small",[`${M}-affix-wrapper-lg`]:L==="large",[`${M}-affix-wrapper-rtl`]:C==="rtl"},F),wrapper:we({[`${M}-group-rtl`]:C==="rtl"},F),groupWrapper:we({[`${M}-group-wrapper-sm`]:L==="small",[`${M}-group-wrapper-lg`]:L==="large",[`${M}-group-wrapper-rtl`]:C==="rtl",[`${M}-group-wrapper-${fe}`]:ae},oy(`${M}-group-wrapper`,ie,z),F)})})))}),aQ=n=>{const{componentCls:e,paddingXS:r}=n;return{[e]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:r,"&-rtl":{direction:"rtl"},[`${e}-input`]:{textAlign:"center",paddingInline:n.paddingXXS},[`&${e}-sm ${e}-input`]:{paddingInline:n.calc(n.paddingXXS).div(2).equal()},[`&${e}-lg ${e}-input`]:{paddingInline:n.paddingXS}}}},lQ=Ii(["Input","OTP"],n=>{const e=Xn(n,RT(n));return[aQ(e)]},AT);var cQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const uQ=b.forwardRef((n,e)=>{const{value:r,onChange:i,onActiveChange:o,index:s,mask:a}=n,l=cQ(n,["value","onChange","onActiveChange","index","mask"]),c=r&&typeof a=="string"?a:r,u=g=>{i(s,g.target.value)},d=b.useRef(null);b.useImperativeHandle(e,()=>d.current);const f=()=>{pr(()=>{var g;const y=(g=d.current)===null||g===void 0?void 0:g.input;document.activeElement===y&&y&&y.select()})},h=g=>{const{key:y,ctrlKey:v,metaKey:m}=g;y==="ArrowLeft"?o(s-1):y==="ArrowRight"?o(s+1):y==="z"&&(v||m)&&g.preventDefault(),f()},p=g=>{g.key==="Backspace"&&!r&&o(s-1),f()};return b.createElement(B_,Object.assign({type:a===!0?"password":"text"},l,{ref:d,value:c,onInput:u,onFocus:f,onKeyDown:h,onKeyUp:p,onMouseDown:f,onMouseUp:f}))});var dQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function kg(n){return(n||"").split("")}const fQ=b.forwardRef((n,e)=>{const{prefixCls:r,length:i=6,size:o,defaultValue:s,value:a,onChange:l,formatter:c,variant:u,disabled:d,status:f,autoFocus:h,mask:p,type:g,onInput:y,inputMode:v}=n,m=dQ(n,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:_,direction:x}=b.useContext(Yt),S=_("otp",r),w=ka(m,{aria:!0,data:!0,attr:!0}),E=zf(S),[C,T,M]=lQ(S,E),R=Ya(k=>o??k),P=b.useContext(Va),D=F_(P.status,f),F=b.useMemo(()=>Object.assign(Object.assign({},P),{status:D,hasFeedback:!1,feedbackIcon:null}),[P,D]),A=b.useRef(null),I=b.useRef({});b.useImperativeHandle(e,()=>({focus:()=>{var k;(k=I.current[0])===null||k===void 0||k.focus()},blur:()=>{var k;for(let j=0;j<i;j+=1)(k=I.current[j])===null||k===void 0||k.blur()},nativeElement:A.current}));const N=k=>c?c(k):k,[L,O]=b.useState(kg(N(s||"")));b.useEffect(()=>{a!==void 0&&O(kg(a))},[a]);const V=br(k=>{O(k),y&&y(k),l&&k.length===i&&k.every(j=>j)&&k.some((j,Q)=>L[Q]!==j)&&l(k.join(""))}),B=br((k,j)=>{let Q=ht(L);for(let ne=0;ne<k;ne+=1)Q[ne]||(Q[ne]="");j.length<=1?Q[k]=j:Q=Q.slice(0,k).concat(kg(j)),Q=Q.slice(0,i);for(let ne=Q.length-1;ne>=0&&!Q[ne];ne-=1)Q.pop();const Y=N(Q.map(ne=>ne||" ").join(""));return Q=kg(Y).map((ne,ye)=>ne===" "&&!Q[ye]?Q[ye]:ne),Q}),z=(k,j)=>{var Q;const Y=B(k,j),ne=Math.min(k+j.length,i-1);ne!==k&&Y[k]!==void 0&&((Q=I.current[ne])===null||Q===void 0||Q.focus()),V(Y)},W=k=>{var j;(j=I.current[k])===null||j===void 0||j.focus()},ie={variant:u,disabled:d,status:D,mask:p,type:g,inputMode:v};return C(b.createElement("div",Object.assign({},w,{ref:A,className:we(S,{[`${S}-sm`]:R==="small",[`${S}-lg`]:R==="large",[`${S}-rtl`]:x==="rtl"},M,T)}),b.createElement(Va.Provider,{value:F},Array.from({length:i}).map((k,j)=>{const Q=`otp-${j}`,Y=L[j]||"";return b.createElement(uQ,Object.assign({ref:ne=>{I.current[j]=ne},key:Q,index:j,size:R,htmlSize:1,className:`${S}-input`,onChange:z,value:Y,onActiveChange:W,autoFocus:j===0&&h},ie))}))))});var hQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},pQ=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:hQ}))},mQ=b.forwardRef(pQ),gQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},vQ=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:gQ}))},yQ=b.forwardRef(vQ),_Q=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const xQ=n=>n?b.createElement(yQ,null):b.createElement(mQ,null),bQ={click:"onClick",hover:"onMouseOver"},SQ=b.forwardRef((n,e)=>{const{disabled:r,action:i="click",visibilityToggle:o=!0,iconRender:s=xQ}=n,a=b.useContext(za),l=r??a,c=typeof o=="object"&&o.visible!==void 0,[u,d]=b.useState(()=>c?o.visible:!1),f=b.useRef(null);b.useEffect(()=>{c&&d(o.visible)},[c,o]);const h=QB(f),p=()=>{var R;if(l)return;u&&h();const P=!u;d(P),typeof o=="object"&&((R=o.onVisibleChange)===null||R===void 0||R.call(o,P))},g=R=>{const P=bQ[i]||"",D=s(u),F={[P]:p,className:`${R}-icon`,key:"passwordIcon",onMouseDown:A=>{A.preventDefault()},onMouseUp:A=>{A.preventDefault()}};return b.cloneElement(b.isValidElement(D)?D:b.createElement("span",null,D),F)},{className:y,prefixCls:v,inputPrefixCls:m,size:_}=n,x=_Q(n,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:S}=b.useContext(Yt),w=S("input",m),E=S("input-password",v),C=o&&g(E),T=we(E,y,{[`${E}-${_}`]:!!_}),M=Object.assign(Object.assign({},ea(x,["suffix","iconRender","visibilityToggle"])),{type:u?"text":"password",className:T,prefixCls:w,suffix:C});return _&&(M.size=_),b.createElement(B_,Object.assign({ref:Js(e,f)},M))});var wQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const EQ=b.forwardRef((n,e)=>{const{prefixCls:r,inputPrefixCls:i,className:o,size:s,suffix:a,enterButton:l=!1,addonAfter:c,loading:u,disabled:d,onSearch:f,onChange:h,onCompositionStart:p,onCompositionEnd:g}=n,y=wQ(n,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:v,direction:m}=b.useContext(Yt),_=b.useRef(!1),x=v("input-search",r),S=v("input",i),{compactSize:w}=T_(x,m),E=Ya(z=>{var W;return(W=s??w)!==null&&W!==void 0?W:z}),C=b.useRef(null),T=z=>{z!=null&&z.target&&z.type==="click"&&f&&f(z.target.value,z,{source:"clear"}),h==null||h(z)},M=z=>{var W;document.activeElement===((W=C.current)===null||W===void 0?void 0:W.input)&&z.preventDefault()},R=z=>{var W,ie;f&&f((ie=(W=C.current)===null||W===void 0?void 0:W.input)===null||ie===void 0?void 0:ie.value,z,{source:"input"})},P=z=>{_.current||u||R(z)},D=typeof l=="boolean"?b.createElement(LB,null):null,F=`${x}-button`;let A;const I=l||{},N=I.type&&I.type.__ANT_BUTTON===!0;N||I.type==="button"?A=Xl(I,Object.assign({onMouseDown:M,onClick:z=>{var W,ie;(ie=(W=I==null?void 0:I.props)===null||W===void 0?void 0:W.onClick)===null||ie===void 0||ie.call(W,z),R(z)},key:"enterButton"},N?{className:F,size:E}:{})):A=b.createElement(kf,{className:F,type:l?"primary":void 0,size:E,disabled:d,key:"enterButton",onMouseDown:M,onClick:R,loading:u,icon:D},l),c&&(A=[A,Xl(c,{key:"addonAfter"})]);const L=we(x,{[`${x}-rtl`]:m==="rtl",[`${x}-${E}`]:!!E,[`${x}-with-button`]:!!l},o),O=Object.assign(Object.assign({},y),{className:L,prefixCls:S,type:"search"}),V=z=>{_.current=!0,p==null||p(z)},B=z=>{_.current=!1,g==null||g(z)};return b.createElement(B_,Object.assign({ref:Js(C,e),onPressEnter:P},O,{size:E,onCompositionStart:V,onCompositionEnd:B,addonAfter:A,suffix:a,onChange:T,disabled:d}))});var CQ=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,TQ=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Cb={},io;function MQ(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=n.getAttribute("id")||n.getAttribute("data-reactid")||n.getAttribute("name");if(e&&Cb[r])return Cb[r];var i=window.getComputedStyle(n),o=i.getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),s=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),a=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),l=TQ.map(function(u){return"".concat(u,":").concat(i.getPropertyValue(u))}).join(";"),c={sizingStyle:l,paddingSize:s,borderSize:a,boxSizing:o};return e&&r&&(Cb[r]=c),c}function RQ(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;io||(io=document.createElement("textarea"),io.setAttribute("tab-index","-1"),io.setAttribute("aria-hidden","true"),io.setAttribute("name","hiddenTextarea"),document.body.appendChild(io)),n.getAttribute("wrap")?io.setAttribute("wrap",n.getAttribute("wrap")):io.removeAttribute("wrap");var o=MQ(n,e),s=o.paddingSize,a=o.borderSize,l=o.boxSizing,c=o.sizingStyle;io.setAttribute("style","".concat(c,";").concat(CQ)),io.value=n.value||n.placeholder||"";var u=void 0,d=void 0,f,h=io.scrollHeight;if(l==="border-box"?h+=a:l==="content-box"&&(h-=s),r!==null||i!==null){io.value=" ";var p=io.scrollHeight-s;r!==null&&(u=p*r,l==="border-box"&&(u=u+s+a),h=Math.max(u,h)),i!==null&&(d=p*i,l==="border-box"&&(d=d+s+a),f=h>d?"":"hidden",h=Math.min(d,h))}var g={height:h,overflowY:f,resize:"none"};return u&&(g.minHeight=u),d&&(g.maxHeight=d),g}var AQ=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Tb=0,Mb=1,Rb=2,NQ=b.forwardRef(function(n,e){var r=n,i=r.prefixCls,o=r.defaultValue,s=r.value,a=r.autoSize,l=r.onResize,c=r.className,u=r.style,d=r.disabled,f=r.onChange;r.onInternalAutoSize;var h=Pn(r,AQ),p=Zi(o,{value:s,postState:function(k){return k??""}}),g=Ce(p,2),y=g[0],v=g[1],m=function(k){v(k.target.value),f==null||f(k)},_=b.useRef();b.useImperativeHandle(e,function(){return{textArea:_.current}});var x=b.useMemo(function(){return a&&Ot(a)==="object"?[a.minRows,a.maxRows]:[]},[a]),S=Ce(x,2),w=S[0],E=S[1],C=!!a,T=function(){try{if(document.activeElement===_.current){var k=_.current,j=k.selectionStart,Q=k.selectionEnd,Y=k.scrollTop;_.current.setSelectionRange(j,Q),_.current.scrollTop=Y}}catch{}},M=b.useState(Rb),R=Ce(M,2),P=R[0],D=R[1],F=b.useState(),A=Ce(F,2),I=A[0],N=A[1],L=function(){D(Tb)};xn(function(){C&&L()},[s,w,E,C]),xn(function(){if(P===Tb)D(Mb);else if(P===Mb){var ie=RQ(_.current,!1,w,E);D(Rb),N(ie)}else T()},[P]);var O=b.useRef(),V=function(){pr.cancel(O.current)},B=function(k){P===Rb&&(l==null||l(k),a&&(V(),O.current=pr(function(){L()})))};b.useEffect(function(){return V},[]);var z=C?I:null,W=re(re({},u),z);return(P===Tb||P===Mb)&&(W.overflowY="hidden",W.overflowX="hidden"),b.createElement(Ka,{onResize:B,disabled:!(a||l)},b.createElement("textarea",pt({},h,{ref:_,style:W,className:we(i,c,ee({},"".concat(i,"-disabled"),d)),disabled:d,value:y,onChange:m})))}),PQ=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],OQ=de.forwardRef(function(n,e){var r,i=n.defaultValue,o=n.value,s=n.onFocus,a=n.onBlur,l=n.onChange,c=n.allowClear,u=n.maxLength,d=n.onCompositionStart,f=n.onCompositionEnd,h=n.suffix,p=n.prefixCls,g=p===void 0?"rc-textarea":p,y=n.showCount,v=n.count,m=n.className,_=n.style,x=n.disabled,S=n.hidden,w=n.classNames,E=n.styles,C=n.onResize,T=n.onClear,M=n.onPressEnter,R=n.readOnly,P=n.autoSize,D=n.onKeyDown,F=Pn(n,PQ),A=Zi(i,{value:o,defaultValue:i}),I=Ce(A,2),N=I[0],L=I[1],O=N==null?"":String(N),V=de.useState(!1),B=Ce(V,2),z=B[0],W=B[1],ie=de.useRef(!1),k=de.useState(null),j=Ce(k,2),Q=j[0],Y=j[1],ne=b.useRef(null),ye=b.useRef(null),me=function(){var Pe;return(Pe=ye.current)===null||Pe===void 0?void 0:Pe.textArea},fe=function(){me().focus()};b.useImperativeHandle(e,function(){var Ee;return{resizableTextArea:ye.current,focus:fe,blur:function(){me().blur()},nativeElement:((Ee=ne.current)===null||Ee===void 0?void 0:Ee.nativeElement)||me()}}),b.useEffect(function(){W(function(Ee){return!x&&Ee})},[x]);var ae=de.useState(null),ve=Ce(ae,2),q=ve[0],ge=ve[1];de.useEffect(function(){if(q){var Ee;(Ee=me()).setSelectionRange.apply(Ee,ht(q))}},[q]);var xe=KB(v,y),_e=(r=xe.max)!==null&&r!==void 0?r:u,Se=Number(_e)>0,Ke=xe.strategy(O),Ue=!!_e&&Ke>_e,H=function(Pe,ke){var Ve=ke;!ie.current&&xe.exceedFormatter&&xe.max&&xe.strategy(ke)>xe.max&&(Ve=xe.exceedFormatter(ke,{max:xe.max}),ke!==Ve&&ge([me().selectionStart||0,me().selectionEnd||0])),L(Ve),sy(Pe.currentTarget,Pe,l,Ve)},U=function(Pe){ie.current=!0,d==null||d(Pe)},X=function(Pe){ie.current=!1,H(Pe,Pe.currentTarget.value),f==null||f(Pe)},oe=function(Pe){H(Pe,Pe.target.value)},pe=function(Pe){Pe.key==="Enter"&&M&&M(Pe),D==null||D(Pe)},ce=function(Pe){W(!0),s==null||s(Pe)},Fe=function(Pe){W(!1),a==null||a(Pe)},Re=function(Pe){L(""),fe(),sy(me(),Pe,l)},Le=h,Je;xe.show&&(xe.showFormatter?Je=xe.showFormatter({value:O,count:Ke,maxLength:_e}):Je="".concat(Ke).concat(Se?" / ".concat(_e):""),Le=de.createElement(de.Fragment,null,Le,de.createElement("span",{className:we("".concat(g,"-data-count"),w==null?void 0:w.count),style:E==null?void 0:E.count},Je)));var Me=function(Pe){var ke;C==null||C(Pe),(ke=me())!==null&&ke!==void 0&&ke.style.height&&Y(!0)},ze=!P&&!y&&!c;return de.createElement(XB,{ref:ne,value:O,allowClear:c,handleReset:Re,suffix:Le,prefixCls:g,classNames:re(re({},w),{},{affixWrapper:we(w==null?void 0:w.affixWrapper,ee(ee({},"".concat(g,"-show-count"),y),"".concat(g,"-textarea-allow-clear"),c))}),disabled:x,focused:z,className:we(m,Ue&&"".concat(g,"-out-of-range")),style:re(re({},_),Q&&!ze?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof Je=="string"?Je:void 0}},hidden:S,readOnly:R,onClear:T},de.createElement(NQ,pt({},F,{autoSize:P,maxLength:u,onKeyDown:pe,onChange:oe,onFocus:ce,onBlur:Fe,onCompositionStart:U,onCompositionEnd:X,className:we(w==null?void 0:w.textarea),style:re(re({},E==null?void 0:E.textarea),{},{resize:_==null?void 0:_.resize}),disabled:x,prefixCls:g,onResize:Me,ref:ye,readOnly:R})))}),IQ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const ZB=b.forwardRef((n,e)=>{var r,i;const{prefixCls:o,bordered:s=!0,size:a,disabled:l,status:c,allowClear:u,classNames:d,rootClassName:f,className:h,style:p,styles:g,variant:y}=n,v=IQ(n,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:m,direction:_,textArea:x}=b.useContext(Yt),S=Ya(a),w=b.useContext(za),E=l??w,{status:C,hasFeedback:T,feedbackIcon:M}=b.useContext(Va),R=F_(C,c),P=b.useRef(null);b.useImperativeHandle(e,()=>{var B;return{resizableTextArea:(B=P.current)===null||B===void 0?void 0:B.resizableTextArea,focus:z=>{var W,ie;qB((ie=(W=P.current)===null||W===void 0?void 0:W.resizableTextArea)===null||ie===void 0?void 0:ie.textArea,z)},blur:()=>{var z;return(z=P.current)===null||z===void 0?void 0:z.blur()}}});const D=m("input",o),F=zf(D),[A,I,N]=IT(D,F),[L,O]=MT("textArea",y,s),V=YB(u??(x==null?void 0:x.allowClear));return A(b.createElement(OQ,Object.assign({autoComplete:x==null?void 0:x.autoComplete},v,{style:Object.assign(Object.assign({},x==null?void 0:x.style),p),styles:Object.assign(Object.assign({},x==null?void 0:x.styles),g),disabled:E,allowClear:V,className:we(N,F,h,f,x==null?void 0:x.className),classNames:Object.assign(Object.assign(Object.assign({},d),x==null?void 0:x.classNames),{textarea:we({[`${D}-sm`]:S==="small",[`${D}-lg`]:S==="large"},I,d==null?void 0:d.textarea,(r=x==null?void 0:x.classNames)===null||r===void 0?void 0:r.textarea),variant:we({[`${D}-${L}`]:O},oy(D,R)),affixWrapper:we(`${D}-textarea-affix-wrapper`,{[`${D}-affix-wrapper-rtl`]:_==="rtl",[`${D}-affix-wrapper-sm`]:S==="small",[`${D}-affix-wrapper-lg`]:S==="large",[`${D}-textarea-show-count`]:n.showCount||((i=n.count)===null||i===void 0?void 0:i.show)},I)}),prefixCls:D,suffix:T&&b.createElement("span",{className:`${D}-textarea-suffix`},M),ref:P})))}),Hf=B_;Hf.Group=iQ;Hf.Search=EQ;Hf.TextArea=ZB;Hf.Password=SQ;Hf.OTP=fQ;const DQ=function(){const n=Object.assign({},arguments.length<=0?void 0:arguments[0]);for(let e=1;e<arguments.length;e++){const r=e<0||arguments.length<=e?void 0:arguments[e];r&&Object.keys(r).forEach(i=>{const o=r[i];o!==void 0&&(n[i]=o)})}return n};var LQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},FQ=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:LQ}))},UN=b.forwardRef(FQ),UQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},BQ=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:UQ}))},BN=b.forwardRef(BQ),$Q={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"},zQ=[10,20,50,100],kQ=function(e){var r=e.pageSizeOptions,i=r===void 0?zQ:r,o=e.locale,s=e.changeSize,a=e.pageSize,l=e.goButton,c=e.quickGo,u=e.rootPrefixCls,d=e.disabled,f=e.buildOptionText,h=e.showSizeChanger,p=e.sizeChangerRender,g=de.useState(""),y=Ce(g,2),v=y[0],m=y[1],_=function(){return!v||Number.isNaN(v)?void 0:Number(v)},x=typeof f=="function"?f:function(D){return"".concat(D," ").concat(o.items_per_page)},S=function(F){m(F.target.value)},w=function(F){l||v===""||(m(""),!(F.relatedTarget&&(F.relatedTarget.className.indexOf("".concat(u,"-item-link"))>=0||F.relatedTarget.className.indexOf("".concat(u,"-item"))>=0))&&(c==null||c(_())))},E=function(F){v!==""&&(F.keyCode===He.ENTER||F.type==="click")&&(m(""),c==null||c(_()))},C=function(){return i.some(function(F){return F.toString()===a.toString()})?i:i.concat([a]).sort(function(F,A){var I=Number.isNaN(Number(F))?0:Number(F),N=Number.isNaN(Number(A))?0:Number(A);return I-N})},T="".concat(u,"-options");if(!h&&!c)return null;var M=null,R=null,P=null;return h&&p&&(M=p({disabled:d,size:a,onSizeChange:function(F){s==null||s(Number(F))},"aria-label":o.page_size,className:"".concat(T,"-size-changer"),options:C().map(function(D){return{label:x(D),value:D}})})),c&&(l&&(P=typeof l=="boolean"?de.createElement("button",{type:"button",onClick:E,onKeyUp:E,disabled:d,className:"".concat(T,"-quick-jumper-button")},o.jump_to_confirm):de.createElement("span",{onClick:E,onKeyUp:E},l)),R=de.createElement("div",{className:"".concat(T,"-quick-jumper")},o.jump_to,de.createElement("input",{disabled:d,type:"text",value:v,onChange:S,onKeyUp:E,onBlur:w,"aria-label":o.page}),o.page,P)),de.createElement("li",{className:T},M,R)},vh=function(e){var r,i=e.rootPrefixCls,o=e.page,s=e.active,a=e.className,l=e.showTitle,c=e.onClick,u=e.onKeyPress,d=e.itemRender,f="".concat(i,"-item"),h=we(f,"".concat(f,"-").concat(o),(r={},ee(r,"".concat(f,"-active"),s),ee(r,"".concat(f,"-disabled"),!o),r),a),p=function(){c(o)},g=function(m){u(m,c,o)},y=d(o,"page",de.createElement("a",{rel:"nofollow"},o));return y?de.createElement("li",{title:l?String(o):null,className:h,onClick:p,onKeyDown:g,tabIndex:0},y):null},VQ=function(e,r,i){return i};function $N(){}function zN(n){var e=Number(n);return typeof e=="number"&&!Number.isNaN(e)&&isFinite(e)&&Math.floor(e)===e}function hc(n,e,r){var i=typeof n>"u"?e:n;return Math.floor((r-1)/i)+1}var GQ=function(e){var r,i=e.prefixCls,o=i===void 0?"rc-pagination":i,s=e.selectPrefixCls,a=s===void 0?"rc-select":s,l=e.className,c=e.current,u=e.defaultCurrent,d=u===void 0?1:u,f=e.total,h=f===void 0?0:f,p=e.pageSize,g=e.defaultPageSize,y=g===void 0?10:g,v=e.onChange,m=v===void 0?$N:v,_=e.hideOnSinglePage,x=e.align,S=e.showPrevNextJumpers,w=S===void 0?!0:S,E=e.showQuickJumper,C=e.showLessItems,T=e.showTitle,M=T===void 0?!0:T,R=e.onShowSizeChange,P=R===void 0?$N:R,D=e.locale,F=D===void 0?$Q:D,A=e.style,I=e.totalBoundaryShowSizeChanger,N=I===void 0?50:I,L=e.disabled,O=e.simple,V=e.showTotal,B=e.showSizeChanger,z=B===void 0?h>N:B,W=e.sizeChangerRender,ie=e.pageSizeOptions,k=e.itemRender,j=k===void 0?VQ:k,Q=e.jumpPrevIcon,Y=e.jumpNextIcon,ne=e.prevIcon,ye=e.nextIcon,me=de.useRef(null),fe=Zi(10,{value:p,defaultValue:y}),ae=Ce(fe,2),ve=ae[0],q=ae[1],ge=Zi(1,{value:c,defaultValue:d,postState:function(et){return Math.max(1,Math.min(et,hc(void 0,ve,h)))}}),xe=Ce(ge,2),_e=xe[0],Se=xe[1],Ke=de.useState(_e),Ue=Ce(Ke,2),H=Ue[0],U=Ue[1];b.useEffect(function(){U(_e)},[_e]);var X=Math.max(1,_e-(C?3:5)),oe=Math.min(hc(void 0,ve,h),_e+(C?3:5));function pe(Ye,et){var xt=Ye||de.createElement("button",{type:"button","aria-label":et,className:"".concat(o,"-item-link")});return typeof Ye=="function"&&(xt=de.createElement(Ye,re({},e))),xt}function ce(Ye){var et=Ye.target.value,xt=hc(void 0,ve,h),$t;return et===""?$t=et:Number.isNaN(Number(et))?$t=H:et>=xt?$t=xt:$t=Number(et),$t}function Fe(Ye){return zN(Ye)&&Ye!==_e&&zN(h)&&h>0}var Re=h>ve?E:!1;function Le(Ye){(Ye.keyCode===He.UP||Ye.keyCode===He.DOWN)&&Ye.preventDefault()}function Je(Ye){var et=ce(Ye);switch(et!==H&&U(et),Ye.keyCode){case He.ENTER:Ee(et);break;case He.UP:Ee(et-1);break;case He.DOWN:Ee(et+1);break}}function Me(Ye){Ee(ce(Ye))}function ze(Ye){var et=hc(Ye,ve,h),xt=_e>et&&et!==0?et:_e;q(Ye),U(xt),P==null||P(_e,Ye),Se(xt),m==null||m(xt,Ye)}function Ee(Ye){if(Fe(Ye)&&!L){var et=hc(void 0,ve,h),xt=Ye;return Ye>et?xt=et:Ye<1&&(xt=1),xt!==H&&U(xt),Se(xt),m==null||m(xt,ve),xt}return _e}var Pe=_e>1,ke=_e<hc(void 0,ve,h);function Ve(){Pe&&Ee(_e-1)}function $e(){ke&&Ee(_e+1)}function _t(){Ee(X)}function J(){Ee(oe)}function Qe(Ye,et){if(Ye.key==="Enter"||Ye.charCode===He.ENTER||Ye.keyCode===He.ENTER){for(var xt=arguments.length,$t=new Array(xt>2?xt-2:0),hn=2;hn<xt;hn++)$t[hn-2]=arguments[hn];et.apply(void 0,$t)}}function be(Ye){Qe(Ye,Ve)}function Oe(Ye){Qe(Ye,$e)}function Ze(Ye){Qe(Ye,_t)}function We(Ye){Qe(Ye,J)}function wt(Ye){var et=j(Ye,"prev",pe(ne,"prev page"));return de.isValidElement(et)?de.cloneElement(et,{disabled:!Pe}):et}function Mt(Ye){var et=j(Ye,"next",pe(ye,"next page"));return de.isValidElement(et)?de.cloneElement(et,{disabled:!ke}):et}function ct(Ye){(Ye.type==="click"||Ye.keyCode===He.ENTER)&&Ee(H)}var qe=null,rt=ka(e,{aria:!0,data:!0}),Lt=V&&de.createElement("li",{className:"".concat(o,"-total-text")},V(h,[h===0?0:(_e-1)*ve+1,_e*ve>h?h:_e*ve])),bn=null,Xe=hc(void 0,ve,h);if(_&&h<=ve)return null;var ot=[],yt={rootPrefixCls:o,onClick:Ee,onKeyPress:Qe,showTitle:M,itemRender:j,page:-1},ut=_e-1>0?_e-1:0,bt=_e+1<Xe?_e+1:Xe,It=E&&E.goButton,yn=Ot(O)==="object"?O.readOnly:!O,un=It,Un=null;O&&(It&&(typeof It=="boolean"?un=de.createElement("button",{type:"button",onClick:ct,onKeyUp:ct},F.jump_to_confirm):un=de.createElement("span",{onClick:ct,onKeyUp:ct},It),un=de.createElement("li",{title:M?"".concat(F.jump_to).concat(_e,"/").concat(Xe):null,className:"".concat(o,"-simple-pager")},un)),Un=de.createElement("li",{title:M?"".concat(_e,"/").concat(Xe):null,className:"".concat(o,"-simple-pager")},yn?H:de.createElement("input",{type:"text",value:H,disabled:L,onKeyDown:Le,onKeyUp:Je,onChange:Je,onBlur:Me,size:3}),de.createElement("span",{className:"".concat(o,"-slash")},"/"),Xe));var en=C?1:2;if(Xe<=3+en*2){Xe||ot.push(de.createElement(vh,pt({},yt,{key:"noPager",page:1,className:"".concat(o,"-item-disabled")})));for(var En=1;En<=Xe;En+=1)ot.push(de.createElement(vh,pt({},yt,{key:En,page:En,active:_e===En})))}else{var ar=C?F.prev_3:F.prev_5,kn=C?F.next_3:F.next_5,Ar=j(X,"jump-prev",pe(Q,"prev page")),vt=j(oe,"jump-next",pe(Y,"next page"));w&&(qe=Ar?de.createElement("li",{title:M?ar:null,key:"prev",onClick:_t,tabIndex:0,onKeyDown:Ze,className:we("".concat(o,"-jump-prev"),ee({},"".concat(o,"-jump-prev-custom-icon"),!!Q))},Ar):null,bn=vt?de.createElement("li",{title:M?kn:null,key:"next",onClick:J,tabIndex:0,onKeyDown:We,className:we("".concat(o,"-jump-next"),ee({},"".concat(o,"-jump-next-custom-icon"),!!Y))},vt):null);var $=Math.max(1,_e-en),Z=Math.min(_e+en,Xe);_e-1<=en&&(Z=1+en*2),Xe-_e<=en&&($=Xe-en*2);for(var ue=$;ue<=Z;ue+=1)ot.push(de.createElement(vh,pt({},yt,{key:ue,page:ue,active:_e===ue})));if(_e-1>=en*2&&_e!==3&&(ot[0]=de.cloneElement(ot[0],{className:we("".concat(o,"-item-after-jump-prev"),ot[0].props.className)}),ot.unshift(qe)),Xe-_e>=en*2&&_e!==Xe-2){var he=ot[ot.length-1];ot[ot.length-1]=de.cloneElement(he,{className:we("".concat(o,"-item-before-jump-next"),he.props.className)}),ot.push(bn)}$!==1&&ot.unshift(de.createElement(vh,pt({},yt,{key:1,page:1}))),Z!==Xe&&ot.push(de.createElement(vh,pt({},yt,{key:Xe,page:Xe})))}var se=wt(ut);if(se){var Ge=!Pe||!Xe;se=de.createElement("li",{title:M?F.prev_page:null,onClick:Ve,tabIndex:Ge?null:0,onKeyDown:be,className:we("".concat(o,"-prev"),ee({},"".concat(o,"-disabled"),Ge)),"aria-disabled":Ge},se)}var st=Mt(bt);if(st){var dt,mt;O?(dt=!ke,mt=Pe?0:null):(dt=!ke||!Xe,mt=dt?null:0),st=de.createElement("li",{title:M?F.next_page:null,onClick:$e,tabIndex:mt,onKeyDown:Oe,className:we("".concat(o,"-next"),ee({},"".concat(o,"-disabled"),dt)),"aria-disabled":dt},st)}var Ct=we(o,l,(r={},ee(r,"".concat(o,"-start"),x==="start"),ee(r,"".concat(o,"-center"),x==="center"),ee(r,"".concat(o,"-end"),x==="end"),ee(r,"".concat(o,"-simple"),O),ee(r,"".concat(o,"-disabled"),L),r));return de.createElement("ul",pt({className:Ct,style:A,ref:me},rt),Lt,se,O?Un:ot,st,de.createElement(kQ,{locale:F,rootPrefixCls:o,disabled:L,selectPrefixCls:a,changeSize:ze,pageSize:ve,pageSizeOptions:ie,quickGo:Re?Ee:null,goButton:un,showSizeChanger:z,sizeChangerRender:W}))};const HQ=n=>{const{componentCls:e}=n;return{[`${e}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${e}-item-link`]:{color:n.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${e}-item-link`]:{color:n.colorTextDisabled,cursor:"not-allowed"}}},[`&${e}-disabled`]:{cursor:"not-allowed",[`${e}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:n.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:n.colorBorder,backgroundColor:n.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:n.itemActiveBgDisabled},a:{color:n.itemActiveColorDisabled}}},[`${e}-item-link`]:{color:n.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${e}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${e}-simple-pager`]:{color:n.colorTextDisabled},[`${e}-jump-prev, ${e}-jump-next`]:{[`${e}-item-link-icon`]:{opacity:0},[`${e}-item-ellipsis`]:{opacity:1}}},[`&${e}-simple`]:{[`${e}-prev, ${e}-next`]:{[`&${e}-disabled ${e}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},jQ=n=>{const{componentCls:e}=n;return{[`&${e}-mini ${e}-total-text, &${e}-mini ${e}-simple-pager`]:{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM)},[`&${e}-mini ${e}-item`]:{minWidth:n.itemSizeSM,height:n.itemSizeSM,margin:0,lineHeight:De(n.calc(n.itemSizeSM).sub(2).equal())},[`&${e}-mini:not(${e}-disabled) ${e}-item:not(${e}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:n.colorBgTextHover},"&:active":{backgroundColor:n.colorBgTextActive}},[`&${e}-mini ${e}-prev, &${e}-mini ${e}-next`]:{minWidth:n.itemSizeSM,height:n.itemSizeSM,margin:0,lineHeight:De(n.itemSizeSM)},[`&${e}-mini:not(${e}-disabled)`]:{[`${e}-prev, ${e}-next`]:{[`&:hover ${e}-item-link`]:{backgroundColor:n.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:n.colorBgTextActive},[`&${e}-disabled:hover ${e}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${e}-mini ${e}-prev ${e}-item-link,
    &${e}-mini ${e}-next ${e}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM)}},[`&${e}-mini ${e}-jump-prev, &${e}-mini ${e}-jump-next`]:{height:n.itemSizeSM,marginInlineEnd:0,lineHeight:De(n.itemSizeSM)},[`&${e}-mini ${e}-options`]:{marginInlineStart:n.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:n.miniOptionsSizeChangerTop},"&-quick-jumper":{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM),input:Object.assign(Object.assign({},PT(n)),{width:n.paginationMiniQuickJumperInputWidth,height:n.controlHeightSM})}}}},WQ=n=>{const{componentCls:e}=n;return{[`
    &${e}-simple ${e}-prev,
    &${e}-simple ${e}-next
    `]:{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM),verticalAlign:"top",[`${e}-item-link`]:{height:n.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:n.colorBgTextHover},"&:active":{backgroundColor:n.colorBgTextActive},"&::after":{height:n.itemSizeSM,lineHeight:De(n.itemSizeSM)}}},[`&${e}-simple ${e}-simple-pager`]:{display:"inline-block",height:n.itemSizeSM,marginInlineEnd:n.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${De(n.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:n.itemInputBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:n.borderRadius,outline:"none",transition:`border-color ${n.motionDurationMid}`,color:"inherit","&:hover":{borderColor:n.colorPrimary},"&:focus":{borderColor:n.colorPrimaryHover,boxShadow:`${De(n.inputOutlineOffset)} 0 ${De(n.controlOutlineWidth)} ${n.controlOutline}`},"&[disabled]":{color:n.colorTextDisabled,backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,cursor:"not-allowed"}}}}},qQ=n=>{const{componentCls:e}=n;return{[`${e}-jump-prev, ${e}-jump-next`]:{outline:0,[`${e}-item-container`]:{position:"relative",[`${e}-item-link-icon`]:{color:n.colorPrimary,fontSize:n.fontSizeSM,opacity:0,transition:`all ${n.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${e}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:n.colorTextDisabled,letterSpacing:n.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:n.paginationEllipsisTextIndent,opacity:1,transition:`all ${n.motionDurationMid}`}},"&:hover":{[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}}},[`
    ${e}-prev,
    ${e}-jump-prev,
    ${e}-jump-next
    `]:{marginInlineEnd:n.marginXS},[`
    ${e}-prev,
    ${e}-next,
    ${e}-jump-prev,
    ${e}-jump-next
    `]:{display:"inline-block",minWidth:n.itemSize,height:n.itemSize,color:n.colorText,fontFamily:n.fontFamily,lineHeight:De(n.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:n.borderRadius,cursor:"pointer",transition:`all ${n.motionDurationMid}`},[`${e}-prev, ${e}-next`]:{outline:0,button:{color:n.colorText,cursor:"pointer",userSelect:"none"},[`${e}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:n.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${De(n.lineWidth)} ${n.lineType} transparent`,borderRadius:n.borderRadius,outline:"none",transition:`all ${n.motionDurationMid}`},[`&:hover ${e}-item-link`]:{backgroundColor:n.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:n.colorBgTextActive},[`&${e}-disabled:hover`]:{[`${e}-item-link`]:{backgroundColor:"transparent"}}},[`${e}-slash`]:{marginInlineEnd:n.paginationSlashMarginInlineEnd,marginInlineStart:n.paginationSlashMarginInlineStart},[`${e}-options`]:{display:"inline-block",marginInlineStart:n.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:n.controlHeight,marginInlineStart:n.marginXS,lineHeight:De(n.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},OT(n)),NT(n,{borderColor:n.colorBorder,hoverBorderColor:n.colorPrimaryHover,activeBorderColor:n.colorPrimary,activeShadow:n.activeShadow})),{"&[disabled]":Object.assign({},U_(n)),width:n.calc(n.controlHeightLG).mul(1.25).equal(),height:n.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:n.marginXS,marginInlineEnd:n.marginXS})}}}},XQ=n=>{const{componentCls:e}=n;return{[`${e}-item`]:{display:"inline-block",minWidth:n.itemSize,height:n.itemSize,marginInlineEnd:n.marginXS,fontFamily:n.fontFamily,lineHeight:De(n.calc(n.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:n.itemBg,border:`${De(n.lineWidth)} ${n.lineType} transparent`,borderRadius:n.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${De(n.paginationItemPaddingInline)}`,color:n.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${e}-item-active)`]:{"&:hover":{transition:`all ${n.motionDurationMid}`,backgroundColor:n.colorBgTextHover},"&:active":{backgroundColor:n.colorBgTextActive}},"&-active":{fontWeight:n.fontWeightStrong,backgroundColor:n.itemActiveBg,borderColor:n.colorPrimary,a:{color:n.colorPrimary},"&:hover":{borderColor:n.colorPrimaryHover},"&:hover a":{color:n.colorPrimaryHover}}}}},KQ=n=>{const{componentCls:e}=n;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Es(n)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${e}-total-text`]:{display:"inline-block",height:n.itemSize,marginInlineEnd:n.marginXS,lineHeight:De(n.calc(n.itemSize).sub(2).equal()),verticalAlign:"middle"}}),XQ(n)),qQ(n)),WQ(n)),jQ(n)),HQ(n)),{[`@media only screen and (max-width: ${n.screenLG}px)`]:{[`${e}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${n.screenSM}px)`]:{[`${e}-options`]:{display:"none"}}}),[`&${n.componentCls}-rtl`]:{direction:"rtl"}}},YQ=n=>{const{componentCls:e}=n;return{[`${e}:not(${e}-disabled)`]:{[`${e}-item`]:Object.assign({},zm(n)),[`${e}-jump-prev, ${e}-jump-next`]:{"&:focus-visible":Object.assign({[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}},$w(n))},[`${e}-prev, ${e}-next`]:{[`&:focus-visible ${e}-item-link`]:Object.assign({},$w(n))}}}},JB=n=>Object.assign({itemBg:n.colorBgContainer,itemSize:n.controlHeight,itemSizeSM:n.controlHeightSM,itemActiveBg:n.colorBgContainer,itemLinkBg:n.colorBgContainer,itemActiveColorDisabled:n.colorTextDisabled,itemActiveBgDisabled:n.controlItemBgActiveDisabled,itemInputBg:n.colorBgContainer,miniOptionsSizeChangerTop:0},AT(n)),e$=n=>Xn(n,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:n.calc(n.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:n.calc(n.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:n.calc(n.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:n.calc(n.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:n.marginSM,paginationSlashMarginInlineEnd:n.marginSM,paginationEllipsisTextIndent:"0.13em"},RT(n)),QQ=Ii("Pagination",n=>{const e=e$(n);return[KQ(e),YQ(e)]},JB),ZQ=n=>{const{componentCls:e}=n;return{[`${e}${e}-bordered${e}-disabled:not(${e}-mini)`]:{"&, &:hover":{[`${e}-item-link`]:{borderColor:n.colorBorder}},"&:focus-visible":{[`${e}-item-link`]:{borderColor:n.colorBorder}},[`${e}-item, ${e}-item-link`]:{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,[`&:hover:not(${e}-item-active)`]:{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,a:{color:n.colorTextDisabled}},[`&${e}-item-active`]:{backgroundColor:n.itemActiveBgDisabled}},[`${e}-prev, ${e}-next`]:{"&:hover button":{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,color:n.colorTextDisabled},[`${e}-item-link`]:{backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder}}},[`${e}${e}-bordered:not(${e}-mini)`]:{[`${e}-prev, ${e}-next`]:{"&:hover button":{borderColor:n.colorPrimaryHover,backgroundColor:n.itemBg},[`${e}-item-link`]:{backgroundColor:n.itemLinkBg,borderColor:n.colorBorder},[`&:hover ${e}-item-link`]:{borderColor:n.colorPrimary,backgroundColor:n.itemBg,color:n.colorPrimary},[`&${e}-disabled`]:{[`${e}-item-link`]:{borderColor:n.colorBorder,color:n.colorTextDisabled}}},[`${e}-item`]:{backgroundColor:n.itemBg,border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,[`&:hover:not(${e}-item-active)`]:{borderColor:n.colorPrimary,backgroundColor:n.itemBg,a:{color:n.colorPrimary}},"&-active":{borderColor:n.colorPrimary}}}}},JQ=hT(["Pagination","bordered"],n=>{const e=e$(n);return[ZQ(e)]},JB);function kN(n){return b.useMemo(()=>typeof n=="boolean"?[n,{}]:n&&typeof n=="object"?[!0,n]:[void 0,void 0],[n])}var eZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const tZ=n=>{const{align:e,prefixCls:r,selectPrefixCls:i,className:o,rootClassName:s,style:a,size:l,locale:c,responsive:u,showSizeChanger:d,selectComponentClass:f,pageSizeOptions:h}=n,p=eZ(n,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","responsive","showSizeChanger","selectComponentClass","pageSizeOptions"]),{xs:g}=BB(u),[,y]=eo(),{getPrefixCls:v,direction:m,pagination:_={}}=b.useContext(Yt),x=v("pagination",r),[S,w,E]=QQ(x),C=Ya(l),T=C==="small"||!!(g&&!C&&u),[M]=ic("Pagination",B3),R=Object.assign(Object.assign({},M),c),[P,D]=kN(d),[F,A]=kN(_.showSizeChanger),I=P??F,N=D??A,L=f||Su,O=b.useMemo(()=>h?h.map(k=>Number(k)):void 0,[h]),V=k=>{var j;const{disabled:Q,size:Y,onSizeChange:ne,"aria-label":ye,className:me,options:fe}=k,{className:ae,onChange:ve}=N||{},q=(j=fe.find(ge=>String(ge.value)===String(Y)))===null||j===void 0?void 0:j.value;return b.createElement(L,Object.assign({disabled:Q,showSearch:!0,popupMatchSelectWidth:!1,getPopupContainer:ge=>ge.parentNode,"aria-label":ye,options:fe},N,{value:q,onChange:(ge,xe)=>{ne==null||ne(ge),ve==null||ve(ge,xe)},size:T?"small":"middle",className:we(me,ae)}))},B=b.useMemo(()=>{const k=b.createElement("span",{className:`${x}-item-ellipsis`},"•••"),j=b.createElement("button",{className:`${x}-item-link`,type:"button",tabIndex:-1},m==="rtl"?b.createElement(T2,null):b.createElement(AN,null)),Q=b.createElement("button",{className:`${x}-item-link`,type:"button",tabIndex:-1},m==="rtl"?b.createElement(AN,null):b.createElement(T2,null)),Y=b.createElement("a",{className:`${x}-item-link`},b.createElement("div",{className:`${x}-item-container`},m==="rtl"?b.createElement(BN,{className:`${x}-item-link-icon`}):b.createElement(UN,{className:`${x}-item-link-icon`}),k)),ne=b.createElement("a",{className:`${x}-item-link`},b.createElement("div",{className:`${x}-item-container`},m==="rtl"?b.createElement(UN,{className:`${x}-item-link-icon`}):b.createElement(BN,{className:`${x}-item-link-icon`}),k));return{prevIcon:j,nextIcon:Q,jumpPrevIcon:Y,jumpNextIcon:ne}},[m,x]),z=v("select",i),W=we({[`${x}-${e}`]:!!e,[`${x}-mini`]:T,[`${x}-rtl`]:m==="rtl",[`${x}-bordered`]:y.wireframe},_==null?void 0:_.className,o,s,w,E),ie=Object.assign(Object.assign({},_==null?void 0:_.style),a);return S(b.createElement(b.Fragment,null,y.wireframe&&b.createElement(JQ,{prefixCls:x}),b.createElement(GQ,Object.assign({},B,p,{style:ie,prefixCls:x,selectPrefixCls:z,className:W,locale:R,pageSizeOptions:O,showSizeChanger:I,sizeChangerRender:V}))))},ay=100,t$=ay/5,n$=ay/2-t$/2,Ab=n$*2*Math.PI,VN=50,GN=n=>{const{dotClassName:e,style:r,hasCircleCls:i}=n;return b.createElement("circle",{className:we(`${e}-circle`,{[`${e}-circle-bg`]:i}),r:n$,cx:VN,cy:VN,strokeWidth:t$,style:r})},nZ=n=>{let{percent:e,prefixCls:r}=n;const i=`${r}-dot`,o=`${i}-holder`,s=`${o}-hidden`,[a,l]=b.useState(!1);xn(()=>{e!==0&&l(!0)},[e!==0]);const c=Math.max(Math.min(e,100),0);if(!a)return null;const u={strokeDashoffset:`${Ab/4}`,strokeDasharray:`${Ab*c/100} ${Ab*(100-c)/100}`};return b.createElement("span",{className:we(o,`${i}-progress`,c<=0&&s)},b.createElement("svg",{viewBox:`0 0 ${ay} ${ay}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":c},b.createElement(GN,{dotClassName:i,hasCircleCls:!0}),b.createElement(GN,{dotClassName:i,style:u})))};function rZ(n){const{prefixCls:e,percent:r=0}=n,i=`${e}-dot`,o=`${i}-holder`,s=`${o}-hidden`;return b.createElement(b.Fragment,null,b.createElement("span",{className:we(o,r>0&&s)},b.createElement("span",{className:we(i,`${e}-dot-spin`)},[1,2,3,4].map(a=>b.createElement("i",{className:`${e}-dot-item`,key:a})))),b.createElement(nZ,{prefixCls:e,percent:r}))}function iZ(n){const{prefixCls:e,indicator:r,percent:i}=n,o=`${e}-dot`;return r&&b.isValidElement(r)?Xl(r,{className:we(r.props.className,o),percent:i}):b.createElement(rZ,{prefixCls:e,percent:i})}const oZ=new vn("antSpinMove",{to:{opacity:1}}),sZ=new vn("antRotate",{to:{transform:"rotate(405deg)"}}),aZ=n=>{const{componentCls:e,calc:r}=n;return{[e]:Object.assign(Object.assign({},Es(n)),{position:"absolute",display:"none",color:n.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${n.motionDurationSlow} ${n.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${e}-text`]:{fontSize:n.fontSize,paddingTop:r(r(n.dotSize).sub(n.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:n.colorBgMask,zIndex:n.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${n.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[e]:{[`${e}-dot-holder`]:{color:n.colorWhite},[`${e}-text`]:{color:n.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${e}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:n.contentHeight,[`${e}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:r(n.dotSize).mul(-1).div(2).equal()},[`${e}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${n.colorBgContainer}`},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${e}-dot`]:{margin:r(n.dotSizeSM).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:r(r(n.dotSizeSM).sub(n.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${e}-dot`]:{margin:r(n.dotSizeLG).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:r(r(n.dotSizeLG).sub(n.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${e}-container`]:{position:"relative",transition:`opacity ${n.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:n.colorBgContainer,opacity:0,transition:`all ${n.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:n.spinDotDefault},[`${e}-dot-holder`]:{width:"1em",height:"1em",fontSize:n.dotSize,display:"inline-block",transition:`transform ${n.motionDurationSlow} ease, opacity ${n.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:n.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${e}-dot-progress`]:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",insetInlineStart:"50%"},[`${e}-dot`]:{position:"relative",display:"inline-block",fontSize:n.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:r(n.dotSize).sub(r(n.marginXXS).div(2)).div(2).equal(),height:r(n.dotSize).sub(r(n.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:oZ,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:sZ,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(i=>`${i} ${n.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:n.colorFillSecondary}},[`&-sm ${e}-dot`]:{"&, &-holder":{fontSize:n.dotSizeSM}},[`&-sm ${e}-dot-holder`]:{i:{width:r(r(n.dotSizeSM).sub(r(n.marginXXS).div(2))).div(2).equal(),height:r(r(n.dotSizeSM).sub(r(n.marginXXS).div(2))).div(2).equal()}},[`&-lg ${e}-dot`]:{"&, &-holder":{fontSize:n.dotSizeLG}},[`&-lg ${e}-dot-holder`]:{i:{width:r(r(n.dotSizeLG).sub(n.marginXXS)).div(2).equal(),height:r(r(n.dotSizeLG).sub(n.marginXXS)).div(2).equal()}},[`&${e}-show-text ${e}-text`]:{display:"block"}})}},lZ=n=>{const{controlHeightLG:e,controlHeight:r}=n;return{contentHeight:400,dotSize:e/2,dotSizeSM:e*.35,dotSizeLG:r}},cZ=Ii("Spin",n=>{const e=Xn(n,{spinDotDefault:n.colorTextDescription});return[aZ(e)]},lZ),uZ=200,HN=[[30,.05],[70,.03],[96,.01]];function dZ(n,e){const[r,i]=b.useState(0),o=b.useRef(null),s=e==="auto";return b.useEffect(()=>(s&&n&&(i(0),o.current=setInterval(()=>{i(a=>{const l=100-a;for(let c=0;c<HN.length;c+=1){const[u,d]=HN[c];if(a<=u)return a+l*d}return a})},uZ)),()=>{clearInterval(o.current)}),[s,n]),s?r:e}var fZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};let r$;function hZ(n,e){return!!n&&!!e&&!Number.isNaN(Number(e))}const DT=n=>{var e;const{prefixCls:r,spinning:i=!0,delay:o=0,className:s,rootClassName:a,size:l="default",tip:c,wrapperClassName:u,style:d,children:f,fullscreen:h=!1,indicator:p,percent:g}=n,y=fZ(n,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:v,direction:m,spin:_}=b.useContext(Yt),x=v("spin",r),[S,w,E]=cZ(x),[C,T]=b.useState(()=>i&&!hZ(i,o)),M=dZ(C,g);b.useEffect(()=>{if(i){const N=qY(o,()=>{T(!0)});return N(),()=>{var L;(L=N==null?void 0:N.cancel)===null||L===void 0||L.call(N)}}T(!1)},[o,i]);const R=b.useMemo(()=>typeof f<"u"&&!h,[f,h]),P=we(x,_==null?void 0:_.className,{[`${x}-sm`]:l==="small",[`${x}-lg`]:l==="large",[`${x}-spinning`]:C,[`${x}-show-text`]:!!c,[`${x}-rtl`]:m==="rtl"},s,!h&&a,w,E),D=we(`${x}-container`,{[`${x}-blur`]:C}),F=(e=p??(_==null?void 0:_.indicator))!==null&&e!==void 0?e:r$,A=Object.assign(Object.assign({},_==null?void 0:_.style),d),I=b.createElement("div",Object.assign({},y,{style:A,className:P,"aria-live":"polite","aria-busy":C}),b.createElement(iZ,{prefixCls:x,indicator:F,percent:M}),c&&(R||h)?b.createElement("div",{className:`${x}-text`},c):null);return S(R?b.createElement("div",Object.assign({},y,{className:we(`${x}-nested-loading`,u,w,E)}),C&&b.createElement("div",{key:"loading"},I),b.createElement("div",{className:D,key:"container"},f)):h?b.createElement("div",{className:we(`${x}-fullscreen`,{[`${x}-fullscreen-show`]:C},a,w,E)},I):I)};DT.setDefaultIndicator=n=>{r$=n};const LT=de.createContext({});LT.Consumer;var i$=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const pZ=n=>{var{prefixCls:e,className:r,avatar:i,title:o,description:s}=n,a=i$(n,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=b.useContext(Yt),c=l("list",e),u=we(`${c}-item-meta`,r),d=de.createElement("div",{className:`${c}-item-meta-content`},o&&de.createElement("h4",{className:`${c}-item-meta-title`},o),s&&de.createElement("div",{className:`${c}-item-meta-description`},s));return de.createElement("div",Object.assign({},a,{className:u}),i&&de.createElement("div",{className:`${c}-item-meta-avatar`},i),(o||s)&&d)},mZ=de.forwardRef((n,e)=>{const{prefixCls:r,children:i,actions:o,extra:s,styles:a,className:l,classNames:c,colStyle:u}=n,d=i$(n,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:f,itemLayout:h}=b.useContext(LT),{getPrefixCls:p,list:g}=b.useContext(Yt),y=C=>{var T,M;return we((M=(T=g==null?void 0:g.item)===null||T===void 0?void 0:T.classNames)===null||M===void 0?void 0:M[C],c==null?void 0:c[C])},v=C=>{var T,M;return Object.assign(Object.assign({},(M=(T=g==null?void 0:g.item)===null||T===void 0?void 0:T.styles)===null||M===void 0?void 0:M[C]),a==null?void 0:a[C])},m=()=>{let C=!1;return b.Children.forEach(i,T=>{typeof T=="string"&&(C=!0)}),C&&b.Children.count(i)>1},_=()=>h==="vertical"?!!s:!m(),x=p("list",r),S=o&&o.length>0&&de.createElement("ul",{className:we(`${x}-item-action`,y("actions")),key:"actions",style:v("actions")},o.map((C,T)=>de.createElement("li",{key:`${x}-item-action-${T}`},C,T!==o.length-1&&de.createElement("em",{className:`${x}-item-action-split`})))),w=f?"div":"li",E=de.createElement(w,Object.assign({},d,f?{}:{ref:e},{className:we(`${x}-item`,{[`${x}-item-no-flex`]:!_()},l)}),h==="vertical"&&s?[de.createElement("div",{className:`${x}-item-main`,key:"content"},i,S),de.createElement("div",{className:we(`${x}-item-extra`,y("extra")),key:"extra",style:v("extra")},s)]:[i,S,Xl(s,{key:"extra"})]);return f?de.createElement(YY,{ref:e,flex:1,style:u},E):E}),o$=mZ;o$.Meta=pZ;const gZ=n=>{const{listBorderedCls:e,componentCls:r,paddingLG:i,margin:o,itemPaddingSM:s,itemPaddingLG:a,marginLG:l,borderRadiusLG:c}=n;return{[e]:{border:`${De(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:c,[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:i},[`${r}-pagination`]:{margin:`${De(o)} ${De(l)}`}},[`${e}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:s}},[`${e}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:a}}}},vZ=n=>{const{componentCls:e,screenSM:r,screenMD:i,marginLG:o,marginSM:s,margin:a}=n;return{[`@media screen and (max-width:${i}px)`]:{[e]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:o}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${r}px)`]:{[e]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:s}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:n.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${De(a)}`}}}}}},yZ=n=>{const{componentCls:e,antCls:r,controlHeight:i,minHeight:o,paddingSM:s,marginLG:a,padding:l,itemPadding:c,colorPrimary:u,itemPaddingSM:d,itemPaddingLG:f,paddingXS:h,margin:p,colorText:g,colorTextDescription:y,motionDurationSlow:v,lineWidth:m,headerBg:_,footerBg:x,emptyTextPadding:S,metaMarginBottom:w,avatarMarginRight:E,titleMarginBottom:C,descriptionFontSize:T}=n;return{[e]:Object.assign(Object.assign({},Es(n)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:_},[`${e}-footer`]:{background:x},[`${e}-header, ${e}-footer`]:{paddingBlock:s},[`${e}-pagination`]:{marginBlockStart:a,[`${r}-pagination-options`]:{textAlign:"start"}},[`${e}-spin`]:{minHeight:o,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c,color:g,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:E},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:g},[`${e}-item-meta-title`]:{margin:`0 0 ${De(n.marginXXS)} 0`,color:g,fontSize:n.fontSize,lineHeight:n.lineHeight,"> a":{color:g,transition:`all ${v}`,"&:hover":{color:u}}},[`${e}-item-meta-description`]:{color:y,fontSize:T,lineHeight:n.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:n.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${De(h)}`,color:y,fontSize:n.fontSize,lineHeight:n.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:m,height:n.calc(n.fontHeight).sub(n.calc(n.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:n.colorSplit}}},[`${e}-empty`]:{padding:`${De(l)} 0`,color:y,fontSize:n.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:S,color:n.colorTextDisabled,fontSize:n.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${r}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:p,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:a},[`${e}-item-meta`]:{marginBlockEnd:w,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:C,color:g,fontSize:n.fontSizeLG,lineHeight:n.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${De(l)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:i},[`${e}-split${e}-something-after-last-item ${r}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${De(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:f},[`${e}-sm ${e}-item`]:{padding:d},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},_Z=n=>({contentWidth:220,itemPadding:`${De(n.paddingContentVertical)} 0`,itemPaddingSM:`${De(n.paddingContentVerticalSM)} ${De(n.paddingContentHorizontal)}`,itemPaddingLG:`${De(n.paddingContentVerticalLG)} ${De(n.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:n.padding,metaMarginBottom:n.padding,avatarMarginRight:n.padding,titleMarginBottom:n.paddingSM,descriptionFontSize:n.fontSize}),xZ=Ii("List",n=>{const e=Xn(n,{listBorderedCls:`${n.componentCls}-bordered`,minHeight:n.controlHeightLG});return[yZ(e),gZ(e),vZ(e)]},_Z);var bZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function SZ(n,e){var{pagination:r=!1,prefixCls:i,bordered:o=!1,split:s=!0,className:a,rootClassName:l,style:c,children:u,itemLayout:d,loadMore:f,grid:h,dataSource:p=[],size:g,header:y,footer:v,loading:m=!1,rowKey:_,renderItem:x,locale:S}=n,w=bZ(n,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const E=r&&typeof r=="object"?r:{},[C,T]=b.useState(E.defaultCurrent||1),[M,R]=b.useState(E.defaultPageSize||10),{getPrefixCls:P,renderEmpty:D,direction:F,list:A}=b.useContext(Yt),I={current:1,total:0},N=H=>(U,X)=>{var oe;T(U),R(X),r&&((oe=r==null?void 0:r[H])===null||oe===void 0||oe.call(r,U,X))},L=N("onChange"),O=N("onShowSizeChange"),V=(H,U)=>{if(!x)return null;let X;return typeof _=="function"?X=_(H):_?X=H[_]:X=H.key,X||(X=`list-item-${U}`),b.createElement(b.Fragment,{key:X},x(H,U))},B=()=>!!(f||r||v),z=P("list",i),[W,ie,k]=xZ(z);let j=m;typeof j=="boolean"&&(j={spinning:j});const Q=!!(j!=null&&j.spinning),Y=Ya(g);let ne="";switch(Y){case"large":ne="lg";break;case"small":ne="sm";break}const ye=we(z,{[`${z}-vertical`]:d==="vertical",[`${z}-${ne}`]:ne,[`${z}-split`]:s,[`${z}-bordered`]:o,[`${z}-loading`]:Q,[`${z}-grid`]:!!h,[`${z}-something-after-last-item`]:B(),[`${z}-rtl`]:F==="rtl"},A==null?void 0:A.className,a,l,ie,k),me=DQ(I,{total:p.length,current:C,pageSize:M},r||{}),fe=Math.ceil(me.total/me.pageSize);me.current>fe&&(me.current=fe);const ae=r&&b.createElement("div",{className:we(`${z}-pagination`)},b.createElement(tZ,Object.assign({align:"end"},me,{onChange:L,onShowSizeChange:O})));let ve=ht(p);r&&p.length>(me.current-1)*me.pageSize&&(ve=ht(p).splice((me.current-1)*me.pageSize,me.pageSize));const q=Object.keys(h||{}).some(H=>["xs","sm","md","lg","xl","xxl"].includes(H)),ge=BB(q),xe=b.useMemo(()=>{for(let H=0;H<su.length;H+=1){const U=su[H];if(ge[U])return U}},[ge]),_e=b.useMemo(()=>{if(!h)return;const H=xe&&h[xe]?h[xe]:h.column;if(H)return{width:`${100/H}%`,maxWidth:`${100/H}%`}},[JSON.stringify(h),xe]);let Se=Q&&b.createElement("div",{style:{minHeight:53}});if(ve.length>0){const H=ve.map((U,X)=>V(U,X));Se=h?b.createElement(ZY,{gutter:h.gutter},b.Children.map(H,U=>b.createElement("div",{key:U==null?void 0:U.key,style:_e},U))):b.createElement("ul",{className:`${z}-items`},H)}else!u&&!Q&&(Se=b.createElement("div",{className:`${z}-empty-text`},(S==null?void 0:S.emptyText)||(D==null?void 0:D("List"))||b.createElement(PB,{componentName:"List"})));const Ke=me.position||"bottom",Ue=b.useMemo(()=>({grid:h,itemLayout:d}),[JSON.stringify(h),d]);return W(b.createElement(LT.Provider,{value:Ue},b.createElement("div",Object.assign({ref:e,style:Object.assign(Object.assign({},A==null?void 0:A.style),c),className:ye},w),(Ke==="top"||Ke==="both")&&ae,y&&b.createElement("div",{className:`${z}-header`},y),b.createElement(DT,Object.assign({},j),Se,u),v&&b.createElement("div",{className:`${z}-footer`},v),f||(Ke==="bottom"||Ke==="both")&&ae)))}const wZ=b.forwardRef(SZ),c0=wZ;c0.Item=o$;function EZ(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&n==null?[]:Array.isArray(n)?n:[n]}var CZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const TZ=n=>{const{prefixCls:e,className:r,closeIcon:i,closable:o,type:s,title:a,children:l,footer:c}=n,u=CZ(n,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:d}=b.useContext(Yt),f=d(),h=e||d("modal"),p=zf(f),[g,y,v]=nB(h,p),m=`${h}-confirm`;let _={};return s?_={closable:o??!1,title:"",footer:"",children:b.createElement(iB,Object.assign({},n,{prefixCls:h,confirmPrefixCls:m,rootPrefixCls:f,content:l}))}:_={closable:o??!0,title:a,footer:c!==null&&b.createElement(ZU,Object.assign({},n)),children:l},g(b.createElement(kU,Object.assign({prefixCls:h,className:we(y,`${h}-pure-panel`,s&&m,s&&`${m}-${s}`,r,v,p)},u,{closeIcon:QU(h,i),closable:o},_)))},MZ=hB(TZ);function s$(n){return jm(lB(n))}const Cs=rB;Cs.useModal=Xq;Cs.info=function(e){return jm(cB(e))};Cs.success=function(e){return jm(uB(e))};Cs.error=function(e){return jm(dB(e))};Cs.warning=s$;Cs.warn=s$;Cs.confirm=function(e){return jm(fB(e))};Cs.destroyAll=function(){for(;kc.length;){const e=kc.pop();e&&e()}};Cs.config=Gq;Cs._InternalPanelDoNotUseOrYouWillBeFired=MZ;var RZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},AZ=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:RZ}))},NZ=b.forwardRef(AZ),PZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},OZ=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:PZ}))},IZ=b.forwardRef(OZ),DZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},LZ=function(e,r){return b.createElement(gr,pt({},e,{ref:r,icon:DZ}))},FZ=b.forwardRef(LZ),UZ=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],a$=b.forwardRef(function(n,e){var r,i=n.prefixCls,o=i===void 0?"rc-switch":i,s=n.className,a=n.checked,l=n.defaultChecked,c=n.disabled,u=n.loadingIcon,d=n.checkedChildren,f=n.unCheckedChildren,h=n.onClick,p=n.onChange,g=n.onKeyDown,y=Pn(n,UZ),v=Zi(!1,{value:a,defaultValue:l}),m=Ce(v,2),_=m[0],x=m[1];function S(T,M){var R=_;return c||(R=T,x(R),p==null||p(R,M)),R}function w(T){T.which===He.LEFT?S(!1,T):T.which===He.RIGHT&&S(!0,T),g==null||g(T)}function E(T){var M=S(!_,T);h==null||h(M,T)}var C=we(o,s,(r={},ee(r,"".concat(o,"-checked"),_),ee(r,"".concat(o,"-disabled"),c),r));return b.createElement("button",pt({},y,{type:"button",role:"switch","aria-checked":_,disabled:c,className:C,ref:e,onKeyDown:w,onClick:E}),u,b.createElement("span",{className:"".concat(o,"-inner")},b.createElement("span",{className:"".concat(o,"-inner-checked")},d),b.createElement("span",{className:"".concat(o,"-inner-unchecked")},f)))});a$.displayName="Switch";const BZ=n=>{const{componentCls:e,trackHeightSM:r,trackPadding:i,trackMinWidthSM:o,innerMinMarginSM:s,innerMaxMarginSM:a,handleSizeSM:l,calc:c}=n,u=`${e}-inner`,d=De(c(l).add(c(i).mul(2)).equal()),f=De(c(a).mul(2).equal());return{[e]:{[`&${e}-small`]:{minWidth:o,height:r,lineHeight:De(r),[`${e}-inner`]:{paddingInlineStart:a,paddingInlineEnd:s,[`${u}-checked, ${u}-unchecked`]:{minHeight:r},[`${u}-checked`]:{marginInlineStart:`calc(-100% + ${d} - ${f})`,marginInlineEnd:`calc(100% - ${d} + ${f})`},[`${u}-unchecked`]:{marginTop:c(r).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${e}-handle`]:{width:l,height:l},[`${e}-loading-icon`]:{top:c(c(l).sub(n.switchLoadingIconSize)).div(2).equal(),fontSize:n.switchLoadingIconSize},[`&${e}-checked`]:{[`${e}-inner`]:{paddingInlineStart:s,paddingInlineEnd:a,[`${u}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${u}-unchecked`]:{marginInlineStart:`calc(100% - ${d} + ${f})`,marginInlineEnd:`calc(-100% + ${d} - ${f})`}},[`${e}-handle`]:{insetInlineStart:`calc(100% - ${De(c(l).add(i).equal())})`}},[`&:not(${e}-disabled):active`]:{[`&:not(${e}-checked) ${u}`]:{[`${u}-unchecked`]:{marginInlineStart:c(n.marginXXS).div(2).equal(),marginInlineEnd:c(n.marginXXS).mul(-1).div(2).equal()}},[`&${e}-checked ${u}`]:{[`${u}-checked`]:{marginInlineStart:c(n.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:c(n.marginXXS).div(2).equal()}}}}}}},$Z=n=>{const{componentCls:e,handleSize:r,calc:i}=n;return{[e]:{[`${e}-loading-icon${n.iconCls}`]:{position:"relative",top:i(i(r).sub(n.fontSize)).div(2).equal(),color:n.switchLoadingIconColor,verticalAlign:"top"},[`&${e}-checked ${e}-loading-icon`]:{color:n.switchColor}}}},zZ=n=>{const{componentCls:e,trackPadding:r,handleBg:i,handleShadow:o,handleSize:s,calc:a}=n,l=`${e}-handle`;return{[e]:{[l]:{position:"absolute",top:r,insetInlineStart:r,width:s,height:s,transition:`all ${n.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:i,borderRadius:a(s).div(2).equal(),boxShadow:o,transition:`all ${n.switchDuration} ease-in-out`,content:'""'}},[`&${e}-checked ${l}`]:{insetInlineStart:`calc(100% - ${De(a(s).add(r).equal())})`},[`&:not(${e}-disabled):active`]:{[`${l}::before`]:{insetInlineEnd:n.switchHandleActiveInset,insetInlineStart:0},[`&${e}-checked ${l}::before`]:{insetInlineEnd:0,insetInlineStart:n.switchHandleActiveInset}}}}},kZ=n=>{const{componentCls:e,trackHeight:r,trackPadding:i,innerMinMargin:o,innerMaxMargin:s,handleSize:a,calc:l}=n,c=`${e}-inner`,u=De(l(a).add(l(i).mul(2)).equal()),d=De(l(s).mul(2).equal());return{[e]:{[c]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:s,paddingInlineEnd:o,transition:`padding-inline-start ${n.switchDuration} ease-in-out, padding-inline-end ${n.switchDuration} ease-in-out`,[`${c}-checked, ${c}-unchecked`]:{display:"block",color:n.colorTextLightSolid,fontSize:n.fontSizeSM,transition:`margin-inline-start ${n.switchDuration} ease-in-out, margin-inline-end ${n.switchDuration} ease-in-out`,pointerEvents:"none",minHeight:r},[`${c}-checked`]:{marginInlineStart:`calc(-100% + ${u} - ${d})`,marginInlineEnd:`calc(100% - ${u} + ${d})`},[`${c}-unchecked`]:{marginTop:l(r).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${e}-checked ${c}`]:{paddingInlineStart:o,paddingInlineEnd:s,[`${c}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${c}-unchecked`]:{marginInlineStart:`calc(100% - ${u} + ${d})`,marginInlineEnd:`calc(-100% + ${u} - ${d})`}},[`&:not(${e}-disabled):active`]:{[`&:not(${e}-checked) ${c}`]:{[`${c}-unchecked`]:{marginInlineStart:l(i).mul(2).equal(),marginInlineEnd:l(i).mul(-1).mul(2).equal()}},[`&${e}-checked ${c}`]:{[`${c}-checked`]:{marginInlineStart:l(i).mul(-1).mul(2).equal(),marginInlineEnd:l(i).mul(2).equal()}}}}}},VZ=n=>{const{componentCls:e,trackHeight:r,trackMinWidth:i}=n;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},Es(n)),{position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:i,height:r,lineHeight:De(r),verticalAlign:"middle",background:n.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${n.motionDurationMid}`,userSelect:"none",[`&:hover:not(${e}-disabled)`]:{background:n.colorTextTertiary}}),zm(n)),{[`&${e}-checked`]:{background:n.switchColor,[`&:hover:not(${e}-disabled)`]:{background:n.colorPrimaryHover}},[`&${e}-loading, &${e}-disabled`]:{cursor:"not-allowed",opacity:n.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${e}-rtl`]:{direction:"rtl"}})}},GZ=n=>{const{fontSize:e,lineHeight:r,controlHeight:i,colorWhite:o}=n,s=e*r,a=i/2,l=2,c=s-l*2,u=a-l*2;return{trackHeight:s,trackHeightSM:a,trackMinWidth:c*2+l*4,trackMinWidthSM:u*2+l*2,trackPadding:l,handleBg:o,handleSize:c,handleSizeSM:u,handleShadow:`0 2px 4px 0 ${new Ln("#00230b").setA(.2).toRgbString()}`,innerMinMargin:c/2,innerMaxMargin:c+l+l*2,innerMinMarginSM:u/2,innerMaxMarginSM:u+l+l*2}},HZ=Ii("Switch",n=>{const e=Xn(n,{switchDuration:n.motionDurationMid,switchColor:n.colorPrimary,switchDisabledOpacity:n.opacityLoading,switchLoadingIconSize:n.calc(n.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${n.opacityLoading})`,switchHandleActiveInset:"-30%"});return[VZ(e),kZ(e),zZ(e),$Z(e),BZ(e)]},GZ);var jZ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const WZ=b.forwardRef((n,e)=>{const{prefixCls:r,size:i,disabled:o,loading:s,className:a,rootClassName:l,style:c,checked:u,value:d,defaultChecked:f,defaultValue:h,onChange:p}=n,g=jZ(n,["prefixCls","size","disabled","loading","className","rootClassName","style","checked","value","defaultChecked","defaultValue","onChange"]),[y,v]=Zi(!1,{value:u??d,defaultValue:f??h}),{getPrefixCls:m,direction:_,switch:x}=b.useContext(Yt),S=b.useContext(za),w=(o??S)||s,E=m("switch",r),C=b.createElement("div",{className:`${E}-handle`},s&&b.createElement(E_,{className:`${E}-loading-icon`})),[T,M,R]=HZ(E),P=Ya(i),D=we(x==null?void 0:x.className,{[`${E}-small`]:P==="small",[`${E}-loading`]:s,[`${E}-rtl`]:_==="rtl"},a,l,M,R),F=Object.assign(Object.assign({},x==null?void 0:x.style),c),A=function(){v(arguments.length<=0?void 0:arguments[0]),p==null||p.apply(void 0,arguments)};return T(b.createElement(EU,{component:"Switch"},b.createElement(a$,Object.assign({},g,{checked:y,onChange:A,prefixCls:E,className:D,style:F,disabled:w,ref:e,loadingIcon:C}))))}),l$=WZ;l$.__ANT_SWITCH=!0;const qZ=(n,e,r,i)=>{const{titleMarginBottom:o,fontWeightStrong:s}=i;return{marginBottom:o,color:r,fontWeight:s,fontSize:n,lineHeight:e}},XZ=n=>{const e=[1,2,3,4,5],r={};return e.forEach(i=>{r[`
      h${i}&,
      div&-h${i},
      div&-h${i} > textarea,
      h${i}
    `]=qZ(n[`fontSizeHeading${i}`],n[`lineHeightHeading${i}`],n.colorTextHeading,n)}),r},KZ=n=>{const{componentCls:e}=n;return{"a&, a":Object.assign(Object.assign({},tU(n)),{userSelect:"text",[`&[disabled], &${e}-disabled`]:{color:n.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:n.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},YZ=n=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:n.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:n.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:K0[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:n.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),QZ=n=>{const{componentCls:e,paddingSM:r}=n,i=r;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:n.calc(n.paddingSM).mul(-1).equal(),marginTop:n.calc(i).mul(-1).equal(),marginBottom:`calc(1em - ${De(i)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:n.calc(n.marginXS).add(2).equal(),insetBlockEnd:n.marginXS,color:n.colorTextDescription,fontWeight:"normal",fontSize:n.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},ZZ=n=>({[`${n.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:n.colorSuccess}},[`${n.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),JZ=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),eJ=n=>{const{componentCls:e,titleMarginTop:r}=n;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorText,wordBreak:"break-word",lineHeight:n.lineHeight,[`&${e}-secondary`]:{color:n.colorTextDescription},[`&${e}-success`]:{color:n.colorSuccess},[`&${e}-warning`]:{color:n.colorWarning},[`&${e}-danger`]:{color:n.colorError,"a&:active, a&:focus":{color:n.colorErrorActive},"a&:hover":{color:n.colorErrorHover}},[`&${e}-disabled`]:{color:n.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},XZ(n)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:r},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:r}}}),YZ(n)),KZ(n)),{[`
        ${e}-expand,
        ${e}-collapse,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},tU(n)),{marginInlineStart:n.marginXXS})}),QZ(n)),ZZ(n)),JZ()),{"&-rtl":{direction:"rtl"}})}},tJ=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),c$=Ii("Typography",n=>[eJ(n)],tJ),nJ=n=>{const{prefixCls:e,"aria-label":r,className:i,style:o,direction:s,maxLength:a,autoSize:l=!0,value:c,onSave:u,onCancel:d,onEnd:f,component:h,enterIcon:p=b.createElement(FZ,null)}=n,g=b.useRef(null),y=b.useRef(!1),v=b.useRef(null),[m,_]=b.useState(c);b.useEffect(()=>{_(c)},[c]),b.useEffect(()=>{var A;if(!((A=g.current)===null||A===void 0)&&A.resizableTextArea){const{textArea:I}=g.current.resizableTextArea;I.focus();const{length:N}=I.value;I.setSelectionRange(N,N)}},[]);const x=A=>{let{target:I}=A;_(I.value.replace(/[\n\r]/g,""))},S=()=>{y.current=!0},w=()=>{y.current=!1},E=A=>{let{keyCode:I}=A;y.current||(v.current=I)},C=()=>{u(m.trim())},T=A=>{let{keyCode:I,ctrlKey:N,altKey:L,metaKey:O,shiftKey:V}=A;v.current!==I||y.current||N||L||O||V||(I===He.ENTER?(C(),f==null||f()):I===He.ESC&&d())},M=()=>{C()},[R,P,D]=c$(e),F=we(e,`${e}-edit-content`,{[`${e}-rtl`]:s==="rtl",[`${e}-${h}`]:!!h},i,P,D);return R(b.createElement("div",{className:F,style:o},b.createElement(ZB,{ref:g,maxLength:a,value:m,onChange:x,onKeyDown:E,onKeyUp:T,onCompositionStart:S,onCompositionEnd:w,onBlur:M,"aria-label":r,rows:1,autoSize:l}),p!==null?Xl(p,{className:`${e}-edit-content-confirm`}):null))};var rJ=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var e=document.activeElement,r=[],i=0;i<n.rangeCount;i++)r.push(n.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return n.removeAllRanges(),function(){n.type==="Caret"&&n.removeAllRanges(),n.rangeCount||r.forEach(function(o){n.addRange(o)}),e&&e.focus()}},iJ=rJ,jN={"text/plain":"Text","text/html":"Url",default:"Text"},oJ="Copy to clipboard: #{key}, Enter";function sJ(n){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return n.replace(/#{\s*key\s*}/g,e)}function aJ(n,e){var r,i,o,s,a,l,c=!1;e||(e={}),r=e.debug||!1;try{o=iJ(),s=document.createRange(),a=document.getSelection(),l=document.createElement("span"),l.textContent=n,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(d){if(d.stopPropagation(),e.format)if(d.preventDefault(),typeof d.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var f=jN[e.format]||jN.default;window.clipboardData.setData(f,n)}else d.clipboardData.clearData(),d.clipboardData.setData(e.format,n);e.onCopy&&(d.preventDefault(),e.onCopy(d.clipboardData))}),document.body.appendChild(l),s.selectNodeContents(l),a.addRange(s);var u=document.execCommand("copy");if(!u)throw new Error("copy command was unsuccessful");c=!0}catch(d){r&&console.error("unable to copy using execCommand: ",d),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",n),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(f){r&&console.error("unable to copy using clipboardData: ",f),r&&console.error("falling back to prompt"),i=sJ("message"in e?e.message:oJ),window.prompt(i,n)}}finally{a&&(typeof a.removeRange=="function"?a.removeRange(s):a.removeAllRanges()),l&&document.body.removeChild(l),o()}return c}var lJ=aJ;const cJ=vu(lJ);var uJ=function(n,e,r,i){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function l(d){try{u(i.next(d))}catch(f){a(f)}}function c(d){try{u(i.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};const dJ=n=>{let{copyConfig:e,children:r}=n;const[i,o]=b.useState(!1),[s,a]=b.useState(!1),l=b.useRef(null),c=()=>{l.current&&clearTimeout(l.current)},u={};e.format&&(u.format=e.format),b.useEffect(()=>c,[]);const d=br(f=>uJ(void 0,void 0,void 0,function*(){var h;f==null||f.preventDefault(),f==null||f.stopPropagation(),a(!0);try{const p=typeof e.text=="function"?yield e.text():e.text;cJ(p||EZ(r,!0).join("")||"",u),a(!1),o(!0),c(),l.current=setTimeout(()=>{o(!1)},3e3),(h=e.onCopy)===null||h===void 0||h.call(e,f)}catch(p){throw a(!1),p}}));return{copied:i,copyLoading:s,onClick:d}};function Nb(n,e){return b.useMemo(()=>{const r=!!n;return[r,Object.assign(Object.assign({},e),r&&typeof n=="object"?n:null)]},[n])}const fJ=n=>{const e=b.useRef(void 0);return b.useEffect(()=>{e.current=n}),e.current},hJ=(n,e,r)=>b.useMemo(()=>n===!0?{title:e??r}:b.isValidElement(n)?{title:n}:typeof n=="object"?Object.assign({title:e??r},n):{title:n},[n,e,r]);var pJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const u$=b.forwardRef((n,e)=>{const{prefixCls:r,component:i="article",className:o,rootClassName:s,setContentRef:a,children:l,direction:c,style:u}=n,d=pJ(n,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:f,direction:h,typography:p}=b.useContext(Yt),g=c??h,y=a?Js(e,a):e,v=f("typography",r),[m,_,x]=c$(v),S=we(v,p==null?void 0:p.className,{[`${v}-rtl`]:g==="rtl"},o,s,_,x),w=Object.assign(Object.assign({},p==null?void 0:p.style),u);return m(b.createElement(i,Object.assign({className:S,style:w,ref:y},d),l))});function WN(n){return n===!1?[!1,!1]:Array.isArray(n)?n:[n]}function Pb(n,e,r){return n===!0||n===void 0?e:n||r&&e}function mJ(n){const e=document.createElement("em");n.appendChild(e);const r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return n.removeChild(e),r.left>i.left||i.right>r.right||r.top>i.top||i.bottom>r.bottom}const FT=n=>["string","number"].includes(typeof n),gJ=n=>{let{prefixCls:e,copied:r,locale:i,iconOnly:o,tooltips:s,icon:a,tabIndex:l,onCopy:c,loading:u}=n;const d=WN(s),f=WN(a),{copied:h,copy:p}=i??{},g=r?h:p,y=Pb(d[r?1:0],g),v=typeof y=="string"?y:g;return b.createElement(Xm,{title:y},b.createElement("button",{type:"button",className:we(`${e}-copy`,{[`${e}-copy-success`]:r,[`${e}-copy-icon-only`]:o}),onClick:c,"aria-label":v,tabIndex:l},r?Pb(f[1],b.createElement(DB,null),!0):Pb(f[0],u?b.createElement(E_,null):b.createElement(NZ,null),!0)))},Vg=b.forwardRef((n,e)=>{let{style:r,children:i}=n;const o=b.useRef(null);return b.useImperativeHandle(e,()=>({isExceed:()=>{const s=o.current;return s.scrollHeight>s.clientHeight},getHeight:()=>o.current.clientHeight})),b.createElement("span",{"aria-hidden":!0,ref:o,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},r)},i)}),vJ=n=>n.reduce((e,r)=>e+(FT(r)?String(r).length:1),0);function qN(n,e){let r=0;const i=[];for(let o=0;o<n.length;o+=1){if(r===e)return i;const s=n[o],l=FT(s)?String(s).length:1,c=r+l;if(c>e){const u=e-r;return i.push(String(s).slice(0,u)),i}i.push(s),r=c}return n}const Ob=0,Ib=1,Db=2,Lb=3,XN=4,Gg={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function yJ(n){const{enableMeasure:e,width:r,text:i,children:o,rows:s,expanded:a,miscDeps:l,onEllipsis:c}=n,u=b.useMemo(()=>iu(i),[i]),d=b.useMemo(()=>vJ(u),[i]),f=b.useMemo(()=>o(u,!1),[i]),[h,p]=b.useState(null),g=b.useRef(null),y=b.useRef(null),v=b.useRef(null),m=b.useRef(null),_=b.useRef(null),[x,S]=b.useState(!1),[w,E]=b.useState(Ob),[C,T]=b.useState(0),[M,R]=b.useState(null);xn(()=>{E(e&&r&&d?Ib:Ob)},[r,i,s,e,u]),xn(()=>{var A,I,N,L;if(w===Ib){E(Db);const O=y.current&&getComputedStyle(y.current).whiteSpace;R(O)}else if(w===Db){const O=!!(!((A=v.current)===null||A===void 0)&&A.isExceed());E(O?Lb:XN),p(O?[0,d]:null),S(O);const V=((I=v.current)===null||I===void 0?void 0:I.getHeight())||0,B=s===1?0:((N=m.current)===null||N===void 0?void 0:N.getHeight())||0,z=((L=_.current)===null||L===void 0?void 0:L.getHeight())||0,W=Math.max(V,B+z);T(W+1),c(O)}},[w]);const P=h?Math.ceil((h[0]+h[1])/2):0;xn(()=>{var A;const[I,N]=h||[0,0];if(I!==N){const O=(((A=g.current)===null||A===void 0?void 0:A.getHeight())||0)>C;let V=P;N-I===1&&(V=O?I:N),p(O?[I,V]:[V,N])}},[h,P]);const D=b.useMemo(()=>{if(!e)return o(u,!1);if(w!==Lb||!h||h[0]!==h[1]){const A=o(u,!1);return[XN,Ob].includes(w)?A:b.createElement("span",{style:Object.assign(Object.assign({},Gg),{WebkitLineClamp:s})},A)}return o(a?u:qN(u,h[0]),x)},[a,w,h,u].concat(ht(l))),F={width:r,margin:0,padding:0,whiteSpace:M==="nowrap"?"normal":"inherit"};return b.createElement(b.Fragment,null,D,w===Db&&b.createElement(b.Fragment,null,b.createElement(Vg,{style:Object.assign(Object.assign(Object.assign({},F),Gg),{WebkitLineClamp:s}),ref:v},f),b.createElement(Vg,{style:Object.assign(Object.assign(Object.assign({},F),Gg),{WebkitLineClamp:s-1}),ref:m},f),b.createElement(Vg,{style:Object.assign(Object.assign(Object.assign({},F),Gg),{WebkitLineClamp:1}),ref:_},o([],!0))),w===Lb&&h&&h[0]!==h[1]&&b.createElement(Vg,{style:Object.assign(Object.assign({},F),{top:400}),ref:g},o(qN(u,P),!0)),w===Ib&&b.createElement("span",{style:{whiteSpace:"inherit"},ref:y}))}const _J=n=>{let{enableEllipsis:e,isEllipsis:r,children:i,tooltipProps:o}=n;return!(o!=null&&o.title)||!e?i:b.createElement(Xm,Object.assign({open:r?void 0:!1},o),i)};var xJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};function bJ(n,e){let{mark:r,code:i,underline:o,delete:s,strong:a,keyboard:l,italic:c}=n,u=e;function d(f,h){h&&(u=b.createElement(f,{},u))}return d("strong",a),d("u",o),d("del",s),d("code",i),d("mark",r),d("kbd",l),d("i",c),u}const SJ="...",$_=b.forwardRef((n,e)=>{var r;const{prefixCls:i,className:o,style:s,type:a,disabled:l,children:c,ellipsis:u,editable:d,copyable:f,component:h,title:p}=n,g=xJ(n,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:y,direction:v}=b.useContext(Yt),[m]=ic("Text"),_=b.useRef(null),x=b.useRef(null),S=y("typography",i),w=ea(g,["mark","code","delete","underline","strong","keyboard","italic"]),[E,C]=Nb(d),[T,M]=Zi(!1,{value:C.editing}),{triggerType:R=["icon"]}=C,P=Ve=>{var $e;Ve&&(($e=C.onStart)===null||$e===void 0||$e.call(C)),M(Ve)},D=fJ(T);xn(()=>{var Ve;!T&&D&&((Ve=x.current)===null||Ve===void 0||Ve.focus())},[T]);const F=Ve=>{Ve==null||Ve.preventDefault(),P(!0)},A=Ve=>{var $e;($e=C.onChange)===null||$e===void 0||$e.call(C,Ve),P(!1)},I=()=>{var Ve;(Ve=C.onCancel)===null||Ve===void 0||Ve.call(C),P(!1)},[N,L]=Nb(f),{copied:O,copyLoading:V,onClick:B}=dJ({copyConfig:L,children:c}),[z,W]=b.useState(!1),[ie,k]=b.useState(!1),[j,Q]=b.useState(!1),[Y,ne]=b.useState(!1),[ye,me]=b.useState(!0),[fe,ae]=Nb(u,{expandable:!1,symbol:Ve=>Ve?m==null?void 0:m.collapse:m==null?void 0:m.expand}),[ve,q]=Zi(ae.defaultExpanded||!1,{value:ae.expanded}),ge=fe&&(!ve||ae.expandable==="collapsible"),{rows:xe=1}=ae,_e=b.useMemo(()=>ge&&(ae.suffix!==void 0||ae.onEllipsis||ae.expandable||E||N),[ge,ae,E,N]);xn(()=>{fe&&!_e&&(W(J2("webkitLineClamp")),k(J2("textOverflow")))},[_e,fe]);const[Se,Ke]=b.useState(ge),Ue=b.useMemo(()=>_e?!1:xe===1?ie:z,[_e,ie,z]);xn(()=>{Ke(Ue&&ge)},[Ue,ge]);const H=ge&&(Se?Y:j),U=ge&&xe===1&&Se,X=ge&&xe>1&&Se,oe=(Ve,$e)=>{var _t;q($e.expanded),(_t=ae.onExpand)===null||_t===void 0||_t.call(ae,Ve,$e)},[pe,ce]=b.useState(0),Fe=Ve=>{let{offsetWidth:$e}=Ve;ce($e)},Re=Ve=>{var $e;Q(Ve),j!==Ve&&(($e=ae.onEllipsis)===null||$e===void 0||$e.call(ae,Ve))};b.useEffect(()=>{const Ve=_.current;if(fe&&Se&&Ve){const $e=mJ(Ve);Y!==$e&&ne($e)}},[fe,Se,c,X,ye,pe]),b.useEffect(()=>{const Ve=_.current;if(typeof IntersectionObserver>"u"||!Ve||!Se||!ge)return;const $e=new IntersectionObserver(()=>{me(!!Ve.offsetParent)});return $e.observe(Ve),()=>{$e.disconnect()}},[Se,ge]);const Le=hJ(ae.tooltip,C.text,c),Je=b.useMemo(()=>{if(!(!fe||Se))return[C.text,c,p,Le.title].find(FT)},[fe,Se,p,Le.title,H]);if(T)return b.createElement(nJ,{value:(r=C.text)!==null&&r!==void 0?r:typeof c=="string"?c:"",onSave:A,onCancel:I,onEnd:C.onEnd,prefixCls:S,className:o,style:s,direction:v,component:h,maxLength:C.maxLength,autoSize:C.autoSize,enterIcon:C.enterIcon});const Me=()=>{const{expandable:Ve,symbol:$e}=ae;return Ve?b.createElement("button",{type:"button",key:"expand",className:`${S}-${ve?"collapse":"expand"}`,onClick:_t=>oe(_t,{expanded:!ve}),"aria-label":ve?m.collapse:m==null?void 0:m.expand},typeof $e=="function"?$e(ve):$e):null},ze=()=>{if(!E)return;const{icon:Ve,tooltip:$e,tabIndex:_t}=C,J=iu($e)[0]||(m==null?void 0:m.edit),Qe=typeof J=="string"?J:"";return R.includes("icon")?b.createElement(Xm,{key:"edit",title:$e===!1?"":J},b.createElement("button",{type:"button",ref:x,className:`${S}-edit`,onClick:F,"aria-label":Qe,tabIndex:_t},Ve||b.createElement(IZ,{role:"button"}))):null},Ee=()=>N?b.createElement(gJ,Object.assign({key:"copy"},L,{prefixCls:S,copied:O,locale:m,onCopy:B,loading:V,iconOnly:c==null})):null,Pe=Ve=>[Ve&&Me(),ze(),Ee()],ke=Ve=>[Ve&&!ve&&b.createElement("span",{"aria-hidden":!0,key:"ellipsis"},SJ),ae.suffix,Pe(Ve)];return b.createElement(Ka,{onResize:Fe,disabled:!ge},Ve=>b.createElement(_J,{tooltipProps:Le,enableEllipsis:ge,isEllipsis:H},b.createElement(u$,Object.assign({className:we({[`${S}-${a}`]:a,[`${S}-disabled`]:l,[`${S}-ellipsis`]:fe,[`${S}-ellipsis-single-line`]:U,[`${S}-ellipsis-multiple-line`]:X},o),prefixCls:i,style:Object.assign(Object.assign({},s),{WebkitLineClamp:X?xe:void 0}),component:h,ref:Js(Ve,_,e),direction:v,onClick:R.includes("text")?F:void 0,"aria-label":Je==null?void 0:Je.toString(),title:p},w),b.createElement(yJ,{enableMeasure:ge&&!Se,text:c,rows:xe,width:pe,onEllipsis:Re,expanded:ve,miscDeps:[O,ve,V,E,N,m]},($e,_t)=>bJ(n,b.createElement(b.Fragment,null,$e.length>0&&_t&&!ve&&Je?b.createElement("span",{key:"show-content","aria-hidden":!0},$e):$e,ke(_t)))))))});var wJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const EJ=b.forwardRef((n,e)=>{var{ellipsis:r,rel:i}=n,o=wJ(n,["ellipsis","rel"]);const s=Object.assign(Object.assign({},o),{rel:i===void 0&&o.target==="_blank"?"noopener noreferrer":i});return delete s.navigate,b.createElement($_,Object.assign({},s,{ref:e,ellipsis:!!r,component:"a"}))}),d$=b.forwardRef((n,e)=>b.createElement($_,Object.assign({ref:e},n,{component:"div"})));var CJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const TJ=(n,e)=>{var{ellipsis:r}=n,i=CJ(n,["ellipsis"]);const o=b.useMemo(()=>r&&typeof r=="object"?ea(r,["expandable","rows"]):r,[r]);return b.createElement($_,Object.assign({ref:e},i,{ellipsis:o,component:"span"}))},MJ=b.forwardRef(TJ);var RJ=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r};const AJ=[1,2,3,4,5],NJ=b.forwardRef((n,e)=>{const{level:r=1}=n,i=RJ(n,["level"]),o=AJ.includes(r)?`h${r}`:"h1";return b.createElement($_,Object.assign({ref:e},i,{component:o}))}),jf=u$;jf.Text=MJ;jf.Link=EJ;jf.Title=NJ;jf.Paragraph=d$;function PJ(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function OJ(n,e,r){return e=zJ(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function KN(n,e){return LJ(n)||PJ(n,e)||f$(n,e)||BJ()}function IJ(n){return DJ(n)||FJ(n)||f$(n)||UJ()}function DJ(n){if(Array.isArray(n))return dE(n)}function LJ(n){if(Array.isArray(n))return n}function FJ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function f$(n,e){if(n){if(typeof n=="string")return dE(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dE(n,e)}}function dE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function UJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $J(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zJ(n){var e=$J(n,"string");return typeof e=="symbol"?e:String(e)}var kJ=function(e,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(IJ(Object.entries(e).filter(function(o){var s=KN(o,1),a=s[0];return!i.has(a)}).map(function(o){var s=KN(o,2),a=s[0],l=s[1];return OJ({},a,l)}))))};function fE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function VJ(n){if(Array.isArray(n))return n}function GJ(n){if(Array.isArray(n))return fE(n)}function HJ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function jJ(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function WJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XJ(n,e){return VJ(n)||jJ(n,e)||h$(n,e)||WJ()}function YN(n){return GJ(n)||HJ(n)||h$(n)||qJ()}function h$(n,e){if(n){if(typeof n=="string")return fE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fE(n,e):void 0}}function p$(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.wrapperElementType,i=r===void 0?"div":r,o=e.nodeMapper,s=o===void 0?function(d){return d}:o,a=e.methodNames,l=a===void 0?[]:a,c=e.initPropNames,u=c===void 0?[]:c;return b.forwardRef(function(d,f){var h=b.useRef(),p=b.useMemo(function(){var v=Object.fromEntries(u.filter(function(m){return d.hasOwnProperty(m)}).map(function(m){return[m,d[m]]}));return n(v)},[]);QN(function(){p(s(h.current))},b.useLayoutEffect),QN(function(){return p._destructor instanceof Function?p._destructor:void 0});var g=b.useCallback(function(v){for(var m=arguments.length,_=new Array(m>1?m-1:0),x=1;x<m;x++)_[x-1]=arguments[x];return p[v]instanceof Function?p[v].apply(p,_):void 0},[p]),y=b.useRef({});return Object.keys(kJ(d,[].concat(YN(l),YN(u)))).filter(function(v){return y.current[v]!==d[v]}).forEach(function(v){return g(v,d[v])}),y.current=d,b.useImperativeHandle(f,function(){return Object.fromEntries(l.map(function(v){return[v,function(){for(var m=arguments.length,_=new Array(m),x=0;x<m;x++)_[x]=arguments[x];return g.apply(void 0,[v].concat(_))}]}))},[g]),de.createElement(i,{ref:h})})}function QN(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:b.useEffect,r=b.useRef(),i=b.useRef(!1),o=b.useRef(!1),s=b.useState(0),a=XJ(s,2);a[0];var l=a[1];i.current&&(o.current=!0),e(function(){return i.current||(r.current=n(),i.current=!0),l(function(c){return c+1}),function(){o.current&&r.current&&r.current()}},[])}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Wf="171",ei={ROTATE:0,DOLLY:1,PAN:2},Ca={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},m$=0,hE=1,g$=2,KJ=0,UT=1,YJ=2,ho=3,Ss=0,er=1,wi=2,Mi=0,zo=1,au=2,lf=3,cf=4,BT=5,po=100,$T=101,zT=102,v$=103,y$=104,kT=200,VT=201,GT=202,HT=203,em=204,tm=205,jT=206,WT=207,qT=208,XT=209,KT=210,QJ=211,ZJ=212,JJ=213,eee=214,nm=0,rm=1,im=2,Yl=3,om=4,sm=5,am=6,lm=7,Km=0,_$=1,x$=2,Qi=0,b$=1,S$=2,w$=3,E$=4,tee=5,C$=6,T$=7,YT=300,Wo=301,qo=302,Ql=303,Zl=304,lu=306,cu=1e3,Bs=1001,uu=1002,Wn=1003,ly=1004,$s=1005,Ur=1006,Fd=1007,ki=1008,fi=1009,Wc=1010,qc=1011,ps=1012,Xr=1013,rr=1014,hr=1015,Yr=1016,z_=1017,k_=1018,Ws=1020,V_=35902,QT=1021,Ym=1022,ti=1023,ZT=1024,JT=1025,Hs=1026,qs=1027,Qm=1028,qf=1029,du=1030,Xf=1031,nee=1032,Kf=1033,Xc=33776,kl=33777,Vl=33778,Gl=33779,cm=35840,um=35841,dm=35842,fm=35843,hm=36196,uf=37492,df=37496,ff=37808,hf=37809,pf=37810,mf=37811,gf=37812,vf=37813,yf=37814,_f=37815,xf=37816,bf=37817,Sf=37818,wf=37819,Ef=37820,Cf=37821,Kc=36492,pE=36494,mE=36495,eM=36283,pm=36284,mm=36285,gm=36286,ree=3200,iee=3201,Ga=0,M$=1,mo="",Dt="srgb",ko="srgb-linear",cy="linear",Tn="srgb",oee=0,Ec=7680,see=7681,aee=7682,lee=7683,cee=34055,uee=34056,dee=5386,fee=512,hee=513,pee=514,mee=515,gee=516,vee=517,yee=518,gE=519,tM=512,G_=513,nM=514,H_=515,rM=516,iM=517,oM=518,sM=519,uy=35044,bd=35048,ZN="300 es",Bo=2e3,fu=2001;class sc{addEventListener(e,r){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(r)===-1&&i[e].push(r)}hasEventListener(e,r){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(r)!==-1}removeEventListener(e,r){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const s=o.indexOf(r);s!==-1&&o.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const o=i.slice(0);for(let s=0,a=o.length;s<a;s++)o[s].call(this,e);e.target=null}}}const li=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let JN=1234567;const yp=Math.PI/180,Tf=180/Math.PI;function Pa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(li[n&255]+li[n>>8&255]+li[n>>16&255]+li[n>>24&255]+"-"+li[e&255]+li[e>>8&255]+"-"+li[e>>16&15|64]+li[e>>24&255]+"-"+li[r&63|128]+li[r>>8&255]+"-"+li[r>>16&255]+li[r>>24&255]+li[i&255]+li[i>>8&255]+li[i>>16&255]+li[i>>24&255]).toLowerCase()}function Jt(n,e,r){return Math.max(e,Math.min(r,n))}function aM(n,e){return(n%e+e)%e}function _ee(n,e,r,i,o){return i+(n-e)*(o-i)/(r-e)}function xee(n,e,r){return n!==e?(r-n)/(e-n):0}function _p(n,e,r){return(1-r)*n+r*e}function bee(n,e,r,i){return _p(n,e,1-Math.exp(-r*i))}function See(n,e=1){return e-Math.abs(aM(n,e*2)-e)}function wee(n,e,r){return n<=e?0:n>=r?1:(n=(n-e)/(r-e),n*n*(3-2*n))}function Eee(n,e,r){return n<=e?0:n>=r?1:(n=(n-e)/(r-e),n*n*n*(n*(n*6-15)+10))}function Cee(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Tee(n,e){return n+Math.random()*(e-n)}function Mee(n){return n*(.5-Math.random())}function Ree(n){n!==void 0&&(JN=n);let e=JN+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Aee(n){return n*yp}function Nee(n){return n*Tf}function Pee(n){return(n&n-1)===0&&n!==0}function Oee(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Iee(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Dee(n,e,r,i,o){const s=Math.cos,a=Math.sin,l=s(r/2),c=a(r/2),u=s((e+i)/2),d=a((e+i)/2),f=s((e-i)/2),h=a((e-i)/2),p=s((i-e)/2),g=a((i-e)/2);switch(o){case"XYX":n.set(l*d,c*f,c*h,l*u);break;case"YZY":n.set(c*h,l*d,c*f,l*u);break;case"ZXZ":n.set(c*f,c*h,l*d,l*u);break;case"XZX":n.set(l*d,c*g,c*p,l*u);break;case"YXY":n.set(c*p,l*d,c*g,l*u);break;case"ZYZ":n.set(c*g,c*p,l*d,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function Ei(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Zt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const dy={DEG2RAD:yp,RAD2DEG:Tf,generateUUID:Pa,clamp:Jt,euclideanModulo:aM,mapLinear:_ee,inverseLerp:xee,lerp:_p,damp:bee,pingpong:See,smoothstep:wee,smootherstep:Eee,randInt:Cee,randFloat:Tee,randFloatSpread:Mee,seededRandom:Ree,degToRad:Aee,radToDeg:Nee,isPowerOfTwo:Pee,ceilPowerOfTwo:Oee,floorPowerOfTwo:Iee,setQuaternionFromProperEuler:Dee,normalize:Zt,denormalize:Ei};class je{constructor(e=0,r=0){je.prototype.isVector2=!0,this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,i=this.y,o=e.elements;return this.x=o[0]*r+o[3]*i+o[6],this.y=o[1]*r+o[4]*i+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=Jt(this.x,e.x,r.x),this.y=Jt(this.y,e.y,r.y),this}clampScalar(e,r){return this.x=Jt(this.x,e,r),this.y=Jt(this.y,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const i=this.dot(e)/r;return Math.acos(Jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,i=this.y-e.y;return r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const i=Math.cos(r),o=Math.sin(r),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*o+e.x,this.y=s*o+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class kt{constructor(e,r,i,o,s,a,l,c,u){kt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,r,i,o,s,a,l,c,u)}set(e,r,i,o,s,a,l,c,u){const d=this.elements;return d[0]=e,d[1]=o,d[2]=l,d[3]=r,d[4]=s,d[5]=c,d[6]=i,d[7]=a,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,i=e.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],this}extractBasis(e,r,i){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const i=e.elements,o=r.elements,s=this.elements,a=i[0],l=i[3],c=i[6],u=i[1],d=i[4],f=i[7],h=i[2],p=i[5],g=i[8],y=o[0],v=o[3],m=o[6],_=o[1],x=o[4],S=o[7],w=o[2],E=o[5],C=o[8];return s[0]=a*y+l*_+c*w,s[3]=a*v+l*x+c*E,s[6]=a*m+l*S+c*C,s[1]=u*y+d*_+f*w,s[4]=u*v+d*x+f*E,s[7]=u*m+d*S+f*C,s[2]=h*y+p*_+g*w,s[5]=h*v+p*x+g*E,s[8]=h*m+p*S+g*C,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8];return r*a*d-r*l*u-i*s*d+i*l*c+o*s*u-o*a*c}invert(){const e=this.elements,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=d*a-l*u,h=l*c-d*s,p=u*s-a*c,g=r*f+i*h+o*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return e[0]=f*y,e[1]=(o*u-d*i)*y,e[2]=(l*i-o*a)*y,e[3]=h*y,e[4]=(d*r-o*c)*y,e[5]=(o*s-l*r)*y,e[6]=p*y,e[7]=(i*c-u*r)*y,e[8]=(a*r-i*s)*y,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,i,o,s,a,l){const c=Math.cos(s),u=Math.sin(s);return this.set(i*c,i*u,-i*(c*a+u*l)+a+e,-o*u,o*c,-o*(-u*a+c*l)+l+r,0,0,1),this}scale(e,r){return this.premultiply(Fb.makeScale(e,r)),this}rotate(e){return this.premultiply(Fb.makeRotation(-e)),this}translate(e,r){return this.premultiply(Fb.makeTranslation(e,r)),this}makeTranslation(e,r){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,r,0,0,1),this}makeRotation(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,-i,0,i,r,0,0,0,1),this}makeScale(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}equals(e){const r=this.elements,i=e.elements;for(let o=0;o<9;o++)if(r[o]!==i[o])return!1;return!0}fromArray(e,r=0){for(let i=0;i<9;i++)this.elements[i]=e[i+r];return this}toArray(e=[],r=0){const i=this.elements;return e[r]=i[0],e[r+1]=i[1],e[r+2]=i[2],e[r+3]=i[3],e[r+4]=i[4],e[r+5]=i[5],e[r+6]=i[6],e[r+7]=i[7],e[r+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Fb=new kt;function R$(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function vm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function A$(){const n=vm("canvas");return n.style.display="block",n}const eP={};function Pc(n){n in eP||(eP[n]=!0,console.warn(n))}function Lee(n,e,r){return new Promise(function(i,o){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:o();break;case n.TIMEOUT_EXPIRED:setTimeout(s,r);break;default:i()}}setTimeout(s,r)})}function Fee(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Uee(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const tP=new kt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),nP=new kt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Bee(){const n={enabled:!0,workingColorSpace:ko,spaces:{},convert:function(o,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Tn&&(o.r=Oa(o.r),o.g=Oa(o.g),o.b=Oa(o.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(o.applyMatrix3(this.spaces[s].toXYZ),o.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Tn&&(o.r=Ud(o.r),o.g=Ud(o.g),o.b=Ud(o.b))),o},fromWorkingColorSpace:function(o,s){return this.convert(o,this.workingColorSpace,s)},toWorkingColorSpace:function(o,s){return this.convert(o,s,this.workingColorSpace)},getPrimaries:function(o){return this.spaces[o].primaries},getTransfer:function(o){return o===mo?cy:this.spaces[o].transfer},getLuminanceCoefficients:function(o,s=this.workingColorSpace){return o.fromArray(this.spaces[s].luminanceCoefficients)},define:function(o){Object.assign(this.spaces,o)},_getMatrix:function(o,s,a){return o.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(o){return this.spaces[o].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(o=this.workingColorSpace){return this.spaces[o].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[ko]:{primaries:e,whitePoint:i,transfer:cy,toXYZ:tP,fromXYZ:nP,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:Dt},outputColorSpaceConfig:{drawingBufferColorSpace:Dt}},[Dt]:{primaries:e,whitePoint:i,transfer:Tn,toXYZ:tP,fromXYZ:nP,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:Dt}}}),n}const rn=Bee();function Oa(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ud(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let $u;class $ee{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{$u===void 0&&($u=vm("canvas")),$u.width=e.width,$u.height=e.height;const i=$u.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=$u}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const r=vm("canvas");r.width=e.width,r.height=e.height;const i=r.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const o=i.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0;a<s.length;a++)s[a]=Oa(s[a]/255)*255;return i.putImageData(o,0,0),r}else if(e.data){const r=e.data.slice(0);for(let i=0;i<r.length;i++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[i]=Math.floor(Oa(r[i]/255)*255):r[i]=Oa(r[i]);return{data:r,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let zee=0;class N${constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:zee++}),this.uuid=Pa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},o=this.data;if(o!==null){let s;if(Array.isArray(o)){s=[];for(let a=0,l=o.length;a<l;a++)o[a].isDataTexture?s.push(Ub(o[a].image)):s.push(Ub(o[a]))}else s=Ub(o);i.url=s}return r||(e.images[this.uuid]=i),i}}function Ub(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?$ee.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let kee=0;class $r extends sc{constructor(e=$r.DEFAULT_IMAGE,r=$r.DEFAULT_MAPPING,i=Bs,o=Bs,s=Ur,a=ki,l=ti,c=fi,u=$r.DEFAULT_ANISOTROPY,d=mo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:kee++}),this.uuid=Pa(),this.name="",this.source=new N$(e),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=i,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new je(0,0),this.repeat=new je(1,1),this.center=new je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),r||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==YT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case cu:e.x=e.x-Math.floor(e.x);break;case Bs:e.x=e.x<0?0:1;break;case uu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case cu:e.y=e.y-Math.floor(e.y);break;case Bs:e.y=e.y<0?0:1;break;case uu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}$r.DEFAULT_IMAGE=null;$r.DEFAULT_MAPPING=YT;$r.DEFAULT_ANISOTROPY=1;class Wt{constructor(e=0,r=0,i=0,o=1){Wt.prototype.isVector4=!0,this.x=e,this.y=r,this.z=i,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,i,o){return this.x=e,this.y=r,this.z=i,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,i=this.y,o=this.z,s=this.w,a=e.elements;return this.x=a[0]*r+a[4]*i+a[8]*o+a[12]*s,this.y=a[1]*r+a[5]*i+a[9]*o+a[13]*s,this.z=a[2]*r+a[6]*i+a[10]*o+a[14]*s,this.w=a[3]*r+a[7]*i+a[11]*o+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,i,o,s;const c=e.elements,u=c[0],d=c[4],f=c[8],h=c[1],p=c[5],g=c[9],y=c[2],v=c[6],m=c[10];if(Math.abs(d-h)<.01&&Math.abs(f-y)<.01&&Math.abs(g-v)<.01){if(Math.abs(d+h)<.1&&Math.abs(f+y)<.1&&Math.abs(g+v)<.1&&Math.abs(u+p+m-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const x=(u+1)/2,S=(p+1)/2,w=(m+1)/2,E=(d+h)/4,C=(f+y)/4,T=(g+v)/4;return x>S&&x>w?x<.01?(i=0,o=.707106781,s=.707106781):(i=Math.sqrt(x),o=E/i,s=C/i):S>w?S<.01?(i=.707106781,o=0,s=.707106781):(o=Math.sqrt(S),i=E/o,s=T/o):w<.01?(i=.707106781,o=.707106781,s=0):(s=Math.sqrt(w),i=C/s,o=T/s),this.set(i,o,s,r),this}let _=Math.sqrt((v-g)*(v-g)+(f-y)*(f-y)+(h-d)*(h-d));return Math.abs(_)<.001&&(_=1),this.x=(v-g)/_,this.y=(f-y)/_,this.z=(h-d)/_,this.w=Math.acos((u+p+m-1)/2),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=Jt(this.x,e.x,r.x),this.y=Jt(this.y,e.y,r.y),this.z=Jt(this.z,e.z,r.z),this.w=Jt(this.w,e.w,r.w),this}clampScalar(e,r){return this.x=Jt(this.x,e,r),this.y=Jt(this.y,e,r),this.z=Jt(this.z,e,r),this.w=Jt(this.w,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this.z=e.z+(r.z-e.z)*i,this.w=e.w+(r.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Yf extends sc{constructor(e=1,r=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=r,this.depth=1,this.scissor=new Wt(0,0,e,r),this.scissorTest=!1,this.viewport=new Wt(0,0,e,r);const o={width:e,height:r,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ur,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new $r(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let l=0;l<a;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,r,i=1){if(this.width!==e||this.height!==r||this.depth!==i){this.width=e,this.height=r,this.depth=i;for(let o=0,s=this.textures.length;o<s;o++)this.textures[o].image.width=e,this.textures[o].image.height=r,this.textures[o].image.depth=i;this.dispose()}this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,o=e.textures.length;i<o;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const r=Object.assign({},e.texture.image);return this.texture.source=new N$(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class xs extends Yf{constructor(e=1,r=1,i={}){super(e,r,i),this.isWebGLRenderTarget=!0}}class lM extends $r{constructor(e=null,r=1,i=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:r,height:i,depth:o},this.magFilter=Wn,this.minFilter=Wn,this.wrapR=Bs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Vee extends $r{constructor(e=null,r=1,i=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:i,depth:o},this.magFilter=Wn,this.minFilter=Wn,this.wrapR=Bs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Xs{constructor(e=0,r=0,i=0,o=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=i,this._w=o}static slerpFlat(e,r,i,o,s,a,l){let c=i[o+0],u=i[o+1],d=i[o+2],f=i[o+3];const h=s[a+0],p=s[a+1],g=s[a+2],y=s[a+3];if(l===0){e[r+0]=c,e[r+1]=u,e[r+2]=d,e[r+3]=f;return}if(l===1){e[r+0]=h,e[r+1]=p,e[r+2]=g,e[r+3]=y;return}if(f!==y||c!==h||u!==p||d!==g){let v=1-l;const m=c*h+u*p+d*g+f*y,_=m>=0?1:-1,x=1-m*m;if(x>Number.EPSILON){const w=Math.sqrt(x),E=Math.atan2(w,m*_);v=Math.sin(v*E)/w,l=Math.sin(l*E)/w}const S=l*_;if(c=c*v+h*S,u=u*v+p*S,d=d*v+g*S,f=f*v+y*S,v===1-l){const w=1/Math.sqrt(c*c+u*u+d*d+f*f);c*=w,u*=w,d*=w,f*=w}}e[r]=c,e[r+1]=u,e[r+2]=d,e[r+3]=f}static multiplyQuaternionsFlat(e,r,i,o,s,a){const l=i[o],c=i[o+1],u=i[o+2],d=i[o+3],f=s[a],h=s[a+1],p=s[a+2],g=s[a+3];return e[r]=l*g+d*f+c*p-u*h,e[r+1]=c*g+d*h+u*f-l*p,e[r+2]=u*g+d*p+l*h-c*f,e[r+3]=d*g-l*f-c*h-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,i,o){return this._x=e,this._y=r,this._z=i,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r=!0){const i=e._x,o=e._y,s=e._z,a=e._order,l=Math.cos,c=Math.sin,u=l(i/2),d=l(o/2),f=l(s/2),h=c(i/2),p=c(o/2),g=c(s/2);switch(a){case"XYZ":this._x=h*d*f+u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f-h*p*g;break;case"YXZ":this._x=h*d*f+u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f+h*p*g;break;case"ZXY":this._x=h*d*f-u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f-h*p*g;break;case"ZYX":this._x=h*d*f-u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f+h*p*g;break;case"YZX":this._x=h*d*f+u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f-h*p*g;break;case"XZY":this._x=h*d*f-u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f+h*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const i=r/2,o=Math.sin(i);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],c=r[9],u=r[2],d=r[6],f=r[10],h=i+l+f;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(d-c)*p,this._y=(s-u)*p,this._z=(a-o)*p}else if(i>l&&i>f){const p=2*Math.sqrt(1+i-l-f);this._w=(d-c)/p,this._x=.25*p,this._y=(o+a)/p,this._z=(s+u)/p}else if(l>f){const p=2*Math.sqrt(1+l-i-f);this._w=(s-u)/p,this._x=(o+a)/p,this._y=.25*p,this._z=(c+d)/p}else{const p=2*Math.sqrt(1+f-i-l);this._w=(a-o)/p,this._x=(s+u)/p,this._y=(c+d)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let i=e.dot(r)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Jt(this.dot(e),-1,1)))}rotateTowards(e,r){const i=this.angleTo(e);if(i===0)return this;const o=Math.min(1,r/i);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const i=e._x,o=e._y,s=e._z,a=e._w,l=r._x,c=r._y,u=r._z,d=r._w;return this._x=i*d+a*l+o*u-s*c,this._y=o*d+a*c+s*l-i*u,this._z=s*d+a*u+i*c-o*l,this._w=a*d-i*l-o*c-s*u,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const i=this._x,o=this._y,s=this._z,a=this._w;let l=a*e._w+i*e._x+o*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=i,this._y=o,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const p=1-r;return this._w=p*a+r*this._w,this._x=p*i+r*this._x,this._y=p*o+r*this._y,this._z=p*s+r*this._z,this.normalize(),this}const u=Math.sqrt(c),d=Math.atan2(u,l),f=Math.sin((1-r)*d)/u,h=Math.sin(r*d)/u;return this._w=a*f+this._w*h,this._x=i*f+this._x*h,this._y=o*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,r,i){return this.copy(e).slerp(r,i)}random(){const e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),i=Math.random(),o=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(o*Math.sin(e),o*Math.cos(e),s*Math.sin(r),s*Math.cos(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,r=0,i=0){K.prototype.isVector3=!0,this.x=e,this.y=r,this.z=i}set(e,r,i){return i===void 0&&(i=this.z),this.x=e,this.y=r,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(rP.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(rP.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,i=this.y,o=this.z,s=e.elements;return this.x=s[0]*r+s[3]*i+s[6]*o,this.y=s[1]*r+s[4]*i+s[7]*o,this.z=s[2]*r+s[5]*i+s[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,i=this.y,o=this.z,s=e.elements,a=1/(s[3]*r+s[7]*i+s[11]*o+s[15]);return this.x=(s[0]*r+s[4]*i+s[8]*o+s[12])*a,this.y=(s[1]*r+s[5]*i+s[9]*o+s[13])*a,this.z=(s[2]*r+s[6]*i+s[10]*o+s[14])*a,this}applyQuaternion(e){const r=this.x,i=this.y,o=this.z,s=e.x,a=e.y,l=e.z,c=e.w,u=2*(a*o-l*i),d=2*(l*r-s*o),f=2*(s*i-a*r);return this.x=r+c*u+a*f-l*d,this.y=i+c*d+l*u-s*f,this.z=o+c*f+s*d-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,i=this.y,o=this.z,s=e.elements;return this.x=s[0]*r+s[4]*i+s[8]*o,this.y=s[1]*r+s[5]*i+s[9]*o,this.z=s[2]*r+s[6]*i+s[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Jt(this.x,e.x,r.x),this.y=Jt(this.y,e.y,r.y),this.z=Jt(this.z,e.z,r.z),this}clampScalar(e,r){return this.x=Jt(this.x,e,r),this.y=Jt(this.y,e,r),this.z=Jt(this.z,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this.z=e.z+(r.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const i=e.x,o=e.y,s=e.z,a=r.x,l=r.y,c=r.z;return this.x=o*c-s*l,this.y=s*a-i*c,this.z=i*l-o*a,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const i=e.dot(this)/r;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Bb.copy(this).projectOnVector(e),this.sub(Bb)}reflect(e){return this.sub(Bb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const i=this.dot(e)/r;return Math.acos(Jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,i=this.y-e.y,o=this.z-e.z;return r*r+i*i+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,i){const o=Math.sin(r)*e;return this.x=o*Math.sin(i),this.y=Math.cos(r)*e,this.z=o*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,i){return this.x=e*Math.sin(r),this.y=i,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=i,this.z=o,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,r=Math.random()*2-1,i=Math.sqrt(1-r*r);return this.x=i*Math.cos(e),this.y=r,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Bb=new K,rP=new Xs;class wu{constructor(e=new K(1/0,1/0,1/0),r=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){this.makeEmpty();for(let r=0,i=e.length;r<i;r+=3)this.expandByPoint(Qo.fromArray(e,r));return this}setFromBufferAttribute(e){this.makeEmpty();for(let r=0,i=e.count;r<i;r++)this.expandByPoint(Qo.fromBufferAttribute(e,r));return this}setFromPoints(e){this.makeEmpty();for(let r=0,i=e.length;r<i;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const i=Qo.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(r===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=s.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,Qo):Qo.fromBufferAttribute(s,a),Qo.applyMatrix4(e.matrixWorld),this.expandByPoint(Qo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Hg.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Hg.copy(i.boundingBox)),Hg.applyMatrix4(e.matrixWorld),this.union(Hg)}const o=e.children;for(let s=0,a=o.length;s<a;s++)this.expandByObject(o[s],r);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Qo),Qo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,i;return e.normal.x>0?(r=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),r<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(yh),jg.subVectors(this.max,yh),zu.subVectors(e.a,yh),ku.subVectors(e.b,yh),Vu.subVectors(e.c,yh),ol.subVectors(ku,zu),sl.subVectors(Vu,ku),pc.subVectors(zu,Vu);let r=[0,-ol.z,ol.y,0,-sl.z,sl.y,0,-pc.z,pc.y,ol.z,0,-ol.x,sl.z,0,-sl.x,pc.z,0,-pc.x,-ol.y,ol.x,0,-sl.y,sl.x,0,-pc.y,pc.x,0];return!$b(r,zu,ku,Vu,jg)||(r=[1,0,0,0,1,0,0,0,1],!$b(r,zu,ku,Vu,jg))?!1:(Wg.crossVectors(ol,sl),r=[Wg.x,Wg.y,Wg.z],$b(r,zu,ku,Vu,jg))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Qo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Qo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ra[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ra[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ra[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ra[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ra[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ra[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ra[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ra[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ra),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ra=[new K,new K,new K,new K,new K,new K,new K,new K],Qo=new K,Hg=new wu,zu=new K,ku=new K,Vu=new K,ol=new K,sl=new K,pc=new K,yh=new K,jg=new K,Wg=new K,mc=new K;function $b(n,e,r,i,o){for(let s=0,a=n.length-3;s<=a;s+=3){mc.fromArray(n,s);const l=o.x*Math.abs(mc.x)+o.y*Math.abs(mc.y)+o.z*Math.abs(mc.z),c=e.dot(mc),u=r.dot(mc),d=i.dot(mc);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>l)return!1}return!0}const Gee=new wu,_h=new K,zb=new K;class j_{constructor(e=new K,r=-1){this.isSphere=!0,this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const i=this.center;r!==void 0?i.copy(r):Gee.setFromPoints(e).getCenter(i);let o=0;for(let s=0,a=e.length;s<a;s++)o=Math.max(o,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const i=this.center.distanceToSquared(e);return r.copy(e),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_h.subVectors(e,this.center);const r=_h.lengthSq();if(r>this.radius*this.radius){const i=Math.sqrt(r),o=(i-this.radius)*.5;this.center.addScaledVector(_h,o/i),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_h.copy(e.center).add(zb)),this.expandByPoint(_h.copy(e.center).sub(zb))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ia=new K,kb=new K,qg=new K,al=new K,Vb=new K,Xg=new K,Gb=new K;class W_{constructor(e=new K,r=new K(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ia)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const i=r.dot(this.direction);return i<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=ia.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(ia.copy(this.origin).addScaledVector(this.direction,r),ia.distanceToSquared(e))}distanceSqToSegment(e,r,i,o){kb.copy(e).add(r).multiplyScalar(.5),qg.copy(r).sub(e).normalize(),al.copy(this.origin).sub(kb);const s=e.distanceTo(r)*.5,a=-this.direction.dot(qg),l=al.dot(this.direction),c=-al.dot(qg),u=al.lengthSq(),d=Math.abs(1-a*a);let f,h,p,g;if(d>0)if(f=a*c-l,h=a*l-c,g=s*d,f>=0)if(h>=-g)if(h<=g){const y=1/d;f*=y,h*=y,p=f*(f+a*h+2*l)+h*(a*f+h+2*c)+u}else h=s,f=Math.max(0,-(a*h+l)),p=-f*f+h*(h+2*c)+u;else h=-s,f=Math.max(0,-(a*h+l)),p=-f*f+h*(h+2*c)+u;else h<=-g?(f=Math.max(0,-(-a*s+l)),h=f>0?-s:Math.min(Math.max(-s,-c),s),p=-f*f+h*(h+2*c)+u):h<=g?(f=0,h=Math.min(Math.max(-s,-c),s),p=h*(h+2*c)+u):(f=Math.max(0,-(a*s+l)),h=f>0?s:Math.min(Math.max(-s,-c),s),p=-f*f+h*(h+2*c)+u);else h=a>0?-s:s,f=Math.max(0,-(a*h+l)),p=-f*f+h*(h+2*c)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,f),o&&o.copy(kb).addScaledVector(qg,h),p}intersectSphere(e,r){ia.subVectors(e.center,this.origin);const i=ia.dot(this.direction),o=ia.dot(ia)-i*i,s=e.radius*e.radius;if(o>s)return null;const a=Math.sqrt(s-o),l=i-a,c=i+a;return c<0?null:l<0?this.at(c,r):this.at(l,r)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/r;return i>=0?i:null}intersectPlane(e,r){const i=this.distanceToPlane(e);return i===null?null:this.at(i,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let i,o,s,a,l,c;const u=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(i=(e.min.x-h.x)*u,o=(e.max.x-h.x)*u):(i=(e.max.x-h.x)*u,o=(e.min.x-h.x)*u),d>=0?(s=(e.min.y-h.y)*d,a=(e.max.y-h.y)*d):(s=(e.max.y-h.y)*d,a=(e.min.y-h.y)*d),i>a||s>o||((s>i||isNaN(i))&&(i=s),(a<o||isNaN(o))&&(o=a),f>=0?(l=(e.min.z-h.z)*f,c=(e.max.z-h.z)*f):(l=(e.max.z-h.z)*f,c=(e.min.z-h.z)*f),i>c||l>o)||((l>i||i!==i)&&(i=l),(c<o||o!==o)&&(o=c),o<0)?null:this.at(i>=0?i:o,r)}intersectsBox(e){return this.intersectBox(e,ia)!==null}intersectTriangle(e,r,i,o,s){Vb.subVectors(r,e),Xg.subVectors(i,e),Gb.crossVectors(Vb,Xg);let a=this.direction.dot(Gb),l;if(a>0){if(o)return null;l=1}else if(a<0)l=-1,a=-a;else return null;al.subVectors(this.origin,e);const c=l*this.direction.dot(Xg.crossVectors(al,Xg));if(c<0)return null;const u=l*this.direction.dot(Vb.cross(al));if(u<0||c+u>a)return null;const d=-l*al.dot(Gb);return d<0?null:this.at(d/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class fn{constructor(e,r,i,o,s,a,l,c,u,d,f,h,p,g,y,v){fn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,r,i,o,s,a,l,c,u,d,f,h,p,g,y,v)}set(e,r,i,o,s,a,l,c,u,d,f,h,p,g,y,v){const m=this.elements;return m[0]=e,m[4]=r,m[8]=i,m[12]=o,m[1]=s,m[5]=a,m[9]=l,m[13]=c,m[2]=u,m[6]=d,m[10]=f,m[14]=h,m[3]=p,m[7]=g,m[11]=y,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new fn().fromArray(this.elements)}copy(e){const r=this.elements,i=e.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],this}copyPosition(e){const r=this.elements,i=e.elements;return r[12]=i[12],r[13]=i[13],r[14]=i[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,i){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,r,i){return this.set(e.x,r.x,i.x,0,e.y,r.y,i.y,0,e.z,r.z,i.z,0,0,0,0,1),this}extractRotation(e){const r=this.elements,i=e.elements,o=1/Gu.setFromMatrixColumn(e,0).length(),s=1/Gu.setFromMatrixColumn(e,1).length(),a=1/Gu.setFromMatrixColumn(e,2).length();return r[0]=i[0]*o,r[1]=i[1]*o,r[2]=i[2]*o,r[3]=0,r[4]=i[4]*s,r[5]=i[5]*s,r[6]=i[6]*s,r[7]=0,r[8]=i[8]*a,r[9]=i[9]*a,r[10]=i[10]*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){const r=this.elements,i=e.x,o=e.y,s=e.z,a=Math.cos(i),l=Math.sin(i),c=Math.cos(o),u=Math.sin(o),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=a*d,p=a*f,g=l*d,y=l*f;r[0]=c*d,r[4]=-c*f,r[8]=u,r[1]=p+g*u,r[5]=h-y*u,r[9]=-l*c,r[2]=y-h*u,r[6]=g+p*u,r[10]=a*c}else if(e.order==="YXZ"){const h=c*d,p=c*f,g=u*d,y=u*f;r[0]=h+y*l,r[4]=g*l-p,r[8]=a*u,r[1]=a*f,r[5]=a*d,r[9]=-l,r[2]=p*l-g,r[6]=y+h*l,r[10]=a*c}else if(e.order==="ZXY"){const h=c*d,p=c*f,g=u*d,y=u*f;r[0]=h-y*l,r[4]=-a*f,r[8]=g+p*l,r[1]=p+g*l,r[5]=a*d,r[9]=y-h*l,r[2]=-a*u,r[6]=l,r[10]=a*c}else if(e.order==="ZYX"){const h=a*d,p=a*f,g=l*d,y=l*f;r[0]=c*d,r[4]=g*u-p,r[8]=h*u+y,r[1]=c*f,r[5]=y*u+h,r[9]=p*u-g,r[2]=-u,r[6]=l*c,r[10]=a*c}else if(e.order==="YZX"){const h=a*c,p=a*u,g=l*c,y=l*u;r[0]=c*d,r[4]=y-h*f,r[8]=g*f+p,r[1]=f,r[5]=a*d,r[9]=-l*d,r[2]=-u*d,r[6]=p*f+g,r[10]=h-y*f}else if(e.order==="XZY"){const h=a*c,p=a*u,g=l*c,y=l*u;r[0]=c*d,r[4]=-f,r[8]=u*d,r[1]=h*f+y,r[5]=a*d,r[9]=p*f-g,r[2]=g*f-p,r[6]=l*d,r[10]=y*f+h}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Hee,e,jee)}lookAt(e,r,i){const o=this.elements;return oo.subVectors(e,r),oo.lengthSq()===0&&(oo.z=1),oo.normalize(),ll.crossVectors(i,oo),ll.lengthSq()===0&&(Math.abs(i.z)===1?oo.x+=1e-4:oo.z+=1e-4,oo.normalize(),ll.crossVectors(i,oo)),ll.normalize(),Kg.crossVectors(oo,ll),o[0]=ll.x,o[4]=Kg.x,o[8]=oo.x,o[1]=ll.y,o[5]=Kg.y,o[9]=oo.y,o[2]=ll.z,o[6]=Kg.z,o[10]=oo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const i=e.elements,o=r.elements,s=this.elements,a=i[0],l=i[4],c=i[8],u=i[12],d=i[1],f=i[5],h=i[9],p=i[13],g=i[2],y=i[6],v=i[10],m=i[14],_=i[3],x=i[7],S=i[11],w=i[15],E=o[0],C=o[4],T=o[8],M=o[12],R=o[1],P=o[5],D=o[9],F=o[13],A=o[2],I=o[6],N=o[10],L=o[14],O=o[3],V=o[7],B=o[11],z=o[15];return s[0]=a*E+l*R+c*A+u*O,s[4]=a*C+l*P+c*I+u*V,s[8]=a*T+l*D+c*N+u*B,s[12]=a*M+l*F+c*L+u*z,s[1]=d*E+f*R+h*A+p*O,s[5]=d*C+f*P+h*I+p*V,s[9]=d*T+f*D+h*N+p*B,s[13]=d*M+f*F+h*L+p*z,s[2]=g*E+y*R+v*A+m*O,s[6]=g*C+y*P+v*I+m*V,s[10]=g*T+y*D+v*N+m*B,s[14]=g*M+y*F+v*L+m*z,s[3]=_*E+x*R+S*A+w*O,s[7]=_*C+x*P+S*I+w*V,s[11]=_*T+x*D+S*N+w*B,s[15]=_*M+x*F+S*L+w*z,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],i=e[4],o=e[8],s=e[12],a=e[1],l=e[5],c=e[9],u=e[13],d=e[2],f=e[6],h=e[10],p=e[14],g=e[3],y=e[7],v=e[11],m=e[15];return g*(+s*c*f-o*u*f-s*l*h+i*u*h+o*l*p-i*c*p)+y*(+r*c*p-r*u*h+s*a*h-o*a*p+o*u*d-s*c*d)+v*(+r*u*f-r*l*p-s*a*f+i*a*p+s*l*d-i*u*d)+m*(-o*l*d-r*c*f+r*l*h+o*a*f-i*a*h+i*c*d)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,i){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=r,o[14]=i),this}invert(){const e=this.elements,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],g=e[12],y=e[13],v=e[14],m=e[15],_=f*v*u-y*h*u+y*c*p-l*v*p-f*c*m+l*h*m,x=g*h*u-d*v*u-g*c*p+a*v*p+d*c*m-a*h*m,S=d*y*u-g*f*u+g*l*p-a*y*p-d*l*m+a*f*m,w=g*f*c-d*y*c-g*l*h+a*y*h+d*l*v-a*f*v,E=r*_+i*x+o*S+s*w;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/E;return e[0]=_*C,e[1]=(y*h*s-f*v*s-y*o*p+i*v*p+f*o*m-i*h*m)*C,e[2]=(l*v*s-y*c*s+y*o*u-i*v*u-l*o*m+i*c*m)*C,e[3]=(f*c*s-l*h*s-f*o*u+i*h*u+l*o*p-i*c*p)*C,e[4]=x*C,e[5]=(d*v*s-g*h*s+g*o*p-r*v*p-d*o*m+r*h*m)*C,e[6]=(g*c*s-a*v*s-g*o*u+r*v*u+a*o*m-r*c*m)*C,e[7]=(a*h*s-d*c*s+d*o*u-r*h*u-a*o*p+r*c*p)*C,e[8]=S*C,e[9]=(g*f*s-d*y*s-g*i*p+r*y*p+d*i*m-r*f*m)*C,e[10]=(a*y*s-g*l*s+g*i*u-r*y*u-a*i*m+r*l*m)*C,e[11]=(d*l*s-a*f*s-d*i*u+r*f*u+a*i*p-r*l*p)*C,e[12]=w*C,e[13]=(d*y*o-g*f*o+g*i*h-r*y*h-d*i*v+r*f*v)*C,e[14]=(g*l*o-a*y*o-g*i*c+r*y*c+a*i*v-r*l*v)*C,e[15]=(a*f*o-d*l*o+d*i*c-r*f*c-a*i*h+r*l*h)*C,this}scale(e){const r=this.elements,i=e.x,o=e.y,s=e.z;return r[0]*=i,r[4]*=o,r[8]*=s,r[1]*=i,r[5]*=o,r[9]*=s,r[2]*=i,r[6]*=o,r[10]*=s,r[3]*=i,r[7]*=o,r[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,i,o))}makeTranslation(e,r,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,r,0,0,1,i,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const i=Math.cos(r),o=Math.sin(r),s=1-i,a=e.x,l=e.y,c=e.z,u=s*a,d=s*l;return this.set(u*a+i,u*l-o*c,u*c+o*l,0,u*l+o*c,d*l+i,d*c-o*a,0,u*c-o*l,d*c+o*a,s*c*c+i,0,0,0,0,1),this}makeScale(e,r,i){return this.set(e,0,0,0,0,r,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,r,i,o,s,a){return this.set(1,i,s,0,e,1,a,0,r,o,1,0,0,0,0,1),this}compose(e,r,i){const o=this.elements,s=r._x,a=r._y,l=r._z,c=r._w,u=s+s,d=a+a,f=l+l,h=s*u,p=s*d,g=s*f,y=a*d,v=a*f,m=l*f,_=c*u,x=c*d,S=c*f,w=i.x,E=i.y,C=i.z;return o[0]=(1-(y+m))*w,o[1]=(p+S)*w,o[2]=(g-x)*w,o[3]=0,o[4]=(p-S)*E,o[5]=(1-(h+m))*E,o[6]=(v+_)*E,o[7]=0,o[8]=(g+x)*C,o[9]=(v-_)*C,o[10]=(1-(h+y))*C,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,r,i){const o=this.elements;let s=Gu.set(o[0],o[1],o[2]).length();const a=Gu.set(o[4],o[5],o[6]).length(),l=Gu.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),e.x=o[12],e.y=o[13],e.z=o[14],Zo.copy(this);const u=1/s,d=1/a,f=1/l;return Zo.elements[0]*=u,Zo.elements[1]*=u,Zo.elements[2]*=u,Zo.elements[4]*=d,Zo.elements[5]*=d,Zo.elements[6]*=d,Zo.elements[8]*=f,Zo.elements[9]*=f,Zo.elements[10]*=f,r.setFromRotationMatrix(Zo),i.x=s,i.y=a,i.z=l,this}makePerspective(e,r,i,o,s,a,l=Bo){const c=this.elements,u=2*s/(r-e),d=2*s/(i-o),f=(r+e)/(r-e),h=(i+o)/(i-o);let p,g;if(l===Bo)p=-(a+s)/(a-s),g=-2*a*s/(a-s);else if(l===fu)p=-a/(a-s),g=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=d,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=p,c[14]=g,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,r,i,o,s,a,l=Bo){const c=this.elements,u=1/(r-e),d=1/(i-o),f=1/(a-s),h=(r+e)*u,p=(i+o)*d;let g,y;if(l===Bo)g=(a+s)*f,y=-2*f;else if(l===fu)g=s*f,y=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=y,c[14]=-g,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const r=this.elements,i=e.elements;for(let o=0;o<16;o++)if(r[o]!==i[o])return!1;return!0}fromArray(e,r=0){for(let i=0;i<16;i++)this.elements[i]=e[i+r];return this}toArray(e=[],r=0){const i=this.elements;return e[r]=i[0],e[r+1]=i[1],e[r+2]=i[2],e[r+3]=i[3],e[r+4]=i[4],e[r+5]=i[5],e[r+6]=i[6],e[r+7]=i[7],e[r+8]=i[8],e[r+9]=i[9],e[r+10]=i[10],e[r+11]=i[11],e[r+12]=i[12],e[r+13]=i[13],e[r+14]=i[14],e[r+15]=i[15],e}}const Gu=new K,Zo=new fn,Hee=new K(0,0,0),jee=new K(1,1,1),ll=new K,Kg=new K,oo=new K,iP=new fn,oP=new Xs;class xo{constructor(e=0,r=0,i=0,o=xo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=r,this._z=i,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,i,o=this._order){return this._x=e,this._y=r,this._z=i,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,i=!0){const o=e.elements,s=o[0],a=o[4],l=o[8],c=o[1],u=o[5],d=o[9],f=o[2],h=o[6],p=o[10];switch(r){case"XYZ":this._y=Math.asin(Jt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Jt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Jt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Jt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Jt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-Jt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,r,i){return iP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iP,r,i)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return oP.setFromEuler(this),this.setFromQuaternion(oP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}xo.DEFAULT_ORDER="XYZ";class cM{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Wee=0;const sP=new K,Hu=new Xs,oa=new fn,Yg=new K,xh=new K,qee=new K,Xee=new Xs,aP=new K(1,0,0),lP=new K(0,1,0),cP=new K(0,0,1),uP={type:"added"},Kee={type:"removed"},ju={type:"childadded",child:null},Hb={type:"childremoved",child:null};class Er extends sc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Wee++}),this.uuid=Pa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Er.DEFAULT_UP.clone();const e=new K,r=new xo,i=new Xs,o=new K(1,1,1);function s(){i.setFromEuler(r,!1)}function a(){r.setFromQuaternion(i,void 0,!1)}r._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new fn},normalMatrix:{value:new kt}}),this.matrix=new fn,this.matrixWorld=new fn,this.matrixAutoUpdate=Er.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Er.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new cM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return Hu.setFromAxisAngle(e,r),this.quaternion.multiply(Hu),this}rotateOnWorldAxis(e,r){return Hu.setFromAxisAngle(e,r),this.quaternion.premultiply(Hu),this}rotateX(e){return this.rotateOnAxis(aP,e)}rotateY(e){return this.rotateOnAxis(lP,e)}rotateZ(e){return this.rotateOnAxis(cP,e)}translateOnAxis(e,r){return sP.copy(e).applyQuaternion(this.quaternion),this.position.add(sP.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(aP,e)}translateY(e){return this.translateOnAxis(lP,e)}translateZ(e){return this.translateOnAxis(cP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(oa.copy(this.matrixWorld).invert())}lookAt(e,r,i){e.isVector3?Yg.copy(e):Yg.set(e,r,i);const o=this.parent;this.updateWorldMatrix(!0,!1),xh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?oa.lookAt(xh,Yg,this.up):oa.lookAt(Yg,xh,this.up),this.quaternion.setFromRotationMatrix(oa),o&&(oa.extractRotation(o.matrixWorld),Hu.setFromRotationMatrix(oa),this.quaternion.premultiply(Hu.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(uP),ju.child=e,this.dispatchEvent(ju),ju.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const r=this.children.indexOf(e);return r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(Kee),Hb.child=e,this.dispatchEvent(Hb),Hb.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),oa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),oa.multiply(e.parent.matrixWorld)),e.applyMatrix4(oa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(uP),ju.child=e,this.dispatchEvent(ju),ju.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let i=0,o=this.children.length;i<o;i++){const a=this.children[i].getObjectByProperty(e,r);if(a!==void 0)return a}}getObjectsByProperty(e,r,i=[]){this[e]===r&&i.push(this);const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(e,r,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xh,e,qee),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xh,Xee,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].traverseVisible(e)}traverseAncestors(e){const r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(e)}updateWorldMatrix(e,r){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(e){const r=e===void 0||typeof e=="string",i={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){const f=c[u];s(e.shapes,f)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(s(e.materials,this.material[c]));o.material=l}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];o.animations.push(s(e.animations,c))}}if(r){const l=a(e.geometries),c=a(e.materials),u=a(e.textures),d=a(e.images),f=a(e.shapes),h=a(e.skeletons),p=a(e.animations),g=a(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),u.length>0&&(i.textures=u),d.length>0&&(i.images=d),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=o,i;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(let i=0;i<e.children.length;i++){const o=e.children[i];this.add(o.clone())}return this}}Er.DEFAULT_UP=new K(0,1,0);Er.DEFAULT_MATRIX_AUTO_UPDATE=!0;Er.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Jo=new K,sa=new K,jb=new K,aa=new K,Wu=new K,qu=new K,dP=new K,Wb=new K,qb=new K,Xb=new K,Kb=new Wt,Yb=new Wt,Qb=new Wt;class us{constructor(e=new K,r=new K,i=new K){this.a=e,this.b=r,this.c=i}static getNormal(e,r,i,o){o.subVectors(i,r),Jo.subVectors(e,r),o.cross(Jo);const s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}static getBarycoord(e,r,i,o,s){Jo.subVectors(o,r),sa.subVectors(i,r),jb.subVectors(e,r);const a=Jo.dot(Jo),l=Jo.dot(sa),c=Jo.dot(jb),u=sa.dot(sa),d=sa.dot(jb),f=a*u-l*l;if(f===0)return s.set(0,0,0),null;const h=1/f,p=(u*c-l*d)*h,g=(a*d-l*c)*h;return s.set(1-p-g,g,p)}static containsPoint(e,r,i,o){return this.getBarycoord(e,r,i,o,aa)===null?!1:aa.x>=0&&aa.y>=0&&aa.x+aa.y<=1}static getInterpolation(e,r,i,o,s,a,l,c){return this.getBarycoord(e,r,i,o,aa)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,aa.x),c.addScaledVector(a,aa.y),c.addScaledVector(l,aa.z),c)}static getInterpolatedAttribute(e,r,i,o,s,a){return Kb.setScalar(0),Yb.setScalar(0),Qb.setScalar(0),Kb.fromBufferAttribute(e,r),Yb.fromBufferAttribute(e,i),Qb.fromBufferAttribute(e,o),a.setScalar(0),a.addScaledVector(Kb,s.x),a.addScaledVector(Yb,s.y),a.addScaledVector(Qb,s.z),a}static isFrontFacing(e,r,i,o){return Jo.subVectors(i,r),sa.subVectors(e,r),Jo.cross(sa).dot(o)<0}set(e,r,i){return this.a.copy(e),this.b.copy(r),this.c.copy(i),this}setFromPointsAndIndices(e,r,i,o){return this.a.copy(e[r]),this.b.copy(e[i]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,r,i,o){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Jo.subVectors(this.c,this.b),sa.subVectors(this.a,this.b),Jo.cross(sa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return us.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return us.getBarycoord(e,this.a,this.b,this.c,r)}getInterpolation(e,r,i,o,s){return us.getInterpolation(e,this.a,this.b,this.c,r,i,o,s)}containsPoint(e){return us.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return us.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const i=this.a,o=this.b,s=this.c;let a,l;Wu.subVectors(o,i),qu.subVectors(s,i),Wb.subVectors(e,i);const c=Wu.dot(Wb),u=qu.dot(Wb);if(c<=0&&u<=0)return r.copy(i);qb.subVectors(e,o);const d=Wu.dot(qb),f=qu.dot(qb);if(d>=0&&f<=d)return r.copy(o);const h=c*f-d*u;if(h<=0&&c>=0&&d<=0)return a=c/(c-d),r.copy(i).addScaledVector(Wu,a);Xb.subVectors(e,s);const p=Wu.dot(Xb),g=qu.dot(Xb);if(g>=0&&p<=g)return r.copy(s);const y=p*u-c*g;if(y<=0&&u>=0&&g<=0)return l=u/(u-g),r.copy(i).addScaledVector(qu,l);const v=d*g-p*f;if(v<=0&&f-d>=0&&p-g>=0)return dP.subVectors(s,o),l=(f-d)/(f-d+(p-g)),r.copy(o).addScaledVector(dP,l);const m=1/(v+y+h);return a=y*m,l=h*m,r.copy(i).addScaledVector(Wu,a).addScaledVector(qu,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const P$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cl={h:0,s:0,l:0},Qg={h:0,s:0,l:0};function Zb(n,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+(e-n)*6*r:r<1/2?e:r<2/3?n+(e-n)*6*(2/3-r):n}let Tt=class{constructor(e,r,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,r,i)}set(e,r,i){if(r===void 0&&i===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,r,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=Dt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,rn.toWorkingColorSpace(this,r),this}setRGB(e,r,i,o=rn.workingColorSpace){return this.r=e,this.g=r,this.b=i,rn.toWorkingColorSpace(this,o),this}setHSL(e,r,i,o=rn.workingColorSpace){if(e=aM(e,1),r=Jt(r,0,1),i=Jt(i,0,1),r===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+r):i+r-i*r,a=2*i-s;this.r=Zb(a,s,e+1/3),this.g=Zb(a,s,e),this.b=Zb(a,s,e-1/3)}return rn.toWorkingColorSpace(this,o),this}setStyle(e,r=Dt){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=o[1],l=o[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,r);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,r);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=o[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,r);if(a===6)return this.setHex(parseInt(s,16),r);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,r);return this}setColorName(e,r=Dt){const i=P$[e.toLowerCase()];return i!==void 0?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Oa(e.r),this.g=Oa(e.g),this.b=Oa(e.b),this}copyLinearToSRGB(e){return this.r=Ud(e.r),this.g=Ud(e.g),this.b=Ud(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Dt){return rn.fromWorkingColorSpace(ci.copy(this),e),Math.round(Jt(ci.r*255,0,255))*65536+Math.round(Jt(ci.g*255,0,255))*256+Math.round(Jt(ci.b*255,0,255))}getHexString(e=Dt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=rn.workingColorSpace){rn.fromWorkingColorSpace(ci.copy(this),r);const i=ci.r,o=ci.g,s=ci.b,a=Math.max(i,o,s),l=Math.min(i,o,s);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const f=a-l;switch(u=d<=.5?f/(a+l):f/(2-a-l),a){case i:c=(o-s)/f+(o<s?6:0);break;case o:c=(s-i)/f+2;break;case s:c=(i-o)/f+4;break}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,r=rn.workingColorSpace){return rn.fromWorkingColorSpace(ci.copy(this),r),e.r=ci.r,e.g=ci.g,e.b=ci.b,e}getStyle(e=Dt){rn.fromWorkingColorSpace(ci.copy(this),e);const r=ci.r,i=ci.g,o=ci.b;return e!==Dt?`color(${e} ${r.toFixed(3)} ${i.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(i*255)},${Math.round(o*255)})`}offsetHSL(e,r,i){return this.getHSL(cl),this.setHSL(cl.h+e,cl.s+r,cl.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,i){return this.r=e.r+(r.r-e.r)*i,this.g=e.g+(r.g-e.g)*i,this.b=e.b+(r.b-e.b)*i,this}lerpHSL(e,r){this.getHSL(cl),e.getHSL(Qg);const i=_p(cl.h,Qg.h,r),o=_p(cl.s,Qg.s,r),s=_p(cl.l,Qg.l,r);return this.setHSL(i,o,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const r=this.r,i=this.g,o=this.b,s=e.elements;return this.r=s[0]*r+s[3]*i+s[6]*o,this.g=s[1]*r+s[4]*i+s[7]*o,this.b=s[2]*r+s[5]*i+s[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const ci=new Tt;Tt.NAMES=P$;let Yee=0;class mi extends sc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Yee++}),this.uuid=Pa(),this.name="",this.type="Material",this.blending=zo,this.side=Ss,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=em,this.blendDst=tm,this.blendEquation=po,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Tt(0,0,0),this.blendAlpha=0,this.depthFunc=Yl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=gE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ec,this.stencilZFail=Ec,this.stencilZPass=Ec,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const r in e){const i=e[r];if(i===void 0){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const o=this[r];if(o===void 0){console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[r]=i}}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==zo&&(i.blending=this.blending),this.side!==Ss&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==em&&(i.blendSrc=this.blendSrc),this.blendDst!==tm&&(i.blendDst=this.blendDst),this.blendEquation!==po&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Yl&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==gE&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ec&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Ec&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Ec&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function o(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}if(r){const s=o(e.textures),a=o(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const r=e.clippingPlanes;let i=null;if(r!==null){const o=r.length;i=new Array(o);for(let s=0;s!==o;++s)i[s]=r[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Qf extends mi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xo,this.combine=Km,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const _a=Qee();function Qee(){const n=new ArrayBuffer(4),e=new Float32Array(n),r=new Uint32Array(n),i=new Uint32Array(512),o=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(i[c]=0,i[c|256]=32768,o[c]=24,o[c|256]=24):u<-14?(i[c]=1024>>-u-14,i[c|256]=1024>>-u-14|32768,o[c]=-u-1,o[c|256]=-u-1):u<=15?(i[c]=u+15<<10,i[c|256]=u+15<<10|32768,o[c]=13,o[c|256]=13):u<128?(i[c]=31744,i[c|256]=64512,o[c]=24,o[c|256]=24):(i[c]=31744,i[c|256]=64512,o[c]=13,o[c|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[c]=u|d}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:r,baseTable:i,shiftTable:o,mantissaTable:s,exponentTable:a,offsetTable:l}}function so(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Jt(n,-65504,65504),_a.floatView[0]=n;const e=_a.uint32View[0],r=e>>23&511;return _a.baseTable[r]+((e&8388607)>>_a.shiftTable[r])}function Zg(n){const e=n>>10;return _a.uint32View[0]=_a.mantissaTable[_a.offsetTable[e]+(n&1023)]+_a.exponentTable[e],_a.floatView[0]}const vr=new K,Jg=new je;class ri{constructor(e,r,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=r,this.count=e!==void 0?e.length/r:0,this.normalized=i,this.usage=uy,this.updateRanges=[],this.gpuType=hr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,r,i){e*=this.itemSize,i*=r.itemSize;for(let o=0,s=this.itemSize;o<s;o++)this.array[e+o]=r.array[i+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let r=0,i=this.count;r<i;r++)Jg.fromBufferAttribute(this,r),Jg.applyMatrix3(e),this.setXY(r,Jg.x,Jg.y);else if(this.itemSize===3)for(let r=0,i=this.count;r<i;r++)vr.fromBufferAttribute(this,r),vr.applyMatrix3(e),this.setXYZ(r,vr.x,vr.y,vr.z);return this}applyMatrix4(e){for(let r=0,i=this.count;r<i;r++)vr.fromBufferAttribute(this,r),vr.applyMatrix4(e),this.setXYZ(r,vr.x,vr.y,vr.z);return this}applyNormalMatrix(e){for(let r=0,i=this.count;r<i;r++)vr.fromBufferAttribute(this,r),vr.applyNormalMatrix(e),this.setXYZ(r,vr.x,vr.y,vr.z);return this}transformDirection(e){for(let r=0,i=this.count;r<i;r++)vr.fromBufferAttribute(this,r),vr.transformDirection(e),this.setXYZ(r,vr.x,vr.y,vr.z);return this}set(e,r=0){return this.array.set(e,r),this}getComponent(e,r){let i=this.array[e*this.itemSize+r];return this.normalized&&(i=Ei(i,this.array)),i}setComponent(e,r,i){return this.normalized&&(i=Zt(i,this.array)),this.array[e*this.itemSize+r]=i,this}getX(e){let r=this.array[e*this.itemSize];return this.normalized&&(r=Ei(r,this.array)),r}setX(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize]=r,this}getY(e){let r=this.array[e*this.itemSize+1];return this.normalized&&(r=Ei(r,this.array)),r}setY(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+1]=r,this}getZ(e){let r=this.array[e*this.itemSize+2];return this.normalized&&(r=Ei(r,this.array)),r}setZ(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+2]=r,this}getW(e){let r=this.array[e*this.itemSize+3];return this.normalized&&(r=Ei(r,this.array)),r}setW(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+3]=r,this}setXY(e,r,i){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array)),this.array[e+0]=r,this.array[e+1]=i,this}setXYZ(e,r,i,o){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array)),this.array[e+0]=r,this.array[e+1]=i,this.array[e+2]=o,this}setXYZW(e,r,i,o,s){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array),s=Zt(s,this.array)),this.array[e+0]=r,this.array[e+1]=i,this.array[e+2]=o,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==uy&&(e.usage=this.usage),e}}class uM extends ri{constructor(e,r,i){super(new Uint16Array(e),r,i)}}class dM extends ri{constructor(e,r,i){super(new Uint32Array(e),r,i)}}class O$ extends ri{constructor(e,r,i){super(new Uint16Array(e),r,i),this.isFloat16BufferAttribute=!0}getX(e){let r=Zg(this.array[e*this.itemSize]);return this.normalized&&(r=Ei(r,this.array)),r}setX(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize]=so(r),this}getY(e){let r=Zg(this.array[e*this.itemSize+1]);return this.normalized&&(r=Ei(r,this.array)),r}setY(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+1]=so(r),this}getZ(e){let r=Zg(this.array[e*this.itemSize+2]);return this.normalized&&(r=Ei(r,this.array)),r}setZ(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+2]=so(r),this}getW(e){let r=Zg(this.array[e*this.itemSize+3]);return this.normalized&&(r=Ei(r,this.array)),r}setW(e,r){return this.normalized&&(r=Zt(r,this.array)),this.array[e*this.itemSize+3]=so(r),this}setXY(e,r,i){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array)),this.array[e+0]=so(r),this.array[e+1]=so(i),this}setXYZ(e,r,i,o){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array)),this.array[e+0]=so(r),this.array[e+1]=so(i),this.array[e+2]=so(o),this}setXYZW(e,r,i,o,s){return e*=this.itemSize,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array),s=Zt(s,this.array)),this.array[e+0]=so(r),this.array[e+1]=so(i),this.array[e+2]=so(o),this.array[e+3]=so(s),this}}class mr extends ri{constructor(e,r,i){super(new Float32Array(e),r,i)}}let Zee=0;const Ro=new fn,Jb=new Er,Xu=new K,ao=new wu,bh=new wu,Wr=new K;class Di extends sc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Zee++}),this.uuid=Pa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(R$(e)?dM:uM)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,r,i=0){this.groups.push({start:e,count:r,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new kt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ro.makeRotationFromQuaternion(e),this.applyMatrix4(Ro),this}rotateX(e){return Ro.makeRotationX(e),this.applyMatrix4(Ro),this}rotateY(e){return Ro.makeRotationY(e),this.applyMatrix4(Ro),this}rotateZ(e){return Ro.makeRotationZ(e),this.applyMatrix4(Ro),this}translate(e,r,i){return Ro.makeTranslation(e,r,i),this.applyMatrix4(Ro),this}scale(e,r,i){return Ro.makeScale(e,r,i),this.applyMatrix4(Ro),this}lookAt(e){return Jb.lookAt(e),Jb.updateMatrix(),this.applyMatrix4(Jb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xu).negate(),this.translate(Xu.x,Xu.y,Xu.z),this}setFromPoints(e){const r=this.getAttribute("position");if(r===void 0){const i=[];for(let o=0,s=e.length;o<s;o++){const a=e[o];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new mr(i,3))}else{const i=Math.min(e.length,r.count);for(let o=0;o<i;o++){const s=e[o];r.setXYZ(o,s.x,s.y,s.z||0)}e.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new wu);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r)for(let i=0,o=r.length;i<o;i++){const s=r[i];ao.setFromBufferAttribute(s),this.morphTargetsRelative?(Wr.addVectors(this.boundingBox.min,ao.min),this.boundingBox.expandByPoint(Wr),Wr.addVectors(this.boundingBox.max,ao.max),this.boundingBox.expandByPoint(Wr)):(this.boundingBox.expandByPoint(ao.min),this.boundingBox.expandByPoint(ao.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new j_);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){const i=this.boundingSphere.center;if(ao.setFromBufferAttribute(e),r)for(let s=0,a=r.length;s<a;s++){const l=r[s];bh.setFromBufferAttribute(l),this.morphTargetsRelative?(Wr.addVectors(ao.min,bh.min),ao.expandByPoint(Wr),Wr.addVectors(ao.max,bh.max),ao.expandByPoint(Wr)):(ao.expandByPoint(bh.min),ao.expandByPoint(bh.max))}ao.getCenter(i);let o=0;for(let s=0,a=e.count;s<a;s++)Wr.fromBufferAttribute(e,s),o=Math.max(o,i.distanceToSquared(Wr));if(r)for(let s=0,a=r.length;s<a;s++){const l=r[s],c=this.morphTargetsRelative;for(let u=0,d=l.count;u<d;u++)Wr.fromBufferAttribute(l,u),c&&(Xu.fromBufferAttribute(e,u),Wr.add(Xu)),o=Math.max(o,i.distanceToSquared(Wr))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(e===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=r.position,o=r.normal,s=r.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ri(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),l=[],c=[];for(let T=0;T<i.count;T++)l[T]=new K,c[T]=new K;const u=new K,d=new K,f=new K,h=new je,p=new je,g=new je,y=new K,v=new K;function m(T,M,R){u.fromBufferAttribute(i,T),d.fromBufferAttribute(i,M),f.fromBufferAttribute(i,R),h.fromBufferAttribute(s,T),p.fromBufferAttribute(s,M),g.fromBufferAttribute(s,R),d.sub(u),f.sub(u),p.sub(h),g.sub(h);const P=1/(p.x*g.y-g.x*p.y);isFinite(P)&&(y.copy(d).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(P),v.copy(f).multiplyScalar(p.x).addScaledVector(d,-g.x).multiplyScalar(P),l[T].add(y),l[M].add(y),l[R].add(y),c[T].add(v),c[M].add(v),c[R].add(v))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let T=0,M=_.length;T<M;++T){const R=_[T],P=R.start,D=R.count;for(let F=P,A=P+D;F<A;F+=3)m(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const x=new K,S=new K,w=new K,E=new K;function C(T){w.fromBufferAttribute(o,T),E.copy(w);const M=l[T];x.copy(M),x.sub(w.multiplyScalar(w.dot(M))).normalize(),S.crossVectors(E,M);const P=S.dot(c[T])<0?-1:1;a.setXYZW(T,x.x,x.y,x.z,P)}for(let T=0,M=_.length;T<M;++T){const R=_[T],P=R.start,D=R.count;for(let F=P,A=P+D;F<A;F+=3)C(e.getX(F+0)),C(e.getX(F+1)),C(e.getX(F+2))}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(r!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ri(new Float32Array(r.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const o=new K,s=new K,a=new K,l=new K,c=new K,u=new K,d=new K,f=new K;if(e)for(let h=0,p=e.count;h<p;h+=3){const g=e.getX(h+0),y=e.getX(h+1),v=e.getX(h+2);o.fromBufferAttribute(r,g),s.fromBufferAttribute(r,y),a.fromBufferAttribute(r,v),d.subVectors(a,s),f.subVectors(o,s),d.cross(f),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,y),u.fromBufferAttribute(i,v),l.add(d),c.add(d),u.add(d),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z),i.setXYZ(v,u.x,u.y,u.z)}else for(let h=0,p=r.count;h<p;h+=3)o.fromBufferAttribute(r,h+0),s.fromBufferAttribute(r,h+1),a.fromBufferAttribute(r,h+2),d.subVectors(a,s),f.subVectors(o,s),d.cross(f),i.setXYZ(h+0,d.x,d.y,d.z),i.setXYZ(h+1,d.x,d.y,d.z),i.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let r=0,i=e.count;r<i;r++)Wr.fromBufferAttribute(e,r),Wr.normalize(),e.setXYZ(r,Wr.x,Wr.y,Wr.z)}toNonIndexed(){function e(l,c){const u=l.array,d=l.itemSize,f=l.normalized,h=new u.constructor(c.length*d);let p=0,g=0;for(let y=0,v=c.length;y<v;y++){l.isInterleavedBufferAttribute?p=c[y]*l.data.stride+l.offset:p=c[y]*d;for(let m=0;m<d;m++)h[g++]=u[p++]}return new ri(h,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Di,i=this.index.array,o=this.attributes;for(const l in o){const c=o[l],u=e(c,i);r.setAttribute(l,u)}const s=this.morphAttributes;for(const l in s){const c=[],u=s[l];for(let d=0,f=u.length;d<f;d++){const h=u[d],p=e(h,i);c.push(p)}r.morphAttributes[l]=c}r.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addGroup(u.start,u.count,u.materialIndex)}return r}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const i=this.attributes;for(const c in i){const u=i[c];e.data.attributes[c]=u.toJSON(e.data)}const o={};let s=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],d=[];for(let f=0,h=u.length;f<h;f++){const p=u[f];d.push(p.toJSON(e.data))}d.length>0&&(o[c]=d,s=!0)}s&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(r));const o=e.attributes;for(const u in o){const d=o[u];this.setAttribute(u,d.clone(r))}const s=e.morphAttributes;for(const u in s){const d=[],f=s[u];for(let h=0,p=f.length;h<p;h++)d.push(f[h].clone(r));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,d=a.length;u<d;u++){const f=a[u];this.addGroup(f.start,f.count,f.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const fP=new fn,gc=new W_,ev=new j_,hP=new K,tv=new K,nv=new K,rv=new K,eS=new K,iv=new K,pP=new K,ov=new K;class Br extends Er{constructor(e=new Di,r=new Qf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const o=r[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=o.length;s<a;s++){const l=o[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,r){const i=this.geometry,o=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;r.fromBufferAttribute(o,e);const l=this.morphTargetInfluences;if(s&&l){iv.set(0,0,0);for(let c=0,u=s.length;c<u;c++){const d=l[c],f=s[c];d!==0&&(eS.fromBufferAttribute(f,e),a?iv.addScaledVector(eS,d):iv.addScaledVector(eS.sub(r),d))}r.add(iv)}return r}raycast(e,r){const i=this.geometry,o=this.material,s=this.matrixWorld;o!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),ev.copy(i.boundingSphere),ev.applyMatrix4(s),gc.copy(e.ray).recast(e.near),!(ev.containsPoint(gc.origin)===!1&&(gc.intersectSphere(ev,hP)===null||gc.origin.distanceToSquared(hP)>(e.far-e.near)**2))&&(fP.copy(s).invert(),gc.copy(e.ray).applyMatrix4(fP),!(i.boundingBox!==null&&gc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,r,gc)))}_computeIntersections(e,r,i){let o;const s=this.geometry,a=this.material,l=s.index,c=s.attributes.position,u=s.attributes.uv,d=s.attributes.uv1,f=s.attributes.normal,h=s.groups,p=s.drawRange;if(l!==null)if(Array.isArray(a))for(let g=0,y=h.length;g<y;g++){const v=h[g],m=a[v.materialIndex],_=Math.max(v.start,p.start),x=Math.min(l.count,Math.min(v.start+v.count,p.start+p.count));for(let S=_,w=x;S<w;S+=3){const E=l.getX(S),C=l.getX(S+1),T=l.getX(S+2);o=sv(this,m,e,i,u,d,f,E,C,T),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=v.materialIndex,r.push(o))}}else{const g=Math.max(0,p.start),y=Math.min(l.count,p.start+p.count);for(let v=g,m=y;v<m;v+=3){const _=l.getX(v),x=l.getX(v+1),S=l.getX(v+2);o=sv(this,a,e,i,u,d,f,_,x,S),o&&(o.faceIndex=Math.floor(v/3),r.push(o))}}else if(c!==void 0)if(Array.isArray(a))for(let g=0,y=h.length;g<y;g++){const v=h[g],m=a[v.materialIndex],_=Math.max(v.start,p.start),x=Math.min(c.count,Math.min(v.start+v.count,p.start+p.count));for(let S=_,w=x;S<w;S+=3){const E=S,C=S+1,T=S+2;o=sv(this,m,e,i,u,d,f,E,C,T),o&&(o.faceIndex=Math.floor(S/3),o.face.materialIndex=v.materialIndex,r.push(o))}}else{const g=Math.max(0,p.start),y=Math.min(c.count,p.start+p.count);for(let v=g,m=y;v<m;v+=3){const _=v,x=v+1,S=v+2;o=sv(this,a,e,i,u,d,f,_,x,S),o&&(o.faceIndex=Math.floor(v/3),r.push(o))}}}}function Jee(n,e,r,i,o,s,a,l){let c;if(e.side===er?c=i.intersectTriangle(a,s,o,!0,l):c=i.intersectTriangle(o,s,a,e.side===Ss,l),c===null)return null;ov.copy(l),ov.applyMatrix4(n.matrixWorld);const u=r.ray.origin.distanceTo(ov);return u<r.near||u>r.far?null:{distance:u,point:ov.clone(),object:n}}function sv(n,e,r,i,o,s,a,l,c,u){n.getVertexPosition(l,tv),n.getVertexPosition(c,nv),n.getVertexPosition(u,rv);const d=Jee(n,e,r,i,tv,nv,rv,pP);if(d){const f=new K;us.getBarycoord(pP,tv,nv,rv,f),o&&(d.uv=us.getInterpolatedAttribute(o,l,c,u,f,new je)),s&&(d.uv1=us.getInterpolatedAttribute(s,l,c,u,f,new je)),a&&(d.normal=us.getInterpolatedAttribute(a,l,c,u,f,new K),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const h={a:l,b:c,c:u,normal:new K,materialIndex:0};us.getNormal(tv,nv,rv,h.normal),d.face=h,d.barycoord=f}return d}class Eu extends Di{constructor(e=1,r=1,i=1,o=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:i,widthSegments:o,heightSegments:s,depthSegments:a};const l=this;o=Math.floor(o),s=Math.floor(s),a=Math.floor(a);const c=[],u=[],d=[],f=[];let h=0,p=0;g("z","y","x",-1,-1,i,r,e,a,s,0),g("z","y","x",1,-1,i,r,-e,a,s,1),g("x","z","y",1,1,e,i,r,o,a,2),g("x","z","y",1,-1,e,i,-r,o,a,3),g("x","y","z",1,-1,e,r,i,o,s,4),g("x","y","z",-1,-1,e,r,-i,o,s,5),this.setIndex(c),this.setAttribute("position",new mr(u,3)),this.setAttribute("normal",new mr(d,3)),this.setAttribute("uv",new mr(f,2));function g(y,v,m,_,x,S,w,E,C,T,M){const R=S/C,P=w/T,D=S/2,F=w/2,A=E/2,I=C+1,N=T+1;let L=0,O=0;const V=new K;for(let B=0;B<N;B++){const z=B*P-F;for(let W=0;W<I;W++){const ie=W*R-D;V[y]=ie*_,V[v]=z*x,V[m]=A,u.push(V.x,V.y,V.z),V[y]=0,V[v]=0,V[m]=E>0?1:-1,d.push(V.x,V.y,V.z),f.push(W/C),f.push(1-B/T),L+=1}}for(let B=0;B<T;B++)for(let z=0;z<C;z++){const W=h+z+I*B,ie=h+z+I*(B+1),k=h+(z+1)+I*(B+1),j=h+(z+1)+I*B;c.push(W,ie,j),c.push(ie,k,j),O+=6}l.addGroup(p,O,M),p+=O,h+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Mf(n){const e={};for(const r in n){e[r]={};for(const i in n[r]){const o=n[r][i];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[r][i]=null):e[r][i]=o.clone():Array.isArray(o)?e[r][i]=o.slice():e[r][i]=o}}return e}function xi(n){const e={};for(let r=0;r<n.length;r++){const i=Mf(n[r]);for(const o in i)e[o]=i[o]}return e}function ete(n){const e=[];for(let r=0;r<n.length;r++)e.push(n[r].clone());return e}function I$(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:rn.workingColorSpace}const fy={clone:Mf,merge:xi};var tte=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,nte=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Vi extends mi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=tte,this.fragmentShader=nte,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mf(e.uniforms),this.uniformsGroups=ete(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const o in this.uniforms){const a=this.uniforms[o].value;a&&a.isTexture?r.uniforms[o]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?r.uniforms[o]={type:"c",value:a.getHex()}:a&&a.isVector2?r.uniforms[o]={type:"v2",value:a.toArray()}:a&&a.isVector3?r.uniforms[o]={type:"v3",value:a.toArray()}:a&&a.isVector4?r.uniforms[o]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?r.uniforms[o]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?r.uniforms[o]={type:"m4",value:a.toArray()}:r.uniforms[o]={value:a}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const i={};for(const o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(r.extensions=i),r}}class D$ extends Er{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new fn,this.projectionMatrix=new fn,this.projectionMatrixInverse=new fn,this.coordinateSystem=Bo}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ul=new K,mP=new je,gP=new je;class Si extends D${constructor(e=50,r=1,i=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=o,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=Tf*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(yp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Tf*2*Math.atan(Math.tan(yp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,r,i){ul.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(ul.x,ul.y).multiplyScalar(-e/ul.z),ul.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ul.x,ul.y).multiplyScalar(-e/ul.z)}getViewSize(e,r){return this.getViewBounds(e,mP,gP),r.subVectors(gP,mP)}setViewOffset(e,r,i,o,s,a){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=o,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(yp*.5*this.fov)/this.zoom,i=2*r,o=this.aspect*i,s=-.5*o;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,u=a.fullHeight;s+=a.offsetX*o/c,r-=a.offsetY*i/u,o*=a.width/c,i*=a.height/u}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+o,r,r-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const Ku=-90,Yu=1;class L$ extends Er{constructor(e,r,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const o=new Si(Ku,Yu,e,r);o.layers=this.layers,this.add(o);const s=new Si(Ku,Yu,e,r);s.layers=this.layers,this.add(s);const a=new Si(Ku,Yu,e,r);a.layers=this.layers,this.add(a);const l=new Si(Ku,Yu,e,r);l.layers=this.layers,this.add(l);const c=new Si(Ku,Yu,e,r);c.layers=this.layers,this.add(c);const u=new Si(Ku,Yu,e,r);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,r=this.children.concat(),[i,o,s,a,l,c]=r;for(const u of r)this.remove(u);if(e===Bo)i.up.set(0,1,0),i.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===fu)i.up.set(0,-1,0),i.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of r)this.add(u),u.updateMatrixWorld()}update(e,r){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:o}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,l,c,u,d]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,o),e.render(r,s),e.setRenderTarget(i,1,o),e.render(r,a),e.setRenderTarget(i,2,o),e.render(r,l),e.setRenderTarget(i,3,o),e.render(r,c),e.setRenderTarget(i,4,o),e.render(r,u),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,o),e.render(r,d),e.setRenderTarget(f,h,p),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class q_ extends $r{constructor(e,r,i,o,s,a,l,c,u,d){e=e!==void 0?e:[],r=r!==void 0?r:Wo,super(e,r,i,o,s,a,l,c,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class F$ extends xs{constructor(e=1,r={}){super(e,e,r),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},o=[i,i,i,i,i,i];this.texture=new q_(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Ur}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new Eu(5,5,5),s=new Vi({name:"CubemapFromEquirect",uniforms:Mf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:er,blending:Mi});s.uniforms.tEquirect.value=r;const a=new Br(o,s),l=r.minFilter;return r.minFilter===ki&&(r.minFilter=Ur),new L$(1,10,this).update(e,a),r.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,r,i,o){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(r,i,o);e.setRenderTarget(s)}}class fM extends Er{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new xo,this.environmentIntensity=1,this.environmentRotation=new xo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class U${constructor(e,r){this.isInterleavedBuffer=!0,this.array=e,this.stride=r,this.count=e!==void 0?e.length/r:0,this.usage=uy,this.updateRanges=[],this.version=0,this.uuid=Pa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,r,i){e*=this.stride,i*=r.stride;for(let o=0,s=this.stride;o<s;o++)this.array[e+o]=r.array[i+o];return this}set(e,r=0){return this.array.set(e,r),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Pa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(r,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Pa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _i=new K;class hM{constructor(e,r,i,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=r,this.offset=i,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let r=0,i=this.data.count;r<i;r++)_i.fromBufferAttribute(this,r),_i.applyMatrix4(e),this.setXYZ(r,_i.x,_i.y,_i.z);return this}applyNormalMatrix(e){for(let r=0,i=this.count;r<i;r++)_i.fromBufferAttribute(this,r),_i.applyNormalMatrix(e),this.setXYZ(r,_i.x,_i.y,_i.z);return this}transformDirection(e){for(let r=0,i=this.count;r<i;r++)_i.fromBufferAttribute(this,r),_i.transformDirection(e),this.setXYZ(r,_i.x,_i.y,_i.z);return this}getComponent(e,r){let i=this.array[e*this.data.stride+this.offset+r];return this.normalized&&(i=Ei(i,this.array)),i}setComponent(e,r,i){return this.normalized&&(i=Zt(i,this.array)),this.data.array[e*this.data.stride+this.offset+r]=i,this}setX(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset]=r,this}setY(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset+1]=r,this}setZ(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset+2]=r,this}setW(e,r){return this.normalized&&(r=Zt(r,this.array)),this.data.array[e*this.data.stride+this.offset+3]=r,this}getX(e){let r=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(r=Ei(r,this.array)),r}getY(e){let r=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(r=Ei(r,this.array)),r}getZ(e){let r=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(r=Ei(r,this.array)),r}getW(e){let r=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(r=Ei(r,this.array)),r}setXY(e,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this}setXYZ(e,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this.data.array[e+2]=o,this}setXYZW(e,r,i,o,s){return e=e*this.data.stride+this.offset,this.normalized&&(r=Zt(r,this.array),i=Zt(i,this.array),o=Zt(o,this.array),s=Zt(s,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this.data.array[e+2]=o,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)r.push(this.data.array[o+s])}return new ri(new this.array.constructor(r),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new hM(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)r.push(this.data.array[o+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class rte extends mi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Tt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class ite extends $r{constructor(e=null,r=1,i=1,o,s,a,l,c,u=Wn,d=Wn,f,h){super(null,a,l,c,u,d,o,s,f,h),this.isDataTexture=!0,this.image={data:e,width:r,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ote extends ri{constructor(e,r,i,o=1){super(e,r,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const tS=new K,ste=new K,ate=new kt;class ls{constructor(e=new K(1,0,0),r=0){this.isPlane=!0,this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,i,o){return this.normal.set(e,r,i),this.constant=o,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,i){const o=tS.subVectors(i,r).cross(ste.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,r){const i=e.delta(tS),o=this.normal.dot(i);if(o===0)return this.distanceToPoint(e.start)===0?r.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/o;return s<0||s>1?null:r.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const r=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return r<0&&i>0||i<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const i=r||ate.getNormalMatrix(e),o=this.coplanarPoint(tS).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const vc=new j_,av=new K;class X_{constructor(e=new ls,r=new ls,i=new ls,o=new ls,s=new ls,a=new ls){this.planes=[e,r,i,o,s,a]}set(e,r,i,o,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(r),l[2].copy(i),l[3].copy(o),l[4].copy(s),l[5].copy(a),this}copy(e){const r=this.planes;for(let i=0;i<6;i++)r[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,r=Bo){const i=this.planes,o=e.elements,s=o[0],a=o[1],l=o[2],c=o[3],u=o[4],d=o[5],f=o[6],h=o[7],p=o[8],g=o[9],y=o[10],v=o[11],m=o[12],_=o[13],x=o[14],S=o[15];if(i[0].setComponents(c-s,h-u,v-p,S-m).normalize(),i[1].setComponents(c+s,h+u,v+p,S+m).normalize(),i[2].setComponents(c+a,h+d,v+g,S+_).normalize(),i[3].setComponents(c-a,h-d,v-g,S-_).normalize(),i[4].setComponents(c-l,h-f,v-y,S-x).normalize(),r===Bo)i[5].setComponents(c+l,h+f,v+y,S+x).normalize();else if(r===fu)i[5].setComponents(l,f,y,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),vc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const r=e.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),vc.copy(r.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(vc)}intersectsSprite(e){return vc.center.set(0,0,0),vc.radius=.7071067811865476,vc.applyMatrix4(e.matrixWorld),this.intersectsSphere(vc)}intersectsSphere(e){const r=this.planes,i=e.center,o=-e.radius;for(let s=0;s<6;s++)if(r[s].distanceToPoint(i)<o)return!1;return!0}intersectsBox(e){const r=this.planes;for(let i=0;i<6;i++){const o=r[i];if(av.x=o.normal.x>0?e.max.x:e.min.x,av.y=o.normal.y>0?e.max.y:e.min.y,av.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(av)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let i=0;i<6;i++)if(r[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class K_ extends mi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Tt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const hy=new K,py=new K,vP=new fn,Sh=new W_,lv=new j_,nS=new K,yP=new K;class lte extends Er{constructor(e=new Di,r=new K_){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,i=[0];for(let o=1,s=r.count;o<s;o++)hy.fromBufferAttribute(r,o-1),py.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=hy.distanceTo(py);e.setAttribute("lineDistance",new mr(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,r){const i=this.geometry,o=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),lv.copy(i.boundingSphere),lv.applyMatrix4(o),lv.radius+=s,e.ray.intersectsSphere(lv)===!1)return;vP.copy(o).invert(),Sh.copy(e.ray).applyMatrix4(vP);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=this.isLineSegments?2:1,d=i.index,h=i.attributes.position;if(d!==null){const p=Math.max(0,a.start),g=Math.min(d.count,a.start+a.count);for(let y=p,v=g-1;y<v;y+=u){const m=d.getX(y),_=d.getX(y+1),x=cv(this,e,Sh,c,m,_);x&&r.push(x)}if(this.isLineLoop){const y=d.getX(g-1),v=d.getX(p),m=cv(this,e,Sh,c,y,v);m&&r.push(m)}}else{const p=Math.max(0,a.start),g=Math.min(h.count,a.start+a.count);for(let y=p,v=g-1;y<v;y+=u){const m=cv(this,e,Sh,c,y,y+1);m&&r.push(m)}if(this.isLineLoop){const y=cv(this,e,Sh,c,g-1,p);y&&r.push(y)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const o=r[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=o.length;s<a;s++){const l=o[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function cv(n,e,r,i,o,s){const a=n.geometry.attributes.position;if(hy.fromBufferAttribute(a,o),py.fromBufferAttribute(a,s),r.distanceSqToSegment(hy,py,nS,yP)>i)return;nS.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(nS);if(!(c<e.near||c>e.far))return{distance:c,point:yP.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}class cte extends mi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Tt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Sd=class extends Er{constructor(){super(),this.isGroup=!0,this.type="Group"}};class ute extends $r{constructor(e,r){super({width:e,height:r}),this.isFramebufferTexture=!0,this.magFilter=Wn,this.minFilter=Wn,this.generateMipmaps=!1,this.needsUpdate=!0}}class ac extends $r{constructor(e,r,i,o,s,a,l,c,u,d=Hs){if(d!==Hs&&d!==qs)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Hs&&(i=rr),i===void 0&&d===qs&&(i=Ws),super(null,o,s,a,l,c,d,i,u),this.isDepthTexture=!0,this.image={width:e,height:r},this.magFilter=l!==void 0?l:Wn,this.minFilter=c!==void 0?c:Wn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const r=super.toJSON(e);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}class Qa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,r){const i=this.getUtoTmapping(e);return this.getPoint(i,r)}getPoints(e=5){const r=[];for(let i=0;i<=e;i++)r.push(this.getPoint(i/e));return r}getSpacedPoints(e=5){const r=[];for(let i=0;i<=e;i++)r.push(this.getPointAt(i/e));return r}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const r=[];let i,o=this.getPoint(0),s=0;r.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(o),r.push(s),o=i;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,r){const i=this.getLengths();let o=0;const s=i.length;let a;r?a=r:a=e*i[s-1];let l=0,c=s-1,u;for(;l<=c;)if(o=Math.floor(l+(c-l)/2),u=i[o]-a,u<0)l=o+1;else if(u>0)c=o-1;else{c=o;break}if(o=c,i[o]===a)return o/(s-1);const d=i[o],h=i[o+1]-d,p=(a-d)/h;return(o+p)/(s-1)}getTangent(e,r){let o=e-1e-4,s=e+1e-4;o<0&&(o=0),s>1&&(s=1);const a=this.getPoint(o),l=this.getPoint(s),c=r||(a.isVector2?new je:new K);return c.copy(l).sub(a).normalize(),c}getTangentAt(e,r){const i=this.getUtoTmapping(e);return this.getTangent(i,r)}computeFrenetFrames(e,r){const i=new K,o=[],s=[],a=[],l=new K,c=new fn;for(let p=0;p<=e;p++){const g=p/e;o[p]=this.getTangentAt(g,new K)}s[0]=new K,a[0]=new K;let u=Number.MAX_VALUE;const d=Math.abs(o[0].x),f=Math.abs(o[0].y),h=Math.abs(o[0].z);d<=u&&(u=d,i.set(1,0,0)),f<=u&&(u=f,i.set(0,1,0)),h<=u&&i.set(0,0,1),l.crossVectors(o[0],i).normalize(),s[0].crossVectors(o[0],l),a[0].crossVectors(o[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),a[p]=a[p-1].clone(),l.crossVectors(o[p-1],o[p]),l.length()>Number.EPSILON){l.normalize();const g=Math.acos(Jt(o[p-1].dot(o[p]),-1,1));s[p].applyMatrix4(c.makeRotationAxis(l,g))}a[p].crossVectors(o[p],s[p])}if(r===!0){let p=Math.acos(Jt(s[0].dot(s[e]),-1,1));p/=e,o[0].dot(l.crossVectors(s[0],s[e]))>0&&(p=-p);for(let g=1;g<=e;g++)s[g].applyMatrix4(c.makeRotationAxis(o[g],p*g)),a[g].crossVectors(o[g],s[g])}return{tangents:o,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class B$ extends Qa{constructor(e=0,r=0,i=1,o=1,s=0,a=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=r,this.xRadius=i,this.yRadius=o,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=c}getPoint(e,r=new je){const i=r,o=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=o;for(;s>o;)s-=o;s<Number.EPSILON&&(a?s=0:s=o),this.aClockwise===!0&&!a&&(s===o?s=-o:s=s-o);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=c-this.aX,p=u-this.aY;c=h*d-p*f+this.aX,u=h*f+p*d+this.aY}return i.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class dte extends B${constructor(e,r,i,o,s,a){super(e,r,i,i,o,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function pM(){let n=0,e=0,r=0,i=0;function o(s,a,l,c){n=s,e=l,r=-3*s+3*a-2*l-c,i=2*s-2*a+l+c}return{initCatmullRom:function(s,a,l,c,u){o(a,l,u*(l-s),u*(c-a))},initNonuniformCatmullRom:function(s,a,l,c,u,d,f){let h=(a-s)/u-(l-s)/(u+d)+(l-a)/d,p=(l-a)/d-(c-a)/(d+f)+(c-l)/f;h*=d,p*=d,o(a,l,h,p)},calc:function(s){const a=s*s,l=a*s;return n+e*s+r*a+i*l}}}const uv=new K,rS=new pM,iS=new pM,oS=new pM;class fte extends Qa{constructor(e=[],r=!1,i="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=r,this.curveType=i,this.tension=o}getPoint(e,r=new K){const i=r,o=this.points,s=o.length,a=(s-(this.closed?0:1))*e;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let u,d;this.closed||l>0?u=o[(l-1)%s]:(uv.subVectors(o[0],o[1]).add(o[0]),u=uv);const f=o[l%s],h=o[(l+1)%s];if(this.closed||l+2<s?d=o[(l+2)%s]:(uv.subVectors(o[s-1],o[s-2]).add(o[s-1]),d=uv),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(f),p),y=Math.pow(f.distanceToSquared(h),p),v=Math.pow(h.distanceToSquared(d),p);y<1e-4&&(y=1),g<1e-4&&(g=y),v<1e-4&&(v=y),rS.initNonuniformCatmullRom(u.x,f.x,h.x,d.x,g,y,v),iS.initNonuniformCatmullRom(u.y,f.y,h.y,d.y,g,y,v),oS.initNonuniformCatmullRom(u.z,f.z,h.z,d.z,g,y,v)}else this.curveType==="catmullrom"&&(rS.initCatmullRom(u.x,f.x,h.x,d.x,this.tension),iS.initCatmullRom(u.y,f.y,h.y,d.y,this.tension),oS.initCatmullRom(u.z,f.z,h.z,d.z,this.tension));return i.set(rS.calc(c),iS.calc(c),oS.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,i=this.points.length;r<i;r++){const o=this.points[r];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(new K().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function _P(n,e,r,i,o){const s=(i-e)*.5,a=(o-r)*.5,l=n*n,c=n*l;return(2*r-2*i+s+a)*c+(-3*r+3*i-2*s-a)*l+s*n+r}function hte(n,e){const r=1-n;return r*r*e}function pte(n,e){return 2*(1-n)*n*e}function mte(n,e){return n*n*e}function xp(n,e,r,i){return hte(n,e)+pte(n,r)+mte(n,i)}function gte(n,e){const r=1-n;return r*r*r*e}function vte(n,e){const r=1-n;return 3*r*r*n*e}function yte(n,e){return 3*(1-n)*n*n*e}function _te(n,e){return n*n*n*e}function bp(n,e,r,i,o){return gte(n,e)+vte(n,r)+yte(n,i)+_te(n,o)}class xte extends Qa{constructor(e=new je,r=new je,i=new je,o=new je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=r,this.v2=i,this.v3=o}getPoint(e,r=new je){const i=r,o=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(bp(e,o.x,s.x,a.x,l.x),bp(e,o.y,s.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class $$ extends Qa{constructor(e=new K,r=new K,i=new K,o=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=r,this.v2=i,this.v3=o}getPoint(e,r=new K){const i=r,o=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(bp(e,o.x,s.x,a.x,l.x),bp(e,o.y,s.y,a.y,l.y),bp(e,o.z,s.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class bte extends Qa{constructor(e=new je,r=new je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=r}getPoint(e,r=new je){const i=r;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r=new je){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,r){return this.getTangent(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ste extends Qa{constructor(e=new K,r=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=r}getPoint(e,r=new K){const i=r;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r=new K){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,r){return this.getTangent(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wte extends Qa{constructor(e=new je,r=new je,i=new je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=r,this.v2=i}getPoint(e,r=new je){const i=r,o=this.v0,s=this.v1,a=this.v2;return i.set(xp(e,o.x,s.x,a.x),xp(e,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mM extends Qa{constructor(e=new K,r=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=r,this.v2=i}getPoint(e,r=new K){const i=r,o=this.v0,s=this.v1,a=this.v2;return i.set(xp(e,o.x,s.x,a.x),xp(e,o.y,s.y,a.y),xp(e,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ete extends Qa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,r=new je){const i=r,o=this.points,s=(o.length-1)*e,a=Math.floor(s),l=s-a,c=o[a===0?a:a-1],u=o[a],d=o[a>o.length-2?o.length-1:a+1],f=o[a>o.length-3?o.length-1:a+2];return i.set(_P(l,c.x,u.x,d.x,f.x),_P(l,c.y,u.y,d.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,i=this.points.length;r<i;r++){const o=this.points[r];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const o=e.points[r];this.points.push(new je().fromArray(o))}return this}}var Cte=Object.freeze({__proto__:null,ArcCurve:dte,CatmullRomCurve3:fte,CubicBezierCurve:xte,CubicBezierCurve3:$$,EllipseCurve:B$,LineCurve:bte,LineCurve3:Ste,QuadraticBezierCurve:wte,QuadraticBezierCurve3:mM,SplineCurve:Ete});class Y_ extends Di{constructor(e=1,r=1,i=1,o=32,s=1,a=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:r,height:i,radialSegments:o,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:c};const u=this;o=Math.floor(o),s=Math.floor(s);const d=[],f=[],h=[],p=[];let g=0;const y=[],v=i/2;let m=0;_(),a===!1&&(e>0&&x(!0),r>0&&x(!1)),this.setIndex(d),this.setAttribute("position",new mr(f,3)),this.setAttribute("normal",new mr(h,3)),this.setAttribute("uv",new mr(p,2));function _(){const S=new K,w=new K;let E=0;const C=(r-e)/i;for(let T=0;T<=s;T++){const M=[],R=T/s,P=R*(r-e)+e;for(let D=0;D<=o;D++){const F=D/o,A=F*c+l,I=Math.sin(A),N=Math.cos(A);w.x=P*I,w.y=-R*i+v,w.z=P*N,f.push(w.x,w.y,w.z),S.set(I,C,N).normalize(),h.push(S.x,S.y,S.z),p.push(F,1-R),M.push(g++)}y.push(M)}for(let T=0;T<o;T++)for(let M=0;M<s;M++){const R=y[M][T],P=y[M+1][T],D=y[M+1][T+1],F=y[M][T+1];(e>0||M!==0)&&(d.push(R,P,F),E+=3),(r>0||M!==s-1)&&(d.push(P,D,F),E+=3)}u.addGroup(m,E,0),m+=E}function x(S){const w=g,E=new je,C=new K;let T=0;const M=S===!0?e:r,R=S===!0?1:-1;for(let D=1;D<=o;D++)f.push(0,v*R,0),h.push(0,R,0),p.push(.5,.5),g++;const P=g;for(let D=0;D<=o;D++){const A=D/o*c+l,I=Math.cos(A),N=Math.sin(A);C.x=M*N,C.y=v*R,C.z=M*I,f.push(C.x,C.y,C.z),h.push(0,R,0),E.x=I*.5+.5,E.y=N*.5*R+.5,p.push(E.x,E.y),g++}for(let D=0;D<o;D++){const F=w+D,A=P+D;S===!0?d.push(A,A+1,F):d.push(A+1,A,F),T+=3}u.addGroup(m,T,S===!0?1:2),m+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Y_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gM extends Y_{constructor(e=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(0,e,r,i,o,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new gM(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Q_ extends Di{constructor(e=1,r=1,i=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:i,heightSegments:o};const s=e/2,a=r/2,l=Math.floor(i),c=Math.floor(o),u=l+1,d=c+1,f=e/l,h=r/c,p=[],g=[],y=[],v=[];for(let m=0;m<d;m++){const _=m*h-a;for(let x=0;x<u;x++){const S=x*f-s;g.push(S,-_,0),y.push(0,0,1),v.push(x/l),v.push(1-m/c)}}for(let m=0;m<c;m++)for(let _=0;_<l;_++){const x=_+u*m,S=_+u*(m+1),w=_+1+u*(m+1),E=_+1+u*m;p.push(x,S,E),p.push(S,w,E)}this.setIndex(p),this.setAttribute("position",new mr(g,3)),this.setAttribute("normal",new mr(y,3)),this.setAttribute("uv",new mr(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Q_(e.width,e.height,e.widthSegments,e.heightSegments)}}class Zf extends Di{constructor(e=1,r=32,i=16,o=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:i,phiStart:o,phiLength:s,thetaStart:a,thetaLength:l},r=Math.max(3,Math.floor(r)),i=Math.max(2,Math.floor(i));const c=Math.min(a+l,Math.PI);let u=0;const d=[],f=new K,h=new K,p=[],g=[],y=[],v=[];for(let m=0;m<=i;m++){const _=[],x=m/i;let S=0;m===0&&a===0?S=.5/r:m===i&&c===Math.PI&&(S=-.5/r);for(let w=0;w<=r;w++){const E=w/r;f.x=-e*Math.cos(o+E*s)*Math.sin(a+x*l),f.y=e*Math.cos(a+x*l),f.z=e*Math.sin(o+E*s)*Math.sin(a+x*l),g.push(f.x,f.y,f.z),h.copy(f).normalize(),y.push(h.x,h.y,h.z),v.push(E+S,1-x),_.push(u++)}d.push(_)}for(let m=0;m<i;m++)for(let _=0;_<r;_++){const x=d[m][_+1],S=d[m][_],w=d[m+1][_],E=d[m+1][_+1];(m!==0||a>0)&&p.push(x,S,E),(m!==i-1||c<Math.PI)&&p.push(S,w,E)}this.setIndex(p),this.setAttribute("position",new mr(g,3)),this.setAttribute("normal",new mr(y,3)),this.setAttribute("uv",new mr(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class vM extends Di{constructor(e=new mM(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),r=64,i=1,o=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:r,radius:i,radialSegments:o,closed:s};const a=e.computeFrenetFrames(r,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new K,c=new K,u=new je;let d=new K;const f=[],h=[],p=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new mr(f,3)),this.setAttribute("normal",new mr(h,3)),this.setAttribute("uv",new mr(p,2));function y(){for(let x=0;x<r;x++)v(x);v(s===!1?r:0),_(),m()}function v(x){d=e.getPointAt(x/r,d);const S=a.normals[x],w=a.binormals[x];for(let E=0;E<=o;E++){const C=E/o*Math.PI*2,T=Math.sin(C),M=-Math.cos(C);c.x=M*S.x+T*w.x,c.y=M*S.y+T*w.y,c.z=M*S.z+T*w.z,c.normalize(),h.push(c.x,c.y,c.z),l.x=d.x+i*c.x,l.y=d.y+i*c.y,l.z=d.z+i*c.z,f.push(l.x,l.y,l.z)}}function m(){for(let x=1;x<=r;x++)for(let S=1;S<=o;S++){const w=(o+1)*(x-1)+(S-1),E=(o+1)*x+(S-1),C=(o+1)*x+S,T=(o+1)*(x-1)+S;g.push(w,E,T),g.push(E,C,T)}}function _(){for(let x=0;x<=r;x++)for(let S=0;S<=o;S++)u.x=x/r,u.y=S/o,p.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new vM(new Cte[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Tte extends mi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Tt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class z$ extends mi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Tt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ga,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Mte extends z${constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Tt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Tt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Tt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Rte extends mi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Tt(16777215),this.specular=new Tt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ga,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xo,this.combine=Km,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ate extends mi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Tt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ga,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Nte extends mi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ga,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class yM extends mi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ga,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xo,this.combine=Km,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Pte extends mi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ree,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ote extends mi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Ite extends mi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Tt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ga,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Dte extends K_{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const xP={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Lte{constructor(e,r,i){const o=this;let s=!1,a=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=r,this.onError=i,this.itemStart=function(d){l++,s===!1&&o.onStart!==void 0&&o.onStart(d,a,l),s=!0},this.itemEnd=function(d){a++,o.onProgress!==void 0&&o.onProgress(d,a,l),a===l&&(s=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(d){o.onError!==void 0&&o.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,f){return u.push(d,f),this},this.removeHandler=function(d){const f=u.indexOf(d);return f!==-1&&u.splice(f,2),this},this.getHandler=function(d){for(let f=0,h=u.length;f<h;f+=2){const p=u[f],g=u[f+1];if(p.global&&(p.lastIndex=0),p.test(d))return g}return null}}}const Fte=new Lte;class _M{constructor(e){this.manager=e!==void 0?e:Fte,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,r){const i=this;return new Promise(function(o,s){i.load(e,o,r,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}_M.DEFAULT_MATERIAL_NAME="__DEFAULT";class Ute extends _M{constructor(e){super(e)}load(e,r,i,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=xP.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){r&&r(a),s.manager.itemEnd(e)},0),a;const l=vm("img");function c(){d(),xP.add(e,this),r&&r(this),s.manager.itemEnd(e)}function u(f){d(),o&&o(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class Bte extends _M{constructor(e){super(e)}load(e,r,i,o){const s=new $r,a=new Ute(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,r!==void 0&&r(s)},i,o),s}}class Cu extends Er{constructor(e,r=1){super(),this.isLight=!0,this.type="Light",this.color=new Tt(e),this.intensity=r}dispose(){}copy(e,r){return super.copy(e,r),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const r=super.toJSON(e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(r.object.target=this.target.uuid),r}}class $te extends Cu{constructor(e,r,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Er.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Tt(r)}copy(e,r){return super.copy(e,r),this.groundColor.copy(e.groundColor),this}}const sS=new fn,bP=new K,SP=new K;class xM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new je(512,512),this.map=null,this.mapPass=null,this.matrix=new fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new X_,this._frameExtents=new je(1,1),this._viewportCount=1,this._viewports=[new Wt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const r=this.camera,i=this.matrix;bP.setFromMatrixPosition(e.matrixWorld),r.position.copy(bP),SP.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(SP),r.updateMatrixWorld(),sS.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(sS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class zte extends xM{constructor(){super(new Si(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const r=this.camera,i=Tf*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,s=e.distance||r.far;(i!==r.fov||o!==r.aspect||s!==r.far)&&(r.fov=i,r.aspect=o,r.far=s,r.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class k$ extends Cu{constructor(e,r,i=0,o=Math.PI/3,s=0,a=2){super(e,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Er.DEFAULT_UP),this.updateMatrix(),this.target=new Er,this.distance=i,this.angle=o,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new zte}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const wP=new fn,wh=new K,aS=new K;class kte extends xM{constructor(){super(new Si(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new je(4,2),this._viewportCount=6,this._viewports=[new Wt(2,1,1,1),new Wt(0,1,1,1),new Wt(3,1,1,1),new Wt(1,1,1,1),new Wt(3,0,1,1),new Wt(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,r=0){const i=this.camera,o=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),wh.setFromMatrixPosition(e.matrixWorld),i.position.copy(wh),aS.copy(i.position),aS.add(this._cubeDirections[r]),i.up.copy(this._cubeUps[r]),i.lookAt(aS),i.updateMatrixWorld(),o.makeTranslation(-wh.x,-wh.y,-wh.z),wP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wP)}}class Vte extends Cu{constructor(e,r,i=0,o=2){super(e,r),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=o,this.shadow=new kte}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Zm extends D${constructor(e=-1,r=1,i=1,o=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=i,this.bottom=o,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,r,i,o,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=o,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let s=i-e,a=i+e,l=o+r,c=o-r;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,l-=d*this.view.offsetY,c=l-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}class Gte extends xM{constructor(){super(new Zm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class V$ extends Cu{constructor(e,r){super(e,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Er.DEFAULT_UP),this.updateMatrix(),this.target=new Er,this.shadow=new Gte}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class G$ extends Cu{constructor(e,r){super(e,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class Hte extends Cu{constructor(e,r,i=10,o=10){super(e,r),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const r=super.toJSON(e);return r.object.width=this.width,r.object.height=this.height,r}}class jte{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let r=0;r<9;r++)this.coefficients[r].copy(e[r]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,r){const i=e.x,o=e.y,s=e.z,a=this.coefficients;return r.copy(a[0]).multiplyScalar(.282095),r.addScaledVector(a[1],.488603*o),r.addScaledVector(a[2],.488603*s),r.addScaledVector(a[3],.488603*i),r.addScaledVector(a[4],1.092548*(i*o)),r.addScaledVector(a[5],1.092548*(o*s)),r.addScaledVector(a[6],.315392*(3*s*s-1)),r.addScaledVector(a[7],1.092548*(i*s)),r.addScaledVector(a[8],.546274*(i*i-o*o)),r}getIrradianceAt(e,r){const i=e.x,o=e.y,s=e.z,a=this.coefficients;return r.copy(a[0]).multiplyScalar(.886227),r.addScaledVector(a[1],2*.511664*o),r.addScaledVector(a[2],2*.511664*s),r.addScaledVector(a[3],2*.511664*i),r.addScaledVector(a[4],2*.429043*i*o),r.addScaledVector(a[5],2*.429043*o*s),r.addScaledVector(a[6],.743125*s*s-.247708),r.addScaledVector(a[7],2*.429043*i*s),r.addScaledVector(a[8],.429043*(i*i-o*o)),r}add(e){for(let r=0;r<9;r++)this.coefficients[r].add(e.coefficients[r]);return this}addScaledSH(e,r){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],r);return this}scale(e){for(let r=0;r<9;r++)this.coefficients[r].multiplyScalar(e);return this}lerp(e,r){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],r);return this}equals(e){for(let r=0;r<9;r++)if(!this.coefficients[r].equals(e.coefficients[r]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,r=0){const i=this.coefficients;for(let o=0;o<9;o++)i[o].fromArray(e,r+o*3);return this}toArray(e=[],r=0){const i=this.coefficients;for(let o=0;o<9;o++)i[o].toArray(e,r+o*3);return e}static getBasisAt(e,r){const i=e.x,o=e.y,s=e.z;r[0]=.282095,r[1]=.488603*o,r[2]=.488603*s,r[3]=.488603*i,r[4]=1.092548*i*o,r[5]=1.092548*o*s,r[6]=.315392*(3*s*s-1),r[7]=1.092548*i*s,r[8]=.546274*(i*i-o*o)}}class Wte extends Cu{constructor(e=new jte,r=1){super(void 0,r),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const r=super.toJSON(e);return r.object.sh=this.sh.toArray(),r}}class qte extends Si{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class H${constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=EP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=EP();e=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=e}return e}}function EP(){return performance.now()}class Xte extends U${constructor(e,r,i=1){super(e,r),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const r=super.clone(e);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(e){const r=super.toJSON(e);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}const CP=new fn;class j${constructor(e,r,i=0,o=1/0){this.ray=new W_(e,r),this.near=i,this.far=o,this.camera=null,this.layers=new cM,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,r){this.ray.set(e,r)}setFromCamera(e,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}setFromXRController(e){return CP.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(CP),this}intersectObject(e,r=!0,i=[]){return vE(e,this,i,r),i.sort(TP),i}intersectObjects(e,r=!0,i=[]){for(let o=0,s=e.length;o<s;o++)vE(e[o],this,i,r);return i.sort(TP),i}}function TP(n,e){return n.distance-e.distance}function vE(n,e,r,i){let o=!0;if(n.layers.test(e.layers)&&n.raycast(e,r)===!1&&(o=!1),o===!0&&i===!0){const s=n.children;for(let a=0,l=s.length;a<l;a++)vE(s[a],e,r,!0)}}class MP{constructor(e=1,r=0,i=0){return this.radius=e,this.phi=r,this.theta=i,this}set(e,r,i){return this.radius=e,this.phi=r,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Jt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,i){return this.radius=Math.sqrt(e*e+r*r+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Jt(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Z_ extends sc{constructor(e,r=null){super(),this.object=e,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function RP(n,e,r,i){const o=Kte(i);switch(r){case QT:return n*e;case ZT:return n*e;case JT:return n*e*2;case Qm:return n*e/o.components*o.byteLength;case qf:return n*e/o.components*o.byteLength;case du:return n*e*2/o.components*o.byteLength;case Xf:return n*e*2/o.components*o.byteLength;case Ym:return n*e*3/o.components*o.byteLength;case ti:return n*e*4/o.components*o.byteLength;case Kf:return n*e*4/o.components*o.byteLength;case Xc:case kl:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Vl:case Gl:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case um:case fm:return Math.max(n,16)*Math.max(e,8)/4;case cm:case dm:return Math.max(n,8)*Math.max(e,8)/2;case hm:case uf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case df:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case ff:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case hf:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case pf:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case mf:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case gf:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case vf:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case yf:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case _f:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case xf:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case bf:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Sf:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case wf:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Ef:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Cf:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Kc:case pE:case mE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case eM:case pm:return Math.ceil(n/4)*Math.ceil(e/4)*8;case mm:case gm:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function Kte(n){switch(n){case fi:case Wc:return{byteLength:1,components:1};case ps:case qc:case Yr:return{byteLength:2,components:1};case z_:case k_:return{byteLength:2,components:4};case rr:case Xr:case hr:return{byteLength:4,components:1};case V_:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Wf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Wf);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function W$(){let n=null,e=!1,r=null,i=null;function o(s,a){r(s,a),i=n.requestAnimationFrame(o)}return{start:function(){e!==!0&&r!==null&&(i=n.requestAnimationFrame(o),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){r=s},setContext:function(s){n=s}}}function Yte(n){const e=new WeakMap;function r(l,c){const u=l.array,d=l.usage,f=u.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,u,d),l.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)l.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:l.version,size:f}}function i(l,c,u){const d=c.array,f=c.updateRanges;if(n.bindBuffer(u,l),f.length===0)n.bufferSubData(u,0,d);else{f.sort((p,g)=>p.start-g.start);let h=0;for(let p=1;p<f.length;p++){const g=f[h],y=f[p];y.start<=g.start+g.count+1?g.count=Math.max(g.count,y.start+y.count-g.start):(++h,f[h]=y)}f.length=h+1;for(let p=0,g=f.length;p<g;p++){const y=f[p];n.bufferSubData(u,y.start*d.BYTES_PER_ELEMENT,d,y.start,y.count)}c.clearUpdateRanges()}c.onUploadCallback()}function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(n.deleteBuffer(c.buffer),e.delete(l))}function a(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const d=e.get(l);(!d||d.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const u=e.get(l);if(u===void 0)e.set(l,r(l,c));else if(u.version<l.version){if(u.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,l,c),u.version=l.version}}return{get:o,remove:s,update:a}}var Qte=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Zte=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Jte=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ene=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tne=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,nne=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,rne=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ine=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,one=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,sne=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ane=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,lne=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,cne=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,une=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,dne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fne=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,hne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mne=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,gne=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,vne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,yne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,_ne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,xne=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,bne=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Sne=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,wne=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Ene=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Cne=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Tne=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Mne="gl_FragColor = linearToOutputTexel( gl_FragColor );",Rne=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Ane=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Nne=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Pne=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,One=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ine=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Dne=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Lne=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Fne=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Une=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Bne=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,$ne=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,zne=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,kne=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Vne=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Gne=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Hne=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jne=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Wne=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,qne=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Xne=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Kne=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Yne=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Qne=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Zne=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Jne=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,ere=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tre=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nre=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,rre=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ire=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ore=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,sre=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,are=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lre=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,cre=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,ure=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,dre=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,fre=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,hre=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,pre=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,mre=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,gre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yre=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_re=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,xre=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,bre=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Sre=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,wre=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Ere=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Cre=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Tre=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Mre=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Rre=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Are=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Nre=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Pre=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Ore=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Ire=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Dre=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Lre=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Fre=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ure=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Bre=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,$re=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,zre=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,kre=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Vre=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Gre=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Hre=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,jre=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Wre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,qre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Xre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Kre=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Yre=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Qre=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Zre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Jre=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tie=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,rie=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,iie=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,oie=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,sie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,aie=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lie=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cie=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,die=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fie=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hie=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pie=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mie=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gie=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,vie=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,yie=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_ie=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xie=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bie=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sie=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wie=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Eie=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Cie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tie=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Mie=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Rie=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Aie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tn={alphahash_fragment:Qte,alphahash_pars_fragment:Zte,alphamap_fragment:Jte,alphamap_pars_fragment:ene,alphatest_fragment:tne,alphatest_pars_fragment:nne,aomap_fragment:rne,aomap_pars_fragment:ine,batching_pars_vertex:one,batching_vertex:sne,begin_vertex:ane,beginnormal_vertex:lne,bsdfs:cne,iridescence_fragment:une,bumpmap_pars_fragment:dne,clipping_planes_fragment:fne,clipping_planes_pars_fragment:hne,clipping_planes_pars_vertex:pne,clipping_planes_vertex:mne,color_fragment:gne,color_pars_fragment:vne,color_pars_vertex:yne,color_vertex:_ne,common:xne,cube_uv_reflection_fragment:bne,defaultnormal_vertex:Sne,displacementmap_pars_vertex:wne,displacementmap_vertex:Ene,emissivemap_fragment:Cne,emissivemap_pars_fragment:Tne,colorspace_fragment:Mne,colorspace_pars_fragment:Rne,envmap_fragment:Ane,envmap_common_pars_fragment:Nne,envmap_pars_fragment:Pne,envmap_pars_vertex:One,envmap_physical_pars_fragment:Gne,envmap_vertex:Ine,fog_vertex:Dne,fog_pars_vertex:Lne,fog_fragment:Fne,fog_pars_fragment:Une,gradientmap_pars_fragment:Bne,lightmap_pars_fragment:$ne,lights_lambert_fragment:zne,lights_lambert_pars_fragment:kne,lights_pars_begin:Vne,lights_toon_fragment:Hne,lights_toon_pars_fragment:jne,lights_phong_fragment:Wne,lights_phong_pars_fragment:qne,lights_physical_fragment:Xne,lights_physical_pars_fragment:Kne,lights_fragment_begin:Yne,lights_fragment_maps:Qne,lights_fragment_end:Zne,logdepthbuf_fragment:Jne,logdepthbuf_pars_fragment:ere,logdepthbuf_pars_vertex:tre,logdepthbuf_vertex:nre,map_fragment:rre,map_pars_fragment:ire,map_particle_fragment:ore,map_particle_pars_fragment:sre,metalnessmap_fragment:are,metalnessmap_pars_fragment:lre,morphinstance_vertex:cre,morphcolor_vertex:ure,morphnormal_vertex:dre,morphtarget_pars_vertex:fre,morphtarget_vertex:hre,normal_fragment_begin:pre,normal_fragment_maps:mre,normal_pars_fragment:gre,normal_pars_vertex:vre,normal_vertex:yre,normalmap_pars_fragment:_re,clearcoat_normal_fragment_begin:xre,clearcoat_normal_fragment_maps:bre,clearcoat_pars_fragment:Sre,iridescence_pars_fragment:wre,opaque_fragment:Ere,packing:Cre,premultiplied_alpha_fragment:Tre,project_vertex:Mre,dithering_fragment:Rre,dithering_pars_fragment:Are,roughnessmap_fragment:Nre,roughnessmap_pars_fragment:Pre,shadowmap_pars_fragment:Ore,shadowmap_pars_vertex:Ire,shadowmap_vertex:Dre,shadowmask_pars_fragment:Lre,skinbase_vertex:Fre,skinning_pars_vertex:Ure,skinning_vertex:Bre,skinnormal_vertex:$re,specularmap_fragment:zre,specularmap_pars_fragment:kre,tonemapping_fragment:Vre,tonemapping_pars_fragment:Gre,transmission_fragment:Hre,transmission_pars_fragment:jre,uv_pars_fragment:Wre,uv_pars_vertex:qre,uv_vertex:Xre,worldpos_vertex:Kre,background_vert:Yre,background_frag:Qre,backgroundCube_vert:Zre,backgroundCube_frag:Jre,cube_vert:eie,cube_frag:tie,depth_vert:nie,depth_frag:rie,distanceRGBA_vert:iie,distanceRGBA_frag:oie,equirect_vert:sie,equirect_frag:aie,linedashed_vert:lie,linedashed_frag:cie,meshbasic_vert:uie,meshbasic_frag:die,meshlambert_vert:fie,meshlambert_frag:hie,meshmatcap_vert:pie,meshmatcap_frag:mie,meshnormal_vert:gie,meshnormal_frag:vie,meshphong_vert:yie,meshphong_frag:_ie,meshphysical_vert:xie,meshphysical_frag:bie,meshtoon_vert:Sie,meshtoon_frag:wie,points_vert:Eie,points_frag:Cie,shadow_vert:Tie,shadow_frag:Mie,sprite_vert:Rie,sprite_frag:Aie},gt={common:{diffuse:{value:new Tt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new kt}},envmap:{envMap:{value:null},envMapRotation:{value:new kt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new kt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new kt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new kt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new kt},normalScale:{value:new je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new kt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new kt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new kt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new kt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Tt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Tt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0},uvTransform:{value:new kt}},sprite:{diffuse:{value:new Tt(16777215)},opacity:{value:1},center:{value:new je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new kt},alphaMap:{value:null},alphaMapTransform:{value:new kt},alphaTest:{value:0}}},Ls={basic:{uniforms:xi([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.fog]),vertexShader:tn.meshbasic_vert,fragmentShader:tn.meshbasic_frag},lambert:{uniforms:xi([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,gt.lights,{emissive:{value:new Tt(0)}}]),vertexShader:tn.meshlambert_vert,fragmentShader:tn.meshlambert_frag},phong:{uniforms:xi([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,gt.lights,{emissive:{value:new Tt(0)},specular:{value:new Tt(1118481)},shininess:{value:30}}]),vertexShader:tn.meshphong_vert,fragmentShader:tn.meshphong_frag},standard:{uniforms:xi([gt.common,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.roughnessmap,gt.metalnessmap,gt.fog,gt.lights,{emissive:{value:new Tt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag},toon:{uniforms:xi([gt.common,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.gradientmap,gt.fog,gt.lights,{emissive:{value:new Tt(0)}}]),vertexShader:tn.meshtoon_vert,fragmentShader:tn.meshtoon_frag},matcap:{uniforms:xi([gt.common,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,{matcap:{value:null}}]),vertexShader:tn.meshmatcap_vert,fragmentShader:tn.meshmatcap_frag},points:{uniforms:xi([gt.points,gt.fog]),vertexShader:tn.points_vert,fragmentShader:tn.points_frag},dashed:{uniforms:xi([gt.common,gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tn.linedashed_vert,fragmentShader:tn.linedashed_frag},depth:{uniforms:xi([gt.common,gt.displacementmap]),vertexShader:tn.depth_vert,fragmentShader:tn.depth_frag},normal:{uniforms:xi([gt.common,gt.bumpmap,gt.normalmap,gt.displacementmap,{opacity:{value:1}}]),vertexShader:tn.meshnormal_vert,fragmentShader:tn.meshnormal_frag},sprite:{uniforms:xi([gt.sprite,gt.fog]),vertexShader:tn.sprite_vert,fragmentShader:tn.sprite_frag},background:{uniforms:{uvTransform:{value:new kt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:tn.background_vert,fragmentShader:tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new kt}},vertexShader:tn.backgroundCube_vert,fragmentShader:tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tn.cube_vert,fragmentShader:tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tn.equirect_vert,fragmentShader:tn.equirect_frag},distanceRGBA:{uniforms:xi([gt.common,gt.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tn.distanceRGBA_vert,fragmentShader:tn.distanceRGBA_frag},shadow:{uniforms:xi([gt.lights,gt.fog,{color:{value:new Tt(0)},opacity:{value:1}}]),vertexShader:tn.shadow_vert,fragmentShader:tn.shadow_frag}};Ls.physical={uniforms:xi([Ls.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new kt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new kt},clearcoatNormalScale:{value:new je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new kt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new kt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new kt},sheen:{value:0},sheenColor:{value:new Tt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new kt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new kt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new kt},transmissionSamplerSize:{value:new je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new kt},attenuationDistance:{value:0},attenuationColor:{value:new Tt(0)},specularColor:{value:new Tt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new kt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new kt},anisotropyVector:{value:new je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new kt}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag};const dv={r:0,b:0,g:0},yc=new xo,Nie=new fn;function Pie(n,e,r,i,o,s,a){const l=new Tt(0);let c=s===!0?0:1,u,d,f=null,h=0,p=null;function g(x){let S=x.isScene===!0?x.background:null;return S&&S.isTexture&&(S=(x.backgroundBlurriness>0?r:e).get(S)),S}function y(x){let S=!1;const w=g(x);w===null?m(l,c):w&&w.isColor&&(m(w,1),S=!0);const E=n.xr.getEnvironmentBlendMode();E==="additive"?i.buffers.color.setClear(0,0,0,1,a):E==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function v(x,S){const w=g(S);w&&(w.isCubeTexture||w.mapping===lu)?(d===void 0&&(d=new Br(new Eu(1,1,1),new Vi({name:"BackgroundCubeMaterial",uniforms:Mf(Ls.backgroundCube.uniforms),vertexShader:Ls.backgroundCube.vertexShader,fragmentShader:Ls.backgroundCube.fragmentShader,side:er,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(E,C,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(d)),yc.copy(S.backgroundRotation),yc.x*=-1,yc.y*=-1,yc.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(yc.y*=-1,yc.z*=-1),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Nie.makeRotationFromEuler(yc)),d.material.toneMapped=rn.getTransfer(w.colorSpace)!==Tn,(f!==w||h!==w.version||p!==n.toneMapping)&&(d.material.needsUpdate=!0,f=w,h=w.version,p=n.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new Br(new Q_(2,2),new Vi({name:"BackgroundMaterial",uniforms:Mf(Ls.background.uniforms),vertexShader:Ls.background.vertexShader,fragmentShader:Ls.background.fragmentShader,side:Ss,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.toneMapped=rn.getTransfer(w.colorSpace)!==Tn,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||h!==w.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,f=w,h=w.version,p=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null))}function m(x,S){x.getRGB(dv,I$(n)),i.buffers.color.setClear(dv.r,dv.g,dv.b,S,a)}function _(){d!==void 0&&(d.geometry.dispose(),d.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return l},setClearColor:function(x,S=1){l.set(x),c=S,m(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(x){c=x,m(l,c)},render:y,addToRenderList:v,dispose:_}}function Oie(n,e){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},o=h(null);let s=o,a=!1;function l(R,P,D,F,A){let I=!1;const N=f(F,D,P);s!==N&&(s=N,u(s.object)),I=p(R,F,D,A),I&&g(R,F,D,A),A!==null&&e.update(A,n.ELEMENT_ARRAY_BUFFER),(I||a)&&(a=!1,S(R,P,D,F),A!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(A).buffer))}function c(){return n.createVertexArray()}function u(R){return n.bindVertexArray(R)}function d(R){return n.deleteVertexArray(R)}function f(R,P,D){const F=D.wireframe===!0;let A=i[R.id];A===void 0&&(A={},i[R.id]=A);let I=A[P.id];I===void 0&&(I={},A[P.id]=I);let N=I[F];return N===void 0&&(N=h(c()),I[F]=N),N}function h(R){const P=[],D=[],F=[];for(let A=0;A<r;A++)P[A]=0,D[A]=0,F[A]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:D,attributeDivisors:F,object:R,attributes:{},index:null}}function p(R,P,D,F){const A=s.attributes,I=P.attributes;let N=0;const L=D.getAttributes();for(const O in L)if(L[O].location>=0){const B=A[O];let z=I[O];if(z===void 0&&(O==="instanceMatrix"&&R.instanceMatrix&&(z=R.instanceMatrix),O==="instanceColor"&&R.instanceColor&&(z=R.instanceColor)),B===void 0||B.attribute!==z||z&&B.data!==z.data)return!0;N++}return s.attributesNum!==N||s.index!==F}function g(R,P,D,F){const A={},I=P.attributes;let N=0;const L=D.getAttributes();for(const O in L)if(L[O].location>=0){let B=I[O];B===void 0&&(O==="instanceMatrix"&&R.instanceMatrix&&(B=R.instanceMatrix),O==="instanceColor"&&R.instanceColor&&(B=R.instanceColor));const z={};z.attribute=B,B&&B.data&&(z.data=B.data),A[O]=z,N++}s.attributes=A,s.attributesNum=N,s.index=F}function y(){const R=s.newAttributes;for(let P=0,D=R.length;P<D;P++)R[P]=0}function v(R){m(R,0)}function m(R,P){const D=s.newAttributes,F=s.enabledAttributes,A=s.attributeDivisors;D[R]=1,F[R]===0&&(n.enableVertexAttribArray(R),F[R]=1),A[R]!==P&&(n.vertexAttribDivisor(R,P),A[R]=P)}function _(){const R=s.newAttributes,P=s.enabledAttributes;for(let D=0,F=P.length;D<F;D++)P[D]!==R[D]&&(n.disableVertexAttribArray(D),P[D]=0)}function x(R,P,D,F,A,I,N){N===!0?n.vertexAttribIPointer(R,P,D,A,I):n.vertexAttribPointer(R,P,D,F,A,I)}function S(R,P,D,F){y();const A=F.attributes,I=D.getAttributes(),N=P.defaultAttributeValues;for(const L in I){const O=I[L];if(O.location>=0){let V=A[L];if(V===void 0&&(L==="instanceMatrix"&&R.instanceMatrix&&(V=R.instanceMatrix),L==="instanceColor"&&R.instanceColor&&(V=R.instanceColor)),V!==void 0){const B=V.normalized,z=V.itemSize,W=e.get(V);if(W===void 0)continue;const ie=W.buffer,k=W.type,j=W.bytesPerElement,Q=k===n.INT||k===n.UNSIGNED_INT||V.gpuType===Xr;if(V.isInterleavedBufferAttribute){const Y=V.data,ne=Y.stride,ye=V.offset;if(Y.isInstancedInterleavedBuffer){for(let me=0;me<O.locationSize;me++)m(O.location+me,Y.meshPerAttribute);R.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let me=0;me<O.locationSize;me++)v(O.location+me);n.bindBuffer(n.ARRAY_BUFFER,ie);for(let me=0;me<O.locationSize;me++)x(O.location+me,z/O.locationSize,k,B,ne*j,(ye+z/O.locationSize*me)*j,Q)}else{if(V.isInstancedBufferAttribute){for(let Y=0;Y<O.locationSize;Y++)m(O.location+Y,V.meshPerAttribute);R.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let Y=0;Y<O.locationSize;Y++)v(O.location+Y);n.bindBuffer(n.ARRAY_BUFFER,ie);for(let Y=0;Y<O.locationSize;Y++)x(O.location+Y,z/O.locationSize,k,B,z*j,z/O.locationSize*Y*j,Q)}}else if(N!==void 0){const B=N[L];if(B!==void 0)switch(B.length){case 2:n.vertexAttrib2fv(O.location,B);break;case 3:n.vertexAttrib3fv(O.location,B);break;case 4:n.vertexAttrib4fv(O.location,B);break;default:n.vertexAttrib1fv(O.location,B)}}}}_()}function w(){T();for(const R in i){const P=i[R];for(const D in P){const F=P[D];for(const A in F)d(F[A].object),delete F[A];delete P[D]}delete i[R]}}function E(R){if(i[R.id]===void 0)return;const P=i[R.id];for(const D in P){const F=P[D];for(const A in F)d(F[A].object),delete F[A];delete P[D]}delete i[R.id]}function C(R){for(const P in i){const D=i[P];if(D[R.id]===void 0)continue;const F=D[R.id];for(const A in F)d(F[A].object),delete F[A];delete D[R.id]}}function T(){M(),a=!0,s!==o&&(s=o,u(s.object))}function M(){o.geometry=null,o.program=null,o.wireframe=!1}return{setup:l,reset:T,resetDefaultState:M,dispose:w,releaseStatesOfGeometry:E,releaseStatesOfProgram:C,initAttributes:y,enableAttribute:v,disableUnusedAttributes:_}}function Iie(n,e,r){let i;function o(u){i=u}function s(u,d){n.drawArrays(i,u,d),r.update(d,i,1)}function a(u,d,f){f!==0&&(n.drawArraysInstanced(i,u,d,f),r.update(d,i,f))}function l(u,d,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,d,0,f);let p=0;for(let g=0;g<f;g++)p+=d[g];r.update(p,i,1)}function c(u,d,f,h){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<u.length;g++)a(u[g],d[g],h[g]);else{p.multiDrawArraysInstancedWEBGL(i,u,0,d,0,h,0,f);let g=0;for(let y=0;y<f;y++)g+=d[y]*h[y];r.update(g,i,1)}}this.setMode=o,this.render=s,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function Die(n,e,r,i){let o;function s(){if(o!==void 0)return o;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");o=n.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o}function a(C){return!(C!==ti&&i.convert(C)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(C){const T=C===Yr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(C!==fi&&i.convert(C)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&C!==hr&&!T)}function c(C){if(C==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=r.precision!==void 0?r.precision:"highp";const d=c(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const f=r.logarithmicDepthBuffer===!0,h=r.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),x=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=g>0,E=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:a,textureTypeReadable:l,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:v,maxAttributes:m,maxVertexUniforms:_,maxVaryings:x,maxFragmentUniforms:S,vertexTextures:w,maxSamples:E}}function Lie(n){const e=this;let r=null,i=0,o=!1,s=!1;const a=new ls,l=new kt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const p=f.length!==0||h||i!==0||o;return o=h,i=f.length,p},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){r=d(f,h,0)},this.setState=function(f,h,p){const g=f.clippingPlanes,y=f.clipIntersection,v=f.clipShadows,m=n.get(f);if(!o||g===null||g.length===0||s&&!v)s?d(null):u();else{const _=s?0:i,x=_*4;let S=m.clippingState||null;c.value=S,S=d(g,h,x,p);for(let w=0;w!==x;++w)S[w]=r[w];m.clippingState=S,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function u(){c.value!==r&&(c.value=r,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(f,h,p,g){const y=f!==null?f.length:0;let v=null;if(y!==0){if(v=c.value,g!==!0||v===null){const m=p+y*4,_=h.matrixWorldInverse;l.getNormalMatrix(_),(v===null||v.length<m)&&(v=new Float32Array(m));for(let x=0,S=p;x!==y;++x,S+=4)a.copy(f[x]).applyMatrix4(_,l),a.normal.toArray(v,S),v[S+3]=a.constant}c.value=v,c.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,v}}function Fie(n){let e=new WeakMap;function r(a,l){return l===Ql?a.mapping=Wo:l===Zl&&(a.mapping=qo),a}function i(a){if(a&&a.isTexture){const l=a.mapping;if(l===Ql||l===Zl)if(e.has(a)){const c=e.get(a).texture;return r(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const u=new F$(c.height);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",o),r(u.texture,a.mapping)}else return null}}return a}function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const wd=4,AP=[.125,.215,.35,.446,.526,.582],Oc=20,lS=new Zm,NP=new Tt;let cS=null,uS=0,dS=0,fS=!1;const Cc=(1+Math.sqrt(5))/2,Qu=1/Cc,PP=[new K(-Cc,Qu,0),new K(Cc,Qu,0),new K(-Qu,0,Cc),new K(Qu,0,Cc),new K(0,Cc,-Qu),new K(0,Cc,Qu),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)];let OP=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,i=.1,o=100){cS=this._renderer.getRenderTarget(),uS=this._renderer.getActiveCubeFace(),dS=this._renderer.getActiveMipmapLevel(),fS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,o,s),r>0&&this._blur(s,0,0,r),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=LP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=DP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cS,uS,dS),this._renderer.xr.enabled=fS,e.scissorTest=!1,fv(e,0,0,e.width,e.height)}_fromTexture(e,r){e.mapping===Wo||e.mapping===qo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cS=this._renderer.getRenderTarget(),uS=this._renderer.getActiveCubeFace(),dS=this._renderer.getActiveMipmapLevel(),fS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=r||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:Ur,minFilter:Ur,generateMipmaps:!1,type:Yr,format:ti,colorSpace:ko,depthBuffer:!1},o=IP(e,r,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=IP(e,r,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Uie(s)),this._blurMaterial=Bie(s,e,r)}return o}_compileMaterial(e){const r=new Br(this._lodPlanes[0],e);this._renderer.compile(r,lS)}_sceneToCubeUV(e,r,i,o){const l=new Si(90,1,r,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,h=d.toneMapping;d.getClearColor(NP),d.toneMapping=Qi,d.autoClear=!1;const p=new Qf({name:"PMREM.Background",side:er,depthWrite:!1,depthTest:!1}),g=new Br(new Eu,p);let y=!1;const v=e.background;v?v.isColor&&(p.color.copy(v),e.background=null,y=!0):(p.color.copy(NP),y=!0);for(let m=0;m<6;m++){const _=m%3;_===0?(l.up.set(0,c[m],0),l.lookAt(u[m],0,0)):_===1?(l.up.set(0,0,c[m]),l.lookAt(0,u[m],0)):(l.up.set(0,c[m],0),l.lookAt(0,0,u[m]));const x=this._cubeSize;fv(o,_*x,m>2?x:0,x,x),d.setRenderTarget(o),y&&d.render(g,l),d.render(e,l)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=h,d.autoClear=f,e.background=v}_textureToCubeUV(e,r){const i=this._renderer,o=e.mapping===Wo||e.mapping===qo;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=LP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=DP());const s=o?this._cubemapMaterial:this._equirectMaterial,a=new Br(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;fv(r,0,0,3*c,2*c),i.setRenderTarget(r),i.render(a,lS)}_applyPMREM(e){const r=this._renderer,i=r.autoClear;r.autoClear=!1;const o=this._lodPlanes.length;for(let s=1;s<o;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=PP[(o-s-1)%PP.length];this._blur(e,s-1,s,a,l)}r.autoClear=i}_blur(e,r,i,o,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,r,i,o,"latitudinal",s),this._halfBlur(a,e,i,i,o,"longitudinal",s)}_halfBlur(e,r,i,o,s,a,l){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new Br(this._lodPlanes[o],u),h=u.uniforms,p=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Oc-1),y=s/g,v=isFinite(s)?1+Math.floor(d*y):Oc;v>Oc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Oc}`);const m=[];let _=0;for(let C=0;C<Oc;++C){const T=C/y,M=Math.exp(-T*T/2);m.push(M),C===0?_+=M:C<v&&(_+=2*M)}for(let C=0;C<m.length;C++)m[C]=m[C]/_;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=m,h.latitudinal.value=a==="latitudinal",l&&(h.poleAxis.value=l);const{_lodMax:x}=this;h.dTheta.value=g,h.mipInt.value=x-i;const S=this._sizeLods[o],w=3*S*(o>x-wd?o-x+wd:0),E=4*(this._cubeSize-S);fv(r,w,E,3*S,2*S),c.setRenderTarget(r),c.render(f,lS)}};function Uie(n){const e=[],r=[],i=[];let o=n;const s=n-wd+1+AP.length;for(let a=0;a<s;a++){const l=Math.pow(2,o);r.push(l);let c=1/l;a>n-wd?c=AP[a-n+wd-1]:a===0&&(c=0),i.push(c);const u=1/(l-2),d=-u,f=1+u,h=[d,d,f,d,f,f,d,d,f,f,d,f],p=6,g=6,y=3,v=2,m=1,_=new Float32Array(y*g*p),x=new Float32Array(v*g*p),S=new Float32Array(m*g*p);for(let E=0;E<p;E++){const C=E%3*2/3-1,T=E>2?0:-1,M=[C,T,0,C+2/3,T,0,C+2/3,T+1,0,C,T,0,C+2/3,T+1,0,C,T+1,0];_.set(M,y*g*E),x.set(h,v*g*E);const R=[E,E,E,E,E,E];S.set(R,m*g*E)}const w=new Di;w.setAttribute("position",new ri(_,y)),w.setAttribute("uv",new ri(x,v)),w.setAttribute("faceIndex",new ri(S,m)),e.push(w),o>wd&&o--}return{lodPlanes:e,sizeLods:r,sigmas:i}}function IP(n,e,r){const i=new xs(n,e,r);return i.texture.mapping=lu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function fv(n,e,r,i,o){n.viewport.set(e,r,i,o),n.scissor.set(e,r,i,o)}function Bie(n,e,r){const i=new Float32Array(Oc),o=new K(0,1,0);return new Vi({name:"SphericalGaussianBlur",defines:{n:Oc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:bM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Mi,depthTest:!1,depthWrite:!1})}function DP(){return new Vi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:bM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Mi,depthTest:!1,depthWrite:!1})}function LP(){return new Vi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:bM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Mi,depthTest:!1,depthWrite:!1})}function bM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function $ie(n){let e=new WeakMap,r=null;function i(l){if(l&&l.isTexture){const c=l.mapping,u=c===Ql||c===Zl,d=c===Wo||c===qo;if(u||d){let f=e.get(l);const h=f!==void 0?f.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==h)return r===null&&(r=new OP(n)),f=u?r.fromEquirectangular(l,f):r.fromCubemap(l,f),f.texture.pmremVersion=l.pmremVersion,e.set(l,f),f.texture;if(f!==void 0)return f.texture;{const p=l.image;return u&&p&&p.height>0||d&&p&&o(p)?(r===null&&(r=new OP(n)),f=u?r.fromEquirectangular(l):r.fromCubemap(l),f.texture.pmremVersion=l.pmremVersion,e.set(l,f),l.addEventListener("dispose",s),f.texture):null}}}return l}function o(l){let c=0;const u=6;for(let d=0;d<u;d++)l[d]!==void 0&&c++;return c===u}function s(l){const c=l.target;c.removeEventListener("dispose",s);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function a(){e=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:a}}function zie(n){const e={};function r(i){if(e[i]!==void 0)return e[i];let o;switch(i){case"WEBGL_depth_texture":o=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=n.getExtension(i)}return e[i]=o,o}return{has:function(i){return r(i)!==null},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(i){const o=r(i);return o===null&&Pc("THREE.WebGLRenderer: "+i+" extension not supported."),o}}}function kie(n,e,r,i){const o={},s=new WeakMap;function a(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",a),delete o[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,r.memory.geometries--}function l(f,h){return o[h.id]===!0||(h.addEventListener("dispose",a),o[h.id]=!0,r.memory.geometries++),h}function c(f){const h=f.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER)}function u(f){const h=[],p=f.index,g=f.attributes.position;let y=0;if(p!==null){const _=p.array;y=p.version;for(let x=0,S=_.length;x<S;x+=3){const w=_[x+0],E=_[x+1],C=_[x+2];h.push(w,E,E,C,C,w)}}else if(g!==void 0){const _=g.array;y=g.version;for(let x=0,S=_.length/3-1;x<S;x+=3){const w=x+0,E=x+1,C=x+2;h.push(w,E,E,C,C,w)}}else return;const v=new(R$(h)?dM:uM)(h,1);v.version=y;const m=s.get(f);m&&e.remove(m),s.set(f,v)}function d(f){const h=s.get(f);if(h){const p=f.index;p!==null&&h.version<p.version&&u(f)}else u(f);return s.get(f)}return{get:l,update:c,getWireframeAttribute:d}}function Vie(n,e,r){let i;function o(h){i=h}let s,a;function l(h){s=h.type,a=h.bytesPerElement}function c(h,p){n.drawElements(i,p,s,h*a),r.update(p,i,1)}function u(h,p,g){g!==0&&(n.drawElementsInstanced(i,p,s,h*a,g),r.update(p,i,g))}function d(h,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,s,h,0,g);let v=0;for(let m=0;m<g;m++)v+=p[m];r.update(v,i,1)}function f(h,p,g,y){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let m=0;m<h.length;m++)u(h[m]/a,p[m],y[m]);else{v.multiDrawElementsInstancedWEBGL(i,p,0,s,h,0,y,0,g);let m=0;for(let _=0;_<g;_++)m+=p[_]*y[_];r.update(m,i,1)}}this.setMode=o,this.setIndex=l,this.render=c,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=f}function Gie(n){const e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,l){switch(r.calls++,a){case n.TRIANGLES:r.triangles+=l*(s/3);break;case n.LINES:r.lines+=l*(s/2);break;case n.LINE_STRIP:r.lines+=l*(s-1);break;case n.LINE_LOOP:r.lines+=l*s;break;case n.POINTS:r.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function o(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:o,update:i}}function Hie(n,e,r){const i=new WeakMap,o=new Wt;function s(a,l,c){const u=a.morphTargetInfluences,d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,f=d!==void 0?d.length:0;let h=i.get(l);if(h===void 0||h.count!==f){let R=function(){T.dispose(),i.delete(l),l.removeEventListener("dispose",R)};var p=R;h!==void 0&&h.texture.dispose();const g=l.morphAttributes.position!==void 0,y=l.morphAttributes.normal!==void 0,v=l.morphAttributes.color!==void 0,m=l.morphAttributes.position||[],_=l.morphAttributes.normal||[],x=l.morphAttributes.color||[];let S=0;g===!0&&(S=1),y===!0&&(S=2),v===!0&&(S=3);let w=l.attributes.position.count*S,E=1;w>e.maxTextureSize&&(E=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const C=new Float32Array(w*E*4*f),T=new lM(C,w,E,f);T.type=hr,T.needsUpdate=!0;const M=S*4;for(let P=0;P<f;P++){const D=m[P],F=_[P],A=x[P],I=w*E*4*P;for(let N=0;N<D.count;N++){const L=N*M;g===!0&&(o.fromBufferAttribute(D,N),C[I+L+0]=o.x,C[I+L+1]=o.y,C[I+L+2]=o.z,C[I+L+3]=0),y===!0&&(o.fromBufferAttribute(F,N),C[I+L+4]=o.x,C[I+L+5]=o.y,C[I+L+6]=o.z,C[I+L+7]=0),v===!0&&(o.fromBufferAttribute(A,N),C[I+L+8]=o.x,C[I+L+9]=o.y,C[I+L+10]=o.z,C[I+L+11]=A.itemSize===4?o.w:1)}}h={count:f,texture:T,size:new je(w,E)},i.set(l,h),l.addEventListener("dispose",R)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",a.morphTexture,r);else{let g=0;for(let v=0;v<u.length;v++)g+=u[v];const y=l.morphTargetsRelative?1:1-g;c.getUniforms().setValue(n,"morphTargetBaseInfluence",y),c.getUniforms().setValue(n,"morphTargetInfluences",u)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,r),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function jie(n,e,r,i){let o=new WeakMap;function s(c){const u=i.render.frame,d=c.geometry,f=e.get(c,d);if(o.get(f)!==u&&(e.update(f),o.set(f,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),o.get(c)!==u&&(r.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&r.update(c.instanceColor,n.ARRAY_BUFFER),o.set(c,u))),c.isSkinnedMesh){const h=c.skeleton;o.get(h)!==u&&(h.update(),o.set(h,u))}return f}function a(){o=new WeakMap}function l(c){const u=c.target;u.removeEventListener("dispose",l),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:s,dispose:a}}const q$=new $r,FP=new ac(1,1),X$=new lM,K$=new Vee,Y$=new q_,UP=[],BP=[],$P=new Float32Array(16),zP=new Float32Array(9),kP=new Float32Array(4);function Jf(n,e,r){const i=n[0];if(i<=0||i>0)return n;const o=e*r;let s=UP[o];if(s===void 0&&(s=new Float32Array(o),UP[o]=s),e!==0){i.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=r,n[a].toArray(s,l)}return s}function kr(n,e){if(n.length!==e.length)return!1;for(let r=0,i=n.length;r<i;r++)if(n[r]!==e[r])return!1;return!0}function Vr(n,e){for(let r=0,i=e.length;r<i;r++)n[r]=e[r]}function J_(n,e){let r=BP[e];r===void 0&&(r=new Int32Array(e),BP[e]=r);for(let i=0;i!==e;++i)r[i]=n.allocateTextureUnit();return r}function Wie(n,e){const r=this.cache;r[0]!==e&&(n.uniform1f(this.addr,e),r[0]=e)}function qie(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(kr(r,e))return;n.uniform2fv(this.addr,e),Vr(r,e)}}function Xie(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(kr(r,e))return;n.uniform3fv(this.addr,e),Vr(r,e)}}function Kie(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(kr(r,e))return;n.uniform4fv(this.addr,e),Vr(r,e)}}function Yie(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(kr(r,e))return;n.uniformMatrix2fv(this.addr,!1,e),Vr(r,e)}else{if(kr(r,i))return;kP.set(i),n.uniformMatrix2fv(this.addr,!1,kP),Vr(r,i)}}function Qie(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(kr(r,e))return;n.uniformMatrix3fv(this.addr,!1,e),Vr(r,e)}else{if(kr(r,i))return;zP.set(i),n.uniformMatrix3fv(this.addr,!1,zP),Vr(r,i)}}function Zie(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(kr(r,e))return;n.uniformMatrix4fv(this.addr,!1,e),Vr(r,e)}else{if(kr(r,i))return;$P.set(i),n.uniformMatrix4fv(this.addr,!1,$P),Vr(r,i)}}function Jie(n,e){const r=this.cache;r[0]!==e&&(n.uniform1i(this.addr,e),r[0]=e)}function eoe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(kr(r,e))return;n.uniform2iv(this.addr,e),Vr(r,e)}}function toe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(kr(r,e))return;n.uniform3iv(this.addr,e),Vr(r,e)}}function noe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(kr(r,e))return;n.uniform4iv(this.addr,e),Vr(r,e)}}function roe(n,e){const r=this.cache;r[0]!==e&&(n.uniform1ui(this.addr,e),r[0]=e)}function ioe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(kr(r,e))return;n.uniform2uiv(this.addr,e),Vr(r,e)}}function ooe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(kr(r,e))return;n.uniform3uiv(this.addr,e),Vr(r,e)}}function soe(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(kr(r,e))return;n.uniform4uiv(this.addr,e),Vr(r,e)}}function aoe(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o);let s;this.type===n.SAMPLER_2D_SHADOW?(FP.compareFunction=H_,s=FP):s=q$,r.setTexture2D(e||s,o)}function loe(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),r.setTexture3D(e||K$,o)}function coe(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),r.setTextureCube(e||Y$,o)}function uoe(n,e,r){const i=this.cache,o=r.allocateTextureUnit();i[0]!==o&&(n.uniform1i(this.addr,o),i[0]=o),r.setTexture2DArray(e||X$,o)}function doe(n){switch(n){case 5126:return Wie;case 35664:return qie;case 35665:return Xie;case 35666:return Kie;case 35674:return Yie;case 35675:return Qie;case 35676:return Zie;case 5124:case 35670:return Jie;case 35667:case 35671:return eoe;case 35668:case 35672:return toe;case 35669:case 35673:return noe;case 5125:return roe;case 36294:return ioe;case 36295:return ooe;case 36296:return soe;case 35678:case 36198:case 36298:case 36306:case 35682:return aoe;case 35679:case 36299:case 36307:return loe;case 35680:case 36300:case 36308:case 36293:return coe;case 36289:case 36303:case 36311:case 36292:return uoe}}function foe(n,e){n.uniform1fv(this.addr,e)}function hoe(n,e){const r=Jf(e,this.size,2);n.uniform2fv(this.addr,r)}function poe(n,e){const r=Jf(e,this.size,3);n.uniform3fv(this.addr,r)}function moe(n,e){const r=Jf(e,this.size,4);n.uniform4fv(this.addr,r)}function goe(n,e){const r=Jf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,r)}function voe(n,e){const r=Jf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,r)}function yoe(n,e){const r=Jf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,r)}function _oe(n,e){n.uniform1iv(this.addr,e)}function xoe(n,e){n.uniform2iv(this.addr,e)}function boe(n,e){n.uniform3iv(this.addr,e)}function Soe(n,e){n.uniform4iv(this.addr,e)}function woe(n,e){n.uniform1uiv(this.addr,e)}function Eoe(n,e){n.uniform2uiv(this.addr,e)}function Coe(n,e){n.uniform3uiv(this.addr,e)}function Toe(n,e){n.uniform4uiv(this.addr,e)}function Moe(n,e,r){const i=this.cache,o=e.length,s=J_(r,o);kr(i,s)||(n.uniform1iv(this.addr,s),Vr(i,s));for(let a=0;a!==o;++a)r.setTexture2D(e[a]||q$,s[a])}function Roe(n,e,r){const i=this.cache,o=e.length,s=J_(r,o);kr(i,s)||(n.uniform1iv(this.addr,s),Vr(i,s));for(let a=0;a!==o;++a)r.setTexture3D(e[a]||K$,s[a])}function Aoe(n,e,r){const i=this.cache,o=e.length,s=J_(r,o);kr(i,s)||(n.uniform1iv(this.addr,s),Vr(i,s));for(let a=0;a!==o;++a)r.setTextureCube(e[a]||Y$,s[a])}function Noe(n,e,r){const i=this.cache,o=e.length,s=J_(r,o);kr(i,s)||(n.uniform1iv(this.addr,s),Vr(i,s));for(let a=0;a!==o;++a)r.setTexture2DArray(e[a]||X$,s[a])}function Poe(n){switch(n){case 5126:return foe;case 35664:return hoe;case 35665:return poe;case 35666:return moe;case 35674:return goe;case 35675:return voe;case 35676:return yoe;case 5124:case 35670:return _oe;case 35667:case 35671:return xoe;case 35668:case 35672:return boe;case 35669:case 35673:return Soe;case 5125:return woe;case 36294:return Eoe;case 36295:return Coe;case 36296:return Toe;case 35678:case 36198:case 36298:case 36306:case 35682:return Moe;case 35679:case 36299:case 36307:return Roe;case 35680:case 36300:case 36308:case 36293:return Aoe;case 36289:case 36303:case 36311:case 36292:return Noe}}class Ooe{constructor(e,r,i){this.id=e,this.addr=i,this.cache=[],this.type=r.type,this.setValue=doe(r.type)}}class Ioe{constructor(e,r,i){this.id=e,this.addr=i,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=Poe(r.type)}}class Doe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,r,i){const o=this.seq;for(let s=0,a=o.length;s!==a;++s){const l=o[s];l.setValue(e,r[l.id],i)}}}const hS=/(\w+)(\])?(\[|\.)?/g;function VP(n,e){n.seq.push(e),n.map[e.id]=e}function Loe(n,e,r){const i=n.name,o=i.length;for(hS.lastIndex=0;;){const s=hS.exec(i),a=hS.lastIndex;let l=s[1];const c=s[2]==="]",u=s[3];if(c&&(l=l|0),u===void 0||u==="["&&a+2===o){VP(r,u===void 0?new Ooe(l,n,e):new Ioe(l,n,e));break}else{let f=r.map[l];f===void 0&&(f=new Doe(l),VP(r,f)),r=f}}}class u0{constructor(e,r){this.seq=[],this.map={};const i=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const s=e.getActiveUniform(r,o),a=e.getUniformLocation(r,s.name);Loe(s,a,this)}}setValue(e,r,i,o){const s=this.map[r];s!==void 0&&s.setValue(e,i,o)}setOptional(e,r,i){const o=r[i];o!==void 0&&this.setValue(e,i,o)}static upload(e,r,i,o){for(let s=0,a=r.length;s!==a;++s){const l=r[s],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,o)}}static seqWithValue(e,r){const i=[];for(let o=0,s=e.length;o!==s;++o){const a=e[o];a.id in r&&i.push(a)}return i}}function GP(n,e,r){const i=n.createShader(e);return n.shaderSource(i,r),n.compileShader(i),i}const Foe=37297;let Uoe=0;function Boe(n,e){const r=n.split(`
`),i=[],o=Math.max(e-6,0),s=Math.min(e+6,r.length);for(let a=o;a<s;a++){const l=a+1;i.push(`${l===e?">":" "} ${l}: ${r[a]}`)}return i.join(`
`)}const HP=new kt;function $oe(n){rn._getMatrix(HP,rn.workingColorSpace,n);const e=`mat3( ${HP.elements.map(r=>r.toFixed(4))} )`;switch(rn.getTransfer(n)){case cy:return[e,"LinearTransferOETF"];case Tn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function jP(n,e,r){const i=n.getShaderParameter(e,n.COMPILE_STATUS),o=n.getShaderInfoLog(e).trim();if(i&&o==="")return"";const s=/ERROR: 0:(\d+)/.exec(o);if(s){const a=parseInt(s[1]);return r.toUpperCase()+`

`+o+`

`+Boe(n.getShaderSource(e),a)}else return o}function zoe(n,e){const r=$oe(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join(`
`)}function koe(n,e){let r;switch(e){case b$:r="Linear";break;case S$:r="Reinhard";break;case w$:r="Cineon";break;case E$:r="ACESFilmic";break;case C$:r="AgX";break;case T$:r="Neutral";break;case tee:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+n+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const hv=new K;function Voe(){rn.getLuminanceCoefficients(hv);const n=hv.x.toFixed(4),e=hv.y.toFixed(4),r=hv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${r} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Goe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Yh).join(`
`)}function Hoe(n){const e=[];for(const r in n){const i=n[r];i!==!1&&e.push("#define "+r+" "+i)}return e.join(`
`)}function joe(n,e){const r={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o++){const s=n.getActiveAttrib(e,o),a=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),r[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:l}}return r}function Yh(n){return n!==""}function WP(n,e){const r=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function qP(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Woe=/^[ \t]*#include +<([\w\d./]+)>/gm;function yE(n){return n.replace(Woe,Xoe)}const qoe=new Map;function Xoe(n,e){let r=tn[e];if(r===void 0){const i=qoe.get(e);if(i!==void 0)r=tn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return yE(r)}const Koe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function XP(n){return n.replace(Koe,Yoe)}function Yoe(n,e,r,i){let o="";for(let s=parseInt(e);s<parseInt(r);s++)o+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return o}function KP(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Qoe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===UT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===YJ?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ho&&(e="SHADOWMAP_TYPE_VSM"),e}function Zoe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Wo:case qo:e="ENVMAP_TYPE_CUBE";break;case lu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Joe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case qo:e="ENVMAP_MODE_REFRACTION";break}return e}function ese(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Km:e="ENVMAP_BLENDING_MULTIPLY";break;case _$:e="ENVMAP_BLENDING_MIX";break;case x$:e="ENVMAP_BLENDING_ADD";break}return e}function tse(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const r=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function nse(n,e,r,i){const o=n.getContext(),s=r.defines;let a=r.vertexShader,l=r.fragmentShader;const c=Qoe(r),u=Zoe(r),d=Joe(r),f=ese(r),h=tse(r),p=Goe(r),g=Hoe(s),y=o.createProgram();let v,m,_=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(v=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g].filter(Yh).join(`
`),v.length>0&&(v+=`
`),m=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g].filter(Yh).join(`
`),m.length>0&&(m+=`
`)):(v=[KP(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Yh).join(`
`),m=[KP(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+d:"",r.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==Qi?"#define TONE_MAPPING":"",r.toneMapping!==Qi?tn.tonemapping_pars_fragment:"",r.toneMapping!==Qi?koe("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",tn.colorspace_pars_fragment,zoe("linearToOutputTexel",r.outputColorSpace),Voe(),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(Yh).join(`
`)),a=yE(a),a=WP(a,r),a=qP(a,r),l=yE(l),l=WP(l,r),l=qP(l,r),a=XP(a),l=XP(l),r.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,v=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,m=["#define varying in",r.glslVersion===ZN?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===ZN?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const x=_+v+a,S=_+m+l,w=GP(o,o.VERTEX_SHADER,x),E=GP(o,o.FRAGMENT_SHADER,S);o.attachShader(y,w),o.attachShader(y,E),r.index0AttributeName!==void 0?o.bindAttribLocation(y,0,r.index0AttributeName):r.morphTargets===!0&&o.bindAttribLocation(y,0,"position"),o.linkProgram(y);function C(P){if(n.debug.checkShaderErrors){const D=o.getProgramInfoLog(y).trim(),F=o.getShaderInfoLog(w).trim(),A=o.getShaderInfoLog(E).trim();let I=!0,N=!0;if(o.getProgramParameter(y,o.LINK_STATUS)===!1)if(I=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(o,y,w,E);else{const L=jP(o,w,"vertex"),O=jP(o,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(y,o.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+D+`
`+L+`
`+O)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(F===""||A==="")&&(N=!1);N&&(P.diagnostics={runnable:I,programLog:D,vertexShader:{log:F,prefix:v},fragmentShader:{log:A,prefix:m}})}o.deleteShader(w),o.deleteShader(E),T=new u0(o,y),M=joe(o,y)}let T;this.getUniforms=function(){return T===void 0&&C(this),T};let M;this.getAttributes=function(){return M===void 0&&C(this),M};let R=r.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=o.getProgramParameter(y,Foe)),R},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(y),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=Uoe++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=w,this.fragmentShader=E,this}let rse=0;class ise{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.vertexShader,i=e.fragmentShader,o=this._getShaderStage(r),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(o)===!1&&(a.add(o),o.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const r=this.materialCache.get(e);for(const i of r)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const r=this.materialCache;let i=r.get(e);return i===void 0&&(i=new Set,r.set(e,i)),i}_getShaderStage(e){const r=this.shaderCache;let i=r.get(e);return i===void 0&&(i=new ose(e),r.set(e,i)),i}}class ose{constructor(e){this.id=rse++,this.code=e,this.usedTimes=0}}function sse(n,e,r,i,o,s,a){const l=new cM,c=new ise,u=new Set,d=[],f=o.logarithmicDepthBuffer,h=o.vertexTextures;let p=o.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(M){return u.add(M),M===0?"uv":`uv${M}`}function v(M,R,P,D,F){const A=D.fog,I=F.geometry,N=M.isMeshStandardMaterial?D.environment:null,L=(M.isMeshStandardMaterial?r:e).get(M.envMap||N),O=L&&L.mapping===lu?L.image.height:null,V=g[M.type];M.precision!==null&&(p=o.getMaxPrecision(M.precision),p!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",p,"instead."));const B=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,z=B!==void 0?B.length:0;let W=0;I.morphAttributes.position!==void 0&&(W=1),I.morphAttributes.normal!==void 0&&(W=2),I.morphAttributes.color!==void 0&&(W=3);let ie,k,j,Q;if(V){const qe=Ls[V];ie=qe.vertexShader,k=qe.fragmentShader}else ie=M.vertexShader,k=M.fragmentShader,c.update(M),j=c.getVertexShaderID(M),Q=c.getFragmentShaderID(M);const Y=n.getRenderTarget(),ne=n.state.buffers.depth.getReversed(),ye=F.isInstancedMesh===!0,me=F.isBatchedMesh===!0,fe=!!M.map,ae=!!M.matcap,ve=!!L,q=!!M.aoMap,ge=!!M.lightMap,xe=!!M.bumpMap,_e=!!M.normalMap,Se=!!M.displacementMap,Ke=!!M.emissiveMap,Ue=!!M.metalnessMap,H=!!M.roughnessMap,U=M.anisotropy>0,X=M.clearcoat>0,oe=M.dispersion>0,pe=M.iridescence>0,ce=M.sheen>0,Fe=M.transmission>0,Re=U&&!!M.anisotropyMap,Le=X&&!!M.clearcoatMap,Je=X&&!!M.clearcoatNormalMap,Me=X&&!!M.clearcoatRoughnessMap,ze=pe&&!!M.iridescenceMap,Ee=pe&&!!M.iridescenceThicknessMap,Pe=ce&&!!M.sheenColorMap,ke=ce&&!!M.sheenRoughnessMap,Ve=!!M.specularMap,$e=!!M.specularColorMap,_t=!!M.specularIntensityMap,J=Fe&&!!M.transmissionMap,Qe=Fe&&!!M.thicknessMap,be=!!M.gradientMap,Oe=!!M.alphaMap,Ze=M.alphaTest>0,We=!!M.alphaHash,wt=!!M.extensions;let Mt=Qi;M.toneMapped&&(Y===null||Y.isXRRenderTarget===!0)&&(Mt=n.toneMapping);const ct={shaderID:V,shaderType:M.type,shaderName:M.name,vertexShader:ie,fragmentShader:k,defines:M.defines,customVertexShaderID:j,customFragmentShaderID:Q,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:p,batching:me,batchingColor:me&&F._colorsTexture!==null,instancing:ye,instancingColor:ye&&F.instanceColor!==null,instancingMorph:ye&&F.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:Y===null?n.outputColorSpace:Y.isXRRenderTarget===!0?Y.texture.colorSpace:ko,alphaToCoverage:!!M.alphaToCoverage,map:fe,matcap:ae,envMap:ve,envMapMode:ve&&L.mapping,envMapCubeUVHeight:O,aoMap:q,lightMap:ge,bumpMap:xe,normalMap:_e,displacementMap:h&&Se,emissiveMap:Ke,normalMapObjectSpace:_e&&M.normalMapType===M$,normalMapTangentSpace:_e&&M.normalMapType===Ga,metalnessMap:Ue,roughnessMap:H,anisotropy:U,anisotropyMap:Re,clearcoat:X,clearcoatMap:Le,clearcoatNormalMap:Je,clearcoatRoughnessMap:Me,dispersion:oe,iridescence:pe,iridescenceMap:ze,iridescenceThicknessMap:Ee,sheen:ce,sheenColorMap:Pe,sheenRoughnessMap:ke,specularMap:Ve,specularColorMap:$e,specularIntensityMap:_t,transmission:Fe,transmissionMap:J,thicknessMap:Qe,gradientMap:be,opaque:M.transparent===!1&&M.blending===zo&&M.alphaToCoverage===!1,alphaMap:Oe,alphaTest:Ze,alphaHash:We,combine:M.combine,mapUv:fe&&y(M.map.channel),aoMapUv:q&&y(M.aoMap.channel),lightMapUv:ge&&y(M.lightMap.channel),bumpMapUv:xe&&y(M.bumpMap.channel),normalMapUv:_e&&y(M.normalMap.channel),displacementMapUv:Se&&y(M.displacementMap.channel),emissiveMapUv:Ke&&y(M.emissiveMap.channel),metalnessMapUv:Ue&&y(M.metalnessMap.channel),roughnessMapUv:H&&y(M.roughnessMap.channel),anisotropyMapUv:Re&&y(M.anisotropyMap.channel),clearcoatMapUv:Le&&y(M.clearcoatMap.channel),clearcoatNormalMapUv:Je&&y(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Me&&y(M.clearcoatRoughnessMap.channel),iridescenceMapUv:ze&&y(M.iridescenceMap.channel),iridescenceThicknessMapUv:Ee&&y(M.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&y(M.sheenColorMap.channel),sheenRoughnessMapUv:ke&&y(M.sheenRoughnessMap.channel),specularMapUv:Ve&&y(M.specularMap.channel),specularColorMapUv:$e&&y(M.specularColorMap.channel),specularIntensityMapUv:_t&&y(M.specularIntensityMap.channel),transmissionMapUv:J&&y(M.transmissionMap.channel),thicknessMapUv:Qe&&y(M.thicknessMap.channel),alphaMapUv:Oe&&y(M.alphaMap.channel),vertexTangents:!!I.attributes.tangent&&(_e||U),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!I.attributes.color&&I.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!I.attributes.uv&&(fe||Oe),fog:!!A,useFog:M.fog===!0,fogExp2:!!A&&A.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:ne,skinning:F.isSkinnedMesh===!0,morphTargets:I.morphAttributes.position!==void 0,morphNormals:I.morphAttributes.normal!==void 0,morphColors:I.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:W,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&P.length>0,shadowMapType:n.shadowMap.type,toneMapping:Mt,decodeVideoTexture:fe&&M.map.isVideoTexture===!0&&rn.getTransfer(M.map.colorSpace)===Tn,decodeVideoTextureEmissive:Ke&&M.emissiveMap.isVideoTexture===!0&&rn.getTransfer(M.emissiveMap.colorSpace)===Tn,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===wi,flipSided:M.side===er,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:wt&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(wt&&M.extensions.multiDraw===!0||me)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return ct.vertexUv1s=u.has(1),ct.vertexUv2s=u.has(2),ct.vertexUv3s=u.has(3),u.clear(),ct}function m(M){const R=[];if(M.shaderID?R.push(M.shaderID):(R.push(M.customVertexShaderID),R.push(M.customFragmentShaderID)),M.defines!==void 0)for(const P in M.defines)R.push(P),R.push(M.defines[P]);return M.isRawShaderMaterial===!1&&(_(R,M),x(R,M),R.push(n.outputColorSpace)),R.push(M.customProgramCacheKey),R.join()}function _(M,R){M.push(R.precision),M.push(R.outputColorSpace),M.push(R.envMapMode),M.push(R.envMapCubeUVHeight),M.push(R.mapUv),M.push(R.alphaMapUv),M.push(R.lightMapUv),M.push(R.aoMapUv),M.push(R.bumpMapUv),M.push(R.normalMapUv),M.push(R.displacementMapUv),M.push(R.emissiveMapUv),M.push(R.metalnessMapUv),M.push(R.roughnessMapUv),M.push(R.anisotropyMapUv),M.push(R.clearcoatMapUv),M.push(R.clearcoatNormalMapUv),M.push(R.clearcoatRoughnessMapUv),M.push(R.iridescenceMapUv),M.push(R.iridescenceThicknessMapUv),M.push(R.sheenColorMapUv),M.push(R.sheenRoughnessMapUv),M.push(R.specularMapUv),M.push(R.specularColorMapUv),M.push(R.specularIntensityMapUv),M.push(R.transmissionMapUv),M.push(R.thicknessMapUv),M.push(R.combine),M.push(R.fogExp2),M.push(R.sizeAttenuation),M.push(R.morphTargetsCount),M.push(R.morphAttributeCount),M.push(R.numDirLights),M.push(R.numPointLights),M.push(R.numSpotLights),M.push(R.numSpotLightMaps),M.push(R.numHemiLights),M.push(R.numRectAreaLights),M.push(R.numDirLightShadows),M.push(R.numPointLightShadows),M.push(R.numSpotLightShadows),M.push(R.numSpotLightShadowsWithMaps),M.push(R.numLightProbes),M.push(R.shadowMapType),M.push(R.toneMapping),M.push(R.numClippingPlanes),M.push(R.numClipIntersection),M.push(R.depthPacking)}function x(M,R){l.disableAll(),R.supportsVertexTextures&&l.enable(0),R.instancing&&l.enable(1),R.instancingColor&&l.enable(2),R.instancingMorph&&l.enable(3),R.matcap&&l.enable(4),R.envMap&&l.enable(5),R.normalMapObjectSpace&&l.enable(6),R.normalMapTangentSpace&&l.enable(7),R.clearcoat&&l.enable(8),R.iridescence&&l.enable(9),R.alphaTest&&l.enable(10),R.vertexColors&&l.enable(11),R.vertexAlphas&&l.enable(12),R.vertexUv1s&&l.enable(13),R.vertexUv2s&&l.enable(14),R.vertexUv3s&&l.enable(15),R.vertexTangents&&l.enable(16),R.anisotropy&&l.enable(17),R.alphaHash&&l.enable(18),R.batching&&l.enable(19),R.dispersion&&l.enable(20),R.batchingColor&&l.enable(21),M.push(l.mask),l.disableAll(),R.fog&&l.enable(0),R.useFog&&l.enable(1),R.flatShading&&l.enable(2),R.logarithmicDepthBuffer&&l.enable(3),R.reverseDepthBuffer&&l.enable(4),R.skinning&&l.enable(5),R.morphTargets&&l.enable(6),R.morphNormals&&l.enable(7),R.morphColors&&l.enable(8),R.premultipliedAlpha&&l.enable(9),R.shadowMapEnabled&&l.enable(10),R.doubleSided&&l.enable(11),R.flipSided&&l.enable(12),R.useDepthPacking&&l.enable(13),R.dithering&&l.enable(14),R.transmission&&l.enable(15),R.sheen&&l.enable(16),R.opaque&&l.enable(17),R.pointsUvs&&l.enable(18),R.decodeVideoTexture&&l.enable(19),R.decodeVideoTextureEmissive&&l.enable(20),R.alphaToCoverage&&l.enable(21),M.push(l.mask)}function S(M){const R=g[M.type];let P;if(R){const D=Ls[R];P=fy.clone(D.uniforms)}else P=M.uniforms;return P}function w(M,R){let P;for(let D=0,F=d.length;D<F;D++){const A=d[D];if(A.cacheKey===R){P=A,++P.usedTimes;break}}return P===void 0&&(P=new nse(n,R,M,s),d.push(P)),P}function E(M){if(--M.usedTimes===0){const R=d.indexOf(M);d[R]=d[d.length-1],d.pop(),M.destroy()}}function C(M){c.remove(M)}function T(){c.dispose()}return{getParameters:v,getProgramCacheKey:m,getUniforms:S,acquireProgram:w,releaseProgram:E,releaseShaderCache:C,programs:d,dispose:T}}function ase(){let n=new WeakMap;function e(a){return n.has(a)}function r(a){let l=n.get(a);return l===void 0&&(l={},n.set(a,l)),l}function i(a){n.delete(a)}function o(a,l,c){n.get(a)[l]=c}function s(){n=new WeakMap}return{has:e,get:r,remove:i,update:o,dispose:s}}function lse(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function YP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function QP(){const n=[];let e=0;const r=[],i=[],o=[];function s(){e=0,r.length=0,i.length=0,o.length=0}function a(f,h,p,g,y,v){let m=n[e];return m===void 0?(m={id:f.id,object:f,geometry:h,material:p,groupOrder:g,renderOrder:f.renderOrder,z:y,group:v},n[e]=m):(m.id=f.id,m.object=f,m.geometry=h,m.material=p,m.groupOrder=g,m.renderOrder=f.renderOrder,m.z=y,m.group=v),e++,m}function l(f,h,p,g,y,v){const m=a(f,h,p,g,y,v);p.transmission>0?i.push(m):p.transparent===!0?o.push(m):r.push(m)}function c(f,h,p,g,y,v){const m=a(f,h,p,g,y,v);p.transmission>0?i.unshift(m):p.transparent===!0?o.unshift(m):r.unshift(m)}function u(f,h){r.length>1&&r.sort(f||lse),i.length>1&&i.sort(h||YP),o.length>1&&o.sort(h||YP)}function d(){for(let f=e,h=n.length;f<h;f++){const p=n[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:r,transmissive:i,transparent:o,init:s,push:l,unshift:c,finish:d,sort:u}}function cse(){let n=new WeakMap;function e(i,o){const s=n.get(i);let a;return s===void 0?(a=new QP,n.set(i,[a])):o>=s.length?(a=new QP,s.push(a)):a=s[o],a}function r(){n=new WeakMap}return{get:e,dispose:r}}function use(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new K,color:new Tt};break;case"SpotLight":r={position:new K,direction:new K,color:new Tt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new K,color:new Tt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new K,skyColor:new Tt,groundColor:new Tt};break;case"RectAreaLight":r={color:new Tt,position:new K,halfWidth:new K,halfHeight:new K};break}return n[e.id]=r,r}}}function dse(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let r;switch(e.type){case"DirectionalLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=r,r}}}let fse=0;function hse(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function pse(n){const e=new use,r=dse(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new K);const o=new K,s=new fn,a=new fn;function l(u){let d=0,f=0,h=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let p=0,g=0,y=0,v=0,m=0,_=0,x=0,S=0,w=0,E=0,C=0;u.sort(hse);for(let M=0,R=u.length;M<R;M++){const P=u[M],D=P.color,F=P.intensity,A=P.distance,I=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)d+=D.r*F,f+=D.g*F,h+=D.b*F;else if(P.isLightProbe){for(let N=0;N<9;N++)i.probe[N].addScaledVector(P.sh.coefficients[N],F);C++}else if(P.isDirectionalLight){const N=e.get(P);if(N.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const L=P.shadow,O=r.get(P);O.shadowIntensity=L.intensity,O.shadowBias=L.bias,O.shadowNormalBias=L.normalBias,O.shadowRadius=L.radius,O.shadowMapSize=L.mapSize,i.directionalShadow[p]=O,i.directionalShadowMap[p]=I,i.directionalShadowMatrix[p]=P.shadow.matrix,_++}i.directional[p]=N,p++}else if(P.isSpotLight){const N=e.get(P);N.position.setFromMatrixPosition(P.matrixWorld),N.color.copy(D).multiplyScalar(F),N.distance=A,N.coneCos=Math.cos(P.angle),N.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),N.decay=P.decay,i.spot[y]=N;const L=P.shadow;if(P.map&&(i.spotLightMap[w]=P.map,w++,L.updateMatrices(P),P.castShadow&&E++),i.spotLightMatrix[y]=L.matrix,P.castShadow){const O=r.get(P);O.shadowIntensity=L.intensity,O.shadowBias=L.bias,O.shadowNormalBias=L.normalBias,O.shadowRadius=L.radius,O.shadowMapSize=L.mapSize,i.spotShadow[y]=O,i.spotShadowMap[y]=I,S++}y++}else if(P.isRectAreaLight){const N=e.get(P);N.color.copy(D).multiplyScalar(F),N.halfWidth.set(P.width*.5,0,0),N.halfHeight.set(0,P.height*.5,0),i.rectArea[v]=N,v++}else if(P.isPointLight){const N=e.get(P);if(N.color.copy(P.color).multiplyScalar(P.intensity),N.distance=P.distance,N.decay=P.decay,P.castShadow){const L=P.shadow,O=r.get(P);O.shadowIntensity=L.intensity,O.shadowBias=L.bias,O.shadowNormalBias=L.normalBias,O.shadowRadius=L.radius,O.shadowMapSize=L.mapSize,O.shadowCameraNear=L.camera.near,O.shadowCameraFar=L.camera.far,i.pointShadow[g]=O,i.pointShadowMap[g]=I,i.pointShadowMatrix[g]=P.shadow.matrix,x++}i.point[g]=N,g++}else if(P.isHemisphereLight){const N=e.get(P);N.skyColor.copy(P.color).multiplyScalar(F),N.groundColor.copy(P.groundColor).multiplyScalar(F),i.hemi[m]=N,m++}}v>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=gt.LTC_FLOAT_1,i.rectAreaLTC2=gt.LTC_FLOAT_2):(i.rectAreaLTC1=gt.LTC_HALF_1,i.rectAreaLTC2=gt.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=f,i.ambient[2]=h;const T=i.hash;(T.directionalLength!==p||T.pointLength!==g||T.spotLength!==y||T.rectAreaLength!==v||T.hemiLength!==m||T.numDirectionalShadows!==_||T.numPointShadows!==x||T.numSpotShadows!==S||T.numSpotMaps!==w||T.numLightProbes!==C)&&(i.directional.length=p,i.spot.length=y,i.rectArea.length=v,i.point.length=g,i.hemi.length=m,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=x,i.pointShadowMap.length=x,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=x,i.spotLightMatrix.length=S+w-E,i.spotLightMap.length=w,i.numSpotLightShadowsWithMaps=E,i.numLightProbes=C,T.directionalLength=p,T.pointLength=g,T.spotLength=y,T.rectAreaLength=v,T.hemiLength=m,T.numDirectionalShadows=_,T.numPointShadows=x,T.numSpotShadows=S,T.numSpotMaps=w,T.numLightProbes=C,i.version=fse++)}function c(u,d){let f=0,h=0,p=0,g=0,y=0;const v=d.matrixWorldInverse;for(let m=0,_=u.length;m<_;m++){const x=u[m];if(x.isDirectionalLight){const S=i.directional[f];S.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(o),S.direction.transformDirection(v),f++}else if(x.isSpotLight){const S=i.spot[p];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(x.matrixWorld),o.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(o),S.direction.transformDirection(v),p++}else if(x.isRectAreaLight){const S=i.rectArea[g];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(v),a.identity(),s.copy(x.matrixWorld),s.premultiply(v),a.extractRotation(s),S.halfWidth.set(x.width*.5,0,0),S.halfHeight.set(0,x.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),g++}else if(x.isPointLight){const S=i.point[h];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(v),h++}else if(x.isHemisphereLight){const S=i.hemi[y];S.direction.setFromMatrixPosition(x.matrixWorld),S.direction.transformDirection(v),y++}}}return{setup:l,setupView:c,state:i}}function ZP(n){const e=new pse(n),r=[],i=[];function o(d){u.camera=d,r.length=0,i.length=0}function s(d){r.push(d)}function a(d){i.push(d)}function l(){e.setup(r)}function c(d){e.setupView(r,d)}const u={lightsArray:r,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:o,state:u,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function mse(n){let e=new WeakMap;function r(o,s=0){const a=e.get(o);let l;return a===void 0?(l=new ZP(n),e.set(o,[l])):s>=a.length?(l=new ZP(n),a.push(l)):l=a[s],l}function i(){e=new WeakMap}return{get:r,dispose:i}}const gse=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,vse=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function yse(n,e,r){let i=new X_;const o=new je,s=new je,a=new Wt,l=new Pte({depthPacking:iee}),c=new Ote,u={},d=r.maxTextureSize,f={[Ss]:er,[er]:Ss,[wi]:wi},h=new Vi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new je},radius:{value:4}},vertexShader:gse,fragmentShader:vse}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const g=new Di;g.setAttribute("position",new ri(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Br(g,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=UT;let m=this.type;this.render=function(E,C,T){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||E.length===0)return;const M=n.getRenderTarget(),R=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),D=n.state;D.setBlending(Mi),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const F=m!==ho&&this.type===ho,A=m===ho&&this.type!==ho;for(let I=0,N=E.length;I<N;I++){const L=E[I],O=L.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",L,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;o.copy(O.mapSize);const V=O.getFrameExtents();if(o.multiply(V),s.copy(O.mapSize),(o.x>d||o.y>d)&&(o.x>d&&(s.x=Math.floor(d/V.x),o.x=s.x*V.x,O.mapSize.x=s.x),o.y>d&&(s.y=Math.floor(d/V.y),o.y=s.y*V.y,O.mapSize.y=s.y)),O.map===null||F===!0||A===!0){const z=this.type!==ho?{minFilter:Wn,magFilter:Wn}:{};O.map!==null&&O.map.dispose(),O.map=new xs(o.x,o.y,z),O.map.texture.name=L.name+".shadowMap",O.camera.updateProjectionMatrix()}n.setRenderTarget(O.map),n.clear();const B=O.getViewportCount();for(let z=0;z<B;z++){const W=O.getViewport(z);a.set(s.x*W.x,s.y*W.y,s.x*W.z,s.y*W.w),D.viewport(a),O.updateMatrices(L,z),i=O.getFrustum(),S(C,T,O.camera,L,this.type)}O.isPointLightShadow!==!0&&this.type===ho&&_(O,T),O.needsUpdate=!1}m=this.type,v.needsUpdate=!1,n.setRenderTarget(M,R,P)};function _(E,C){const T=e.update(y);h.defines.VSM_SAMPLES!==E.blurSamples&&(h.defines.VSM_SAMPLES=E.blurSamples,p.defines.VSM_SAMPLES=E.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new xs(o.x,o.y)),h.uniforms.shadow_pass.value=E.map.texture,h.uniforms.resolution.value=E.mapSize,h.uniforms.radius.value=E.radius,n.setRenderTarget(E.mapPass),n.clear(),n.renderBufferDirect(C,null,T,h,y,null),p.uniforms.shadow_pass.value=E.mapPass.texture,p.uniforms.resolution.value=E.mapSize,p.uniforms.radius.value=E.radius,n.setRenderTarget(E.map),n.clear(),n.renderBufferDirect(C,null,T,p,y,null)}function x(E,C,T,M){let R=null;const P=T.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(P!==void 0)R=P;else if(R=T.isPointLight===!0?c:l,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const D=R.uuid,F=C.uuid;let A=u[D];A===void 0&&(A={},u[D]=A);let I=A[F];I===void 0&&(I=R.clone(),A[F]=I,C.addEventListener("dispose",w)),R=I}if(R.visible=C.visible,R.wireframe=C.wireframe,M===ho?R.side=C.shadowSide!==null?C.shadowSide:C.side:R.side=C.shadowSide!==null?C.shadowSide:f[C.side],R.alphaMap=C.alphaMap,R.alphaTest=C.alphaTest,R.map=C.map,R.clipShadows=C.clipShadows,R.clippingPlanes=C.clippingPlanes,R.clipIntersection=C.clipIntersection,R.displacementMap=C.displacementMap,R.displacementScale=C.displacementScale,R.displacementBias=C.displacementBias,R.wireframeLinewidth=C.wireframeLinewidth,R.linewidth=C.linewidth,T.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const D=n.properties.get(R);D.light=T}return R}function S(E,C,T,M,R){if(E.visible===!1)return;if(E.layers.test(C.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&R===ho)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,E.matrixWorld);const F=e.update(E),A=E.material;if(Array.isArray(A)){const I=F.groups;for(let N=0,L=I.length;N<L;N++){const O=I[N],V=A[O.materialIndex];if(V&&V.visible){const B=x(E,V,M,R);E.onBeforeShadow(n,E,C,T,F,B,O),n.renderBufferDirect(T,null,F,B,E,O),E.onAfterShadow(n,E,C,T,F,B,O)}}}else if(A.visible){const I=x(E,A,M,R);E.onBeforeShadow(n,E,C,T,F,I,null),n.renderBufferDirect(T,null,F,I,E,null),E.onAfterShadow(n,E,C,T,F,I,null)}}const D=E.children;for(let F=0,A=D.length;F<A;F++)S(D[F],C,T,M,R)}function w(E){E.target.removeEventListener("dispose",w);for(const T in u){const M=u[T],R=E.target.uuid;R in M&&(M[R].dispose(),delete M[R])}}}const _se={[nm]:rm,[im]:am,[om]:lm,[Yl]:sm,[rm]:nm,[am]:im,[lm]:om,[sm]:Yl};function xse(n,e){function r(){let J=!1;const Qe=new Wt;let be=null;const Oe=new Wt(0,0,0,0);return{setMask:function(Ze){be!==Ze&&!J&&(n.colorMask(Ze,Ze,Ze,Ze),be=Ze)},setLocked:function(Ze){J=Ze},setClear:function(Ze,We,wt,Mt,ct){ct===!0&&(Ze*=Mt,We*=Mt,wt*=Mt),Qe.set(Ze,We,wt,Mt),Oe.equals(Qe)===!1&&(n.clearColor(Ze,We,wt,Mt),Oe.copy(Qe))},reset:function(){J=!1,be=null,Oe.set(-1,0,0,0)}}}function i(){let J=!1,Qe=!1,be=null,Oe=null,Ze=null;return{setReversed:function(We){if(Qe!==We){const wt=e.get("EXT_clip_control");Qe?wt.clipControlEXT(wt.LOWER_LEFT_EXT,wt.ZERO_TO_ONE_EXT):wt.clipControlEXT(wt.LOWER_LEFT_EXT,wt.NEGATIVE_ONE_TO_ONE_EXT);const Mt=Ze;Ze=null,this.setClear(Mt)}Qe=We},getReversed:function(){return Qe},setTest:function(We){We?Y(n.DEPTH_TEST):ne(n.DEPTH_TEST)},setMask:function(We){be!==We&&!J&&(n.depthMask(We),be=We)},setFunc:function(We){if(Qe&&(We=_se[We]),Oe!==We){switch(We){case nm:n.depthFunc(n.NEVER);break;case rm:n.depthFunc(n.ALWAYS);break;case im:n.depthFunc(n.LESS);break;case Yl:n.depthFunc(n.LEQUAL);break;case om:n.depthFunc(n.EQUAL);break;case sm:n.depthFunc(n.GEQUAL);break;case am:n.depthFunc(n.GREATER);break;case lm:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Oe=We}},setLocked:function(We){J=We},setClear:function(We){Ze!==We&&(Qe&&(We=1-We),n.clearDepth(We),Ze=We)},reset:function(){J=!1,be=null,Oe=null,Ze=null,Qe=!1}}}function o(){let J=!1,Qe=null,be=null,Oe=null,Ze=null,We=null,wt=null,Mt=null,ct=null;return{setTest:function(qe){J||(qe?Y(n.STENCIL_TEST):ne(n.STENCIL_TEST))},setMask:function(qe){Qe!==qe&&!J&&(n.stencilMask(qe),Qe=qe)},setFunc:function(qe,rt,Lt){(be!==qe||Oe!==rt||Ze!==Lt)&&(n.stencilFunc(qe,rt,Lt),be=qe,Oe=rt,Ze=Lt)},setOp:function(qe,rt,Lt){(We!==qe||wt!==rt||Mt!==Lt)&&(n.stencilOp(qe,rt,Lt),We=qe,wt=rt,Mt=Lt)},setLocked:function(qe){J=qe},setClear:function(qe){ct!==qe&&(n.clearStencil(qe),ct=qe)},reset:function(){J=!1,Qe=null,be=null,Oe=null,Ze=null,We=null,wt=null,Mt=null,ct=null}}}const s=new r,a=new i,l=new o,c=new WeakMap,u=new WeakMap;let d={},f={},h=new WeakMap,p=[],g=null,y=!1,v=null,m=null,_=null,x=null,S=null,w=null,E=null,C=new Tt(0,0,0),T=0,M=!1,R=null,P=null,D=null,F=null,A=null;const I=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,L=0;const O=n.getParameter(n.VERSION);O.indexOf("WebGL")!==-1?(L=parseFloat(/^WebGL (\d)/.exec(O)[1]),N=L>=1):O.indexOf("OpenGL ES")!==-1&&(L=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),N=L>=2);let V=null,B={};const z=n.getParameter(n.SCISSOR_BOX),W=n.getParameter(n.VIEWPORT),ie=new Wt().fromArray(z),k=new Wt().fromArray(W);function j(J,Qe,be,Oe){const Ze=new Uint8Array(4),We=n.createTexture();n.bindTexture(J,We),n.texParameteri(J,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(J,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let wt=0;wt<be;wt++)J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY?n.texImage3D(Qe,0,n.RGBA,1,1,Oe,0,n.RGBA,n.UNSIGNED_BYTE,Ze):n.texImage2D(Qe+wt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ze);return We}const Q={};Q[n.TEXTURE_2D]=j(n.TEXTURE_2D,n.TEXTURE_2D,1),Q[n.TEXTURE_CUBE_MAP]=j(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Q[n.TEXTURE_2D_ARRAY]=j(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Q[n.TEXTURE_3D]=j(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),l.setClear(0),Y(n.DEPTH_TEST),a.setFunc(Yl),xe(!1),_e(hE),Y(n.CULL_FACE),q(Mi);function Y(J){d[J]!==!0&&(n.enable(J),d[J]=!0)}function ne(J){d[J]!==!1&&(n.disable(J),d[J]=!1)}function ye(J,Qe){return f[J]!==Qe?(n.bindFramebuffer(J,Qe),f[J]=Qe,J===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=Qe),J===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=Qe),!0):!1}function me(J,Qe){let be=p,Oe=!1;if(J){be=h.get(Qe),be===void 0&&(be=[],h.set(Qe,be));const Ze=J.textures;if(be.length!==Ze.length||be[0]!==n.COLOR_ATTACHMENT0){for(let We=0,wt=Ze.length;We<wt;We++)be[We]=n.COLOR_ATTACHMENT0+We;be.length=Ze.length,Oe=!0}}else be[0]!==n.BACK&&(be[0]=n.BACK,Oe=!0);Oe&&n.drawBuffers(be)}function fe(J){return g!==J?(n.useProgram(J),g=J,!0):!1}const ae={[po]:n.FUNC_ADD,[$T]:n.FUNC_SUBTRACT,[zT]:n.FUNC_REVERSE_SUBTRACT};ae[v$]=n.MIN,ae[y$]=n.MAX;const ve={[kT]:n.ZERO,[VT]:n.ONE,[GT]:n.SRC_COLOR,[em]:n.SRC_ALPHA,[KT]:n.SRC_ALPHA_SATURATE,[qT]:n.DST_COLOR,[jT]:n.DST_ALPHA,[HT]:n.ONE_MINUS_SRC_COLOR,[tm]:n.ONE_MINUS_SRC_ALPHA,[XT]:n.ONE_MINUS_DST_COLOR,[WT]:n.ONE_MINUS_DST_ALPHA,[QJ]:n.CONSTANT_COLOR,[ZJ]:n.ONE_MINUS_CONSTANT_COLOR,[JJ]:n.CONSTANT_ALPHA,[eee]:n.ONE_MINUS_CONSTANT_ALPHA};function q(J,Qe,be,Oe,Ze,We,wt,Mt,ct,qe){if(J===Mi){y===!0&&(ne(n.BLEND),y=!1);return}if(y===!1&&(Y(n.BLEND),y=!0),J!==BT){if(J!==v||qe!==M){if((m!==po||S!==po)&&(n.blendEquation(n.FUNC_ADD),m=po,S=po),qe)switch(J){case zo:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case au:n.blendFunc(n.ONE,n.ONE);break;case lf:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case cf:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case zo:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case au:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case lf:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case cf:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}_=null,x=null,w=null,E=null,C.set(0,0,0),T=0,v=J,M=qe}return}Ze=Ze||Qe,We=We||be,wt=wt||Oe,(Qe!==m||Ze!==S)&&(n.blendEquationSeparate(ae[Qe],ae[Ze]),m=Qe,S=Ze),(be!==_||Oe!==x||We!==w||wt!==E)&&(n.blendFuncSeparate(ve[be],ve[Oe],ve[We],ve[wt]),_=be,x=Oe,w=We,E=wt),(Mt.equals(C)===!1||ct!==T)&&(n.blendColor(Mt.r,Mt.g,Mt.b,ct),C.copy(Mt),T=ct),v=J,M=!1}function ge(J,Qe){J.side===wi?ne(n.CULL_FACE):Y(n.CULL_FACE);let be=J.side===er;Qe&&(be=!be),xe(be),J.blending===zo&&J.transparent===!1?q(Mi):q(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.blendColor,J.blendAlpha,J.premultipliedAlpha),a.setFunc(J.depthFunc),a.setTest(J.depthTest),a.setMask(J.depthWrite),s.setMask(J.colorWrite);const Oe=J.stencilWrite;l.setTest(Oe),Oe&&(l.setMask(J.stencilWriteMask),l.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),l.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),Ke(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?Y(n.SAMPLE_ALPHA_TO_COVERAGE):ne(n.SAMPLE_ALPHA_TO_COVERAGE)}function xe(J){R!==J&&(J?n.frontFace(n.CW):n.frontFace(n.CCW),R=J)}function _e(J){J!==m$?(Y(n.CULL_FACE),J!==P&&(J===hE?n.cullFace(n.BACK):J===g$?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ne(n.CULL_FACE),P=J}function Se(J){J!==D&&(N&&n.lineWidth(J),D=J)}function Ke(J,Qe,be){J?(Y(n.POLYGON_OFFSET_FILL),(F!==Qe||A!==be)&&(n.polygonOffset(Qe,be),F=Qe,A=be)):ne(n.POLYGON_OFFSET_FILL)}function Ue(J){J?Y(n.SCISSOR_TEST):ne(n.SCISSOR_TEST)}function H(J){J===void 0&&(J=n.TEXTURE0+I-1),V!==J&&(n.activeTexture(J),V=J)}function U(J,Qe,be){be===void 0&&(V===null?be=n.TEXTURE0+I-1:be=V);let Oe=B[be];Oe===void 0&&(Oe={type:void 0,texture:void 0},B[be]=Oe),(Oe.type!==J||Oe.texture!==Qe)&&(V!==be&&(n.activeTexture(be),V=be),n.bindTexture(J,Qe||Q[J]),Oe.type=J,Oe.texture=Qe)}function X(){const J=B[V];J!==void 0&&J.type!==void 0&&(n.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function pe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ce(){try{n.texSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Fe(){try{n.texSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Re(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Le(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Je(){try{n.texStorage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Me(){try{n.texStorage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ze(){try{n.texImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ee(){try{n.texImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Pe(J){ie.equals(J)===!1&&(n.scissor(J.x,J.y,J.z,J.w),ie.copy(J))}function ke(J){k.equals(J)===!1&&(n.viewport(J.x,J.y,J.z,J.w),k.copy(J))}function Ve(J,Qe){let be=u.get(Qe);be===void 0&&(be=new WeakMap,u.set(Qe,be));let Oe=be.get(J);Oe===void 0&&(Oe=n.getUniformBlockIndex(Qe,J.name),be.set(J,Oe))}function $e(J,Qe){const Oe=u.get(Qe).get(J);c.get(Qe)!==Oe&&(n.uniformBlockBinding(Qe,Oe,J.__bindingPointIndex),c.set(Qe,Oe))}function _t(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},V=null,B={},f={},h=new WeakMap,p=[],g=null,y=!1,v=null,m=null,_=null,x=null,S=null,w=null,E=null,C=new Tt(0,0,0),T=0,M=!1,R=null,P=null,D=null,F=null,A=null,ie.set(0,0,n.canvas.width,n.canvas.height),k.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),l.reset()}return{buffers:{color:s,depth:a,stencil:l},enable:Y,disable:ne,bindFramebuffer:ye,drawBuffers:me,useProgram:fe,setBlending:q,setMaterial:ge,setFlipSided:xe,setCullFace:_e,setLineWidth:Se,setPolygonOffset:Ke,setScissorTest:Ue,activeTexture:H,bindTexture:U,unbindTexture:X,compressedTexImage2D:oe,compressedTexImage3D:pe,texImage2D:ze,texImage3D:Ee,updateUBOMapping:Ve,uniformBlockBinding:$e,texStorage2D:Je,texStorage3D:Me,texSubImage2D:ce,texSubImage3D:Fe,compressedTexSubImage2D:Re,compressedTexSubImage3D:Le,scissor:Pe,viewport:ke,reset:_t}}function bse(n,e,r,i,o,s,a){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new je,d=new WeakMap;let f;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(H,U){return p?new OffscreenCanvas(H,U):vm("canvas")}function y(H,U,X){let oe=1;const pe=Ue(H);if((pe.width>X||pe.height>X)&&(oe=X/Math.max(pe.width,pe.height)),oe<1)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap||typeof VideoFrame<"u"&&H instanceof VideoFrame){const ce=Math.floor(oe*pe.width),Fe=Math.floor(oe*pe.height);f===void 0&&(f=g(ce,Fe));const Re=U?g(ce,Fe):f;return Re.width=ce,Re.height=Fe,Re.getContext("2d").drawImage(H,0,0,ce,Fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+ce+"x"+Fe+")."),Re}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),H;return H}function v(H){return H.generateMipmaps}function m(H){n.generateMipmap(H)}function _(H){return H.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:H.isWebGL3DRenderTarget?n.TEXTURE_3D:H.isWebGLArrayRenderTarget||H.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function x(H,U,X,oe,pe=!1){if(H!==null){if(n[H]!==void 0)return n[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let ce=U;if(U===n.RED&&(X===n.FLOAT&&(ce=n.R32F),X===n.HALF_FLOAT&&(ce=n.R16F),X===n.UNSIGNED_BYTE&&(ce=n.R8)),U===n.RED_INTEGER&&(X===n.UNSIGNED_BYTE&&(ce=n.R8UI),X===n.UNSIGNED_SHORT&&(ce=n.R16UI),X===n.UNSIGNED_INT&&(ce=n.R32UI),X===n.BYTE&&(ce=n.R8I),X===n.SHORT&&(ce=n.R16I),X===n.INT&&(ce=n.R32I)),U===n.RG&&(X===n.FLOAT&&(ce=n.RG32F),X===n.HALF_FLOAT&&(ce=n.RG16F),X===n.UNSIGNED_BYTE&&(ce=n.RG8)),U===n.RG_INTEGER&&(X===n.UNSIGNED_BYTE&&(ce=n.RG8UI),X===n.UNSIGNED_SHORT&&(ce=n.RG16UI),X===n.UNSIGNED_INT&&(ce=n.RG32UI),X===n.BYTE&&(ce=n.RG8I),X===n.SHORT&&(ce=n.RG16I),X===n.INT&&(ce=n.RG32I)),U===n.RGB_INTEGER&&(X===n.UNSIGNED_BYTE&&(ce=n.RGB8UI),X===n.UNSIGNED_SHORT&&(ce=n.RGB16UI),X===n.UNSIGNED_INT&&(ce=n.RGB32UI),X===n.BYTE&&(ce=n.RGB8I),X===n.SHORT&&(ce=n.RGB16I),X===n.INT&&(ce=n.RGB32I)),U===n.RGBA_INTEGER&&(X===n.UNSIGNED_BYTE&&(ce=n.RGBA8UI),X===n.UNSIGNED_SHORT&&(ce=n.RGBA16UI),X===n.UNSIGNED_INT&&(ce=n.RGBA32UI),X===n.BYTE&&(ce=n.RGBA8I),X===n.SHORT&&(ce=n.RGBA16I),X===n.INT&&(ce=n.RGBA32I)),U===n.RGB&&X===n.UNSIGNED_INT_5_9_9_9_REV&&(ce=n.RGB9_E5),U===n.RGBA){const Fe=pe?cy:rn.getTransfer(oe);X===n.FLOAT&&(ce=n.RGBA32F),X===n.HALF_FLOAT&&(ce=n.RGBA16F),X===n.UNSIGNED_BYTE&&(ce=Fe===Tn?n.SRGB8_ALPHA8:n.RGBA8),X===n.UNSIGNED_SHORT_4_4_4_4&&(ce=n.RGBA4),X===n.UNSIGNED_SHORT_5_5_5_1&&(ce=n.RGB5_A1)}return(ce===n.R16F||ce===n.R32F||ce===n.RG16F||ce===n.RG32F||ce===n.RGBA16F||ce===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ce}function S(H,U){let X;return H?U===null||U===rr||U===Ws?X=n.DEPTH24_STENCIL8:U===hr?X=n.DEPTH32F_STENCIL8:U===ps&&(X=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):U===null||U===rr||U===Ws?X=n.DEPTH_COMPONENT24:U===hr?X=n.DEPTH_COMPONENT32F:U===ps&&(X=n.DEPTH_COMPONENT16),X}function w(H,U){return v(H)===!0||H.isFramebufferTexture&&H.minFilter!==Wn&&H.minFilter!==Ur?Math.log2(Math.max(U.width,U.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?U.mipmaps.length:1}function E(H){const U=H.target;U.removeEventListener("dispose",E),T(U),U.isVideoTexture&&d.delete(U)}function C(H){const U=H.target;U.removeEventListener("dispose",C),R(U)}function T(H){const U=i.get(H);if(U.__webglInit===void 0)return;const X=H.source,oe=h.get(X);if(oe){const pe=oe[U.__cacheKey];pe.usedTimes--,pe.usedTimes===0&&M(H),Object.keys(oe).length===0&&h.delete(X)}i.remove(H)}function M(H){const U=i.get(H);n.deleteTexture(U.__webglTexture);const X=H.source,oe=h.get(X);delete oe[U.__cacheKey],a.memory.textures--}function R(H){const U=i.get(H);if(H.depthTexture&&(H.depthTexture.dispose(),i.remove(H.depthTexture)),H.isWebGLCubeRenderTarget)for(let oe=0;oe<6;oe++){if(Array.isArray(U.__webglFramebuffer[oe]))for(let pe=0;pe<U.__webglFramebuffer[oe].length;pe++)n.deleteFramebuffer(U.__webglFramebuffer[oe][pe]);else n.deleteFramebuffer(U.__webglFramebuffer[oe]);U.__webglDepthbuffer&&n.deleteRenderbuffer(U.__webglDepthbuffer[oe])}else{if(Array.isArray(U.__webglFramebuffer))for(let oe=0;oe<U.__webglFramebuffer.length;oe++)n.deleteFramebuffer(U.__webglFramebuffer[oe]);else n.deleteFramebuffer(U.__webglFramebuffer);if(U.__webglDepthbuffer&&n.deleteRenderbuffer(U.__webglDepthbuffer),U.__webglMultisampledFramebuffer&&n.deleteFramebuffer(U.__webglMultisampledFramebuffer),U.__webglColorRenderbuffer)for(let oe=0;oe<U.__webglColorRenderbuffer.length;oe++)U.__webglColorRenderbuffer[oe]&&n.deleteRenderbuffer(U.__webglColorRenderbuffer[oe]);U.__webglDepthRenderbuffer&&n.deleteRenderbuffer(U.__webglDepthRenderbuffer)}const X=H.textures;for(let oe=0,pe=X.length;oe<pe;oe++){const ce=i.get(X[oe]);ce.__webglTexture&&(n.deleteTexture(ce.__webglTexture),a.memory.textures--),i.remove(X[oe])}i.remove(H)}let P=0;function D(){P=0}function F(){const H=P;return H>=o.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+o.maxTextures),P+=1,H}function A(H){const U=[];return U.push(H.wrapS),U.push(H.wrapT),U.push(H.wrapR||0),U.push(H.magFilter),U.push(H.minFilter),U.push(H.anisotropy),U.push(H.internalFormat),U.push(H.format),U.push(H.type),U.push(H.generateMipmaps),U.push(H.premultiplyAlpha),U.push(H.flipY),U.push(H.unpackAlignment),U.push(H.colorSpace),U.join()}function I(H,U){const X=i.get(H);if(H.isVideoTexture&&Se(H),H.isRenderTargetTexture===!1&&H.version>0&&X.__version!==H.version){const oe=H.image;if(oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{k(X,H,U);return}}r.bindTexture(n.TEXTURE_2D,X.__webglTexture,n.TEXTURE0+U)}function N(H,U){const X=i.get(H);if(H.version>0&&X.__version!==H.version){k(X,H,U);return}r.bindTexture(n.TEXTURE_2D_ARRAY,X.__webglTexture,n.TEXTURE0+U)}function L(H,U){const X=i.get(H);if(H.version>0&&X.__version!==H.version){k(X,H,U);return}r.bindTexture(n.TEXTURE_3D,X.__webglTexture,n.TEXTURE0+U)}function O(H,U){const X=i.get(H);if(H.version>0&&X.__version!==H.version){j(X,H,U);return}r.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+U)}const V={[cu]:n.REPEAT,[Bs]:n.CLAMP_TO_EDGE,[uu]:n.MIRRORED_REPEAT},B={[Wn]:n.NEAREST,[ly]:n.NEAREST_MIPMAP_NEAREST,[$s]:n.NEAREST_MIPMAP_LINEAR,[Ur]:n.LINEAR,[Fd]:n.LINEAR_MIPMAP_NEAREST,[ki]:n.LINEAR_MIPMAP_LINEAR},z={[tM]:n.NEVER,[sM]:n.ALWAYS,[G_]:n.LESS,[H_]:n.LEQUAL,[nM]:n.EQUAL,[oM]:n.GEQUAL,[rM]:n.GREATER,[iM]:n.NOTEQUAL};function W(H,U){if(U.type===hr&&e.has("OES_texture_float_linear")===!1&&(U.magFilter===Ur||U.magFilter===Fd||U.magFilter===$s||U.magFilter===ki||U.minFilter===Ur||U.minFilter===Fd||U.minFilter===$s||U.minFilter===ki)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(H,n.TEXTURE_WRAP_S,V[U.wrapS]),n.texParameteri(H,n.TEXTURE_WRAP_T,V[U.wrapT]),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,V[U.wrapR]),n.texParameteri(H,n.TEXTURE_MAG_FILTER,B[U.magFilter]),n.texParameteri(H,n.TEXTURE_MIN_FILTER,B[U.minFilter]),U.compareFunction&&(n.texParameteri(H,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(H,n.TEXTURE_COMPARE_FUNC,z[U.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(U.magFilter===Wn||U.minFilter!==$s&&U.minFilter!==ki||U.type===hr&&e.has("OES_texture_float_linear")===!1)return;if(U.anisotropy>1||i.get(U).__currentAnisotropy){const X=e.get("EXT_texture_filter_anisotropic");n.texParameterf(H,X.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,o.getMaxAnisotropy())),i.get(U).__currentAnisotropy=U.anisotropy}}}function ie(H,U){let X=!1;H.__webglInit===void 0&&(H.__webglInit=!0,U.addEventListener("dispose",E));const oe=U.source;let pe=h.get(oe);pe===void 0&&(pe={},h.set(oe,pe));const ce=A(U);if(ce!==H.__cacheKey){pe[ce]===void 0&&(pe[ce]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,X=!0),pe[ce].usedTimes++;const Fe=pe[H.__cacheKey];Fe!==void 0&&(pe[H.__cacheKey].usedTimes--,Fe.usedTimes===0&&M(U)),H.__cacheKey=ce,H.__webglTexture=pe[ce].texture}return X}function k(H,U,X){let oe=n.TEXTURE_2D;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(oe=n.TEXTURE_2D_ARRAY),U.isData3DTexture&&(oe=n.TEXTURE_3D);const pe=ie(H,U),ce=U.source;r.bindTexture(oe,H.__webglTexture,n.TEXTURE0+X);const Fe=i.get(ce);if(ce.version!==Fe.__version||pe===!0){r.activeTexture(n.TEXTURE0+X);const Re=rn.getPrimaries(rn.workingColorSpace),Le=U.colorSpace===mo?null:rn.getPrimaries(U.colorSpace),Je=U.colorSpace===mo||Re===Le?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);let Me=y(U.image,!1,o.maxTextureSize);Me=Ke(U,Me);const ze=s.convert(U.format,U.colorSpace),Ee=s.convert(U.type);let Pe=x(U.internalFormat,ze,Ee,U.colorSpace,U.isVideoTexture);W(oe,U);let ke;const Ve=U.mipmaps,$e=U.isVideoTexture!==!0,_t=Fe.__version===void 0||pe===!0,J=ce.dataReady,Qe=w(U,Me);if(U.isDepthTexture)Pe=S(U.format===qs,U.type),_t&&($e?r.texStorage2D(n.TEXTURE_2D,1,Pe,Me.width,Me.height):r.texImage2D(n.TEXTURE_2D,0,Pe,Me.width,Me.height,0,ze,Ee,null));else if(U.isDataTexture)if(Ve.length>0){$e&&_t&&r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Ve[0].width,Ve[0].height);for(let be=0,Oe=Ve.length;be<Oe;be++)ke=Ve[be],$e?J&&r.texSubImage2D(n.TEXTURE_2D,be,0,0,ke.width,ke.height,ze,Ee,ke.data):r.texImage2D(n.TEXTURE_2D,be,Pe,ke.width,ke.height,0,ze,Ee,ke.data);U.generateMipmaps=!1}else $e?(_t&&r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Me.width,Me.height),J&&r.texSubImage2D(n.TEXTURE_2D,0,0,0,Me.width,Me.height,ze,Ee,Me.data)):r.texImage2D(n.TEXTURE_2D,0,Pe,Me.width,Me.height,0,ze,Ee,Me.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){$e&&_t&&r.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Pe,Ve[0].width,Ve[0].height,Me.depth);for(let be=0,Oe=Ve.length;be<Oe;be++)if(ke=Ve[be],U.format!==ti)if(ze!==null)if($e){if(J)if(U.layerUpdates.size>0){const Ze=RP(ke.width,ke.height,U.format,U.type);for(const We of U.layerUpdates){const wt=ke.data.subarray(We*Ze/ke.data.BYTES_PER_ELEMENT,(We+1)*Ze/ke.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,be,0,0,We,ke.width,ke.height,1,ze,wt)}U.clearLayerUpdates()}else r.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,be,0,0,0,ke.width,ke.height,Me.depth,ze,ke.data)}else r.compressedTexImage3D(n.TEXTURE_2D_ARRAY,be,Pe,ke.width,ke.height,Me.depth,0,ke.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $e?J&&r.texSubImage3D(n.TEXTURE_2D_ARRAY,be,0,0,0,ke.width,ke.height,Me.depth,ze,Ee,ke.data):r.texImage3D(n.TEXTURE_2D_ARRAY,be,Pe,ke.width,ke.height,Me.depth,0,ze,Ee,ke.data)}else{$e&&_t&&r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Ve[0].width,Ve[0].height);for(let be=0,Oe=Ve.length;be<Oe;be++)ke=Ve[be],U.format!==ti?ze!==null?$e?J&&r.compressedTexSubImage2D(n.TEXTURE_2D,be,0,0,ke.width,ke.height,ze,ke.data):r.compressedTexImage2D(n.TEXTURE_2D,be,Pe,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$e?J&&r.texSubImage2D(n.TEXTURE_2D,be,0,0,ke.width,ke.height,ze,Ee,ke.data):r.texImage2D(n.TEXTURE_2D,be,Pe,ke.width,ke.height,0,ze,Ee,ke.data)}else if(U.isDataArrayTexture)if($e){if(_t&&r.texStorage3D(n.TEXTURE_2D_ARRAY,Qe,Pe,Me.width,Me.height,Me.depth),J)if(U.layerUpdates.size>0){const be=RP(Me.width,Me.height,U.format,U.type);for(const Oe of U.layerUpdates){const Ze=Me.data.subarray(Oe*be/Me.data.BYTES_PER_ELEMENT,(Oe+1)*be/Me.data.BYTES_PER_ELEMENT);r.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Oe,Me.width,Me.height,1,ze,Ee,Ze)}U.clearLayerUpdates()}else r.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Me.width,Me.height,Me.depth,ze,Ee,Me.data)}else r.texImage3D(n.TEXTURE_2D_ARRAY,0,Pe,Me.width,Me.height,Me.depth,0,ze,Ee,Me.data);else if(U.isData3DTexture)$e?(_t&&r.texStorage3D(n.TEXTURE_3D,Qe,Pe,Me.width,Me.height,Me.depth),J&&r.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Me.width,Me.height,Me.depth,ze,Ee,Me.data)):r.texImage3D(n.TEXTURE_3D,0,Pe,Me.width,Me.height,Me.depth,0,ze,Ee,Me.data);else if(U.isFramebufferTexture){if(_t)if($e)r.texStorage2D(n.TEXTURE_2D,Qe,Pe,Me.width,Me.height);else{let be=Me.width,Oe=Me.height;for(let Ze=0;Ze<Qe;Ze++)r.texImage2D(n.TEXTURE_2D,Ze,Pe,be,Oe,0,ze,Ee,null),be>>=1,Oe>>=1}}else if(Ve.length>0){if($e&&_t){const be=Ue(Ve[0]);r.texStorage2D(n.TEXTURE_2D,Qe,Pe,be.width,be.height)}for(let be=0,Oe=Ve.length;be<Oe;be++)ke=Ve[be],$e?J&&r.texSubImage2D(n.TEXTURE_2D,be,0,0,ze,Ee,ke):r.texImage2D(n.TEXTURE_2D,be,Pe,ze,Ee,ke);U.generateMipmaps=!1}else if($e){if(_t){const be=Ue(Me);r.texStorage2D(n.TEXTURE_2D,Qe,Pe,be.width,be.height)}J&&r.texSubImage2D(n.TEXTURE_2D,0,0,0,ze,Ee,Me)}else r.texImage2D(n.TEXTURE_2D,0,Pe,ze,Ee,Me);v(U)&&m(oe),Fe.__version=ce.version,U.onUpdate&&U.onUpdate(U)}H.__version=U.version}function j(H,U,X){if(U.image.length!==6)return;const oe=ie(H,U),pe=U.source;r.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+X);const ce=i.get(pe);if(pe.version!==ce.__version||oe===!0){r.activeTexture(n.TEXTURE0+X);const Fe=rn.getPrimaries(rn.workingColorSpace),Re=U.colorSpace===mo?null:rn.getPrimaries(U.colorSpace),Le=U.colorSpace===mo||Fe===Re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Le);const Je=U.isCompressedTexture||U.image[0].isCompressedTexture,Me=U.image[0]&&U.image[0].isDataTexture,ze=[];for(let Oe=0;Oe<6;Oe++)!Je&&!Me?ze[Oe]=y(U.image[Oe],!0,o.maxCubemapSize):ze[Oe]=Me?U.image[Oe].image:U.image[Oe],ze[Oe]=Ke(U,ze[Oe]);const Ee=ze[0],Pe=s.convert(U.format,U.colorSpace),ke=s.convert(U.type),Ve=x(U.internalFormat,Pe,ke,U.colorSpace),$e=U.isVideoTexture!==!0,_t=ce.__version===void 0||oe===!0,J=pe.dataReady;let Qe=w(U,Ee);W(n.TEXTURE_CUBE_MAP,U);let be;if(Je){$e&&_t&&r.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Ve,Ee.width,Ee.height);for(let Oe=0;Oe<6;Oe++){be=ze[Oe].mipmaps;for(let Ze=0;Ze<be.length;Ze++){const We=be[Ze];U.format!==ti?Pe!==null?$e?J&&r.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,0,0,We.width,We.height,Pe,We.data):r.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,Ve,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$e?J&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,0,0,We.width,We.height,Pe,ke,We.data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze,Ve,We.width,We.height,0,Pe,ke,We.data)}}}else{if(be=U.mipmaps,$e&&_t){be.length>0&&Qe++;const Oe=Ue(ze[0]);r.texStorage2D(n.TEXTURE_CUBE_MAP,Qe,Ve,Oe.width,Oe.height)}for(let Oe=0;Oe<6;Oe++)if(Me){$e?J&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,0,0,ze[Oe].width,ze[Oe].height,Pe,ke,ze[Oe].data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,Ve,ze[Oe].width,ze[Oe].height,0,Pe,ke,ze[Oe].data);for(let Ze=0;Ze<be.length;Ze++){const wt=be[Ze].image[Oe].image;$e?J&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,0,0,wt.width,wt.height,Pe,ke,wt.data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,Ve,wt.width,wt.height,0,Pe,ke,wt.data)}}else{$e?J&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,0,0,Pe,ke,ze[Oe]):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,Ve,Pe,ke,ze[Oe]);for(let Ze=0;Ze<be.length;Ze++){const We=be[Ze];$e?J&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,0,0,Pe,ke,We.image[Oe]):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,Ze+1,Ve,Pe,ke,We.image[Oe])}}}v(U)&&m(n.TEXTURE_CUBE_MAP),ce.__version=pe.version,U.onUpdate&&U.onUpdate(U)}H.__version=U.version}function Q(H,U,X,oe,pe,ce){const Fe=s.convert(X.format,X.colorSpace),Re=s.convert(X.type),Le=x(X.internalFormat,Fe,Re,X.colorSpace),Je=i.get(U),Me=i.get(X);if(Me.__renderTarget=U,!Je.__hasExternalTextures){const ze=Math.max(1,U.width>>ce),Ee=Math.max(1,U.height>>ce);pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY?r.texImage3D(pe,ce,Le,ze,Ee,U.depth,0,Fe,Re,null):r.texImage2D(pe,ce,Le,ze,Ee,0,Fe,Re,null)}r.bindFramebuffer(n.FRAMEBUFFER,H),_e(U)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,oe,pe,Me.__webglTexture,0,xe(U)):(pe===n.TEXTURE_2D||pe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&pe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,oe,pe,Me.__webglTexture,ce),r.bindFramebuffer(n.FRAMEBUFFER,null)}function Y(H,U,X){if(n.bindRenderbuffer(n.RENDERBUFFER,H),U.depthBuffer){const oe=U.depthTexture,pe=oe&&oe.isDepthTexture?oe.type:null,ce=S(U.stencilBuffer,pe),Fe=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=xe(U);_e(U)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Re,ce,U.width,U.height):X?n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,ce,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,ce,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Fe,n.RENDERBUFFER,H)}else{const oe=U.textures;for(let pe=0;pe<oe.length;pe++){const ce=oe[pe],Fe=s.convert(ce.format,ce.colorSpace),Re=s.convert(ce.type),Le=x(ce.internalFormat,Fe,Re,ce.colorSpace),Je=xe(U);X&&_e(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Je,Le,U.width,U.height):_e(U)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Je,Le,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,Le,U.width,U.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ne(H,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(n.FRAMEBUFFER,H),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const oe=i.get(U.depthTexture);oe.__renderTarget=U,(!oe.__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),I(U.depthTexture,0);const pe=oe.__webglTexture,ce=xe(U);if(U.depthTexture.format===Hs)_e(U)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pe,0,ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,pe,0);else if(U.depthTexture.format===qs)_e(U)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pe,0,ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,pe,0);else throw new Error("Unknown depthTexture format")}function ye(H){const U=i.get(H),X=H.isWebGLCubeRenderTarget===!0;if(U.__boundDepthTexture!==H.depthTexture){const oe=H.depthTexture;if(U.__depthDisposeCallback&&U.__depthDisposeCallback(),oe){const pe=()=>{delete U.__boundDepthTexture,delete U.__depthDisposeCallback,oe.removeEventListener("dispose",pe)};oe.addEventListener("dispose",pe),U.__depthDisposeCallback=pe}U.__boundDepthTexture=oe}if(H.depthTexture&&!U.__autoAllocateDepthBuffer){if(X)throw new Error("target.depthTexture not supported in Cube render targets");ne(U.__webglFramebuffer,H)}else if(X){U.__webglDepthbuffer=[];for(let oe=0;oe<6;oe++)if(r.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer[oe]),U.__webglDepthbuffer[oe]===void 0)U.__webglDepthbuffer[oe]=n.createRenderbuffer(),Y(U.__webglDepthbuffer[oe],H,!1);else{const pe=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ce=U.__webglDepthbuffer[oe];n.bindRenderbuffer(n.RENDERBUFFER,ce),n.framebufferRenderbuffer(n.FRAMEBUFFER,pe,n.RENDERBUFFER,ce)}}else if(r.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer),U.__webglDepthbuffer===void 0)U.__webglDepthbuffer=n.createRenderbuffer(),Y(U.__webglDepthbuffer,H,!1);else{const oe=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=U.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,oe,n.RENDERBUFFER,pe)}r.bindFramebuffer(n.FRAMEBUFFER,null)}function me(H,U,X){const oe=i.get(H);U!==void 0&&Q(oe.__webglFramebuffer,H,H.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),X!==void 0&&ye(H)}function fe(H){const U=H.texture,X=i.get(H),oe=i.get(U);H.addEventListener("dispose",C);const pe=H.textures,ce=H.isWebGLCubeRenderTarget===!0,Fe=pe.length>1;if(Fe||(oe.__webglTexture===void 0&&(oe.__webglTexture=n.createTexture()),oe.__version=U.version,a.memory.textures++),ce){X.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)if(U.mipmaps&&U.mipmaps.length>0){X.__webglFramebuffer[Re]=[];for(let Le=0;Le<U.mipmaps.length;Le++)X.__webglFramebuffer[Re][Le]=n.createFramebuffer()}else X.__webglFramebuffer[Re]=n.createFramebuffer()}else{if(U.mipmaps&&U.mipmaps.length>0){X.__webglFramebuffer=[];for(let Re=0;Re<U.mipmaps.length;Re++)X.__webglFramebuffer[Re]=n.createFramebuffer()}else X.__webglFramebuffer=n.createFramebuffer();if(Fe)for(let Re=0,Le=pe.length;Re<Le;Re++){const Je=i.get(pe[Re]);Je.__webglTexture===void 0&&(Je.__webglTexture=n.createTexture(),a.memory.textures++)}if(H.samples>0&&_e(H)===!1){X.__webglMultisampledFramebuffer=n.createFramebuffer(),X.__webglColorRenderbuffer=[],r.bindFramebuffer(n.FRAMEBUFFER,X.__webglMultisampledFramebuffer);for(let Re=0;Re<pe.length;Re++){const Le=pe[Re];X.__webglColorRenderbuffer[Re]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,X.__webglColorRenderbuffer[Re]);const Je=s.convert(Le.format,Le.colorSpace),Me=s.convert(Le.type),ze=x(Le.internalFormat,Je,Me,Le.colorSpace,H.isXRRenderTarget===!0),Ee=xe(H);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ee,ze,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.RENDERBUFFER,X.__webglColorRenderbuffer[Re])}n.bindRenderbuffer(n.RENDERBUFFER,null),H.depthBuffer&&(X.__webglDepthRenderbuffer=n.createRenderbuffer(),Y(X.__webglDepthRenderbuffer,H,!0)),r.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ce){r.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture),W(n.TEXTURE_CUBE_MAP,U);for(let Re=0;Re<6;Re++)if(U.mipmaps&&U.mipmaps.length>0)for(let Le=0;Le<U.mipmaps.length;Le++)Q(X.__webglFramebuffer[Re][Le],H,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,Le);else Q(X.__webglFramebuffer[Re],H,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0);v(U)&&m(n.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(Fe){for(let Re=0,Le=pe.length;Re<Le;Re++){const Je=pe[Re],Me=i.get(Je);r.bindTexture(n.TEXTURE_2D,Me.__webglTexture),W(n.TEXTURE_2D,Je),Q(X.__webglFramebuffer,H,Je,n.COLOR_ATTACHMENT0+Re,n.TEXTURE_2D,0),v(Je)&&m(n.TEXTURE_2D)}r.unbindTexture()}else{let Re=n.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(Re=H.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),r.bindTexture(Re,oe.__webglTexture),W(Re,U),U.mipmaps&&U.mipmaps.length>0)for(let Le=0;Le<U.mipmaps.length;Le++)Q(X.__webglFramebuffer[Le],H,U,n.COLOR_ATTACHMENT0,Re,Le);else Q(X.__webglFramebuffer,H,U,n.COLOR_ATTACHMENT0,Re,0);v(U)&&m(Re),r.unbindTexture()}H.depthBuffer&&ye(H)}function ae(H){const U=H.textures;for(let X=0,oe=U.length;X<oe;X++){const pe=U[X];if(v(pe)){const ce=_(H),Fe=i.get(pe).__webglTexture;r.bindTexture(ce,Fe),m(ce),r.unbindTexture()}}}const ve=[],q=[];function ge(H){if(H.samples>0){if(_e(H)===!1){const U=H.textures,X=H.width,oe=H.height;let pe=n.COLOR_BUFFER_BIT;const ce=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Fe=i.get(H),Re=U.length>1;if(Re)for(let Le=0;Le<U.length;Le++)r.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,null),r.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,null,0);r.bindFramebuffer(n.READ_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),r.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglFramebuffer);for(let Le=0;Le<U.length;Le++){if(H.resolveDepthBuffer&&(H.depthBuffer&&(pe|=n.DEPTH_BUFFER_BIT),H.stencilBuffer&&H.resolveStencilBuffer&&(pe|=n.STENCIL_BUFFER_BIT)),Re){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[Le]);const Je=i.get(U[Le]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Je,0)}n.blitFramebuffer(0,0,X,oe,0,0,X,oe,pe,n.NEAREST),c===!0&&(ve.length=0,q.length=0,ve.push(n.COLOR_ATTACHMENT0+Le),H.depthBuffer&&H.resolveDepthBuffer===!1&&(ve.push(ce),q.push(ce),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ve))}if(r.bindFramebuffer(n.READ_FRAMEBUFFER,null),r.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Re)for(let Le=0;Le<U.length;Le++){r.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[Le]);const Je=i.get(U[Le]).__webglTexture;r.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,Je,0)}r.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer)}else if(H.depthBuffer&&H.resolveDepthBuffer===!1&&c){const U=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[U])}}}function xe(H){return Math.min(o.maxSamples,H.samples)}function _e(H){const U=i.get(H);return H.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function Se(H){const U=a.render.frame;d.get(H)!==U&&(d.set(H,U),H.update())}function Ke(H,U){const X=H.colorSpace,oe=H.format,pe=H.type;return H.isCompressedTexture===!0||H.isVideoTexture===!0||X!==ko&&X!==mo&&(rn.getTransfer(X)===Tn?(oe!==ti||pe!==fi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",X)),U}function Ue(H){return typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement?(u.width=H.naturalWidth||H.width,u.height=H.naturalHeight||H.height):typeof VideoFrame<"u"&&H instanceof VideoFrame?(u.width=H.displayWidth,u.height=H.displayHeight):(u.width=H.width,u.height=H.height),u}this.allocateTextureUnit=F,this.resetTextureUnits=D,this.setTexture2D=I,this.setTexture2DArray=N,this.setTexture3D=L,this.setTextureCube=O,this.rebindTextures=me,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=ae,this.updateMultisampleRenderTarget=ge,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=Q,this.useMultisampledRTT=_e}function Sse(n,e){function r(i,o=mo){let s;const a=rn.getTransfer(o);if(i===fi)return n.UNSIGNED_BYTE;if(i===z_)return n.UNSIGNED_SHORT_4_4_4_4;if(i===k_)return n.UNSIGNED_SHORT_5_5_5_1;if(i===V_)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Wc)return n.BYTE;if(i===qc)return n.SHORT;if(i===ps)return n.UNSIGNED_SHORT;if(i===Xr)return n.INT;if(i===rr)return n.UNSIGNED_INT;if(i===hr)return n.FLOAT;if(i===Yr)return n.HALF_FLOAT;if(i===QT)return n.ALPHA;if(i===Ym)return n.RGB;if(i===ti)return n.RGBA;if(i===ZT)return n.LUMINANCE;if(i===JT)return n.LUMINANCE_ALPHA;if(i===Hs)return n.DEPTH_COMPONENT;if(i===qs)return n.DEPTH_STENCIL;if(i===Qm)return n.RED;if(i===qf)return n.RED_INTEGER;if(i===du)return n.RG;if(i===Xf)return n.RG_INTEGER;if(i===Kf)return n.RGBA_INTEGER;if(i===Xc||i===kl||i===Vl||i===Gl)if(a===Tn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Xc)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===kl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Vl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Gl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Xc)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===kl)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Vl)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Gl)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===cm||i===um||i===dm||i===fm)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===cm)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===um)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===dm)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===fm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===hm||i===uf||i===df)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===hm||i===uf)return a===Tn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===df)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===ff||i===hf||i===pf||i===mf||i===gf||i===vf||i===yf||i===_f||i===xf||i===bf||i===Sf||i===wf||i===Ef||i===Cf)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===ff)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===hf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===pf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===mf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===gf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===vf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===yf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===_f)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===xf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===bf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Sf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===wf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Ef)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Cf)return a===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Kc||i===pE||i===mE)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Kc)return a===Tn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===pE)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===mE)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===eM||i===pm||i===mm||i===gm)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Kc)return s.COMPRESSED_RED_RGTC1_EXT;if(i===pm)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===mm)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===gm)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Ws?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:r}}const wse={type:"move"};class pS{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Sd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Sd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Sd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const r=this._hand;if(r)for(const i of e.hand.values())this._getHandJoint(r,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,r,i){let o=null,s=null,a=null;const l=this._targetRay,c=this._grip,u=this._hand;if(e&&r.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const y of e.hand.values()){const v=r.getJointPose(y,i),m=this._getHandJoint(u,y);v!==null&&(m.matrix.fromArray(v.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=v.radius),m.visible=v!==null}const d=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=d.position.distanceTo(f.position),p=.02,g=.005;u.inputState.pinching&&h>p+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=p-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=r.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(o=r.getPose(e.targetRaySpace,i),o===null&&s!==null&&(o=s),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(wse)))}return l!==null&&(l.visible=o!==null),c!==null&&(c.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,r){if(e.joints[r.jointName]===void 0){const i=new Sd;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[r.jointName]=i,e.add(i)}return e.joints[r.jointName]}}const Ese=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Cse=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Tse{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,r,i){if(this.texture===null){const o=new $r,s=e.properties.get(o);s.__webglTexture=r.texture,(r.depthNear!=i.depthNear||r.depthFar!=i.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=o}}getMesh(e){if(this.texture!==null&&this.mesh===null){const r=e.cameras[0].viewport,i=new Vi({vertexShader:Ese,fragmentShader:Cse,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Br(new Q_(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Mse extends sc{constructor(e,r){super();const i=this;let o=null,s=1,a=null,l="local-floor",c=1,u=null,d=null,f=null,h=null,p=null,g=null;const y=new Tse,v=r.getContextAttributes();let m=null,_=null;const x=[],S=[],w=new je;let E=null;const C=new Si;C.viewport=new Wt;const T=new Si;T.viewport=new Wt;const M=[C,T],R=new qte;let P=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(k){let j=x[k];return j===void 0&&(j=new pS,x[k]=j),j.getTargetRaySpace()},this.getControllerGrip=function(k){let j=x[k];return j===void 0&&(j=new pS,x[k]=j),j.getGripSpace()},this.getHand=function(k){let j=x[k];return j===void 0&&(j=new pS,x[k]=j),j.getHandSpace()};function F(k){const j=S.indexOf(k.inputSource);if(j===-1)return;const Q=x[j];Q!==void 0&&(Q.update(k.inputSource,k.frame,u||a),Q.dispatchEvent({type:k.type,data:k.inputSource}))}function A(){o.removeEventListener("select",F),o.removeEventListener("selectstart",F),o.removeEventListener("selectend",F),o.removeEventListener("squeeze",F),o.removeEventListener("squeezestart",F),o.removeEventListener("squeezeend",F),o.removeEventListener("end",A),o.removeEventListener("inputsourceschange",I);for(let k=0;k<x.length;k++){const j=S[k];j!==null&&(S[k]=null,x[k].disconnect(j))}P=null,D=null,y.reset(),e.setRenderTarget(m),p=null,h=null,f=null,o=null,_=null,ie.stop(),i.isPresenting=!1,e.setPixelRatio(E),e.setSize(w.width,w.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(k){s=k,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(k){l=k,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(k){u=k},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return o},this.setSession=async function(k){if(o=k,o!==null){if(m=e.getRenderTarget(),o.addEventListener("select",F),o.addEventListener("selectstart",F),o.addEventListener("selectend",F),o.addEventListener("squeeze",F),o.addEventListener("squeezestart",F),o.addEventListener("squeezeend",F),o.addEventListener("end",A),o.addEventListener("inputsourceschange",I),v.xrCompatible!==!0&&await r.makeXRCompatible(),E=e.getPixelRatio(),e.getSize(w),o.renderState.layers===void 0){const j={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(o,r,j),o.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),_=new xs(p.framebufferWidth,p.framebufferHeight,{format:ti,type:fi,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let j=null,Q=null,Y=null;v.depth&&(Y=v.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,j=v.stencil?qs:Hs,Q=v.stencil?Ws:rr);const ne={colorFormat:r.RGBA8,depthFormat:Y,scaleFactor:s};f=new XRWebGLBinding(o,r),h=f.createProjectionLayer(ne),o.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new xs(h.textureWidth,h.textureHeight,{format:ti,type:fi,depthTexture:new ac(h.textureWidth,h.textureHeight,Q,void 0,void 0,void 0,void 0,void 0,void 0,j),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(c),u=null,a=await o.requestReferenceSpace(l),ie.setContext(o),ie.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function I(k){for(let j=0;j<k.removed.length;j++){const Q=k.removed[j],Y=S.indexOf(Q);Y>=0&&(S[Y]=null,x[Y].disconnect(Q))}for(let j=0;j<k.added.length;j++){const Q=k.added[j];let Y=S.indexOf(Q);if(Y===-1){for(let ye=0;ye<x.length;ye++)if(ye>=S.length){S.push(Q),Y=ye;break}else if(S[ye]===null){S[ye]=Q,Y=ye;break}if(Y===-1)break}const ne=x[Y];ne&&ne.connect(Q)}}const N=new K,L=new K;function O(k,j,Q){N.setFromMatrixPosition(j.matrixWorld),L.setFromMatrixPosition(Q.matrixWorld);const Y=N.distanceTo(L),ne=j.projectionMatrix.elements,ye=Q.projectionMatrix.elements,me=ne[14]/(ne[10]-1),fe=ne[14]/(ne[10]+1),ae=(ne[9]+1)/ne[5],ve=(ne[9]-1)/ne[5],q=(ne[8]-1)/ne[0],ge=(ye[8]+1)/ye[0],xe=me*q,_e=me*ge,Se=Y/(-q+ge),Ke=Se*-q;if(j.matrixWorld.decompose(k.position,k.quaternion,k.scale),k.translateX(Ke),k.translateZ(Se),k.matrixWorld.compose(k.position,k.quaternion,k.scale),k.matrixWorldInverse.copy(k.matrixWorld).invert(),ne[10]===-1)k.projectionMatrix.copy(j.projectionMatrix),k.projectionMatrixInverse.copy(j.projectionMatrixInverse);else{const Ue=me+Se,H=fe+Se,U=xe-Ke,X=_e+(Y-Ke),oe=ae*fe/H*Ue,pe=ve*fe/H*Ue;k.projectionMatrix.makePerspective(U,X,oe,pe,Ue,H),k.projectionMatrixInverse.copy(k.projectionMatrix).invert()}}function V(k,j){j===null?k.matrixWorld.copy(k.matrix):k.matrixWorld.multiplyMatrices(j.matrixWorld,k.matrix),k.matrixWorldInverse.copy(k.matrixWorld).invert()}this.updateCamera=function(k){if(o===null)return;let j=k.near,Q=k.far;y.texture!==null&&(y.depthNear>0&&(j=y.depthNear),y.depthFar>0&&(Q=y.depthFar)),R.near=T.near=C.near=j,R.far=T.far=C.far=Q,(P!==R.near||D!==R.far)&&(o.updateRenderState({depthNear:R.near,depthFar:R.far}),P=R.near,D=R.far),C.layers.mask=k.layers.mask|2,T.layers.mask=k.layers.mask|4,R.layers.mask=C.layers.mask|T.layers.mask;const Y=k.parent,ne=R.cameras;V(R,Y);for(let ye=0;ye<ne.length;ye++)V(ne[ye],Y);ne.length===2?O(R,C,T):R.projectionMatrix.copy(C.projectionMatrix),B(k,R,Y)};function B(k,j,Q){Q===null?k.matrix.copy(j.matrixWorld):(k.matrix.copy(Q.matrixWorld),k.matrix.invert(),k.matrix.multiply(j.matrixWorld)),k.matrix.decompose(k.position,k.quaternion,k.scale),k.updateMatrixWorld(!0),k.projectionMatrix.copy(j.projectionMatrix),k.projectionMatrixInverse.copy(j.projectionMatrixInverse),k.isPerspectiveCamera&&(k.fov=Tf*2*Math.atan(1/k.projectionMatrix.elements[5]),k.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(h===null&&p===null))return c},this.setFoveation=function(k){c=k,h!==null&&(h.fixedFoveation=k),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=k)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(R)};let z=null;function W(k,j){if(d=j.getViewerPose(u||a),g=j,d!==null){const Q=d.views;p!==null&&(e.setRenderTargetFramebuffer(_,p.framebuffer),e.setRenderTarget(_));let Y=!1;Q.length!==R.cameras.length&&(R.cameras.length=0,Y=!0);for(let ye=0;ye<Q.length;ye++){const me=Q[ye];let fe=null;if(p!==null)fe=p.getViewport(me);else{const ve=f.getViewSubImage(h,me);fe=ve.viewport,ye===0&&(e.setRenderTargetTextures(_,ve.colorTexture,h.ignoreDepthValues?void 0:ve.depthStencilTexture),e.setRenderTarget(_))}let ae=M[ye];ae===void 0&&(ae=new Si,ae.layers.enable(ye),ae.viewport=new Wt,M[ye]=ae),ae.matrix.fromArray(me.transform.matrix),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.projectionMatrix.fromArray(me.projectionMatrix),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert(),ae.viewport.set(fe.x,fe.y,fe.width,fe.height),ye===0&&(R.matrix.copy(ae.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Y===!0&&R.cameras.push(ae)}const ne=o.enabledFeatures;if(ne&&ne.includes("depth-sensing")){const ye=f.getDepthInformation(Q[0]);ye&&ye.isValid&&ye.texture&&y.init(e,ye,o.renderState)}}for(let Q=0;Q<x.length;Q++){const Y=S[Q],ne=x[Q];Y!==null&&ne!==void 0&&ne.update(Y,j,u||a)}z&&z(k,j),j.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:j}),g=null}const ie=new W$;ie.setAnimationLoop(W),this.setAnimationLoop=function(k){z=k},this.dispose=function(){}}}const _c=new xo,Rse=new fn;function Ase(n,e){function r(v,m){v.matrixAutoUpdate===!0&&v.updateMatrix(),m.value.copy(v.matrix)}function i(v,m){m.color.getRGB(v.fogColor.value,I$(n)),m.isFog?(v.fogNear.value=m.near,v.fogFar.value=m.far):m.isFogExp2&&(v.fogDensity.value=m.density)}function o(v,m,_,x,S){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(v,m):m.isMeshToonMaterial?(s(v,m),f(v,m)):m.isMeshPhongMaterial?(s(v,m),d(v,m)):m.isMeshStandardMaterial?(s(v,m),h(v,m),m.isMeshPhysicalMaterial&&p(v,m,S)):m.isMeshMatcapMaterial?(s(v,m),g(v,m)):m.isMeshDepthMaterial?s(v,m):m.isMeshDistanceMaterial?(s(v,m),y(v,m)):m.isMeshNormalMaterial?s(v,m):m.isLineBasicMaterial?(a(v,m),m.isLineDashedMaterial&&l(v,m)):m.isPointsMaterial?c(v,m,_,x):m.isSpriteMaterial?u(v,m):m.isShadowMaterial?(v.color.value.copy(m.color),v.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(v,m){v.opacity.value=m.opacity,m.color&&v.diffuse.value.copy(m.color),m.emissive&&v.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(v.map.value=m.map,r(m.map,v.mapTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,r(m.alphaMap,v.alphaMapTransform)),m.bumpMap&&(v.bumpMap.value=m.bumpMap,r(m.bumpMap,v.bumpMapTransform),v.bumpScale.value=m.bumpScale,m.side===er&&(v.bumpScale.value*=-1)),m.normalMap&&(v.normalMap.value=m.normalMap,r(m.normalMap,v.normalMapTransform),v.normalScale.value.copy(m.normalScale),m.side===er&&v.normalScale.value.negate()),m.displacementMap&&(v.displacementMap.value=m.displacementMap,r(m.displacementMap,v.displacementMapTransform),v.displacementScale.value=m.displacementScale,v.displacementBias.value=m.displacementBias),m.emissiveMap&&(v.emissiveMap.value=m.emissiveMap,r(m.emissiveMap,v.emissiveMapTransform)),m.specularMap&&(v.specularMap.value=m.specularMap,r(m.specularMap,v.specularMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);const _=e.get(m),x=_.envMap,S=_.envMapRotation;x&&(v.envMap.value=x,_c.copy(S),_c.x*=-1,_c.y*=-1,_c.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(_c.y*=-1,_c.z*=-1),v.envMapRotation.value.setFromMatrix4(Rse.makeRotationFromEuler(_c)),v.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=m.reflectivity,v.ior.value=m.ior,v.refractionRatio.value=m.refractionRatio),m.lightMap&&(v.lightMap.value=m.lightMap,v.lightMapIntensity.value=m.lightMapIntensity,r(m.lightMap,v.lightMapTransform)),m.aoMap&&(v.aoMap.value=m.aoMap,v.aoMapIntensity.value=m.aoMapIntensity,r(m.aoMap,v.aoMapTransform))}function a(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,m.map&&(v.map.value=m.map,r(m.map,v.mapTransform))}function l(v,m){v.dashSize.value=m.dashSize,v.totalSize.value=m.dashSize+m.gapSize,v.scale.value=m.scale}function c(v,m,_,x){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.size.value=m.size*_,v.scale.value=x*.5,m.map&&(v.map.value=m.map,r(m.map,v.uvTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,r(m.alphaMap,v.alphaMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest)}function u(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.rotation.value=m.rotation,m.map&&(v.map.value=m.map,r(m.map,v.mapTransform)),m.alphaMap&&(v.alphaMap.value=m.alphaMap,r(m.alphaMap,v.alphaMapTransform)),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest)}function d(v,m){v.specular.value.copy(m.specular),v.shininess.value=Math.max(m.shininess,1e-4)}function f(v,m){m.gradientMap&&(v.gradientMap.value=m.gradientMap)}function h(v,m){v.metalness.value=m.metalness,m.metalnessMap&&(v.metalnessMap.value=m.metalnessMap,r(m.metalnessMap,v.metalnessMapTransform)),v.roughness.value=m.roughness,m.roughnessMap&&(v.roughnessMap.value=m.roughnessMap,r(m.roughnessMap,v.roughnessMapTransform)),m.envMap&&(v.envMapIntensity.value=m.envMapIntensity)}function p(v,m,_){v.ior.value=m.ior,m.sheen>0&&(v.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),v.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(v.sheenColorMap.value=m.sheenColorMap,r(m.sheenColorMap,v.sheenColorMapTransform)),m.sheenRoughnessMap&&(v.sheenRoughnessMap.value=m.sheenRoughnessMap,r(m.sheenRoughnessMap,v.sheenRoughnessMapTransform))),m.clearcoat>0&&(v.clearcoat.value=m.clearcoat,v.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(v.clearcoatMap.value=m.clearcoatMap,r(m.clearcoatMap,v.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,r(m.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(v.clearcoatNormalMap.value=m.clearcoatNormalMap,r(m.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===er&&v.clearcoatNormalScale.value.negate())),m.dispersion>0&&(v.dispersion.value=m.dispersion),m.iridescence>0&&(v.iridescence.value=m.iridescence,v.iridescenceIOR.value=m.iridescenceIOR,v.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(v.iridescenceMap.value=m.iridescenceMap,r(m.iridescenceMap,v.iridescenceMapTransform)),m.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=m.iridescenceThicknessMap,r(m.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),m.transmission>0&&(v.transmission.value=m.transmission,v.transmissionSamplerMap.value=_.texture,v.transmissionSamplerSize.value.set(_.width,_.height),m.transmissionMap&&(v.transmissionMap.value=m.transmissionMap,r(m.transmissionMap,v.transmissionMapTransform)),v.thickness.value=m.thickness,m.thicknessMap&&(v.thicknessMap.value=m.thicknessMap,r(m.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=m.attenuationDistance,v.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(v.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(v.anisotropyMap.value=m.anisotropyMap,r(m.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=m.specularIntensity,v.specularColor.value.copy(m.specularColor),m.specularColorMap&&(v.specularColorMap.value=m.specularColorMap,r(m.specularColorMap,v.specularColorMapTransform)),m.specularIntensityMap&&(v.specularIntensityMap.value=m.specularIntensityMap,r(m.specularIntensityMap,v.specularIntensityMapTransform))}function g(v,m){m.matcap&&(v.matcap.value=m.matcap)}function y(v,m){const _=e.get(m).light;v.referencePosition.value.setFromMatrixPosition(_.matrixWorld),v.nearDistance.value=_.shadow.camera.near,v.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:o}}function Nse(n,e,r,i){let o={},s={},a=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(_,x){const S=x.program;i.uniformBlockBinding(_,S)}function u(_,x){let S=o[_.id];S===void 0&&(g(_),S=d(_),o[_.id]=S,_.addEventListener("dispose",v));const w=x.program;i.updateUBOMapping(_,w);const E=e.render.frame;s[_.id]!==E&&(h(_),s[_.id]=E)}function d(_){const x=f();_.__bindingPointIndex=x;const S=n.createBuffer(),w=_.__size,E=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,w,E),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,x,S),S}function f(){for(let _=0;_<l;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(_){const x=o[_.id],S=_.uniforms,w=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,x);for(let E=0,C=S.length;E<C;E++){const T=Array.isArray(S[E])?S[E]:[S[E]];for(let M=0,R=T.length;M<R;M++){const P=T[M];if(p(P,E,M,w)===!0){const D=P.__offset,F=Array.isArray(P.value)?P.value:[P.value];let A=0;for(let I=0;I<F.length;I++){const N=F[I],L=y(N);typeof N=="number"||typeof N=="boolean"?(P.__data[0]=N,n.bufferSubData(n.UNIFORM_BUFFER,D+A,P.__data)):N.isMatrix3?(P.__data[0]=N.elements[0],P.__data[1]=N.elements[1],P.__data[2]=N.elements[2],P.__data[3]=0,P.__data[4]=N.elements[3],P.__data[5]=N.elements[4],P.__data[6]=N.elements[5],P.__data[7]=0,P.__data[8]=N.elements[6],P.__data[9]=N.elements[7],P.__data[10]=N.elements[8],P.__data[11]=0):(N.toArray(P.__data,A),A+=L.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,D,P.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(_,x,S,w){const E=_.value,C=x+"_"+S;if(w[C]===void 0)return typeof E=="number"||typeof E=="boolean"?w[C]=E:w[C]=E.clone(),!0;{const T=w[C];if(typeof E=="number"||typeof E=="boolean"){if(T!==E)return w[C]=E,!0}else if(T.equals(E)===!1)return T.copy(E),!0}return!1}function g(_){const x=_.uniforms;let S=0;const w=16;for(let C=0,T=x.length;C<T;C++){const M=Array.isArray(x[C])?x[C]:[x[C]];for(let R=0,P=M.length;R<P;R++){const D=M[R],F=Array.isArray(D.value)?D.value:[D.value];for(let A=0,I=F.length;A<I;A++){const N=F[A],L=y(N),O=S%w,V=O%L.boundary,B=O+V;S+=V,B!==0&&w-B<L.storage&&(S+=w-B),D.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=S,S+=L.storage}}}const E=S%w;return E>0&&(S+=w-E),_.__size=S,_.__cache={},this}function y(_){const x={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(x.boundary=4,x.storage=4):_.isVector2?(x.boundary=8,x.storage=8):_.isVector3||_.isColor?(x.boundary=16,x.storage=12):_.isVector4?(x.boundary=16,x.storage=16):_.isMatrix3?(x.boundary=48,x.storage=48):_.isMatrix4?(x.boundary=64,x.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),x}function v(_){const x=_.target;x.removeEventListener("dispose",v);const S=a.indexOf(x.__bindingPointIndex);a.splice(S,1),n.deleteBuffer(o[x.id]),delete o[x.id],delete s[x.id]}function m(){for(const _ in o)n.deleteBuffer(o[_]);a=[],o={},s={}}return{bind:c,update:u,dispose:m}}class Pse{constructor(e={}){const{canvas:r=A$(),context:i=null,depth:o=!0,stencil:s=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=a;const g=new Uint32Array(4),y=new Int32Array(4);let v=null,m=null;const _=[],x=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Dt,this.toneMapping=Qi,this.toneMappingExposure=1;const S=this;let w=!1,E=0,C=0,T=null,M=-1,R=null;const P=new Wt,D=new Wt;let F=null;const A=new Tt(0);let I=0,N=r.width,L=r.height,O=1,V=null,B=null;const z=new Wt(0,0,N,L),W=new Wt(0,0,N,L);let ie=!1;const k=new X_;let j=!1,Q=!1;const Y=new fn,ne=new fn,ye=new K,me=new Wt,fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ae=!1;function ve(){return T===null?O:1}let q=i;function ge($,Z){return r.getContext($,Z)}try{const $={alpha:!0,depth:o,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${Wf}`),r.addEventListener("webglcontextlost",Oe,!1),r.addEventListener("webglcontextrestored",Ze,!1),r.addEventListener("webglcontextcreationerror",We,!1),q===null){const Z="webgl2";if(q=ge(Z,$),q===null)throw ge(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let xe,_e,Se,Ke,Ue,H,U,X,oe,pe,ce,Fe,Re,Le,Je,Me,ze,Ee,Pe,ke,Ve,$e,_t,J;function Qe(){xe=new zie(q),xe.init(),$e=new Sse(q,xe),_e=new Die(q,xe,e,$e),Se=new xse(q,xe),_e.reverseDepthBuffer&&h&&Se.buffers.depth.setReversed(!0),Ke=new Gie(q),Ue=new ase,H=new bse(q,xe,Se,Ue,_e,$e,Ke),U=new Fie(S),X=new $ie(S),oe=new Yte(q),_t=new Oie(q,oe),pe=new kie(q,oe,Ke,_t),ce=new jie(q,pe,oe,Ke),Pe=new Hie(q,_e,H),Me=new Lie(Ue),Fe=new sse(S,U,X,xe,_e,_t,Me),Re=new Ase(S,Ue),Le=new cse,Je=new mse(xe),Ee=new Pie(S,U,X,Se,ce,p,c),ze=new yse(S,ce,_e),J=new Nse(q,Ke,_e,Se),ke=new Iie(q,xe,Ke),Ve=new Vie(q,xe,Ke),Ke.programs=Fe.programs,S.capabilities=_e,S.extensions=xe,S.properties=Ue,S.renderLists=Le,S.shadowMap=ze,S.state=Se,S.info=Ke}Qe();const be=new Mse(S,q);this.xr=be,this.getContext=function(){return q},this.getContextAttributes=function(){return q.getContextAttributes()},this.forceContextLoss=function(){const $=xe.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=xe.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function($){$!==void 0&&(O=$,this.setSize(N,L,!1))},this.getSize=function($){return $.set(N,L)},this.setSize=function($,Z,ue=!0){if(be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}N=$,L=Z,r.width=Math.floor($*O),r.height=Math.floor(Z*O),ue===!0&&(r.style.width=$+"px",r.style.height=Z+"px"),this.setViewport(0,0,$,Z)},this.getDrawingBufferSize=function($){return $.set(N*O,L*O).floor()},this.setDrawingBufferSize=function($,Z,ue){N=$,L=Z,O=ue,r.width=Math.floor($*ue),r.height=Math.floor(Z*ue),this.setViewport(0,0,$,Z)},this.getCurrentViewport=function($){return $.copy(P)},this.getViewport=function($){return $.copy(z)},this.setViewport=function($,Z,ue,he){$.isVector4?z.set($.x,$.y,$.z,$.w):z.set($,Z,ue,he),Se.viewport(P.copy(z).multiplyScalar(O).round())},this.getScissor=function($){return $.copy(W)},this.setScissor=function($,Z,ue,he){$.isVector4?W.set($.x,$.y,$.z,$.w):W.set($,Z,ue,he),Se.scissor(D.copy(W).multiplyScalar(O).round())},this.getScissorTest=function(){return ie},this.setScissorTest=function($){Se.setScissorTest(ie=$)},this.setOpaqueSort=function($){V=$},this.setTransparentSort=function($){B=$},this.getClearColor=function($){return $.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor.apply(Ee,arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha.apply(Ee,arguments)},this.clear=function($=!0,Z=!0,ue=!0){let he=0;if($){let se=!1;if(T!==null){const Ge=T.texture.format;se=Ge===Kf||Ge===Xf||Ge===qf}if(se){const Ge=T.texture.type,st=Ge===fi||Ge===rr||Ge===ps||Ge===Ws||Ge===z_||Ge===k_,dt=Ee.getClearColor(),mt=Ee.getClearAlpha(),Ct=dt.r,Ye=dt.g,et=dt.b;st?(g[0]=Ct,g[1]=Ye,g[2]=et,g[3]=mt,q.clearBufferuiv(q.COLOR,0,g)):(y[0]=Ct,y[1]=Ye,y[2]=et,y[3]=mt,q.clearBufferiv(q.COLOR,0,y))}else he|=q.COLOR_BUFFER_BIT}Z&&(he|=q.DEPTH_BUFFER_BIT),ue&&(he|=q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),q.clear(he)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Oe,!1),r.removeEventListener("webglcontextrestored",Ze,!1),r.removeEventListener("webglcontextcreationerror",We,!1),Ee.dispose(),Le.dispose(),Je.dispose(),Ue.dispose(),U.dispose(),X.dispose(),ce.dispose(),_t.dispose(),J.dispose(),Fe.dispose(),be.dispose(),be.removeEventListener("sessionstart",bn),be.removeEventListener("sessionend",Xe),ot.stop()};function Oe($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Ze(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const $=Ke.autoReset,Z=ze.enabled,ue=ze.autoUpdate,he=ze.needsUpdate,se=ze.type;Qe(),Ke.autoReset=$,ze.enabled=Z,ze.autoUpdate=ue,ze.needsUpdate=he,ze.type=se}function We($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function wt($){const Z=$.target;Z.removeEventListener("dispose",wt),Mt(Z)}function Mt($){ct($),Ue.remove($)}function ct($){const Z=Ue.get($).programs;Z!==void 0&&(Z.forEach(function(ue){Fe.releaseProgram(ue)}),$.isShaderMaterial&&Fe.releaseShaderCache($))}this.renderBufferDirect=function($,Z,ue,he,se,Ge){Z===null&&(Z=fe);const st=se.isMesh&&se.matrixWorld.determinant()<0,dt=En($,Z,ue,he,se);Se.setMaterial(he,st);let mt=ue.index,Ct=1;if(he.wireframe===!0){if(mt=pe.getWireframeAttribute(ue),mt===void 0)return;Ct=2}const Ye=ue.drawRange,et=ue.attributes.position;let xt=Ye.start*Ct,$t=(Ye.start+Ye.count)*Ct;Ge!==null&&(xt=Math.max(xt,Ge.start*Ct),$t=Math.min($t,(Ge.start+Ge.count)*Ct)),mt!==null?(xt=Math.max(xt,0),$t=Math.min($t,mt.count)):et!=null&&(xt=Math.max(xt,0),$t=Math.min($t,et.count));const hn=$t-xt;if(hn<0||hn===1/0)return;_t.setup(se,he,dt,ue,mt);let dn,zt=ke;if(mt!==null&&(dn=oe.get(mt),zt=Ve,zt.setIndex(dn)),se.isMesh)he.wireframe===!0?(Se.setLineWidth(he.wireframeLinewidth*ve()),zt.setMode(q.LINES)):zt.setMode(q.TRIANGLES);else if(se.isLine){let Rt=he.linewidth;Rt===void 0&&(Rt=1),Se.setLineWidth(Rt*ve()),se.isLineSegments?zt.setMode(q.LINES):se.isLineLoop?zt.setMode(q.LINE_LOOP):zt.setMode(q.LINE_STRIP)}else se.isPoints?zt.setMode(q.POINTS):se.isSprite&&zt.setMode(q.TRIANGLES);if(se.isBatchedMesh)if(se._multiDrawInstances!==null)zt.renderMultiDrawInstances(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount,se._multiDrawInstances);else if(xe.get("WEBGL_multi_draw"))zt.renderMultiDraw(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount);else{const Rt=se._multiDrawStarts,Bn=se._multiDrawCounts,jt=se._multiDrawCount,Nr=mt?oe.get(mt).bytesPerElement:1,Vt=Ue.get(he).currentProgram.getUniforms();for(let Nt=0;Nt<jt;Nt++)Vt.setValue(q,"_gl_DrawID",Nt),zt.render(Rt[Nt]/Nr,Bn[Nt])}else if(se.isInstancedMesh)zt.renderInstances(xt,hn,se.count);else if(ue.isInstancedBufferGeometry){const Rt=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,Bn=Math.min(ue.instanceCount,Rt);zt.renderInstances(xt,hn,Bn)}else zt.render(xt,hn)};function qe($,Z,ue){$.transparent===!0&&$.side===wi&&$.forceSinglePass===!1?($.side=er,$.needsUpdate=!0,un($,Z,ue),$.side=Ss,$.needsUpdate=!0,un($,Z,ue),$.side=wi):un($,Z,ue)}this.compile=function($,Z,ue=null){ue===null&&(ue=$),m=Je.get(ue),m.init(Z),x.push(m),ue.traverseVisible(function(se){se.isLight&&se.layers.test(Z.layers)&&(m.pushLight(se),se.castShadow&&m.pushShadow(se))}),$!==ue&&$.traverseVisible(function(se){se.isLight&&se.layers.test(Z.layers)&&(m.pushLight(se),se.castShadow&&m.pushShadow(se))}),m.setupLights();const he=new Set;return $.traverse(function(se){if(!(se.isMesh||se.isPoints||se.isLine||se.isSprite))return;const Ge=se.material;if(Ge)if(Array.isArray(Ge))for(let st=0;st<Ge.length;st++){const dt=Ge[st];qe(dt,ue,se),he.add(dt)}else qe(Ge,ue,se),he.add(Ge)}),x.pop(),m=null,he},this.compileAsync=function($,Z,ue=null){const he=this.compile($,Z,ue);return new Promise(se=>{function Ge(){if(he.forEach(function(st){Ue.get(st).currentProgram.isReady()&&he.delete(st)}),he.size===0){se($);return}setTimeout(Ge,10)}xe.get("KHR_parallel_shader_compile")!==null?Ge():setTimeout(Ge,10)})};let rt=null;function Lt($){rt&&rt($)}function bn(){ot.stop()}function Xe(){ot.start()}const ot=new W$;ot.setAnimationLoop(Lt),typeof self<"u"&&ot.setContext(self),this.setAnimationLoop=function($){rt=$,be.setAnimationLoop($),$===null?ot.stop():ot.start()},be.addEventListener("sessionstart",bn),be.addEventListener("sessionend",Xe),this.render=function($,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),Z.parent===null&&Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),be.enabled===!0&&be.isPresenting===!0&&(be.cameraAutoUpdate===!0&&be.updateCamera(Z),Z=be.getCamera()),$.isScene===!0&&$.onBeforeRender(S,$,Z,T),m=Je.get($,x.length),m.init(Z),x.push(m),ne.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),k.setFromProjectionMatrix(ne),Q=this.localClippingEnabled,j=Me.init(this.clippingPlanes,Q),v=Le.get($,_.length),v.init(),_.push(v),be.enabled===!0&&be.isPresenting===!0){const Ge=S.xr.getDepthSensingMesh();Ge!==null&&yt(Ge,Z,-1/0,S.sortObjects)}yt($,Z,0,S.sortObjects),v.finish(),S.sortObjects===!0&&v.sort(V,B),ae=be.enabled===!1||be.isPresenting===!1||be.hasDepthSensing()===!1,ae&&Ee.addToRenderList(v,$),this.info.render.frame++,j===!0&&Me.beginShadows();const ue=m.state.shadowsArray;ze.render(ue,$,Z),j===!0&&Me.endShadows(),this.info.autoReset===!0&&this.info.reset();const he=v.opaque,se=v.transmissive;if(m.setupLights(),Z.isArrayCamera){const Ge=Z.cameras;if(se.length>0)for(let st=0,dt=Ge.length;st<dt;st++){const mt=Ge[st];bt(he,se,$,mt)}ae&&Ee.render($);for(let st=0,dt=Ge.length;st<dt;st++){const mt=Ge[st];ut(v,$,mt,mt.viewport)}}else se.length>0&&bt(he,se,$,Z),ae&&Ee.render($),ut(v,$,Z);T!==null&&(H.updateMultisampleRenderTarget(T),H.updateRenderTargetMipmap(T)),$.isScene===!0&&$.onAfterRender(S,$,Z),_t.resetDefaultState(),M=-1,R=null,x.pop(),x.length>0?(m=x[x.length-1],j===!0&&Me.setGlobalState(S.clippingPlanes,m.state.camera)):m=null,_.pop(),_.length>0?v=_[_.length-1]:v=null};function yt($,Z,ue,he){if($.visible===!1)return;if($.layers.test(Z.layers)){if($.isGroup)ue=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(Z);else if($.isLight)m.pushLight($),$.castShadow&&m.pushShadow($);else if($.isSprite){if(!$.frustumCulled||k.intersectsSprite($)){he&&me.setFromMatrixPosition($.matrixWorld).applyMatrix4(ne);const st=ce.update($),dt=$.material;dt.visible&&v.push($,st,dt,ue,me.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||k.intersectsObject($))){const st=ce.update($),dt=$.material;if(he&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),me.copy($.boundingSphere.center)):(st.boundingSphere===null&&st.computeBoundingSphere(),me.copy(st.boundingSphere.center)),me.applyMatrix4($.matrixWorld).applyMatrix4(ne)),Array.isArray(dt)){const mt=st.groups;for(let Ct=0,Ye=mt.length;Ct<Ye;Ct++){const et=mt[Ct],xt=dt[et.materialIndex];xt&&xt.visible&&v.push($,st,xt,ue,me.z,et)}}else dt.visible&&v.push($,st,dt,ue,me.z,null)}}const Ge=$.children;for(let st=0,dt=Ge.length;st<dt;st++)yt(Ge[st],Z,ue,he)}function ut($,Z,ue,he){const se=$.opaque,Ge=$.transmissive,st=$.transparent;m.setupLightsView(ue),j===!0&&Me.setGlobalState(S.clippingPlanes,ue),he&&Se.viewport(P.copy(he)),se.length>0&&It(se,Z,ue),Ge.length>0&&It(Ge,Z,ue),st.length>0&&It(st,Z,ue),Se.buffers.depth.setTest(!0),Se.buffers.depth.setMask(!0),Se.buffers.color.setMask(!0),Se.setPolygonOffset(!1)}function bt($,Z,ue,he){if((ue.isScene===!0?ue.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[he.id]===void 0&&(m.state.transmissionRenderTarget[he.id]=new xs(1,1,{generateMipmaps:!0,type:xe.has("EXT_color_buffer_half_float")||xe.has("EXT_color_buffer_float")?Yr:fi,minFilter:ki,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:rn.workingColorSpace}));const Ge=m.state.transmissionRenderTarget[he.id],st=he.viewport||P;Ge.setSize(st.z,st.w);const dt=S.getRenderTarget();S.setRenderTarget(Ge),S.getClearColor(A),I=S.getClearAlpha(),I<1&&S.setClearColor(16777215,.5),S.clear(),ae&&Ee.render(ue);const mt=S.toneMapping;S.toneMapping=Qi;const Ct=he.viewport;if(he.viewport!==void 0&&(he.viewport=void 0),m.setupLightsView(he),j===!0&&Me.setGlobalState(S.clippingPlanes,he),It($,ue,he),H.updateMultisampleRenderTarget(Ge),H.updateRenderTargetMipmap(Ge),xe.has("WEBGL_multisampled_render_to_texture")===!1){let Ye=!1;for(let et=0,xt=Z.length;et<xt;et++){const $t=Z[et],hn=$t.object,dn=$t.geometry,zt=$t.material,Rt=$t.group;if(zt.side===wi&&hn.layers.test(he.layers)){const Bn=zt.side;zt.side=er,zt.needsUpdate=!0,yn(hn,ue,he,dn,zt,Rt),zt.side=Bn,zt.needsUpdate=!0,Ye=!0}}Ye===!0&&(H.updateMultisampleRenderTarget(Ge),H.updateRenderTargetMipmap(Ge))}S.setRenderTarget(dt),S.setClearColor(A,I),Ct!==void 0&&(he.viewport=Ct),S.toneMapping=mt}function It($,Z,ue){const he=Z.isScene===!0?Z.overrideMaterial:null;for(let se=0,Ge=$.length;se<Ge;se++){const st=$[se],dt=st.object,mt=st.geometry,Ct=he===null?st.material:he,Ye=st.group;dt.layers.test(ue.layers)&&yn(dt,Z,ue,mt,Ct,Ye)}}function yn($,Z,ue,he,se,Ge){$.onBeforeRender(S,Z,ue,he,se,Ge),$.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),se.onBeforeRender(S,Z,ue,he,$,Ge),se.transparent===!0&&se.side===wi&&se.forceSinglePass===!1?(se.side=er,se.needsUpdate=!0,S.renderBufferDirect(ue,Z,he,se,$,Ge),se.side=Ss,se.needsUpdate=!0,S.renderBufferDirect(ue,Z,he,se,$,Ge),se.side=wi):S.renderBufferDirect(ue,Z,he,se,$,Ge),$.onAfterRender(S,Z,ue,he,se,Ge)}function un($,Z,ue){Z.isScene!==!0&&(Z=fe);const he=Ue.get($),se=m.state.lights,Ge=m.state.shadowsArray,st=se.state.version,dt=Fe.getParameters($,se.state,Ge,Z,ue),mt=Fe.getProgramCacheKey(dt);let Ct=he.programs;he.environment=$.isMeshStandardMaterial?Z.environment:null,he.fog=Z.fog,he.envMap=($.isMeshStandardMaterial?X:U).get($.envMap||he.environment),he.envMapRotation=he.environment!==null&&$.envMap===null?Z.environmentRotation:$.envMapRotation,Ct===void 0&&($.addEventListener("dispose",wt),Ct=new Map,he.programs=Ct);let Ye=Ct.get(mt);if(Ye!==void 0){if(he.currentProgram===Ye&&he.lightsStateVersion===st)return en($,dt),Ye}else dt.uniforms=Fe.getUniforms($),$.onBeforeCompile(dt,S),Ye=Fe.acquireProgram(dt,mt),Ct.set(mt,Ye),he.uniforms=dt.uniforms;const et=he.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(et.clippingPlanes=Me.uniform),en($,dt),he.needsLights=kn($),he.lightsStateVersion=st,he.needsLights&&(et.ambientLightColor.value=se.state.ambient,et.lightProbe.value=se.state.probe,et.directionalLights.value=se.state.directional,et.directionalLightShadows.value=se.state.directionalShadow,et.spotLights.value=se.state.spot,et.spotLightShadows.value=se.state.spotShadow,et.rectAreaLights.value=se.state.rectArea,et.ltc_1.value=se.state.rectAreaLTC1,et.ltc_2.value=se.state.rectAreaLTC2,et.pointLights.value=se.state.point,et.pointLightShadows.value=se.state.pointShadow,et.hemisphereLights.value=se.state.hemi,et.directionalShadowMap.value=se.state.directionalShadowMap,et.directionalShadowMatrix.value=se.state.directionalShadowMatrix,et.spotShadowMap.value=se.state.spotShadowMap,et.spotLightMatrix.value=se.state.spotLightMatrix,et.spotLightMap.value=se.state.spotLightMap,et.pointShadowMap.value=se.state.pointShadowMap,et.pointShadowMatrix.value=se.state.pointShadowMatrix),he.currentProgram=Ye,he.uniformsList=null,Ye}function Un($){if($.uniformsList===null){const Z=$.currentProgram.getUniforms();$.uniformsList=u0.seqWithValue(Z.seq,$.uniforms)}return $.uniformsList}function en($,Z){const ue=Ue.get($);ue.outputColorSpace=Z.outputColorSpace,ue.batching=Z.batching,ue.batchingColor=Z.batchingColor,ue.instancing=Z.instancing,ue.instancingColor=Z.instancingColor,ue.instancingMorph=Z.instancingMorph,ue.skinning=Z.skinning,ue.morphTargets=Z.morphTargets,ue.morphNormals=Z.morphNormals,ue.morphColors=Z.morphColors,ue.morphTargetsCount=Z.morphTargetsCount,ue.numClippingPlanes=Z.numClippingPlanes,ue.numIntersection=Z.numClipIntersection,ue.vertexAlphas=Z.vertexAlphas,ue.vertexTangents=Z.vertexTangents,ue.toneMapping=Z.toneMapping}function En($,Z,ue,he,se){Z.isScene!==!0&&(Z=fe),H.resetTextureUnits();const Ge=Z.fog,st=he.isMeshStandardMaterial?Z.environment:null,dt=T===null?S.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:ko,mt=(he.isMeshStandardMaterial?X:U).get(he.envMap||st),Ct=he.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,Ye=!!ue.attributes.tangent&&(!!he.normalMap||he.anisotropy>0),et=!!ue.morphAttributes.position,xt=!!ue.morphAttributes.normal,$t=!!ue.morphAttributes.color;let hn=Qi;he.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(hn=S.toneMapping);const dn=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,zt=dn!==void 0?dn.length:0,Rt=Ue.get(he),Bn=m.state.lights;if(j===!0&&(Q===!0||$!==R)){const Cn=$===R&&he.id===M;Me.setState(he,$,Cn)}let jt=!1;he.version===Rt.__version?(Rt.needsLights&&Rt.lightsStateVersion!==Bn.state.version||Rt.outputColorSpace!==dt||se.isBatchedMesh&&Rt.batching===!1||!se.isBatchedMesh&&Rt.batching===!0||se.isBatchedMesh&&Rt.batchingColor===!0&&se.colorTexture===null||se.isBatchedMesh&&Rt.batchingColor===!1&&se.colorTexture!==null||se.isInstancedMesh&&Rt.instancing===!1||!se.isInstancedMesh&&Rt.instancing===!0||se.isSkinnedMesh&&Rt.skinning===!1||!se.isSkinnedMesh&&Rt.skinning===!0||se.isInstancedMesh&&Rt.instancingColor===!0&&se.instanceColor===null||se.isInstancedMesh&&Rt.instancingColor===!1&&se.instanceColor!==null||se.isInstancedMesh&&Rt.instancingMorph===!0&&se.morphTexture===null||se.isInstancedMesh&&Rt.instancingMorph===!1&&se.morphTexture!==null||Rt.envMap!==mt||he.fog===!0&&Rt.fog!==Ge||Rt.numClippingPlanes!==void 0&&(Rt.numClippingPlanes!==Me.numPlanes||Rt.numIntersection!==Me.numIntersection)||Rt.vertexAlphas!==Ct||Rt.vertexTangents!==Ye||Rt.morphTargets!==et||Rt.morphNormals!==xt||Rt.morphColors!==$t||Rt.toneMapping!==hn||Rt.morphTargetsCount!==zt)&&(jt=!0):(jt=!0,Rt.__version=he.version);let Nr=Rt.currentProgram;jt===!0&&(Nr=un(he,Z,se));let Vt=!1,Nt=!1,$n=!1;const Xt=Nr.getUniforms(),ln=Rt.uniforms;if(Se.useProgram(Nr.program)&&(Vt=!0,Nt=!0,$n=!0),he.id!==M&&(M=he.id,Nt=!0),Vt||R!==$){Se.buffers.depth.getReversed()?(Y.copy($.projectionMatrix),Fee(Y),Uee(Y),Xt.setValue(q,"projectionMatrix",Y)):Xt.setValue(q,"projectionMatrix",$.projectionMatrix),Xt.setValue(q,"viewMatrix",$.matrixWorldInverse);const Rn=Xt.map.cameraPosition;Rn!==void 0&&Rn.setValue(q,ye.setFromMatrixPosition($.matrixWorld)),_e.logarithmicDepthBuffer&&Xt.setValue(q,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial)&&Xt.setValue(q,"isOrthographic",$.isOrthographicCamera===!0),R!==$&&(R=$,Nt=!0,$n=!0)}if(se.isSkinnedMesh){Xt.setOptional(q,se,"bindMatrix"),Xt.setOptional(q,se,"bindMatrixInverse");const Cn=se.skeleton;Cn&&(Cn.boneTexture===null&&Cn.computeBoneTexture(),Xt.setValue(q,"boneTexture",Cn.boneTexture,H))}se.isBatchedMesh&&(Xt.setOptional(q,se,"batchingTexture"),Xt.setValue(q,"batchingTexture",se._matricesTexture,H),Xt.setOptional(q,se,"batchingIdTexture"),Xt.setValue(q,"batchingIdTexture",se._indirectTexture,H),Xt.setOptional(q,se,"batchingColorTexture"),se._colorsTexture!==null&&Xt.setValue(q,"batchingColorTexture",se._colorsTexture,H));const pn=ue.morphAttributes;if((pn.position!==void 0||pn.normal!==void 0||pn.color!==void 0)&&Pe.update(se,ue,Nr),(Nt||Rt.receiveShadow!==se.receiveShadow)&&(Rt.receiveShadow=se.receiveShadow,Xt.setValue(q,"receiveShadow",se.receiveShadow)),he.isMeshGouraudMaterial&&he.envMap!==null&&(ln.envMap.value=mt,ln.flipEnvMap.value=mt.isCubeTexture&&mt.isRenderTargetTexture===!1?-1:1),he.isMeshStandardMaterial&&he.envMap===null&&Z.environment!==null&&(ln.envMapIntensity.value=Z.environmentIntensity),Nt&&(Xt.setValue(q,"toneMappingExposure",S.toneMappingExposure),Rt.needsLights&&ar(ln,$n),Ge&&he.fog===!0&&Re.refreshFogUniforms(ln,Ge),Re.refreshMaterialUniforms(ln,he,O,L,m.state.transmissionRenderTarget[$.id]),u0.upload(q,Un(Rt),ln,H)),he.isShaderMaterial&&he.uniformsNeedUpdate===!0&&(u0.upload(q,Un(Rt),ln,H),he.uniformsNeedUpdate=!1),he.isSpriteMaterial&&Xt.setValue(q,"center",se.center),Xt.setValue(q,"modelViewMatrix",se.modelViewMatrix),Xt.setValue(q,"normalMatrix",se.normalMatrix),Xt.setValue(q,"modelMatrix",se.matrixWorld),he.isShaderMaterial||he.isRawShaderMaterial){const Cn=he.uniformsGroups;for(let Rn=0,vi=Cn.length;Rn<vi;Rn++){const Pr=Cn[Rn];J.update(Pr,Nr),J.bind(Pr,Nr)}}return Nr}function ar($,Z){$.ambientLightColor.needsUpdate=Z,$.lightProbe.needsUpdate=Z,$.directionalLights.needsUpdate=Z,$.directionalLightShadows.needsUpdate=Z,$.pointLights.needsUpdate=Z,$.pointLightShadows.needsUpdate=Z,$.spotLights.needsUpdate=Z,$.spotLightShadows.needsUpdate=Z,$.rectAreaLights.needsUpdate=Z,$.hemisphereLights.needsUpdate=Z}function kn($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function($,Z,ue){Ue.get($.texture).__webglTexture=Z,Ue.get($.depthTexture).__webglTexture=ue;const he=Ue.get($);he.__hasExternalTextures=!0,he.__autoAllocateDepthBuffer=ue===void 0,he.__autoAllocateDepthBuffer||xe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),he.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function($,Z){const ue=Ue.get($);ue.__webglFramebuffer=Z,ue.__useDefaultFramebuffer=Z===void 0},this.setRenderTarget=function($,Z=0,ue=0){T=$,E=Z,C=ue;let he=!0,se=null,Ge=!1,st=!1;if($){const mt=Ue.get($);if(mt.__useDefaultFramebuffer!==void 0)Se.bindFramebuffer(q.FRAMEBUFFER,null),he=!1;else if(mt.__webglFramebuffer===void 0)H.setupRenderTarget($);else if(mt.__hasExternalTextures)H.rebindTextures($,Ue.get($.texture).__webglTexture,Ue.get($.depthTexture).__webglTexture);else if($.depthBuffer){const et=$.depthTexture;if(mt.__boundDepthTexture!==et){if(et!==null&&Ue.has(et)&&($.width!==et.image.width||$.height!==et.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");H.setupDepthRenderbuffer($)}}const Ct=$.texture;(Ct.isData3DTexture||Ct.isDataArrayTexture||Ct.isCompressedArrayTexture)&&(st=!0);const Ye=Ue.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(Ye[Z])?se=Ye[Z][ue]:se=Ye[Z],Ge=!0):$.samples>0&&H.useMultisampledRTT($)===!1?se=Ue.get($).__webglMultisampledFramebuffer:Array.isArray(Ye)?se=Ye[ue]:se=Ye,P.copy($.viewport),D.copy($.scissor),F=$.scissorTest}else P.copy(z).multiplyScalar(O).floor(),D.copy(W).multiplyScalar(O).floor(),F=ie;if(Se.bindFramebuffer(q.FRAMEBUFFER,se)&&he&&Se.drawBuffers($,se),Se.viewport(P),Se.scissor(D),Se.setScissorTest(F),Ge){const mt=Ue.get($.texture);q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_CUBE_MAP_POSITIVE_X+Z,mt.__webglTexture,ue)}else if(st){const mt=Ue.get($.texture),Ct=Z||0;q.framebufferTextureLayer(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,mt.__webglTexture,ue||0,Ct)}M=-1},this.readRenderTargetPixels=function($,Z,ue,he,se,Ge,st){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=Ue.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&st!==void 0&&(dt=dt[st]),dt){Se.bindFramebuffer(q.FRAMEBUFFER,dt);try{const mt=$.texture,Ct=mt.format,Ye=mt.type;if(!_e.textureFormatReadable(Ct)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!_e.textureTypeReadable(Ye)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=$.width-he&&ue>=0&&ue<=$.height-se&&q.readPixels(Z,ue,he,se,$e.convert(Ct),$e.convert(Ye),Ge)}finally{const mt=T!==null?Ue.get(T).__webglFramebuffer:null;Se.bindFramebuffer(q.FRAMEBUFFER,mt)}}},this.readRenderTargetPixelsAsync=async function($,Z,ue,he,se,Ge,st){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let dt=Ue.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&st!==void 0&&(dt=dt[st]),dt){const mt=$.texture,Ct=mt.format,Ye=mt.type;if(!_e.textureFormatReadable(Ct))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!_e.textureTypeReadable(Ye))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Z>=0&&Z<=$.width-he&&ue>=0&&ue<=$.height-se){Se.bindFramebuffer(q.FRAMEBUFFER,dt);const et=q.createBuffer();q.bindBuffer(q.PIXEL_PACK_BUFFER,et),q.bufferData(q.PIXEL_PACK_BUFFER,Ge.byteLength,q.STREAM_READ),q.readPixels(Z,ue,he,se,$e.convert(Ct),$e.convert(Ye),0);const xt=T!==null?Ue.get(T).__webglFramebuffer:null;Se.bindFramebuffer(q.FRAMEBUFFER,xt);const $t=q.fenceSync(q.SYNC_GPU_COMMANDS_COMPLETE,0);return q.flush(),await Lee(q,$t,4),q.bindBuffer(q.PIXEL_PACK_BUFFER,et),q.getBufferSubData(q.PIXEL_PACK_BUFFER,0,Ge),q.deleteBuffer(et),q.deleteSync($t),Ge}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function($,Z=null,ue=0){$.isTexture!==!0&&(Pc("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Z=arguments[0]||null,$=arguments[1]);const he=Math.pow(2,-ue),se=Math.floor($.image.width*he),Ge=Math.floor($.image.height*he),st=Z!==null?Z.x:0,dt=Z!==null?Z.y:0;H.setTexture2D($,0),q.copyTexSubImage2D(q.TEXTURE_2D,ue,0,0,st,dt,se,Ge),Se.unbindTexture()};const Ar=q.createFramebuffer(),vt=q.createFramebuffer();this.copyTextureToTexture=function($,Z,ue=null,he=null,se=0,Ge=null){$.isTexture!==!0&&(Pc("WebGLRenderer: copyTextureToTexture function signature has changed."),he=arguments[0]||null,$=arguments[1],Z=arguments[2],Ge=arguments[3]||0,ue=null),Ge===null&&(se!==0?(Pc("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ge=se,se=0):Ge=0);let st,dt,mt,Ct,Ye,et,xt,$t,hn;const dn=$.isCompressedTexture?$.mipmaps[Ge]:$.image;if(ue!==null)st=ue.max.x-ue.min.x,dt=ue.max.y-ue.min.y,mt=ue.isBox3?ue.max.z-ue.min.z:1,Ct=ue.min.x,Ye=ue.min.y,et=ue.isBox3?ue.min.z:0;else{const pn=Math.pow(2,-se);st=Math.floor(dn.width*pn),dt=Math.floor(dn.height*pn),$.isDataArrayTexture?mt=dn.depth:$.isData3DTexture?mt=Math.floor(dn.depth*pn):mt=1,Ct=0,Ye=0,et=0}he!==null?(xt=he.x,$t=he.y,hn=he.z):(xt=0,$t=0,hn=0);const zt=$e.convert(Z.format),Rt=$e.convert(Z.type);let Bn;Z.isData3DTexture?(H.setTexture3D(Z,0),Bn=q.TEXTURE_3D):Z.isDataArrayTexture||Z.isCompressedArrayTexture?(H.setTexture2DArray(Z,0),Bn=q.TEXTURE_2D_ARRAY):(H.setTexture2D(Z,0),Bn=q.TEXTURE_2D),q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,Z.flipY),q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),q.pixelStorei(q.UNPACK_ALIGNMENT,Z.unpackAlignment);const jt=q.getParameter(q.UNPACK_ROW_LENGTH),Nr=q.getParameter(q.UNPACK_IMAGE_HEIGHT),Vt=q.getParameter(q.UNPACK_SKIP_PIXELS),Nt=q.getParameter(q.UNPACK_SKIP_ROWS),$n=q.getParameter(q.UNPACK_SKIP_IMAGES);q.pixelStorei(q.UNPACK_ROW_LENGTH,dn.width),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,dn.height),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Ct),q.pixelStorei(q.UNPACK_SKIP_ROWS,Ye),q.pixelStorei(q.UNPACK_SKIP_IMAGES,et);const Xt=$.isDataArrayTexture||$.isData3DTexture,ln=Z.isDataArrayTexture||Z.isData3DTexture;if($.isDepthTexture){const pn=Ue.get($),Cn=Ue.get(Z),Rn=Ue.get(pn.__renderTarget),vi=Ue.get(Cn.__renderTarget);Se.bindFramebuffer(q.READ_FRAMEBUFFER,Rn.__webglFramebuffer),Se.bindFramebuffer(q.DRAW_FRAMEBUFFER,vi.__webglFramebuffer);for(let Pr=0;Pr<mt;Pr++)Xt&&(q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ue.get($).__webglTexture,se,et+Pr),q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Ue.get(Z).__webglTexture,Ge,hn+Pr)),q.blitFramebuffer(Ct,Ye,st,dt,xt,$t,st,dt,q.DEPTH_BUFFER_BIT,q.NEAREST);Se.bindFramebuffer(q.READ_FRAMEBUFFER,null),Se.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else if(se!==0||$.isRenderTargetTexture||Ue.has($)){const pn=Ue.get($),Cn=Ue.get(Z);Se.bindFramebuffer(q.READ_FRAMEBUFFER,Ar),Se.bindFramebuffer(q.DRAW_FRAMEBUFFER,vt);for(let Rn=0;Rn<mt;Rn++)Xt?q.framebufferTextureLayer(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,pn.__webglTexture,se,et+Rn):q.framebufferTexture2D(q.READ_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,pn.__webglTexture,se),ln?q.framebufferTextureLayer(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,Cn.__webglTexture,Ge,hn+Rn):q.framebufferTexture2D(q.DRAW_FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Cn.__webglTexture,Ge),se!==0?q.blitFramebuffer(Ct,Ye,st,dt,xt,$t,st,dt,q.COLOR_BUFFER_BIT,q.NEAREST):ln?q.copyTexSubImage3D(Bn,Ge,xt,$t,hn+Rn,Ct,Ye,st,dt):q.copyTexSubImage2D(Bn,Ge,xt,$t,Ct,Ye,st,dt);Se.bindFramebuffer(q.READ_FRAMEBUFFER,null),Se.bindFramebuffer(q.DRAW_FRAMEBUFFER,null)}else ln?$.isDataTexture||$.isData3DTexture?q.texSubImage3D(Bn,Ge,xt,$t,hn,st,dt,mt,zt,Rt,dn.data):Z.isCompressedArrayTexture?q.compressedTexSubImage3D(Bn,Ge,xt,$t,hn,st,dt,mt,zt,dn.data):q.texSubImage3D(Bn,Ge,xt,$t,hn,st,dt,mt,zt,Rt,dn):$.isDataTexture?q.texSubImage2D(q.TEXTURE_2D,Ge,xt,$t,st,dt,zt,Rt,dn.data):$.isCompressedTexture?q.compressedTexSubImage2D(q.TEXTURE_2D,Ge,xt,$t,dn.width,dn.height,zt,dn.data):q.texSubImage2D(q.TEXTURE_2D,Ge,xt,$t,st,dt,zt,Rt,dn);q.pixelStorei(q.UNPACK_ROW_LENGTH,jt),q.pixelStorei(q.UNPACK_IMAGE_HEIGHT,Nr),q.pixelStorei(q.UNPACK_SKIP_PIXELS,Vt),q.pixelStorei(q.UNPACK_SKIP_ROWS,Nt),q.pixelStorei(q.UNPACK_SKIP_IMAGES,$n),Ge===0&&Z.generateMipmaps&&q.generateMipmap(Bn),Se.unbindTexture()},this.copyTextureToTexture3D=function($,Z,ue=null,he=null,se=0){return $.isTexture!==!0&&(Pc("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ue=arguments[0]||null,he=arguments[1]||null,$=arguments[2],Z=arguments[3],se=arguments[4]||0),Pc('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture($,Z,ue,he,se)},this.initRenderTarget=function($){Ue.get($).__webglFramebuffer===void 0&&H.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?H.setTextureCube($,0):$.isData3DTexture?H.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?H.setTexture2DArray($,0):H.setTexture2D($,0),Se.unbindTexture()},this.resetState=function(){E=0,C=0,T=null,Se.reset(),_t.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Bo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const r=this.getContext();r.drawingBufferColorspace=rn._getDrawingBufferColorSpace(e),r.unpackColorSpace=rn._getUnpackColorSpace()}}const Bd=new ls,xa=new je,Q$=new K,mS=new je,d0=new je,my=new K,_E=new K,Z$=new fn,J$=new K,ez=new K;let Bi=null,Ns=null;const ba=[],Hl={NONE:-1,PAN:0,ROTATE:1};class Ose extends Z_{constructor(e,r,i=null){super(r,i),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new j$,this.mouseButtons={LEFT:ei.PAN,MIDDLE:ei.PAN,RIGHT:ei.ROTATE},this.touches={ONE:Ca.PAN},this._onPointerMove=Ise.bind(this),this._onPointerDown=Dse.bind(this),this._onPointerCancel=Lse.bind(this),this._onContextMenu=Fse.bind(this),i!==null&&this.connect()}connect(){this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){const r=this.domElement.getBoundingClientRect();xa.x=(e.clientX-r.left)/r.width*2-1,xa.y=-(e.clientY-r.top)/r.height*2+1}_updateState(e){let r;if(e.pointerType==="touch")r=this.touches.ONE;else switch(e.button){case 0:r=this.mouseButtons.LEFT;break;case 1:r=this.mouseButtons.MIDDLE;break;case 2:r=this.mouseButtons.RIGHT;break;default:r=null}switch(r){case ei.PAN:case Ca.PAN:this.state=Hl.PAN;break;case ei.ROTATE:case Ca.ROTATE:this.state=Hl.ROTATE;break;default:this.state=Hl.NONE}}getRaycaster(){return console.warn("THREE.DragControls: getRaycaster() has been deprecated. Use controls.raycaster instead."),this.raycaster}setObjects(e){console.warn("THREE.DragControls: setObjects() has been deprecated. Use controls.objects instead."),this.objects=e}getObjects(){return console.warn("THREE.DragControls: getObjects() has been deprecated. Use controls.objects instead."),this.objects}activate(){console.warn("THREE.DragControls: activate() has been renamed to connect()."),this.connect()}deactivate(){console.warn("THREE.DragControls: deactivate() has been renamed to disconnect()."),this.disconnect()}set mode(e){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}get mode(){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}}function Ise(n){const e=this.object,r=this.domElement,i=this.raycaster;if(this.enabled!==!1){if(this._updatePointer(n),i.setFromCamera(xa,e),Bi)this.state===Hl.PAN?i.ray.intersectPlane(Bd,my)&&Bi.position.copy(my.sub(Q$).applyMatrix4(Z$)):this.state===Hl.ROTATE&&(mS.subVectors(xa,d0).multiplyScalar(this.rotateSpeed),Bi.rotateOnWorldAxis(J$,mS.x),Bi.rotateOnWorldAxis(ez.normalize(),-mS.y)),this.dispatchEvent({type:"drag",object:Bi}),d0.copy(xa);else if(n.pointerType==="mouse"||n.pointerType==="pen")if(ba.length=0,i.setFromCamera(xa,e),i.intersectObjects(this.objects,this.recursive,ba),ba.length>0){const o=ba[0].object;Bd.setFromNormalAndCoplanarPoint(e.getWorldDirection(Bd.normal),_E.setFromMatrixPosition(o.matrixWorld)),Ns!==o&&Ns!==null&&(this.dispatchEvent({type:"hoveroff",object:Ns}),r.style.cursor="auto",Ns=null),Ns!==o&&(this.dispatchEvent({type:"hoveron",object:o}),r.style.cursor="pointer",Ns=o)}else Ns!==null&&(this.dispatchEvent({type:"hoveroff",object:Ns}),r.style.cursor="auto",Ns=null);d0.copy(xa)}}function Dse(n){const e=this.object,r=this.domElement,i=this.raycaster;this.enabled!==!1&&(this._updatePointer(n),this._updateState(n),ba.length=0,i.setFromCamera(xa,e),i.intersectObjects(this.objects,this.recursive,ba),ba.length>0&&(this.transformGroup===!0?Bi=tz(ba[0].object):Bi=ba[0].object,Bd.setFromNormalAndCoplanarPoint(e.getWorldDirection(Bd.normal),_E.setFromMatrixPosition(Bi.matrixWorld)),i.ray.intersectPlane(Bd,my)&&(this.state===Hl.PAN?(Z$.copy(Bi.parent.matrixWorld).invert(),Q$.copy(my).sub(_E.setFromMatrixPosition(Bi.matrixWorld))):this.state===Hl.ROTATE&&(J$.set(0,1,0).applyQuaternion(e.quaternion).normalize(),ez.set(1,0,0).applyQuaternion(e.quaternion).normalize())),r.style.cursor="move",this.dispatchEvent({type:"dragstart",object:Bi})),d0.copy(xa))}function Lse(){this.enabled!==!1&&(Bi&&(this.dispatchEvent({type:"dragend",object:Bi}),Bi=null),this.domElement.style.cursor=Ns?"pointer":"auto",this.state=Hl.NONE)}function Fse(n){this.enabled!==!1&&n.preventDefault()}function tz(n,e=null){return n.isGroup&&(e=n),n.parent===null?e:tz(n.parent,e)}function nz(n,e,r){var i,o=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function s(){var a,l=i.length,c,u=0,d=0,f=0;for(a=0;a<l;++a)c=i[a],u+=c.x||0,d+=c.y||0,f+=c.z||0;for(u=(u/l-n)*o,d=(d/l-e)*o,f=(f/l-r)*o,a=0;a<l;++a)c=i[a],u&&(c.x-=u),d&&(c.y-=d),f&&(c.z-=f)}return s.initialize=function(a){i=a},s.x=function(a){return arguments.length?(n=+a,s):n},s.y=function(a){return arguments.length?(e=+a,s):e},s.z=function(a){return arguments.length?(r=+a,s):r},s.strength=function(a){return arguments.length?(o=+a,s):o},s}function Use(n){const e=+this._x.call(null,n);return rz(this.cover(e),e,n)}function rz(n,e,r){if(isNaN(e))return n;var i,o=n._root,s={data:r},a=n._x0,l=n._x1,c,u,d,f,h;if(!o)return n._root=s,n;for(;o.length;)if((d=e>=(c=(a+l)/2))?a=c:l=c,i=o,!(o=o[f=+d]))return i[f]=s,n;if(u=+n._x.call(null,o.data),e===u)return s.next=o,i?i[f]=s:n._root=s,n;do i=i?i[f]=new Array(2):n._root=new Array(2),(d=e>=(c=(a+l)/2))?a=c:l=c;while((f=+d)==(h=+(u>=c)));return i[h]=o,i[f]=s,n}function Bse(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,o=-1/0;for(let s=0,a;s<e;++s)isNaN(a=+this._x.call(null,n[s]))||(r[s]=a,a<i&&(i=a),a>o&&(o=a));if(i>o)return this;this.cover(i).cover(o);for(let s=0;s<e;++s)rz(this,r[s],n[s]);return this}function $se(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,o=this._root,s,a;e>n||n>=r;)switch(a=+(n<e),s=new Array(2),s[a]=o,o=s,i*=2,a){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=o)}return this._x0=e,this._x1=r,this}function zse(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function kse(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Ia(n,e,r){this.node=n,this.x0=e,this.x1=r}function Vse(n,e){var r,i=this._x0,o,s,a=this._x1,l=[],c=this._root,u,d;for(c&&l.push(new Ia(c,i,a)),e==null?e=1/0:(i=n-e,a=n+e);u=l.pop();)if(!(!(c=u.node)||(o=u.x0)>a||(s=u.x1)<i))if(c.length){var f=(o+s)/2;l.push(new Ia(c[1],f,s),new Ia(c[0],o,f)),(d=+(n>=f))&&(u=l[l.length-1],l[l.length-1]=l[l.length-1-d],l[l.length-1-d]=u)}else{var h=Math.abs(n-+this._x.call(null,c.data));h<e&&(e=h,i=n-h,a=n+h,r=c.data)}return r}function Gse(n){if(isNaN(c=+this._x.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._x1,c,u,d,f,h;if(!r)return this;if(r.length)for(;;){if((d=c>=(u=(a+l)/2))?a=u:l=u,e=r,!(r=r[f=+d]))return this;if(!r.length)break;e[f+1&1]&&(i=e,h=f)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[f]=s:delete e[f],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[h]=r:this._root=r),this):(this._root=s,this)}function Hse(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function jse(){return this._root}function Wse(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function qse(n){var e=[],r,i=this._root,o,s,a;for(i&&e.push(new Ia(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.x1)&&i.length){var l=(s+a)/2;(o=i[1])&&e.push(new Ia(o,l,a)),(o=i[0])&&e.push(new Ia(o,s,l))}return this}function Xse(n){var e=[],r=[],i;for(this._root&&e.push(new Ia(this._root,this._x0,this._x1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.x1,c=(a+l)/2;(s=o[0])&&e.push(new Ia(s,a,c)),(s=o[1])&&e.push(new Ia(s,c,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function Kse(n){return n[0]}function Yse(n){return arguments.length?(this._x=n,this):this._x}function iz(n,e){var r=new SM(e??Kse,NaN,NaN);return n==null?r:r.addAll(n)}function SM(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function JP(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var to=iz.prototype=SM.prototype;to.copy=function(){var n=new SM(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=JP(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var o=0;o<2;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(2)}):e.target[o]=JP(i));return n};to.add=Use;to.addAll=Bse;to.cover=$se;to.data=zse;to.extent=kse;to.find=Vse;to.remove=Gse;to.removeAll=Hse;to.root=jse;to.size=Wse;to.visit=qse;to.visitAfter=Xse;to.x=Yse;function Qse(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return oz(this.cover(e,r),e,r,n)}function oz(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var o,s=n._root,a={data:i},l=n._x0,c=n._y0,u=n._x1,d=n._y1,f,h,p,g,y,v,m,_;if(!s)return n._root=a,n;for(;s.length;)if((y=e>=(f=(l+u)/2))?l=f:u=f,(v=r>=(h=(c+d)/2))?c=h:d=h,o=s,!(s=s[m=v<<1|y]))return o[m]=a,n;if(p=+n._x.call(null,s.data),g=+n._y.call(null,s.data),e===p&&r===g)return a.next=s,o?o[m]=a:n._root=a,n;do o=o?o[m]=new Array(4):n._root=new Array(4),(y=e>=(f=(l+u)/2))?l=f:u=f,(v=r>=(h=(c+d)/2))?c=h:d=h;while((m=v<<1|y)===(_=(g>=h)<<1|p>=f));return o[_]=s,o[m]=a,n}function Zse(n){var e,r,i=n.length,o,s,a=new Array(i),l=new Array(i),c=1/0,u=1/0,d=-1/0,f=-1/0;for(r=0;r<i;++r)isNaN(o=+this._x.call(null,e=n[r]))||isNaN(s=+this._y.call(null,e))||(a[r]=o,l[r]=s,o<c&&(c=o),o>d&&(d=o),s<u&&(u=s),s>f&&(f=s));if(c>d||u>f)return this;for(this.cover(c,u).cover(d,f),r=0;r<i;++r)oz(this,a[r],l[r],n[r]);return this}function Jse(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,o=this._x1,s=this._y1;if(isNaN(r))o=(r=Math.floor(n))+1,s=(i=Math.floor(e))+1;else{for(var a=o-r||1,l=this._root,c,u;r>n||n>=o||i>e||e>=s;)switch(u=(e<i)<<1|n<r,c=new Array(4),c[u]=l,l=c,a*=2,u){case 0:o=r+a,s=i+a;break;case 1:r=o-a,s=i+a;break;case 2:o=r+a,i=s-a;break;case 3:r=o-a,i=s-a;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=o,this._y1=s,this}function eae(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function tae(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ci(n,e,r,i,o){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=o}function nae(n,e,r){var i,o=this._x0,s=this._y0,a,l,c,u,d=this._x1,f=this._y1,h=[],p=this._root,g,y;for(p&&h.push(new Ci(p,o,s,d,f)),r==null?r=1/0:(o=n-r,s=e-r,d=n+r,f=e+r,r*=r);g=h.pop();)if(!(!(p=g.node)||(a=g.x0)>d||(l=g.y0)>f||(c=g.x1)<o||(u=g.y1)<s))if(p.length){var v=(a+c)/2,m=(l+u)/2;h.push(new Ci(p[3],v,m,c,u),new Ci(p[2],a,m,v,u),new Ci(p[1],v,l,c,m),new Ci(p[0],a,l,v,m)),(y=(e>=m)<<1|n>=v)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=g)}else{var _=n-+this._x.call(null,p.data),x=e-+this._y.call(null,p.data),S=_*_+x*x;if(S<r){var w=Math.sqrt(r=S);o=n-w,s=e-w,d=n+w,f=e+w,i=p.data}}return i}function rae(n){if(isNaN(d=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._y0,c=this._x1,u=this._y1,d,f,h,p,g,y,v,m;if(!r)return this;if(r.length)for(;;){if((g=d>=(h=(a+c)/2))?a=h:c=h,(y=f>=(p=(l+u)/2))?l=p:u=p,e=r,!(r=r[v=y<<1|g]))return this;if(!r.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(i=e,m=v)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[v]=s:delete e[v],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[m]=r:this._root=r),this):(this._root=s,this)}function iae(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function oae(){return this._root}function sae(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function aae(n){var e=[],r,i=this._root,o,s,a,l,c;for(i&&e.push(new Ci(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.y0,l=r.x1,c=r.y1)&&i.length){var u=(s+l)/2,d=(a+c)/2;(o=i[3])&&e.push(new Ci(o,u,d,l,c)),(o=i[2])&&e.push(new Ci(o,s,d,u,c)),(o=i[1])&&e.push(new Ci(o,u,a,l,d)),(o=i[0])&&e.push(new Ci(o,s,a,u,d))}return this}function lae(n){var e=[],r=[],i;for(this._root&&e.push(new Ci(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.y0,c=i.x1,u=i.y1,d=(a+c)/2,f=(l+u)/2;(s=o[0])&&e.push(new Ci(s,a,l,d,f)),(s=o[1])&&e.push(new Ci(s,d,l,c,f)),(s=o[2])&&e.push(new Ci(s,a,f,d,u)),(s=o[3])&&e.push(new Ci(s,d,f,c,u))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function cae(n){return n[0]}function uae(n){return arguments.length?(this._x=n,this):this._x}function dae(n){return n[1]}function fae(n){return arguments.length?(this._y=n,this):this._y}function sz(n,e,r){var i=new wM(e??cae,r??dae,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function wM(n,e,r,i,o,s){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=o,this._y1=s,this._root=void 0}function eO(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Li=sz.prototype=wM.prototype;Li.copy=function(){var n=new wM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=eO(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var o=0;o<4;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(4)}):e.target[o]=eO(i));return n};Li.add=Qse;Li.addAll=Zse;Li.cover=Jse;Li.data=eae;Li.extent=tae;Li.find=nae;Li.remove=rae;Li.removeAll=iae;Li.root=oae;Li.size=sae;Li.visit=aae;Li.visitAfter=lae;Li.x=uae;Li.y=fae;function hae(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return az(this.cover(e,r,i),e,r,i,n)}function az(n,e,r,i,o){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var s,a=n._root,l={data:o},c=n._x0,u=n._y0,d=n._z0,f=n._x1,h=n._y1,p=n._z1,g,y,v,m,_,x,S,w,E,C,T;if(!a)return n._root=l,n;for(;a.length;)if((S=e>=(g=(c+f)/2))?c=g:f=g,(w=r>=(y=(u+h)/2))?u=y:h=y,(E=i>=(v=(d+p)/2))?d=v:p=v,s=a,!(a=a[C=E<<2|w<<1|S]))return s[C]=l,n;if(m=+n._x.call(null,a.data),_=+n._y.call(null,a.data),x=+n._z.call(null,a.data),e===m&&r===_&&i===x)return l.next=a,s?s[C]=l:n._root=l,n;do s=s?s[C]=new Array(8):n._root=new Array(8),(S=e>=(g=(c+f)/2))?c=g:f=g,(w=r>=(y=(u+h)/2))?u=y:h=y,(E=i>=(v=(d+p)/2))?d=v:p=v;while((C=E<<2|w<<1|S)===(T=(x>=v)<<2|(_>=y)<<1|m>=g));return s[T]=a,s[C]=l,n}function pae(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),o=new Float64Array(e);let s=1/0,a=1/0,l=1/0,c=-1/0,u=-1/0,d=-1/0;for(let f=0,h,p,g,y;f<e;++f)isNaN(p=+this._x.call(null,h=n[f]))||isNaN(g=+this._y.call(null,h))||isNaN(y=+this._z.call(null,h))||(r[f]=p,i[f]=g,o[f]=y,p<s&&(s=p),p>c&&(c=p),g<a&&(a=g),g>u&&(u=g),y<l&&(l=y),y>d&&(d=y));if(s>c||a>u||l>d)return this;this.cover(s,a,l).cover(c,u,d);for(let f=0;f<e;++f)az(this,r[f],i[f],o[f],n[f]);return this}function mae(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,o=this._y0,s=this._z0,a=this._x1,l=this._y1,c=this._z1;if(isNaN(i))a=(i=Math.floor(n))+1,l=(o=Math.floor(e))+1,c=(s=Math.floor(r))+1;else{for(var u=a-i||1,d=this._root,f,h;i>n||n>=a||o>e||e>=l||s>r||r>=c;)switch(h=(r<s)<<2|(e<o)<<1|n<i,f=new Array(8),f[h]=d,d=f,u*=2,h){case 0:a=i+u,l=o+u,c=s+u;break;case 1:i=a-u,l=o+u,c=s+u;break;case 2:a=i+u,o=l-u,c=s+u;break;case 3:i=a-u,o=l-u,c=s+u;break;case 4:a=i+u,l=o+u,s=c-u;break;case 5:i=a-u,l=o+u,s=c-u;break;case 6:a=i+u,o=l-u,s=c-u;break;case 7:i=a-u,o=l-u,s=c-u;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=o,this._z0=s,this._x1=a,this._y1=l,this._z1=c,this}function gae(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function vae(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Fn(n,e,r,i,o,s,a){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=o,this.y1=s,this.z1=a}function yae(n,e,r,i){var o,s=this._x0,a=this._y0,l=this._z0,c,u,d,f,h,p,g=this._x1,y=this._y1,v=this._z1,m=[],_=this._root,x,S;for(_&&m.push(new Fn(_,s,a,l,g,y,v)),i==null?i=1/0:(s=n-i,a=e-i,l=r-i,g=n+i,y=e+i,v=r+i,i*=i);x=m.pop();)if(!(!(_=x.node)||(c=x.x0)>g||(u=x.y0)>y||(d=x.z0)>v||(f=x.x1)<s||(h=x.y1)<a||(p=x.z1)<l))if(_.length){var w=(c+f)/2,E=(u+h)/2,C=(d+p)/2;m.push(new Fn(_[7],w,E,C,f,h,p),new Fn(_[6],c,E,C,w,h,p),new Fn(_[5],w,u,C,f,E,p),new Fn(_[4],c,u,C,w,E,p),new Fn(_[3],w,E,d,f,h,C),new Fn(_[2],c,E,d,w,h,C),new Fn(_[1],w,u,d,f,E,C),new Fn(_[0],c,u,d,w,E,C)),(S=(r>=C)<<2|(e>=E)<<1|n>=w)&&(x=m[m.length-1],m[m.length-1]=m[m.length-1-S],m[m.length-1-S]=x)}else{var T=n-+this._x.call(null,_.data),M=e-+this._y.call(null,_.data),R=r-+this._z.call(null,_.data),P=T*T+M*M+R*R;if(P<i){var D=Math.sqrt(i=P);s=n-D,a=e-D,l=r-D,g=n+D,y=e+D,v=r+D,o=_.data}}return o}function _ae(n){if(isNaN(h=+this._x.call(null,n))||isNaN(p=+this._y.call(null,n))||isNaN(g=+this._z.call(null,n)))return this;var e,r=this._root,i,o,s,a=this._x0,l=this._y0,c=this._z0,u=this._x1,d=this._y1,f=this._z1,h,p,g,y,v,m,_,x,S,w,E;if(!r)return this;if(r.length)for(;;){if((_=h>=(y=(a+u)/2))?a=y:u=y,(x=p>=(v=(l+d)/2))?l=v:d=v,(S=g>=(m=(c+f)/2))?c=m:f=m,e=r,!(r=r[w=S<<2|x<<1|_]))return this;if(!r.length)break;(e[w+1&7]||e[w+2&7]||e[w+3&7]||e[w+4&7]||e[w+5&7]||e[w+6&7]||e[w+7&7])&&(i=e,E=w)}for(;r.data!==n;)if(o=r,!(r=r.next))return this;return(s=r.next)&&delete r.next,o?(s?o.next=s:delete o.next,this):e?(s?e[w]=s:delete e[w],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[E]=r:this._root=r),this):(this._root=s,this)}function xae(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function bae(){return this._root}function Sae(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function wae(n){var e=[],r,i=this._root,o,s,a,l,c,u,d;for(i&&e.push(new Fn(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,s=r.x0,a=r.y0,l=r.z0,c=r.x1,u=r.y1,d=r.z1)&&i.length){var f=(s+c)/2,h=(a+u)/2,p=(l+d)/2;(o=i[7])&&e.push(new Fn(o,f,h,p,c,u,d)),(o=i[6])&&e.push(new Fn(o,s,h,p,f,u,d)),(o=i[5])&&e.push(new Fn(o,f,a,p,c,h,d)),(o=i[4])&&e.push(new Fn(o,s,a,p,f,h,d)),(o=i[3])&&e.push(new Fn(o,f,h,l,c,u,p)),(o=i[2])&&e.push(new Fn(o,s,h,l,f,u,p)),(o=i[1])&&e.push(new Fn(o,f,a,l,c,h,p)),(o=i[0])&&e.push(new Fn(o,s,a,l,f,h,p))}return this}function Eae(n){var e=[],r=[],i;for(this._root&&e.push(new Fn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var o=i.node;if(o.length){var s,a=i.x0,l=i.y0,c=i.z0,u=i.x1,d=i.y1,f=i.z1,h=(a+u)/2,p=(l+d)/2,g=(c+f)/2;(s=o[0])&&e.push(new Fn(s,a,l,c,h,p,g)),(s=o[1])&&e.push(new Fn(s,h,l,c,u,p,g)),(s=o[2])&&e.push(new Fn(s,a,p,c,h,d,g)),(s=o[3])&&e.push(new Fn(s,h,p,c,u,d,g)),(s=o[4])&&e.push(new Fn(s,a,l,g,h,p,f)),(s=o[5])&&e.push(new Fn(s,h,l,g,u,p,f)),(s=o[6])&&e.push(new Fn(s,a,p,g,h,d,f)),(s=o[7])&&e.push(new Fn(s,h,p,g,u,d,f))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function Cae(n){return n[0]}function Tae(n){return arguments.length?(this._x=n,this):this._x}function Mae(n){return n[1]}function Rae(n){return arguments.length?(this._y=n,this):this._y}function Aae(n){return n[2]}function Nae(n){return arguments.length?(this._z=n,this):this._z}function lz(n,e,r,i){var o=new EM(e??Cae,r??Mae,i??Aae,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?o:o.addAll(n)}function EM(n,e,r,i,o,s,a,l,c){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=o,this._z0=s,this._x1=a,this._y1=l,this._z1=c,this._root=void 0}function tO(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var gi=lz.prototype=EM.prototype;gi.copy=function(){var n=new EM(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=tO(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var o=0;o<8;++o)(i=e.source[o])&&(i.length?r.push({source:i,target:e.target[o]=new Array(8)}):e.target[o]=tO(i));return n};gi.add=hae;gi.addAll=pae;gi.cover=mae;gi.data=gae;gi.extent=vae;gi.find=yae;gi.remove=_ae;gi.removeAll=xae;gi.root=bae;gi.size=Sae;gi.visit=wae;gi.visitAfter=Eae;gi.x=Tae;gi.y=Rae;gi.z=Nae;function Ta(n){return function(){return n}}function va(n){return(n()-.5)*1e-6}function Pae(n){return n.index}function nO(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function cz(n){var e=Pae,r=h,i,o=Ta(30),s,a,l,c,u,d,f=1;n==null&&(n=[]);function h(m){return 1/Math.min(c[m.source.index],c[m.target.index])}function p(m){for(var _=0,x=n.length;_<f;++_)for(var S=0,w,E,C,T=0,M=0,R=0,P,D;S<x;++S)w=n[S],E=w.source,C=w.target,T=C.x+C.vx-E.x-E.vx||va(d),l>1&&(M=C.y+C.vy-E.y-E.vy||va(d)),l>2&&(R=C.z+C.vz-E.z-E.vz||va(d)),P=Math.sqrt(T*T+M*M+R*R),P=(P-s[S])/P*m*i[S],T*=P,M*=P,R*=P,C.vx-=T*(D=u[S]),l>1&&(C.vy-=M*D),l>2&&(C.vz-=R*D),E.vx+=T*(D=1-D),l>1&&(E.vy+=M*D),l>2&&(E.vz+=R*D)}function g(){if(a){var m,_=a.length,x=n.length,S=new Map(a.map((E,C)=>[e(E,C,a),E])),w;for(m=0,c=new Array(_);m<x;++m)w=n[m],w.index=m,typeof w.source!="object"&&(w.source=nO(S,w.source)),typeof w.target!="object"&&(w.target=nO(S,w.target)),c[w.source.index]=(c[w.source.index]||0)+1,c[w.target.index]=(c[w.target.index]||0)+1;for(m=0,u=new Array(x);m<x;++m)w=n[m],u[m]=c[w.source.index]/(c[w.source.index]+c[w.target.index]);i=new Array(x),y(),s=new Array(x),v()}}function y(){if(a)for(var m=0,_=n.length;m<_;++m)i[m]=+r(n[m],m,n)}function v(){if(a)for(var m=0,_=n.length;m<_;++m)s[m]=+o(n[m],m,n)}return p.initialize=function(m,..._){a=m,d=_.find(x=>typeof x=="function")||Math.random,l=_.find(x=>[1,2,3].includes(x))||2,g()},p.links=function(m){return arguments.length?(n=m,g(),p):n},p.id=function(m){return arguments.length?(e=m,p):e},p.iterations=function(m){return arguments.length?(f=+m,p):f},p.strength=function(m){return arguments.length?(r=typeof m=="function"?m:Ta(+m),y(),p):r},p.distance=function(m){return arguments.length?(o=typeof m=="function"?m:Ta(+m),v(),p):o},p}var Oae={value:()=>{}};function Jm(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new f0(r)}function f0(n){this._=n}function Iae(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",o=r.indexOf(".");if(o>=0&&(i=r.slice(o+1),r=r.slice(0,o)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}f0.prototype=Jm.prototype={constructor:f0,on:function(n,e){var r=this._,i=Iae(n+"",r),o,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((o=(n=i[s]).type)&&(o=Dae(r[o],n.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(o=(n=i[s]).type)r[o]=rO(r[o],n.name,e);else if(e==null)for(o in r)r[o]=rO(r[o],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new f0(n)},call:function(n,e){if((o=arguments.length-2)>0)for(var r=new Array(o),i=0,o,s;i<o;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,o=s.length;i<o;++i)s[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],o=0,s=i.length;o<s;++o)i[o].value.apply(e,r)}};function Dae(n,e){for(var r=0,i=n.length,o;r<i;++r)if((o=n[r]).name===e)return o.value}function rO(n,e,r){for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n[i]=Oae,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}var Rf=0,Qh=0,Eh=0,uz=1e3,gy,Zh,vy=0,hu=0,ex=0,ym=typeof performance=="object"&&performance.now?performance:Date,dz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function CM(){return hu||(dz(Lae),hu=ym.now()+ex)}function Lae(){hu=0}function yy(){this._call=this._time=this._next=null}yy.prototype=TM.prototype={constructor:yy,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?CM():+r)+(e==null?0:+e),!this._next&&Zh!==this&&(Zh?Zh._next=this:gy=this,Zh=this),this._call=n,this._time=r,xE()},stop:function(){this._call&&(this._call=null,this._time=1/0,xE())}};function TM(n,e,r){var i=new yy;return i.restart(n,e,r),i}function Fae(){CM(),++Rf;for(var n=gy,e;n;)(e=hu-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Rf}function iO(){hu=(vy=ym.now())+ex,Rf=Qh=0;try{Fae()}finally{Rf=0,Bae(),hu=0}}function Uae(){var n=ym.now(),e=n-vy;e>uz&&(ex-=e,vy=n)}function Bae(){for(var n,e=gy,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:gy=r);Zh=n,xE(i)}function xE(n){if(!Rf){Qh&&(Qh=clearTimeout(Qh));var e=n-hu;e>24?(n<1/0&&(Qh=setTimeout(iO,n-ym.now()-ex)),Eh&&(Eh=clearInterval(Eh))):(Eh||(vy=ym.now(),Eh=setInterval(Uae,uz)),Rf=1,dz(iO))}}function oO(n,e,r){var i=new yy;return e=e==null?0:+e,i.restart(o=>{i.stop(),n(o+e)},e,r),i}const $ae=1664525,zae=1013904223,sO=4294967296;function kae(){let n=1;return()=>(n=($ae*n+zae)%sO)/sO}var aO=3;function gS(n){return n.x}function lO(n){return n.y}function Vae(n){return n.z}var Gae=10,Hae=Math.PI*(3-Math.sqrt(5)),jae=Math.PI*20/(9+Math.sqrt(221));function fz(n,e){e=e||2;var r=Math.min(aO,Math.max(1,Math.round(e))),i,o=1,s=.001,a=1-Math.pow(s,1/300),l=0,c=.6,u=new Map,d=TM(p),f=Jm("tick","end"),h=kae();n==null&&(n=[]);function p(){g(),f.call("tick",i),o<s&&(d.stop(),f.call("end",i))}function g(m){var _,x=n.length,S;m===void 0&&(m=1);for(var w=0;w<m;++w)for(o+=(l-o)*a,u.forEach(function(E){E(o)}),_=0;_<x;++_)S=n[_],S.fx==null?S.x+=S.vx*=c:(S.x=S.fx,S.vx=0),r>1&&(S.fy==null?S.y+=S.vy*=c:(S.y=S.fy,S.vy=0)),r>2&&(S.fz==null?S.z+=S.vz*=c:(S.z=S.fz,S.vz=0));return i}function y(){for(var m=0,_=n.length,x;m<_;++m){if(x=n[m],x.index=m,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),x.fz!=null&&(x.z=x.fz),isNaN(x.x)||r>1&&isNaN(x.y)||r>2&&isNaN(x.z)){var S=Gae*(r>2?Math.cbrt(.5+m):r>1?Math.sqrt(.5+m):m),w=m*Hae,E=m*jae;r===1?x.x=S:r===2?(x.x=S*Math.cos(w),x.y=S*Math.sin(w)):(x.x=S*Math.sin(w)*Math.cos(E),x.y=S*Math.cos(w),x.z=S*Math.sin(w)*Math.sin(E))}(isNaN(x.vx)||r>1&&isNaN(x.vy)||r>2&&isNaN(x.vz))&&(x.vx=0,r>1&&(x.vy=0),r>2&&(x.vz=0))}}function v(m){return m.initialize&&m.initialize(n,h,r),m}return y(),i={tick:g,restart:function(){return d.restart(p),i},stop:function(){return d.stop(),i},numDimensions:function(m){return arguments.length?(r=Math.min(aO,Math.max(1,Math.round(m))),u.forEach(v),i):r},nodes:function(m){return arguments.length?(n=m,y(),u.forEach(v),i):n},alpha:function(m){return arguments.length?(o=+m,i):o},alphaMin:function(m){return arguments.length?(s=+m,i):s},alphaDecay:function(m){return arguments.length?(a=+m,i):+a},alphaTarget:function(m){return arguments.length?(l=+m,i):l},velocityDecay:function(m){return arguments.length?(c=1-m,i):1-c},randomSource:function(m){return arguments.length?(h=m,u.forEach(v),i):h},force:function(m,_){return arguments.length>1?(_==null?u.delete(m):u.set(m,v(_)),i):u.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),_=m.shift()||0,x=(r>1?m.shift():null)||0,S=(r>2?m.shift():null)||0,w=m.shift()||1/0,E=0,C=n.length,T,M,R,P,D,F;for(w*=w,E=0;E<C;++E)D=n[E],T=_-D.x,M=x-(D.y||0),R=S-(D.z||0),P=T*T+M*M+R*R,P<w&&(F=D,w=P);return F},on:function(m,_){return arguments.length>1?(f.on(m,_),i):f.on(m)}}}function hz(){var n,e,r,i,o,s=Ta(-30),a,l=1,c=1/0,u=.81;function d(g){var y,v=n.length,m=(e===1?iz(n,gS):e===2?sz(n,gS,lO):e===3?lz(n,gS,lO,Vae):null).visitAfter(h);for(o=g,y=0;y<v;++y)r=n[y],m.visit(p)}function f(){if(n){var g,y=n.length,v;for(a=new Array(y),g=0;g<y;++g)v=n[g],a[v.index]=+s(v,g,n)}}function h(g){var y=0,v,m,_=0,x,S,w,E,C=g.length;if(C){for(x=S=w=E=0;E<C;++E)(v=g[E])&&(m=Math.abs(v.value))&&(y+=v.value,_+=m,x+=m*(v.x||0),S+=m*(v.y||0),w+=m*(v.z||0));y*=Math.sqrt(4/C),g.x=x/_,e>1&&(g.y=S/_),e>2&&(g.z=w/_)}else{v=g,v.x=v.data.x,e>1&&(v.y=v.data.y),e>2&&(v.z=v.data.z);do y+=a[v.data.index];while(v=v.next)}g.value=y}function p(g,y,v,m,_){if(!g.value)return!0;var x=[v,m,_][e-1],S=g.x-r.x,w=e>1?g.y-r.y:0,E=e>2?g.z-r.z:0,C=x-y,T=S*S+w*w+E*E;if(C*C/u<T)return T<c&&(S===0&&(S=va(i),T+=S*S),e>1&&w===0&&(w=va(i),T+=w*w),e>2&&E===0&&(E=va(i),T+=E*E),T<l&&(T=Math.sqrt(l*T)),r.vx+=S*g.value*o/T,e>1&&(r.vy+=w*g.value*o/T),e>2&&(r.vz+=E*g.value*o/T)),!0;if(g.length||T>=c)return;(g.data!==r||g.next)&&(S===0&&(S=va(i),T+=S*S),e>1&&w===0&&(w=va(i),T+=w*w),e>2&&E===0&&(E=va(i),T+=E*E),T<l&&(T=Math.sqrt(l*T)));do g.data!==r&&(C=a[g.data.index]*o/T,r.vx+=S*C,e>1&&(r.vy+=w*C),e>2&&(r.vz+=E*C));while(g=g.next)}return d.initialize=function(g,...y){n=g,i=y.find(v=>typeof v=="function")||Math.random,e=y.find(v=>[1,2,3].includes(v))||2,f()},d.strength=function(g){return arguments.length?(s=typeof g=="function"?g:Ta(+g),f(),d):s},d.distanceMin=function(g){return arguments.length?(l=g*g,d):Math.sqrt(l)},d.distanceMax=function(g){return arguments.length?(c=g*g,d):Math.sqrt(c)},d.theta=function(g){return arguments.length?(u=g*g,d):Math.sqrt(u)},d}function pz(n,e,r,i){var o,s,a=Ta(.1),l,c;typeof n!="function"&&(n=Ta(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function u(f){for(var h=0,p=o.length;h<p;++h){var g=o[h],y=g.x-e||1e-6,v=(g.y||0)-r||1e-6,m=(g.z||0)-i||1e-6,_=Math.sqrt(y*y+v*v+m*m),x=(c[h]-_)*l[h]*f/_;g.vx+=y*x,s>1&&(g.vy+=v*x),s>2&&(g.vz+=m*x)}}function d(){if(o){var f,h=o.length;for(l=new Array(h),c=new Array(h),f=0;f<h;++f)c[f]=+n(o[f],f,o),l[f]=isNaN(c[f])?0:+a(o[f],f,o)}}return u.initialize=function(f,...h){o=f,s=h.find(p=>[1,2,3].includes(p))||2,d()},u.strength=function(f){return arguments.length?(a=typeof f=="function"?f:Ta(+f),d(),u):a},u.radius=function(f){return arguments.length?(n=typeof f=="function"?f:Ta(+f),d(),u):n},u.x=function(f){return arguments.length?(e=+f,u):e},u.y=function(f){return arguments.length?(r=+f,u):r},u.z=function(f){return arguments.length?(i=+f,u):i},u}var MM=function(e){qae(e);var r=Wae(e);return e.on=r.on,e.off=r.off,e.fire=r.fire,e};function Wae(n){var e=Object.create(null);return{on:function(r,i,o){if(typeof i!="function")throw new Error("callback is expected to be a function");var s=e[r];return s||(s=e[r]=[]),s.push({callback:i,ctx:o}),n},off:function(r,i){var o=typeof r>"u";if(o)return e=Object.create(null),n;if(e[r]){var s=typeof i!="function";if(s)delete e[r];else for(var a=e[r],l=0;l<a.length;++l)a[l].callback===i&&a.splice(l,1)}return n},fire:function(r){var i=e[r];if(!i)return n;var o;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var s=0;s<i.length;++s){var a=i[s];a.callback.apply(a.ctx,o)}return n}}}function qae(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],r=0;r<e.length;++r)if(n.hasOwnProperty(e[r]))throw new Error("Subject cannot be eventified, since it already has property '"+e[r]+"'")}var Xae=Yae,Kae=MM;function Yae(n){if(n=n||{},"uniqueLinkId"in n&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),n.multigraph=n.uniqueLinkId),n.multigraph===void 0&&(n.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,r=new Map,i={},o=0,s=n.multigraph?S:x,a=[],l=N,c=N,u=N,d=N,f={version:20,addNode:y,addLink:_,removeLink:T,removeNode:m,getNode:v,getNodeCount:w,getLinkCount:E,getEdgeCount:E,getLinksCount:E,getNodesCount:w,getLinks:C,forEachNode:V,forEachLinkedNode:F,forEachLink:D,beginUpdate:u,endUpdate:d,clear:P,hasLink:R,hasNode:v,getLink:R};return Kae(f),h(),f;function h(){var B=f.on;f.on=z;function z(){return f.beginUpdate=u=L,f.endUpdate=d=O,l=p,c=g,f.on=B,B.apply(f,arguments)}}function p(B,z){a.push({link:B,changeType:z})}function g(B,z){a.push({node:B,changeType:z})}function y(B,z){if(B===void 0)throw new Error("Invalid node identifier");u();var W=v(B);return W?(W.data=z,c(W,"update")):(W=new Qae(B,z),c(W,"add")),e.set(B,W),d(),W}function v(B){return e.get(B)}function m(B){var z=v(B);if(!z)return!1;u();var W=z.links;return W&&(W.forEach(M),z.links=null),e.delete(B),c(z,"remove"),d(),!0}function _(B,z,W){u();var ie=v(B)||y(B),k=v(z)||y(z),j=s(B,z,W),Q=r.has(j.id);return r.set(j.id,j),cO(ie,j),B!==z&&cO(k,j),l(j,Q?"update":"add"),d(),j}function x(B,z,W){var ie=pv(B,z),k=r.get(ie);return k?(k.data=W,k):new uO(B,z,W,ie)}function S(B,z,W){var ie=pv(B,z),k=i.hasOwnProperty(ie);if(k||R(B,z)){k||(i[ie]=0);var j="@"+ ++i[ie];ie=pv(B+j,z+j)}return new uO(B,z,W,ie)}function w(){return e.size}function E(){return r.size}function C(B){var z=v(B);return z?z.links:null}function T(B,z){return z!==void 0&&(B=R(B,z)),M(B)}function M(B){if(!B||!r.get(B.id))return!1;u(),r.delete(B.id);var z=v(B.fromId),W=v(B.toId);return z&&z.links.delete(B),W&&W.links.delete(B),l(B,"remove"),d(),!0}function R(B,z){if(!(B===void 0||z===void 0))return r.get(pv(B,z))}function P(){u(),V(function(B){m(B.id)}),d()}function D(B){if(typeof B=="function")for(var z=r.values(),W=z.next();!W.done;){if(B(W.value))return!0;W=z.next()}}function F(B,z,W){var ie=v(B);if(ie&&ie.links&&typeof z=="function")return W?I(ie.links,B,z):A(ie.links,B,z)}function A(B,z,W){for(var ie,k=B.values(),j=k.next();!j.done;){var Q=j.value,Y=Q.fromId===z?Q.toId:Q.fromId;if(ie=W(e.get(Y),Q),ie)return!0;j=k.next()}}function I(B,z,W){for(var ie,k=B.values(),j=k.next();!j.done;){var Q=j.value;if(Q.fromId===z&&(ie=W(e.get(Q.toId),Q),ie))return!0;j=k.next()}}function N(){}function L(){o+=1}function O(){o-=1,o===0&&a.length>0&&(f.fire("changed",a),a.length=0)}function V(B){if(typeof B!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+B);for(var z=e.values(),W=z.next();!W.done;){if(B(W.value))return!0;W=z.next()}}}function Qae(n,e){this.id=n,this.links=null,this.data=e}function cO(n,e){n.links?n.links.add(e):n.links=new Set([e])}function uO(n,e,r,i){this.fromId=n,this.toId=e,this.data=r,this.id=i}function pv(n,e){return n.toString()+"👉 "+e.toString()}const Zae=vu(Xae);var RM={exports:{}},eg={exports:{}},mz=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)};const Jae=mz;var eh=function(e){return r;function r(i,o){let s=o&&o.indent||0,a=o&&o.join!==void 0?o.join:`
`,l=Array(s+1).join(" "),c=[];for(let u=0;u<e;++u){let d=Jae(u),f=u===0?"":l;c.push(f+i.replace(/{var}/g,d))}return c.join(a)}};const gz=eh;eg.exports=ele;eg.exports.generateCreateBodyFunctionBody=vz;eg.exports.getVectorCode=_z;eg.exports.getBodyCode=yz;function ele(n,e){let r=vz(n,e),{Body:i}=new Function(r)();return i}function vz(n,e){return`
${_z(n,e)}
${yz(n)}
return {Body: Body, Vector: Vector};
`}function yz(n){let e=gz(n),r=e("{var}",{join:", "});return`
function Body(${r}) {
  this.isPinned = false;
  this.pos = new Vector(${r});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${r}) {
  ${e("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function _z(n,e){let r=gz(n),i="";return e&&(i=`${r(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${r("{var}",{join:", "})}) {
  ${i}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${r('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${r("this.{var} = v.{var};",{indent:4})}
    } else {
      ${r('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${r("this.{var} = ",{join:""})}0;
  };`}var tle=eg.exports,lc={exports:{}};const AM=eh,dl=mz;lc.exports=nle;lc.exports.generateQuadTreeFunctionBody=xz;lc.exports.getInsertStackCode=Cz;lc.exports.getQuadNodeCode=Ez;lc.exports.isSamePosition=bz;lc.exports.getChildBodyCode=wz;lc.exports.setChildBodyCode=Sz;function nle(n){let e=xz(n);return new Function(e)()}function xz(n){let e=AM(n),r=Math.pow(2,n);return`
${Cz()}
${Ez(n)}
${bz(n)}
${wz(n)}
${Sz(n)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${a("      node.")}
      node.body = null;
      node.mass = ${e("node.mass_{var} = ",{join:""})}0;
      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${e("var d{var};",{indent:4})}
    var r; 
    ${e("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${e("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < θ, treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${dl(0)} - node.min_${dl(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${e("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${s()}
        }
      }
    }

    ${e("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${e("root.min_{var} = {var}min;",{indent:4})}
    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${e("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${e("var min_{var} = node.min_{var};",{indent:8})}
        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${o(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${e("child.min_{var} = min_{var};",{indent:10})}
          ${e("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function o(l){let c=[],u=Array(l+1).join(" ");for(let d=0;d<n;++d)c.push(u+`if (${dl(d)} > max_${dl(d)}) {`),c.push(u+`  quadIdx = quadIdx + ${Math.pow(2,d)};`),c.push(u+`  min_${dl(d)} = max_${dl(d)};`),c.push(u+`  max_${dl(d)} = node.max_${dl(d)};`),c.push(u+"}");return c.join(`
`)}function s(){let l=Array(11).join(" "),c=[];for(let u=0;u<r;++u)c.push(l+`if (node.quad${u}) {`),c.push(l+`  queue[pushIdx] = node.quad${u};`),c.push(l+"  queueLength += 1;"),c.push(l+"  pushIdx += 1;"),c.push(l+"}");return c.join(`
`)}function a(l){let c=[];for(let u=0;u<r;++u)c.push(`${l}quad${u} = null;`);return c.join(`
`)}}function bz(n){let e=AM(n);return`
  function isSamePosition(point1, point2) {
    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${e("d{var} < 1e-8",{join:" && "})};
  }  
`}function Sz(n){var e=Math.pow(2,n);return`
function setChild(node, idx, child) {
  ${r()}
}`;function r(){let i=[];for(let o=0;o<e;++o){let s=o===0?"  ":"  else ";i.push(`${s}if (idx === ${o}) node.quad${o} = child;`)}return i.join(`
`)}}function wz(n){return`function getChild(node, idx) {
${e()}
  return null;
}`;function e(){let r=[],i=Math.pow(2,n);for(let o=0;o<i;++o)r.push(`  if (idx === ${o}) return node.quad${o};`);return r.join(`
`)}}function Ez(n){let e=AM(n),r=Math.pow(2,n);var i=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${o("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${e("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${e("this.min_{var} = 0;",{indent:2})}
  ${e("this.max_{var} = 0;",{indent:2})}
}
`;return i;function o(s){let a=[];for(let l=0;l<r;++l)a.push(`${s}quad${l} = null;`);return a.join(`
`)}}function Cz(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}var rle=lc.exports,NM={exports:{}};NM.exports=ole;NM.exports.generateFunctionBody=Tz;const ile=eh;function ole(n){let e=Tz(n);return new Function("bodies","settings","random",e)}function Tz(n){let e=ile(n);return`
  var boundingBox = {
    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${e("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${e("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${e("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${e("var max_{var} = -Infinity;",{indent:4})}
    ${e("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}var sle=NM.exports,PM={exports:{}};const ale=eh;PM.exports=lle;PM.exports.generateCreateDragForceFunctionBody=Mz;function lle(n){let e=Mz(n);return new Function("options",e)}function Mz(n){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${ale(n)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}var cle=PM.exports,OM={exports:{}};const ule=eh;OM.exports=dle;OM.exports.generateCreateSpringForceFunctionBody=Rz;function dle(n){let e=Rz(n);return new Function("options","random",e)}function Rz(n){let e=ule(n);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}var fle=OM.exports,IM={exports:{}};const hle=eh;IM.exports=ple;IM.exports.generateIntegratorFunctionBody=Az;function ple(n){let e=Az(n);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function Az(n){let e=hle(n);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${e("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${e("body.pos.{var} += d{var};",{indent:4})}

    ${e("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${e("t{var} * t{var}",{join:" + "})})/length;
`}var mle=IM.exports,vS,dO;function gle(){if(dO)return vS;dO=1,vS=n;function n(e,r,i,o){this.from=e,this.to=r,this.length=i,this.coefficient=o}return vS}var yS,fO;function vle(){if(fO)return yS;fO=1,yS=n;function n(e,r){var i;if(e||(e={}),r){for(i in r)if(r.hasOwnProperty(i)){var o=e.hasOwnProperty(i),s=typeof r[i],a=!o||typeof e[i]!==s;a?e[i]=r[i]:s==="object"&&(e[i]=n(e[i],r[i]))}}return e}return yS}var Ch={exports:{}},hO;function yle(){if(hO)return Ch.exports;hO=1,Ch.exports=n,Ch.exports.random=n,Ch.exports.randomIterator=l;function n(c){var u=typeof c=="number"?c:+new Date;return new e(u)}function e(c){this.seed=c}e.prototype.next=a,e.prototype.nextDouble=s,e.prototype.uniform=s,e.prototype.gaussian=r;function r(){var c,u,d;do u=this.nextDouble()*2-1,d=this.nextDouble()*2-1,c=u*u+d*d;while(c>=1||c===0);return u*Math.sqrt(-2*Math.log(c)/c)}e.prototype.levy=i;function i(){var c=1.5,u=Math.pow(o(1+c)*Math.sin(Math.PI*c/2)/(o((1+c)/2)*c*Math.pow(2,(c-1)/2)),1/c);return this.gaussian()*u/Math.pow(Math.abs(this.gaussian()),1/c)}function o(c){return Math.sqrt(2*Math.PI/c)*Math.pow(1/Math.E*(c+1/(12*c-1/(10*c))),c)}function s(){var c=this.seed;return c=c+2127912214+(c<<12)&4294967295,c=(c^3345072700^c>>>19)&4294967295,c=c+374761393+(c<<5)&4294967295,c=(c+3550635116^c<<9)&4294967295,c=c+4251993797+(c<<3)&4294967295,c=(c^3042594569^c>>>16)&4294967295,this.seed=c,(c&268435455)/268435456}function a(c){return Math.floor(this.nextDouble()*c)}function l(c,u){var d=u||n();if(typeof d.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:h,shuffle:f};function f(){var p,g,y;for(p=c.length-1;p>0;--p)g=d.next(p+1),y=c[g],c[g]=c[p],c[p]=y;return c}function h(p){var g,y,v;for(g=c.length-1;g>0;--g)y=d.next(g+1),v=c[y],c[y]=c[g],c[g]=v,p(v);c.length&&p(c[0])}}return Ch.exports}var Nz=Cle,_le=tle,xle=rle,ble=sle,Sle=cle,wle=fle,Ele=mle,pO={};function Cle(n){var e=gle(),r=vle(),i=MM;if(n){if(n.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(n.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}n=r(n,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var o=pO[n.dimensions];if(!o){var s=n.dimensions;o={Body:_le(s,n.debug),createQuadTree:xle(s),createBounds:ble(s),createDragForce:Sle(s),createSpringForce:wle(s),integrate:Ele(s)},pO[s]=o}var a=o.Body,l=o.createQuadTree,c=o.createBounds,u=o.createDragForce,d=o.createSpringForce,f=o.integrate,h=I=>new a(I),p=yle().random(42),g=[],y=[],v=l(n,p),m=c(g,n,p),_=d(n,p),x=u(n),S=0,w=[],E=new Map,C=0;R("nbody",F),R("spring",A);var T={bodies:g,quadTree:v,springs:y,settings:n,addForce:R,removeForce:P,getForces:D,step:function(){for(var I=0;I<w.length;++I)w[I](C);var N=f(g,n.timeStep,n.adaptiveTimeStepWeight);return C+=1,N},addBody:function(I){if(!I)throw new Error("Body is required");return g.push(I),I},addBodyAt:function(I){if(!I)throw new Error("Body position is required");var N=h(I);return g.push(N),N},removeBody:function(I){if(I){var N=g.indexOf(I);if(!(N<0))return g.splice(N,1),g.length===0&&m.reset(),!0}},addSpring:function(I,N,L,O){if(!I||!N)throw new Error("Cannot add null spring to force simulator");typeof L!="number"&&(L=-1);var V=new e(I,N,L,O>=0?O:-1);return y.push(V),V},getTotalMovement:function(){return S},removeSpring:function(I){if(I){var N=y.indexOf(I);if(N>-1)return y.splice(N,1),!0}},getBestNewBodyPosition:function(I){return m.getBestNewPosition(I)},getBBox:M,getBoundingBox:M,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(I){return I!==void 0?(n.gravity=I,v.options({gravity:I}),this):n.gravity},theta:function(I){return I!==void 0?(n.theta=I,v.options({theta:I}),this):n.theta},random:p};return Tle(n,T),i(T),T;function M(){return m.update(),m.box}function R(I,N){if(E.has(I))throw new Error("Force "+I+" is already added");E.set(I,N),w.push(N)}function P(I){var N=w.indexOf(E.get(I));N<0||(w.splice(N,1),E.delete(I))}function D(){return E}function F(){if(g.length!==0){v.insertBodies(g);for(var I=g.length;I--;){var N=g[I];N.isPinned||(N.reset(),v.updateBodyForce(N),x.update(N))}}}function A(){for(var I=y.length;I--;)_.update(y[I])}}function Tle(n,e){for(var r in n)Mle(n,e,r)}function Mle(n,e,r){if(n.hasOwnProperty(r)&&typeof e[r]!="function"){var i=Number.isFinite(n[r]);i?e[r]=function(o){if(o!==void 0){if(!Number.isFinite(o))throw new Error("Value of "+r+" should be a valid number.");return n[r]=o,e}return n[r]}:e[r]=function(o){return o!==void 0?(n[r]=o,e):n[r]}}}RM.exports=Ale;RM.exports.simulator=Nz;var Rle=MM;function Ale(n,e){if(!n)throw new Error("Graph structure cannot be undefined");var r=e&&e.createSimulator||Nz,i=r(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var o=n.version>19?F:D;e&&typeof e.nodeMass=="function"&&(o=e.nodeMass);var s=new Map,a={},l=0,c=i.settings.springTransform||Nle;x(),v();var u=!1,d={step:function(){if(l===0)return f(!0),!0;var A=i.step();d.lastMove=A,d.fire("step");var I=A/l,N=I<=.01;return f(N),N},getNodePosition:function(A){return P(A).pos},setNodePosition:function(A){var I=P(A);I.setPosition.apply(I,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(A){var I=a[A];if(I)return{from:I.from.pos,to:I.to.pos}},getGraphRect:function(){return i.getBBox()},forEachBody:h,pinNode:function(A,I){var N=P(A.id);N.isPinned=!!I},isNodePinned:function(A){return P(A.id).isPinned},dispose:function(){n.off("changed",_),d.fire("disposed")},getBody:y,getSpring:g,getForceVectorLength:p,simulator:i,graph:n,lastMove:0};return Rle(d),d;function f(A){u!==A&&(u=A,m(A))}function h(A){s.forEach(A)}function p(){var A=0,I=0;return h(function(N){A+=Math.abs(N.force.x),I+=Math.abs(N.force.y)}),Math.sqrt(A*A+I*I)}function g(A,I){var N;if(I===void 0)typeof A!="object"?N=A:N=A.id;else{var L=n.hasLink(A,I);if(!L)return;N=L.id}return a[N]}function y(A){return s.get(A)}function v(){n.on("changed",_)}function m(A){d.fire("stable",A)}function _(A){for(var I=0;I<A.length;++I){var N=A[I];N.changeType==="add"?(N.node&&S(N.node.id),N.link&&E(N.link)):N.changeType==="remove"&&(N.node&&w(N.node),N.link&&C(N.link))}l=n.getNodesCount()}function x(){l=0,n.forEachNode(function(A){S(A.id),l+=1}),n.forEachLink(E)}function S(A){var I=s.get(A);if(!I){var N=n.getNode(A);if(!N)throw new Error("initBody() was called with unknown node id");var L=N.position;if(!L){var O=T(N);L=i.getBestNewBodyPosition(O)}I=i.addBodyAt(L),I.id=A,s.set(A,I),M(A),R(N)&&(I.isPinned=!0)}}function w(A){var I=A.id,N=s.get(I);N&&(s.delete(I),i.removeBody(N))}function E(A){M(A.fromId),M(A.toId);var I=s.get(A.fromId),N=s.get(A.toId),L=i.addSpring(I,N,A.length);c(A,L),a[A.id]=L}function C(A){var I=a[A.id];if(I){var N=n.getNode(A.fromId),L=n.getNode(A.toId);N&&M(N.id),L&&M(L.id),delete a[A.id],i.removeSpring(I)}}function T(A){var I=[];if(!A.links)return I;for(var N=Math.min(A.links.length,2),L=0;L<N;++L){var O=A.links[L],V=O.fromId!==A.id?s.get(O.fromId):s.get(O.toId);V&&V.pos&&I.push(V)}return I}function M(A){var I=s.get(A);if(I.mass=o(A),Number.isNaN(I.mass))throw new Error("Node mass should be a number")}function R(A){return A&&(A.isPinned||A.data&&A.data.isPinned)}function P(A){var I=s.get(A);return I||(S(A),I=s.get(A)),I}function D(A){var I=n.getLinks(A);return I?1+I.length/3:1}function F(A){var I=n.getLinks(A);return I?1+I.size/3:1}}function Nle(){}var Ple=RM.exports;const Ole=vu(Ple);function _y(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Ile=typeof global=="object"&&global&&global.Object===Object&&global,Dle=typeof self=="object"&&self&&self.Object===Object&&self,Pz=Ile||Dle||Function("return this")(),_S=function(){return Pz.Date.now()},Lle=/\s/;function Fle(n){for(var e=n.length;e--&&Lle.test(n.charAt(e)););return e}var Ule=/^\s+/;function Ble(n){return n&&n.slice(0,Fle(n)+1).replace(Ule,"")}var xy=Pz.Symbol,Oz=Object.prototype,$le=Oz.hasOwnProperty,zle=Oz.toString,Th=xy?xy.toStringTag:void 0;function kle(n){var e=$le.call(n,Th),r=n[Th];try{n[Th]=void 0;var i=!0}catch{}var o=zle.call(n);return i&&(e?n[Th]=r:delete n[Th]),o}var Vle=Object.prototype,Gle=Vle.toString;function Hle(n){return Gle.call(n)}var jle="[object Null]",Wle="[object Undefined]",mO=xy?xy.toStringTag:void 0;function qle(n){return n==null?n===void 0?Wle:jle:mO&&mO in Object(n)?kle(n):Hle(n)}function Xle(n){return n!=null&&typeof n=="object"}var Kle="[object Symbol]";function Yle(n){return typeof n=="symbol"||Xle(n)&&qle(n)==Kle}var gO=NaN,Qle=/^[-+]0x[0-9a-f]+$/i,Zle=/^0b[01]+$/i,Jle=/^0o[0-7]+$/i,ece=parseInt;function vO(n){if(typeof n=="number")return n;if(Yle(n))return gO;if(_y(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=_y(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Ble(n);var r=Zle.test(n);return r||Jle.test(n)?ece(n.slice(2),r?2:8):Qle.test(n)?gO:+n}var tce="Expected a function",nce=Math.max,rce=Math.min;function Iz(n,e,r){var i,o,s,a,l,c,u=0,d=!1,f=!1,h=!0;if(typeof n!="function")throw new TypeError(tce);e=vO(e)||0,_y(r)&&(d=!!r.leading,f="maxWait"in r,s=f?nce(vO(r.maxWait)||0,e):s,h="trailing"in r?!!r.trailing:h);function p(E){var C=i,T=o;return i=o=void 0,u=E,a=n.apply(T,C),a}function g(E){return u=E,l=setTimeout(m,e),d?p(E):a}function y(E){var C=E-c,T=E-u,M=e-C;return f?rce(M,s-T):M}function v(E){var C=E-c,T=E-u;return c===void 0||C>=e||C<0||f&&T>=s}function m(){var E=_S();if(v(E))return _(E);l=setTimeout(m,y(E))}function _(E){return l=void 0,h&&i?p(E):(i=o=void 0,a)}function x(){l!==void 0&&clearTimeout(l),u=0,i=c=o=l=void 0}function S(){return l===void 0?a:_(_S())}function w(){var E=_S(),C=v(E);if(i=arguments,o=this,c=E,C){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(m,e),p(c)}return l===void 0&&(l=setTimeout(m,e)),a}return w.cancel=x,w.flush=S,w}function yO(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function ice(n){if(Array.isArray(n))return n}function oce(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sce(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function ace(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function lce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cce(n,e){return ice(n)||ace(n,e)||uce(n,e)||lce()}function uce(n,e){if(n){if(typeof n=="string")return yO(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yO(n,e):void 0}}var dce=sce(function n(e,r){var i=r.default,o=i===void 0?null:i,s=r.triggerUpdate,a=s===void 0?!0:s,l=r.onChange,c=l===void 0?function(u,d){}:l;oce(this,n),this.name=e,this.defaultVal=o,this.triggerUpdate=a,this.onChange=c});function tg(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,o=i===void 0?{}:i,s=n.methods,a=s===void 0?{}:s,l=n.aliases,c=l===void 0?{}:l,u=n.init,d=u===void 0?function(){}:u,f=n.update,h=f===void 0?function(){}:f,p=Object.keys(o).map(function(g){return new dce(g,o[g])});return function g(){for(var y=arguments.length,v=new Array(y),m=0;m<y;m++)v[m]=arguments[m];var _=!!(this instanceof g&&this.constructor),x=_?v.shift():void 0,S=v[0],w=S===void 0?{}:S,E=Object.assign({},r instanceof Function?r(w):r,{initialised:!1}),C={};function T(P){return M(P,w),R(),T}var M=function(D,F){d.call(T,D,E,F),E.initialised=!0},R=Iz(function(){E.initialised&&(h.call(T,E,C),C={})},1);return p.forEach(function(P){T[P.name]=D(P);function D(F){var A=F.name,I=F.triggerUpdate,N=I===void 0?!1:I,L=F.onChange,O=L===void 0?function(z,W){}:L,V=F.defaultVal,B=V===void 0?null:V;return function(z){var W=E[A];if(!arguments.length)return W;var ie=z===void 0?B:z;return E[A]=ie,O.call(T,ie,E,W),!C.hasOwnProperty(A)&&(C[A]=W),N&&R(),T}}}),Object.keys(a).forEach(function(P){T[P]=function(){for(var D,F=arguments.length,A=new Array(F),I=0;I<F;I++)A[I]=arguments[I];return(D=a[P]).call.apply(D,[T,E].concat(A))}}),Object.entries(c).forEach(function(P){var D=cce(P,2),F=D[0],A=D[1];return T[F]=T[A]}),T.resetProps=function(){return p.forEach(function(P){T[P.name](P.defaultVal)}),T},T.resetProps(),E._rerender=R,_&&x&&T(x),T}}var At=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};class _O extends Map{constructor(e,r=pce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,o]of e)this.set(i,o)}get(e){return super.get(xO(this,e))}has(e){return super.has(xO(this,e))}set(e,r){return super.set(fce(this,e),r)}delete(e){return super.delete(hce(this,e))}}function xO({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function fce({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function hce({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function pce(n){return n!==null&&typeof n=="object"?n.valueOf():n}function bE(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of n)(o=e(o,++i,n))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function SE(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let o of n)(o=e(o,++i,n))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}function wE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function mce(n){if(Array.isArray(n))return n}function gce(n){if(Array.isArray(n))return wE(n)}function vce(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function yce(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function _ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bce(n,e){if(n==null)return{};var r,i,o=Sce(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function Sce(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function wce(n,e){return mce(n)||yce(n,e)||Dz(n,e)||_ce()}function Ece(n){return gce(n)||vce(n)||Dz(n)||xce()}function Cce(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Tce(n){var e=Cce(n,"string");return typeof e=="symbol"?e:e+""}function Dz(n,e){if(n){if(typeof n=="string")return wE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wE(n,e):void 0}}var EE=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(l){return{keyAccessor:l,isProp:!(l instanceof Function)}}),s=n.reduce(function(l,c){var u=l,d=c;return o.forEach(function(f,h){var p=f.keyAccessor,g=f.isProp,y;if(g){var v=d,m=v[p],_=bce(v,[p].map(Tce));y=m,d=_}else y=p(d,h);h+1<o.length?(u.hasOwnProperty(y)||(u[y]={}),u=u[y]):r?(u.hasOwnProperty(y)||(u[y]=[]),u[y].push(d)):u[y]=d}),l},{});r instanceof Function&&function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===o.length?Object.keys(c).forEach(function(d){return c[d]=r(c[d])}):Object.values(c).forEach(function(d){return l(d,u+1)})}(s);var a=s;return i&&(a=[],function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===o.length?a.push({keys:u,vals:c}):Object.entries(c).forEach(function(d){var f=wce(d,2),h=f[0],p=f[1];return l(p,[].concat(Ece(u),[h]))})}(s),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a};function Mce(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function bO(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function Rce(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bO(Object(r),!0).forEach(function(i){Lz(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):bO(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Lz(n,e,r){return e=Uce(e),e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Ace(n,e){if(n==null)return{};var r={},i=Object.keys(n),o,s;for(s=0;s<i.length;s++)o=i[s],!(e.indexOf(o)>=0)&&(r[o]=n[o]);return r}function Nce(n,e){if(n==null)return{};var r=Ace(n,e),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(o=0;o<s.length;o++)i=s[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(r[i]=n[i])}return r}function Fz(n,e){return Oce(n)||Mce(n,e)||Uz(n,e)||Lce()}function by(n){return Pce(n)||Ice(n)||Uz(n)||Dce()}function Pce(n){if(Array.isArray(n))return CE(n)}function Oce(n){if(Array.isArray(n))return n}function Ice(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Uz(n,e){if(n){if(typeof n=="string")return CE(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CE(n,e)}}function CE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function Dce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fce(n,e){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Uce(n){var e=Fce(n,"string");return typeof e=="symbol"?e:String(e)}var Bce=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function $ce(n,e,r){var i={enter:[],update:[],exit:[]};if(r){var a=EE(n,r,!1),l=EE(e,r,!1),c=Object.assign({},a,l);Object.entries(c).forEach(function(u){var d=Fz(u,2),f=d[0],h=d[1],p=a.hasOwnProperty(f)?l.hasOwnProperty(f)?"update":"exit":"enter";i[p].push(p==="update"?[a[f],l[f]]:h)})}else{var o=new Set(n),s=new Set(e);new Set([].concat(by(o),by(s))).forEach(function(u){var d=o.has(u)?s.has(u)?"update":"exit":"enter";i[d].push(d==="update"?[u,u]:u)})}return i}function zce(n,e,r){var i=r.objBindAttr,o=i===void 0?"__obj":i,s=r.dataBindAttr,a=s===void 0?"__data":s,l=r.idAccessor,c=r.purge,u=c===void 0?!1:c,d=function(v){return v.hasOwnProperty(a)},f=e.filter(function(y){return!d(y)}),h=e.filter(d).map(function(y){return y[a]}),p=n,g=u?{enter:p,exit:h,update:[]}:$ce(h,p,l);return g.update=g.update.map(function(y){var v=Fz(y,2),m=v[0],_=v[1];return m!==_&&(_[o]=m[o],_[o][a]=_),_}),g.exit=g.exit.concat(f.map(function(y){return Lz({},o,y)})),g}function kce(n,e,r,i,o){var s=o.createObj,a=s===void 0?function(T){return{}}:s,l=o.updateObj,c=l===void 0?function(T,M){}:l,u=o.exitObj,d=u===void 0?function(T){}:u,f=o.objBindAttr,h=f===void 0?"__obj":f,p=o.dataBindAttr,g=p===void 0?"__data":p,y=Nce(o,Bce),v=zce(n,e,Rce({objBindAttr:h,dataBindAttr:g},y)),m=v.enter,_=v.update,x=v.exit;x.forEach(function(T){var M=T[h];delete T[h],d(M),i(M)});var S=E(m),w=[].concat(by(m),by(_));C(w),S.forEach(r);function E(T){var M=[];return T.forEach(function(R){var P=a(R);P&&(P[g]=R,R[h]=P,M.push(P))}),M}function C(T){T.forEach(function(M){var R=M[h];R&&(R[g]=M,c(R,M))})}}function Vce(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const SO=Symbol("implicit");function DM(){var n=new _O,e=[],r=[],i=SO;function o(s){let a=n.get(s);if(a===void 0){if(i!==SO)return i;n.set(s,a=e.push(s)-1)}return r[a%r.length]}return o.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new _O;for(const a of s)n.has(a)||n.set(a,e.push(a)-1);return o},o.range=function(s){return arguments.length?(r=Array.from(s),o):r.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.copy=function(){return DM(e,r).unknown(i)},Vce.apply(o,arguments),o}function LM(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function Bz(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function ng(){}var _m=.7,Sy=1/_m,$d="\\s*([+-]?\\d+)\\s*",xm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",js="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gce=/^#([0-9a-f]{3,8})$/,Hce=new RegExp(`^rgb\\(${$d},${$d},${$d}\\)$`),jce=new RegExp(`^rgb\\(${js},${js},${js}\\)$`),Wce=new RegExp(`^rgba\\(${$d},${$d},${$d},${xm}\\)$`),qce=new RegExp(`^rgba\\(${js},${js},${js},${xm}\\)$`),Xce=new RegExp(`^hsl\\(${xm},${js},${js}\\)$`),Kce=new RegExp(`^hsla\\(${xm},${js},${js},${xm}\\)$`),wO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};LM(ng,bm,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:EO,formatHex:EO,formatHex8:Yce,formatHsl:Qce,formatRgb:CO,toString:CO});function EO(){return this.rgb().formatHex()}function Yce(){return this.rgb().formatHex8()}function Qce(){return $z(this).formatHsl()}function CO(){return this.rgb().formatRgb()}function bm(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=Gce.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?TO(e):r===3?new Gi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?mv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?mv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Hce.exec(n))?new Gi(e[1],e[2],e[3],1):(e=jce.exec(n))?new Gi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Wce.exec(n))?mv(e[1],e[2],e[3],e[4]):(e=qce.exec(n))?mv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Xce.exec(n))?AO(e[1],e[2]/100,e[3]/100,1):(e=Kce.exec(n))?AO(e[1],e[2]/100,e[3]/100,e[4]):wO.hasOwnProperty(n)?TO(wO[n]):n==="transparent"?new Gi(NaN,NaN,NaN,0):null}function TO(n){return new Gi(n>>16&255,n>>8&255,n&255,1)}function mv(n,e,r,i){return i<=0&&(n=e=r=NaN),new Gi(n,e,r,i)}function Zce(n){return n instanceof ng||(n=bm(n)),n?(n=n.rgb(),new Gi(n.r,n.g,n.b,n.opacity)):new Gi}function TE(n,e,r,i){return arguments.length===1?Zce(n):new Gi(n,e,r,i??1)}function Gi(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}LM(Gi,TE,Bz(ng,{brighter(n){return n=n==null?Sy:Math.pow(Sy,n),new Gi(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?_m:Math.pow(_m,n),new Gi(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Gi(Yc(this.r),Yc(this.g),Yc(this.b),wy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MO,formatHex:MO,formatHex8:Jce,formatRgb:RO,toString:RO}));function MO(){return`#${Vc(this.r)}${Vc(this.g)}${Vc(this.b)}`}function Jce(){return`#${Vc(this.r)}${Vc(this.g)}${Vc(this.b)}${Vc((isNaN(this.opacity)?1:this.opacity)*255)}`}function RO(){const n=wy(this.opacity);return`${n===1?"rgb(":"rgba("}${Yc(this.r)}, ${Yc(this.g)}, ${Yc(this.b)}${n===1?")":`, ${n})`}`}function wy(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Yc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Vc(n){return n=Yc(n),(n<16?"0":"")+n.toString(16)}function AO(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new ds(n,e,r,i)}function $z(n){if(n instanceof ds)return new ds(n.h,n.s,n.l,n.opacity);if(n instanceof ng||(n=bm(n)),!n)return new ds;if(n instanceof ds)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,o=Math.min(e,r,i),s=Math.max(e,r,i),a=NaN,l=s-o,c=(s+o)/2;return l?(e===s?a=(r-i)/l+(r<i)*6:r===s?a=(i-e)/l+2:a=(e-r)/l+4,l/=c<.5?s+o:2-s-o,a*=60):l=c>0&&c<1?0:a,new ds(a,l,c,n.opacity)}function eue(n,e,r,i){return arguments.length===1?$z(n):new ds(n,e,r,i??1)}function ds(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}LM(ds,eue,Bz(ng,{brighter(n){return n=n==null?Sy:Math.pow(Sy,n),new ds(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?_m:Math.pow(_m,n),new ds(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,o=2*r-i;return new Gi(xS(n>=240?n-240:n+120,o,i),xS(n,o,i),xS(n<120?n+240:n-120,o,i),this.opacity)},clamp(){return new ds(NO(this.h),gv(this.s),gv(this.l),wy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=wy(this.opacity);return`${n===1?"hsl(":"hsla("}${NO(this.h)}, ${gv(this.s)*100}%, ${gv(this.l)*100}%${n===1?")":`, ${n})`}`}}));function NO(n){return n=(n||0)%360,n<0?n+360:n}function gv(n){return Math.max(0,Math.min(1,n||0))}function xS(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}const zz=n=>()=>n;function tue(n,e){return function(r){return n+r*e}}function nue(n,e,r){return n=Math.pow(n,r),e=Math.pow(e,r)-n,r=1/r,function(i){return Math.pow(n+i*e,r)}}function rue(n){return(n=+n)==1?kz:function(e,r){return r-e?nue(e,r,n):zz(isNaN(e)?r:e)}}function kz(n,e){var r=e-n;return r?tue(n,r):zz(isNaN(n)?e:n)}const PO=function n(e){var r=rue(e);function i(o,s){var a=r((o=TE(o)).r,(s=TE(s)).r),l=r(o.g,s.g),c=r(o.b,s.b),u=kz(o.opacity,s.opacity);return function(d){return o.r=a(d),o.g=l(d),o.b=c(d),o.opacity=u(d),o+""}}return i.gamma=n,i}(1);function bl(n,e){return n=+n,e=+e,function(r){return n*(1-r)+e*r}}var ME=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bS=new RegExp(ME.source,"g");function iue(n){return function(){return n}}function oue(n){return function(e){return n(e)+""}}function sue(n,e){var r=ME.lastIndex=bS.lastIndex=0,i,o,s,a=-1,l=[],c=[];for(n=n+"",e=e+"";(i=ME.exec(n))&&(o=bS.exec(e));)(s=o.index)>r&&(s=e.slice(r,s),l[a]?l[a]+=s:l[++a]=s),(i=i[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,c.push({i:a,x:bl(i,o)})),r=bS.lastIndex;return r<e.length&&(s=e.slice(r),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?oue(c[0].x):iue(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}var OO=180/Math.PI,RE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vz(n,e,r,i,o,s){var a,l,c;return(a=Math.sqrt(n*n+e*e))&&(n/=a,e/=a),(c=n*r+e*i)&&(r-=n*c,i-=e*c),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,c/=l),n*i<e*r&&(n=-n,e=-e,c=-c,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(e,n)*OO,skewX:Math.atan(c)*OO,scaleX:a,scaleY:l}}var vv;function aue(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?RE:Vz(e.a,e.b,e.c,e.d,e.e,e.f)}function lue(n){return n==null||(vv||(vv=document.createElementNS("http://www.w3.org/2000/svg","g")),vv.setAttribute("transform",n),!(n=vv.transform.baseVal.consolidate()))?RE:(n=n.matrix,Vz(n.a,n.b,n.c,n.d,n.e,n.f))}function Gz(n,e,r,i){function o(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var y=p.push("translate(",null,e,null,r);g.push({i:y-4,x:bl(u,f)},{i:y-2,x:bl(d,h)})}else(f||h)&&p.push("translate("+f+e+h+r)}function a(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(o(f)+"rotate(",null,i)-2,x:bl(u,d)})):d&&f.push(o(f)+"rotate("+d+i)}function l(u,d,f,h){u!==d?h.push({i:f.push(o(f)+"skewX(",null,i)-2,x:bl(u,d)}):d&&f.push(o(f)+"skewX("+d+i)}function c(u,d,f,h,p,g){if(u!==f||d!==h){var y=p.push(o(p)+"scale(",null,",",null,")");g.push({i:y-4,x:bl(u,f)},{i:y-2,x:bl(d,h)})}else(f!==1||h!==1)&&p.push(o(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=n(u),d=n(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),a(u.rotate,d.rotate,f,h),l(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,y=h.length,v;++g<y;)f[(v=h[g]).i]=v.x(p);return f.join("")}}}var cue=Gz(aue,"px, ","px)","deg)"),uue=Gz(lue,", ",")",")"),due=1e-12;function IO(n){return((n=Math.exp(n))+1/n)/2}function fue(n){return((n=Math.exp(n))-1/n)/2}function hue(n){return((n=Math.exp(2*n))-1)/(n+1)}const pue=function n(e,r,i){function o(s,a){var l=s[0],c=s[1],u=s[2],d=a[0],f=a[1],h=a[2],p=d-l,g=f-c,y=p*p+g*g,v,m;if(y<due)m=Math.log(h/u)/e,v=function(C){return[l+C*p,c+C*g,u*Math.exp(e*C*m)]};else{var _=Math.sqrt(y),x=(h*h-u*u+i*y)/(2*u*r*_),S=(h*h-u*u-i*y)/(2*h*r*_),w=Math.log(Math.sqrt(x*x+1)-x),E=Math.log(Math.sqrt(S*S+1)-S);m=(E-w)/e,v=function(C){var T=C*m,M=IO(w),R=u/(r*_)*(M*hue(e*T+w)-fue(w));return[l+R*p,c+R*g,u*M/IO(e*T+w)]}}return v.duration=m*1e3*e/Math.SQRT2,v}return o.rho=function(s){var a=Math.max(.001,+s),l=a*a,c=l*l;return n(a,l,c)},o}(Math.SQRT2,2,4);function mue(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const Hz=mue("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Ey(n){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(n)}var gue=/^\s+/,vue=/\s+$/;function Pt(n,e){if(n=n||"",e=e||{},n instanceof Pt)return n;if(!(this instanceof Pt))return new Pt(n,e);var r=yue(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Pt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,o,s,a,l;return r=e.r/255,i=e.g/255,o=e.b/255,r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),o<=.03928?l=o/12.92:l=Math.pow((o+.055)/1.055,2.4),.2126*s+.7152*a+.0722*l},setAlpha:function(e){return this._a=jz(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=LO(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=LO(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+o+"%)":"hsva("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=DO(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=DO(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+o+"%)":"hsla("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return FO(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Sue(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Zn(this._r,255)*100)+"%",g:Math.round(Zn(this._g,255)*100)+"%",b:Math.round(Zn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Zn(this._r,255)*100)+"%, "+Math.round(Zn(this._g,255)*100)+"%, "+Math.round(Zn(this._b,255)*100)+"%)":"rgba("+Math.round(Zn(this._r,255)*100)+"%, "+Math.round(Zn(this._g,255)*100)+"%, "+Math.round(Zn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Due[FO(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+UO(this._r,this._g,this._b,this._a),i=r,o=this._gradientType?"GradientType = 1, ":"";if(e){var s=Pt(e);i="#"+UO(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,o=this._a<1&&this._a>=0,s=!r&&o&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return Pt(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(Tue,arguments)},brighten:function(){return this._applyModification(Mue,arguments)},darken:function(){return this._applyModification(Rue,arguments)},desaturate:function(){return this._applyModification(wue,arguments)},saturate:function(){return this._applyModification(Eue,arguments)},greyscale:function(){return this._applyModification(Cue,arguments)},spin:function(){return this._applyModification(Aue,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(Oue,arguments)},complement:function(){return this._applyCombination(Nue,arguments)},monochromatic:function(){return this._applyCombination(Iue,arguments)},splitcomplement:function(){return this._applyCombination(Pue,arguments)},triad:function(){return this._applyCombination(BO,[3])},tetrad:function(){return this._applyCombination(BO,[4])}};Pt.fromRatio=function(n,e){if(Ey(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=Jh(n[i]));n=r}return Pt(n,e)};function yue(n){var e={r:0,g:0,b:0},r=1,i=null,o=null,s=null,a=!1,l=!1;return typeof n=="string"&&(n=Bue(n)),Ey(n)=="object"&&(la(n.r)&&la(n.g)&&la(n.b)?(e=_ue(n.r,n.g,n.b),a=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):la(n.h)&&la(n.s)&&la(n.v)?(i=Jh(n.s),o=Jh(n.v),e=bue(n.h,i,o),a=!0,l="hsv"):la(n.h)&&la(n.s)&&la(n.l)&&(i=Jh(n.s),s=Jh(n.l),e=xue(n.h,i,s),a=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=jz(r),{ok:a,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function _ue(n,e,r){return{r:Zn(n,255)*255,g:Zn(e,255)*255,b:Zn(r,255)*255}}function DO(n,e,r){n=Zn(n,255),e=Zn(e,255),r=Zn(r,255);var i=Math.max(n,e,r),o=Math.min(n,e,r),s,a,l=(i+o)/2;if(i==o)s=a=0;else{var c=i-o;switch(a=l>.5?c/(2-i-o):c/(i+o),i){case n:s=(e-r)/c+(e<r?6:0);break;case e:s=(r-n)/c+2;break;case r:s=(n-e)/c+4;break}s/=6}return{h:s,s:a,l}}function xue(n,e,r){var i,o,s;n=Zn(n,360),e=Zn(e,100),r=Zn(r,100);function a(u,d,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?u+(d-u)*6*f:f<1/2?d:f<2/3?u+(d-u)*(2/3-f)*6:u}if(e===0)i=o=s=r;else{var l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=a(c,l,n+1/3),o=a(c,l,n),s=a(c,l,n-1/3)}return{r:i*255,g:o*255,b:s*255}}function LO(n,e,r){n=Zn(n,255),e=Zn(e,255),r=Zn(r,255);var i=Math.max(n,e,r),o=Math.min(n,e,r),s,a,l=i,c=i-o;if(a=i===0?0:c/i,i==o)s=0;else{switch(i){case n:s=(e-r)/c+(e<r?6:0);break;case e:s=(r-n)/c+2;break;case r:s=(n-e)/c+4;break}s/=6}return{h:s,s:a,v:l}}function bue(n,e,r){n=Zn(n,360)*6,e=Zn(e,100),r=Zn(r,100);var i=Math.floor(n),o=n-i,s=r*(1-e),a=r*(1-o*e),l=r*(1-(1-o)*e),c=i%6,u=[r,a,s,s,l,r][c],d=[l,r,r,a,s,s][c],f=[s,s,l,r,r,a][c];return{r:u*255,g:d*255,b:f*255}}function FO(n,e,r,i){var o=[ms(Math.round(n).toString(16)),ms(Math.round(e).toString(16)),ms(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function Sue(n,e,r,i,o){var s=[ms(Math.round(n).toString(16)),ms(Math.round(e).toString(16)),ms(Math.round(r).toString(16)),ms(Wz(i))];return o&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function UO(n,e,r,i){var o=[ms(Wz(i)),ms(Math.round(n).toString(16)),ms(Math.round(e).toString(16)),ms(Math.round(r).toString(16))];return o.join("")}Pt.equals=function(n,e){return!n||!e?!1:Pt(n).toRgbString()==Pt(e).toRgbString()};Pt.random=function(){return Pt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function wue(n,e){e=e===0?0:e||10;var r=Pt(n).toHsl();return r.s-=e/100,r.s=tx(r.s),Pt(r)}function Eue(n,e){e=e===0?0:e||10;var r=Pt(n).toHsl();return r.s+=e/100,r.s=tx(r.s),Pt(r)}function Cue(n){return Pt(n).desaturate(100)}function Tue(n,e){e=e===0?0:e||10;var r=Pt(n).toHsl();return r.l+=e/100,r.l=tx(r.l),Pt(r)}function Mue(n,e){e=e===0?0:e||10;var r=Pt(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),Pt(r)}function Rue(n,e){e=e===0?0:e||10;var r=Pt(n).toHsl();return r.l-=e/100,r.l=tx(r.l),Pt(r)}function Aue(n,e){var r=Pt(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,Pt(r)}function Nue(n){var e=Pt(n).toHsl();return e.h=(e.h+180)%360,Pt(e)}function BO(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Pt(n).toHsl(),i=[Pt(n)],o=360/e,s=1;s<e;s++)i.push(Pt({h:(r.h+s*o)%360,s:r.s,l:r.l}));return i}function Pue(n){var e=Pt(n).toHsl(),r=e.h;return[Pt(n),Pt({h:(r+72)%360,s:e.s,l:e.l}),Pt({h:(r+216)%360,s:e.s,l:e.l})]}function Oue(n,e,r){e=e||6,r=r||30;var i=Pt(n).toHsl(),o=360/r,s=[Pt(n)];for(i.h=(i.h-(o*e>>1)+720)%360;--e;)i.h=(i.h+o)%360,s.push(Pt(i));return s}function Iue(n,e){e=e||6;for(var r=Pt(n).toHsv(),i=r.h,o=r.s,s=r.v,a=[],l=1/e;e--;)a.push(Pt({h:i,s:o,v:s})),s=(s+l)%1;return a}Pt.mix=function(n,e,r){r=r===0?0:r||50;var i=Pt(n).toRgb(),o=Pt(e).toRgb(),s=r/100,a={r:(o.r-i.r)*s+i.r,g:(o.g-i.g)*s+i.g,b:(o.b-i.b)*s+i.b,a:(o.a-i.a)*s+i.a};return Pt(a)};Pt.readability=function(n,e){var r=Pt(n),i=Pt(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};Pt.isReadable=function(n,e,r){var i=Pt.readability(n,e),o,s;switch(s=!1,o=$ue(r),o.level+o.size){case"AAsmall":case"AAAlarge":s=i>=4.5;break;case"AAlarge":s=i>=3;break;case"AAAsmall":s=i>=7;break}return s};Pt.mostReadable=function(n,e,r){var i=null,o=0,s,a,l,c;r=r||{},a=r.includeFallbackColors,l=r.level,c=r.size;for(var u=0;u<e.length;u++)s=Pt.readability(n,e[u]),s>o&&(o=s,i=Pt(e[u]));return Pt.isReadable(n,i,{level:l,size:c})||!a?i:(r.includeFallbackColors=!1,Pt.mostReadable(n,["#fff","#000"],r))};var AE=Pt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Due=Pt.hexNames=Lue(AE);function Lue(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function jz(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Zn(n,e){Fue(n)&&(n="100%");var r=Uue(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function tx(n){return Math.min(1,Math.max(0,n))}function co(n){return parseInt(n,16)}function Fue(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function Uue(n){return typeof n=="string"&&n.indexOf("%")!=-1}function ms(n){return n.length==1?"0"+n:""+n}function Jh(n){return n<=1&&(n=n*100+"%"),n}function Wz(n){return Math.round(parseFloat(n)*255).toString(16)}function $O(n){return co(n)/255}var es=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function la(n){return!!es.CSS_UNIT.exec(n)}function Bue(n){n=n.replace(gue,"").replace(vue,"").toLowerCase();var e=!1;if(AE[n])n=AE[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=es.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=es.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=es.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=es.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=es.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=es.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=es.hex8.exec(n))?{r:co(r[1]),g:co(r[2]),b:co(r[3]),a:$O(r[4]),format:e?"name":"hex8"}:(r=es.hex6.exec(n))?{r:co(r[1]),g:co(r[2]),b:co(r[3]),format:e?"name":"hex"}:(r=es.hex4.exec(n))?{r:co(r[1]+""+r[1]),g:co(r[2]+""+r[2]),b:co(r[3]+""+r[3]),a:$O(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=es.hex3.exec(n))?{r:co(r[1]+""+r[1]),g:co(r[2]+""+r[2]),b:co(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function $ue(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function NE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function zue(n){if(Array.isArray(n))return n}function kue(n){if(Array.isArray(n))return NE(n)}function Vue(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Gue(n,e,r){return e=Cy(e),Jue(n,UM()?Reflect.construct(e,r||[],Cy(n).constructor):e.apply(n,r))}function Hue(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function qz(n,e,r){if(UM())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(n.bind.apply(n,i));return o}function jue(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function FM(n,e,r){return(e=tde(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function Cy(n){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cy(n)}function Wue(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&PE(n,e)}function UM(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UM=function(){return!!n})()}function que(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Xue(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function Kue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zO(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function Xz(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zO(Object(r),!0).forEach(function(i){FM(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Que(n,e){if(n==null)return{};var r,i,o=Zue(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],e.includes(r)||{}.propertyIsEnumerable.call(n,r)&&(o[r]=n[r])}return o}function Zue(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.includes(i))continue;r[i]=n[i]}return r}function Jue(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vue(n)}function PE(n,e){return PE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PE(n,e)}function kO(n,e){return zue(n)||Xue(n,e)||Kz(n,e)||Kue()}function ss(n){return kue(n)||que(n)||Kz(n)||Yue()}function ede(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function tde(n){var e=ede(n,"string");return typeof e=="symbol"?e:e+""}function OE(n){"@babel/helpers - typeof";return OE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OE(n)}function Kz(n,e){if(n){if(typeof n=="string")return NE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?NE(n,e):void 0}}var Yz=function(e){e instanceof Array?e.forEach(Yz):(e.map&&e.map.dispose(),e.dispose())},Qz=function(e){e.geometry&&e.geometry.dispose(),e.material&&Yz(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(Qz)},IE=function(e){for(;e.children.length;){var r=e.children[0];e.remove(r),Qz(r)}},nde=["objFilter"];function Mh(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.objFilter,o=i===void 0?function(){return!0}:i,s=Que(r,nde);return kce(n,e.children.filter(o),function(a){return e.add(a)},function(a){e.remove(a),IE(a)},Xz({objBindAttr:"__threeObj"},s))}var Rh=function(e){return isNaN(e)?parseInt(Pt(e).toHex(),16):e},SS=function(e){return isNaN(e)?Pt(e).getAlpha():1},rde=DM(Hz);function VO(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=rde(e(i))})}function ide(n,e){var r=n.nodes,i=n.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.nodeFilter,a=s===void 0?function(){return!0}:s,l=o.onLoopError,c=l===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:l,u={};r.forEach(function(p){return u[e(p)]={data:p,out:[],depth:-1,skip:!a(p)}}),i.forEach(function(p){var g=p.source,y=p.target,v=S(g),m=S(y);if(!u.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!u.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var _=u[v],x=u[m];_.out.push(x);function S(w){return OE(w)==="object"?e(w):w}});var d=[];h(Object.values(u));var f=Object.assign.apply(Object,[{}].concat(ss(Object.entries(u).filter(function(p){var g=kO(p,2),y=g[1];return!y.skip}).map(function(p){var g=kO(p,2),y=g[0],v=g[1];return FM({},y,v.depth)}))));return f;function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var S=p[m];if(g.indexOf(S)!==-1){var w=[].concat(ss(g.slice(g.indexOf(S))),[S]).map(function(E){return e(E.data)});return d.some(function(E){return E.length===w.length&&E.every(function(C,T){return C===w[T]})})||(d.push(w),c(w)),1}y>S.depth&&(S.depth=y,h(S.out,[].concat(ss(g),[S]),y+(S.skip?0:1)))},m=0,_=p.length;m<_;m++)v()}}var Ft=window.THREE?window.THREE:{Group:Sd,Mesh:Br,MeshLambertMaterial:yM,Color:Tt,BufferGeometry:Di,BufferAttribute:ri,Matrix4:fn,Vector3:K,SphereGeometry:Zf,CylinderGeometry:Y_,TubeGeometry:vM,ConeGeometry:gM,Line:lte,LineBasicMaterial:K_,QuadraticBezierCurve3:mM,CubicBezierCurve3:$$,Box3:wu},GO={graph:Zae,forcelayout:Ole},ode=2,wS=new Ft.BufferGeometry().setAttribute?"setAttribute":"addAttribute",yv=new Ft.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",sde=tg({props:{jsonUrl:{onChange:function(e,r){var i=this;e&&!r.fetchingJson&&(r.fetchingJson=!0,r.onLoading(),fetch(e).then(function(o){return o.json()}).then(function(o){r.fetchingJson=!1,r.onFinishLoading(o),i.graphData(o)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,r){var i=r.d3ForceLayout.force("charge");i&&i.strength(e>2?-60:-30),e<3&&o(r.graphData.nodes,"z"),e<2&&o(r.graphData.nodes,"y");function o(s,a){s.forEach(function(l){delete l[a],delete l["v".concat(a)]})}}},dagMode:{onChange:function(e,r){!e&&r.forceEngine==="d3"&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=i.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,r,i){return i===void 0?e.d3ForceLayout.force(r):(e.d3ForceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var r=e.forceEngine!=="ngraph";return e.engineRunning&&i(),o(),s(),this;function i(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||r&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[r?"tick":"step"](),e.onEngineTick());var a=At(e.nodeThreeObjectExtend);e.graphData.nodes.forEach(function(h){var p=h.__threeObj;if(p){var g=r?h:e.layout.getNodePosition(h[e.nodeId]),y=a(h);(!e.nodePositionUpdate||!e.nodePositionUpdate(y?p.children[0]:p,{x:g.x,y:g.y,z:g.z},h)||y)&&(p.position.x=g.x,p.position.y=g.y||0,p.position.z=g.z||0)}});var l=At(e.linkWidth),c=At(e.linkCurvature),u=At(e.linkCurveRotation),d=At(e.linkThreeObjectExtend);e.graphData.links.forEach(function(h){var p=h.__lineObj;if(p){var g=r?h:e.layout.getLinkPosition(e.layout.graph.getLink(h.source,h.target).id),y=g[r?"source":"from"],v=g[r?"target":"to"];if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){f(h);var m=d(h);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(m?p.children[1]:p,{start:{x:y.x,y:y.y,z:y.z},end:{x:v.x,y:v.y,z:v.z}},h)&&!m)){var _=30,x=h.__curve,S=p.children.length?p.children[0]:p;if(S.type==="Line"){if(x){var E=x.getPoints(_);S.geometry.getAttribute("position").array.length!==E.length*3&&S.geometry[wS]("position",new Ft.BufferAttribute(new Float32Array(E.length*3),3)),S.geometry.setFromPoints(E)}else{var w=S.geometry.getAttribute("position");(!w||!w.array||w.array.length!==6)&&S.geometry[wS]("position",w=new Ft.BufferAttribute(new Float32Array(2*3),3)),w.array[0]=y.x,w.array[1]=y.y||0,w.array[2]=y.z||0,w.array[3]=v.x,w.array[4]=v.y||0,w.array[5]=v.z||0,w.needsUpdate=!0}S.geometry.computeBoundingSphere()}else if(S.type==="Mesh")if(x){S.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(S.position.set(0,0,0),S.rotation.set(0,0,0),S.scale.set(1,1,1));var F=Math.ceil(l(h)*10)/10,A=F/2,I=new Ft.TubeGeometry(x,_,A,e.linkResolution,!1);S.geometry.dispose(),S.geometry=I}else{if(!S.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var C=Math.ceil(l(h)*10)/10,T=C/2,M=new Ft.CylinderGeometry(T,T,1,e.linkResolution,1,!1);M[yv](new Ft.Matrix4().makeTranslation(0,1/2,0)),M[yv](new Ft.Matrix4().makeRotationX(Math.PI/2)),S.geometry.dispose(),S.geometry=M}var R=new Ft.Vector3(y.x,y.y||0,y.z||0),P=new Ft.Vector3(v.x,v.y||0,v.z||0),D=R.distanceTo(P);S.position.x=R.x,S.position.y=R.y,S.position.z=R.z,S.scale.z=D,S.parent.localToWorld(P),S.lookAt(P)}}}}});function f(h){var p=r?h:e.layout.getLinkPosition(e.layout.graph.getLink(h.source,h.target).id),g=p[r?"source":"from"],y=p[r?"target":"to"];if(!(!g||!y||!g.hasOwnProperty("x")||!y.hasOwnProperty("x"))){var v=c(h);if(!v)h.__curve=null;else{var m=new Ft.Vector3(g.x,g.y||0,g.z||0),_=new Ft.Vector3(y.x,y.y||0,y.z||0),x=m.distanceTo(_),S,w=u(h);if(x>0){var E=y.x-g.x,C=y.y-g.y||0,T=new Ft.Vector3().subVectors(_,m),M=T.clone().multiplyScalar(v).cross(E!==0||C!==0?new Ft.Vector3(0,0,1):new Ft.Vector3(0,1,0)).applyAxisAngle(T.normalize(),w).add(new Ft.Vector3().addVectors(m,_).divideScalar(2));S=new Ft.QuadraticBezierCurve3(m,M,_)}else{var R=v*70,P=-w,D=P+Math.PI/2;S=new Ft.CubicBezierCurve3(m,new Ft.Vector3(R*Math.cos(D),R*Math.sin(D),0).add(m),new Ft.Vector3(R*Math.cos(P),R*Math.sin(P),0).add(m),_)}h.__curve=S}}}}function o(){var a=At(e.linkDirectionalArrowRelPos),l=At(e.linkDirectionalArrowLength),c=At(e.nodeVal);e.graphData.links.forEach(function(u){var d=u.__arrowObj;if(d){var f=r?u:e.layout.getLinkPosition(e.layout.graph.getLink(u.source,u.target).id),h=f[r?"source":"from"],p=f[r?"target":"to"];if(!(!h||!p||!h.hasOwnProperty("x")||!p.hasOwnProperty("x"))){var g=Math.cbrt(Math.max(0,c(h)||1))*e.nodeRelSize,y=Math.cbrt(Math.max(0,c(p)||1))*e.nodeRelSize,v=l(u),m=a(u),_=u.__curve?function(T){return u.__curve.getPoint(T)}:function(T){var M=function(P,D,F,A){return D[P]+(F[P]-D[P])*A||0};return{x:M("x",h,p,T),y:M("y",h,p,T),z:M("z",h,p,T)}},x=u.__curve?u.__curve.getLength():Math.sqrt(["x","y","z"].map(function(T){return Math.pow((p[T]||0)-(h[T]||0),2)}).reduce(function(T,M){return T+M},0)),S=g+v+(x-g-y-v)*m,w=_(S/x),E=_((S-v)/x);["x","y","z"].forEach(function(T){return d.position[T]=E[T]});var C=qz(Ft.Vector3,ss(["x","y","z"].map(function(T){return w[T]})));d.parent.localToWorld(C),d.lookAt(C)}}})}function s(){var a=At(e.linkDirectionalParticleSpeed);e.graphData.links.forEach(function(l){var c=l.__photonsObj&&l.__photonsObj.children,u=l.__singleHopPhotonsObj&&l.__singleHopPhotonsObj.children;if(!((!u||!u.length)&&(!c||!c.length))){var d=r?l:e.layout.getLinkPosition(e.layout.graph.getLink(l.source,l.target).id),f=d[r?"source":"from"],h=d[r?"target":"to"];if(!(!f||!h||!f.hasOwnProperty("x")||!h.hasOwnProperty("x"))){var p=a(l),g=l.__curve?function(v){return l.__curve.getPoint(v)}:function(v){var m=function(x,S,w,E){return S[x]+(w[x]-S[x])*E||0};return{x:m("x",f,h,v),y:m("y",f,h,v),z:m("z",f,h,v)}},y=[].concat(ss(c||[]),ss(u||[]));y.forEach(function(v,m){var _=v.parent.__linkThreeObjType==="singleHopPhotons";if(v.hasOwnProperty("__progressRatio")||(v.__progressRatio=_?0:m/c.length),v.__progressRatio+=p,v.__progressRatio>=1)if(!_)v.__progressRatio=v.__progressRatio%1;else{v.parent.remove(v),IE(v);return}var x=v.__progressRatio,S=g(x);["x","y","z"].forEach(function(w){return v.position[w]=S[w]})})}}})}},emitParticle:function(e,r){if(r&&e.graphData.links.includes(r)){if(!r.__singleHopPhotonsObj){var i=new Ft.Group;i.__linkThreeObjType="singleHopPhotons",r.__singleHopPhotonsObj=i,e.graphScene.add(i)}var o=At(e.linkDirectionalParticleWidth),s=Math.ceil(o(r)*10)/10/2,a=e.linkDirectionalParticleResolution,l=new Ft.SphereGeometry(s,a,a),c=At(e.linkColor),u=At(e.linkDirectionalParticleColor),d=u(r)||c(r)||"#f0f0f0",f=new Ft.Color(Rh(d)),h=e.linkOpacity*3,p=new Ft.MeshLambertMaterial({color:f,transparent:!0,opacity:h});r.__singleHopPhotonsObj.add(new Ft.Mesh(l,p))}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var i=function o(s){var a=[];if(s.geometry){s.geometry.computeBoundingBox();var l=new Ft.Box3;l.copy(s.geometry.boundingBox).applyMatrix4(s.matrixWorld),a.push(l)}return a.concat.apply(a,ss((s.children||[]).filter(function(c){return!c.hasOwnProperty("__graphObjType")||c.__graphObjType==="node"&&r(c.__data)}).map(o)))}(e.graphScene);return i.length?Object.assign.apply(Object,ss(["x","y","z"].map(function(o){return FM({},o,[SE(i,function(s){return s.min[o]}),bE(i,function(s){return s.max[o]})])}))):null}},stateInit:function(){return{d3ForceLayout:fz().force("link",cz()).force("charge",hz()).force("center",nz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.graphScene=e},update:function(e,r){var i=function(j){return j.some(function(Q){return r.hasOwnProperty(Q)})};if(e.engineRunning=!1,typeof e.onUpdate=="function"&&e.onUpdate(),e.nodeAutoColorBy!==null&&i(["nodeAutoColorBy","graphData","nodeColor"])&&VO(e.graphData.nodes,At(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&i(["linkAutoColorBy","graphData","linkColor"])&&VO(e.graphData.links,At(e.linkAutoColorBy),e.linkColor),e._flushObjects||i(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var o=At(e.nodeThreeObject),s=At(e.nodeThreeObjectExtend),a=At(e.nodeVal),l=At(e.nodeColor),c=At(e.nodeVisibility),u={},d={};Mh(e.graphData.nodes.filter(c),e.graphScene,{purge:e._flushObjects||i(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(j){return j.__graphObjType==="node"},createObj:function(j){var Q=o(j),Y=s(j);Q&&e.nodeThreeObject===Q&&(Q=Q.clone());var ne;return Q&&!Y?ne=Q:(ne=new Ft.Mesh,ne.__graphDefaultObj=!0,Q&&Y&&ne.add(Q)),ne.__graphObjType="node",ne},updateObj:function(j,Q){if(j.__graphDefaultObj){var Y=a(Q)||1,ne=Math.cbrt(Y)*e.nodeRelSize,ye=e.nodeResolution;(!j.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||j.geometry.parameters.radius!==ne||j.geometry.parameters.widthSegments!==ye)&&(u.hasOwnProperty(Y)||(u[Y]=new Ft.SphereGeometry(ne,ye,ye)),j.geometry.dispose(),j.geometry=u[Y]);var me=l(Q),fe=new Ft.Color(Rh(me||"#ffffaa")),ae=e.nodeOpacity*SS(me);(j.material.type!=="MeshLambertMaterial"||!j.material.color.equals(fe)||j.material.opacity!==ae)&&(d.hasOwnProperty(me)||(d[me]=new Ft.MeshLambertMaterial({color:fe,transparent:!0,opacity:ae})),j.material.dispose(),j.material=d[me])}}})}if(e._flushObjects||i(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var f=At(e.linkThreeObject),h=At(e.linkThreeObjectExtend),p=At(e.linkMaterial),g=At(e.linkVisibility),y=At(e.linkColor),v=At(e.linkWidth),m={},_={},x={},S=e.graphData.links.filter(g);if(Mh(S,e.graphScene,{objBindAttr:"__lineObj",purge:e._flushObjects||i(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(j){return j.__graphObjType==="link"},exitObj:function(j){var Q=j.__data&&j.__data.__singleHopPhotonsObj;Q&&(Q.parent.remove(Q),IE(Q),delete j.__data.__singleHopPhotonsObj)},createObj:function(j){var Q=f(j),Y=h(j);Q&&e.linkThreeObject===Q&&(Q=Q.clone());var ne;if(!Q||Y){var ye=!!v(j);if(ye)ne=new Ft.Mesh;else{var me=new Ft.BufferGeometry;me[wS]("position",new Ft.BufferAttribute(new Float32Array(2*3),3)),ne=new Ft.Line(me)}}var fe;return Q?Y?(fe=new Ft.Group,fe.__graphDefaultObj=!0,fe.add(ne),fe.add(Q)):fe=Q:(fe=ne,fe.__graphDefaultObj=!0),fe.renderOrder=10,fe.__graphObjType="link",fe},updateObj:function(j,Q){if(j.__graphDefaultObj){var Y=j.children.length?j.children[0]:j,ne=Math.ceil(v(Q)*10)/10,ye=!!ne;if(ye){var me=ne/2,fe=e.linkResolution;if(!Y.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||Y.geometry.parameters.radiusTop!==me||Y.geometry.parameters.radialSegments!==fe){if(!m.hasOwnProperty(ne)){var ae=new Ft.CylinderGeometry(me,me,1,fe,1,!1);ae[yv](new Ft.Matrix4().makeTranslation(0,1/2,0)),ae[yv](new Ft.Matrix4().makeRotationX(Math.PI/2)),m[ne]=ae}Y.geometry.dispose(),Y.geometry=m[ne]}}var ve=p(Q);if(ve)Y.material=ve;else{var q=y(Q),ge=new Ft.Color(Rh(q||"#f0f0f0")),xe=e.linkOpacity*SS(q),_e=ye?"MeshLambertMaterial":"LineBasicMaterial";if(Y.material.type!==_e||!Y.material.color.equals(ge)||Y.material.opacity!==xe){var Se=ye?_:x;Se.hasOwnProperty(q)||(Se[q]=new Ft[_e]({color:ge,transparent:xe<1,opacity:xe,depthWrite:xe>=1})),Y.material.dispose(),Y.material=Se[q]}}}}}),e.linkDirectionalArrowLength||r.hasOwnProperty("linkDirectionalArrowLength")){var w=At(e.linkDirectionalArrowLength),E=At(e.linkDirectionalArrowColor);Mh(S.filter(w),e.graphScene,{objBindAttr:"__arrowObj",objFilter:function(j){return j.__linkThreeObjType==="arrow"},createObj:function(){var j=new Ft.Mesh(void 0,new Ft.MeshLambertMaterial({transparent:!0}));return j.__linkThreeObjType="arrow",j},updateObj:function(j,Q){var Y=w(Q),ne=e.linkDirectionalArrowResolution;if(!j.geometry.type.match(/^Cone(Buffer)?Geometry$/)||j.geometry.parameters.height!==Y||j.geometry.parameters.radialSegments!==ne){var ye=new Ft.ConeGeometry(Y*.25,Y,ne);ye.translate(0,Y/2,0),ye.rotateX(Math.PI/2),j.geometry.dispose(),j.geometry=ye}var me=E(Q)||y(Q)||"#f0f0f0";j.material.color=new Ft.Color(Rh(me)),j.material.opacity=e.linkOpacity*3*SS(me)}})}if(e.linkDirectionalParticles||r.hasOwnProperty("linkDirectionalParticles")){var C=At(e.linkDirectionalParticles),T=At(e.linkDirectionalParticleWidth),M=At(e.linkDirectionalParticleColor),R={},P={};Mh(S.filter(C),e.graphScene,{objBindAttr:"__photonsObj",objFilter:function(j){return j.__linkThreeObjType==="photons"},createObj:function(){var j=new Ft.Group;return j.__linkThreeObjType="photons",j},updateObj:function(j,Q){var Y=Math.round(Math.abs(C(Q))),ne=!!j.children.length&&j.children[0],ye=Math.ceil(T(Q)*10)/10/2,me=e.linkDirectionalParticleResolution,fe;ne&&ne.geometry.parameters.radius===ye&&ne.geometry.parameters.widthSegments===me?fe=ne.geometry:(P.hasOwnProperty(ye)||(P[ye]=new Ft.SphereGeometry(ye,me,me)),fe=P[ye],ne&&ne.geometry.dispose());var ae=M(Q)||y(Q)||"#f0f0f0",ve=new Ft.Color(Rh(ae)),q=e.linkOpacity*3,ge;ne&&ne.material.color.equals(ve)&&ne.material.opacity===q?ge=ne.material:(R.hasOwnProperty(ae)||(R[ae]=new Ft.MeshLambertMaterial({color:ve,transparent:!0,opacity:q})),ge=R[ae],ne&&ne.material.dispose()),Mh(ss(new Array(Y)).map(function(xe,_e){return{idx:_e}}),j,{idAccessor:function(_e){return _e.idx},createObj:function(){return new Ft.Mesh(fe,ge)},updateObj:function(_e){_e.geometry=fe,_e.material=ge}})}})}}if(e._flushObjects=!1,i(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(k){k.source=k[e.linkSource],k.target=k[e.linkTarget]});var D=e.forceEngine!=="ngraph",F;if(D){(F=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var A=e.d3ForceLayout.force("link");A&&A.id(function(k){return k[e.nodeId]}).links(e.graphData.links);var I=e.dagMode&&ide(e.graphData,function(k){return k[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),N=Math.max.apply(Math,ss(Object.values(I||[]))),L=e.dagLevelDistance||e.graphData.nodes.length/(N||1)*ode*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(r.dagMode)){var O=["lr","rl"].includes(r.dagMode)?"fx":["td","bu"].includes(r.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(k){return delete k[O]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var V=["rl","td","zout"].includes(e.dagMode),B=function(j){return(I[j[e.nodeId]]-N/2)*L*(V?-1:1)},z=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(k){return k[z]=B(k)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?pz(function(k){var j=I[k[e.nodeId]]||-1;return(e.dagMode==="radialin"?N-j:j)*L}).strength(function(k){return e.dagNodeFilter(k)?1:0}):null)}else{var W=GO.graph();e.graphData.nodes.forEach(function(k){W.addNode(k[e.nodeId])}),e.graphData.links.forEach(function(k){W.addLink(k.source,k.target)}),F=GO.forcelayout(W,Xz({dimensions:e.numDimensions},e.ngraphPhysics)),F.graph=W}for(var ie=0;ie<e.warmupTicks&&!(D&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);ie++)F[D?"tick":"step"]();e.layout=F,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function ade(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=function(o){function s(){var a;Hue(this,s);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return a=Gue(this,s,[].concat(c)),a.__kapsuleInstance=qz(n,[].concat(ss(r?[a]:[]),c)),a}return Wue(s,o),jue(s)}(e);return Object.keys(n()).forEach(function(o){return i.prototype[o]=function(){var s,a=(s=this.__kapsuleInstance)[o].apply(s,arguments);return a===this.__kapsuleInstance?this:a}}),i}var lde=window.THREE?window.THREE:{Group:Sd},Zz=ade(sde,lde.Group,!0);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const cde=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class ude{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=cde,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}getRenderObjectData(e){let r=this.renderObjects.get(e);if(r===void 0){const{geometry:i,material:o,object:s}=e;if(r={material:this.getMaterialData(o),geometry:{attributes:this.getAttributesData(i.attributes),indexVersion:i.index?i.index.version:null,drawRange:{start:i.drawRange.start,count:i.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(r.center=s.center.clone()),s.morphTargetInfluences&&(r.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(r.version=e.bundle.version),r.material.transmission>0){const{width:a,height:l}=e.context;r.bufferWidth=a,r.bufferHeight=l}this.renderObjects.set(e,r)}return r}getAttributesData(e){const r={};for(const i in e){const o=e[i];r[i]={version:o.version}}return r}containsNode(e){const r=e.material;for(const i in r)if(r[i]&&r[i].isNode)return!0;return e.renderer.nodes.modelViewMatrix!==null||e.renderer.nodes.modelNormalViewMatrix!==null}getMaterialData(e){const r={};for(const i of this.refreshUniforms){const o=e[i];o!=null&&(typeof o=="object"&&o.clone!==void 0?o.isTexture===!0?r[i]={id:o.id,version:o.version}:r[i]=o.clone():r[i]=o)}return r}equals(e){const{object:r,material:i,geometry:o}=e,s=this.getRenderObjectData(e);if(s.worldMatrix.equals(r.matrixWorld)!==!0)return s.worldMatrix.copy(r.matrixWorld),!1;const a=s.material;for(const y in a){const v=a[y],m=i[y];if(v.equals!==void 0){if(v.equals(m)===!1)return v.copy(m),!1}else if(m.isTexture===!0){if(v.id!==m.id||v.version!==m.version)return v.id=m.id,v.version=m.version,!1}else if(v!==m)return a[y]=m,!1}if(a.transmission>0){const{width:y,height:v}=e.context;if(s.bufferWidth!==y||s.bufferHeight!==v)return s.bufferWidth=y,s.bufferHeight=v,!1}const l=s.geometry,c=o.attributes,u=l.attributes,d=Object.keys(u),f=Object.keys(c);if(d.length!==f.length)return s.geometry.attributes=this.getAttributesData(c),!1;for(const y of d){const v=u[y],m=c[y];if(m===void 0)return delete u[y],!1;if(v.version!==m.version)return v.version=m.version,!1}const h=o.index,p=l.indexVersion,g=h?h.version:null;if(p!==g)return l.indexVersion=g,!1;if(l.drawRange.start!==o.drawRange.start||l.drawRange.count!==o.drawRange.count)return l.drawRange.start=o.drawRange.start,l.drawRange.count=o.drawRange.count,!1;if(s.morphTargetInfluences){let y=!1;for(let v=0;v<s.morphTargetInfluences.length;v++)s.morphTargetInfluences[v]!==r.morphTargetInfluences[v]&&(y=!0);if(y)return!0}return s.center&&s.center.equals(r.center)===!1?(s.center.copy(r.center),!0):(e.bundle!==null&&(s.version=e.bundle.version),!0)}needsRefresh(e,r){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;const{renderId:i}=r;if(this.renderId!==i)return this.renderId=i,!0;const o=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return o||s?!1:this.equals(e)!==!0}}function Sm(n,e=0){let r=3735928559^e,i=1103547991^e;if(n instanceof Array)for(let o=0,s;o<n.length;o++)s=n[o],r=Math.imul(r^s,2654435761),i=Math.imul(i^s,1597334677);else for(let o=0,s;o<n.length;o++)s=n.charCodeAt(o),r=Math.imul(r^s,2654435761),i=Math.imul(i^s,1597334677);return r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(r^r>>>13,3266489909),4294967296*(2097151&i)+(r>>>0)}const dde=n=>Sm(n),Jz=n=>Sm(n),ek=(...n)=>Sm(n);function tk(n,e=!1){const r=[];n.isNode===!0&&(r.push(n.id),n=n.getSelf());for(const{property:i,childNode:o}of Ty(n))r.push(r,Sm(i.slice(0,-4)),o.getCacheKey(e));return Sm(r)}function*Ty(n,e=!1){for(const r in n){if(r.startsWith("_")===!0)continue;const i=n[r];if(Array.isArray(i)===!0)for(let o=0;o<i.length;o++){const s=i[o];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:r,index:o,childNode:s})}else if(i&&i.isNode===!0)yield{property:r,childNode:i};else if(typeof i=="object")for(const o in i){const s=i[o];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:r,index:o,childNode:s})}}}const fde=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]);function hde(n){return fde.get(n)}function My(n){if(n==null)return null;const e=typeof n;return n.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":n.isVector2===!0?"vec2":n.isVector3===!0?"vec3":n.isVector4===!0?"vec4":n.isMatrix3===!0?"mat3":n.isMatrix4===!0?"mat4":n.isColor===!0?"color":n instanceof ArrayBuffer?"ArrayBuffer":null}function nk(n,...e){const r=n?n.slice(-4):void 0;return e.length===1&&(r==="vec2"?e=[e[0],e[0]]:r==="vec3"?e=[e[0],e[0],e[0]]:r==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),n==="color"?new Tt(...e):r==="vec2"?new je(...e):r==="vec3"?new K(...e):r==="vec4"?new Wt(...e):r==="mat3"?new kt(...e):r==="mat4"?new fn(...e):n==="bool"?e[0]||!1:n==="float"||n==="int"||n==="uint"?e[0]||0:n==="string"?e[0]||"":n==="ArrayBuffer"?mde(e[0]):null}function pde(n){let e="";const r=new Uint8Array(n);for(let i=0;i<r.length;i++)e+=String.fromCharCode(r[i]);return btoa(e)}function mde(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0)).buffer}const HO={VERTEX:"vertex"},on={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},Ma={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},gde=["fragment","vertex"],jO=["setup","analyze","generate"],WO=[...gde,"compute"],th=["x","y","z","w"];let vde=0;class Qt extends sc{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=on.NONE,this.updateBeforeType=on.NONE,this.updateAfterType=on.NONE,this.uuid=dy.generateUUID(),this.version=0,this._cacheKey=null,this._cacheKeyVersion=0,this.global=!1,this.isNode=!0,Object.defineProperty(this,"id",{value:vde++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,r){return this.updateType=r,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,on.FRAME)}onRenderUpdate(e){return this.onUpdate(e,on.RENDER)}onObjectUpdate(e){return this.onUpdate(e,on.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of Ty(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const r of this.getChildren())r.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=tk(this,e),this._cacheKeyVersion=this.version),this._cacheKey}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const r=this.getNodeType(e);return e.getElementType(r)}getNodeType(e){const r=e.getNodeProperties(this);return r.outputNode?r.outputNode.getNodeType(e):this.nodeType}getShared(e){const r=this.getHash(e);return e.getNodeFromHash(r)||this}setup(e){const r=e.getNodeProperties(this);let i=0;for(const o of this.getChildren())r["node"+i++]=o;return null}analyze(e){if(e.increaseUsage(this)===1){const i=e.getNodeProperties(this);for(const o of Object.values(i))o&&o.isNode===!0&&o.build(e)}}generate(e,r){const{outputNode:i}=e.getNodeProperties(this);if(i&&i.isNode===!0)return i.build(e,r)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,r=null){const i=this.getShared(e);if(this!==i)return i.build(e,r);e.addNode(this),e.addChain(this);let o=null;const s=e.getBuildStage();if(s==="setup"){this.updateReference(e);const a=e.getNodeProperties(this);if(a.initialized!==!0){const l=e.stack.nodes.length;a.initialized=!0,a.outputNode=this.setup(e),a.outputNode!==null&&e.stack.nodes.length;for(const c of Object.values(a))c&&c.isNode===!0&&c.build(e)}}else if(s==="analyze")this.analyze(e);else if(s==="generate")if(this.generate.length===1){const l=this.getNodeType(e),c=e.getDataFromNode(this);o=c.snippet,o===void 0?(o=this.generate(e)||"",c.snippet=o):c.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),o=e.format(o,l,r)}else o=this.generate(e,r)||"";return e.removeChain(this),e.addSequentialNode(this),o}getSerializeChildren(){return Ty(this)}serialize(e){const r=this.getSerializeChildren(),i={};for(const{property:o,index:s,childNode:a}of r)s!==void 0?(i[o]===void 0&&(i[o]=Number.isInteger(s)?[]:{}),i[o][s]=a.toJSON(e.meta).uuid):i[o]=a.toJSON(e.meta).uuid;Object.keys(i).length>0&&(e.inputNodes=i)}deserialize(e){if(e.inputNodes!==void 0){const r=e.meta.nodes;for(const i in e.inputNodes)if(Array.isArray(e.inputNodes[i])){const o=[];for(const s of e.inputNodes[i])o.push(r[s]);this[i]=o}else if(typeof e.inputNodes[i]=="object"){const o={};for(const s in e.inputNodes[i]){const a=e.inputNodes[i][s];o[s]=r[a]}this[i]=o}else{const o=e.inputNodes[i];this[i]=r[o]}}}toJSON(e){const{uuid:r,type:i}=this,o=e===void 0||typeof e=="string";o&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[r];s===void 0&&(s={uuid:r,type:i,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},o!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}if(o){const l=a(e.textures),c=a(e.images),u=a(e.nodes);l.length>0&&(s.textures=l),c.length>0&&(s.images=c),u.length>0&&(s.nodes=u)}return s}}class rg extends Qt{static get type(){return"ArrayElementNode"}constructor(e,r){super(),this.node=e,this.indexNode=r,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const r=this.node.build(e),i=this.indexNode.build(e,"uint");return`${r}[ ${i} ]`}}class rk extends Qt{static get type(){return"ConvertNode"}constructor(e,r){super(),this.node=e,this.convertTo=r}getNodeType(e){const r=this.node.getNodeType(e);let i=null;for(const o of this.convertTo.split("|"))(i===null||e.getTypeLength(r)===e.getTypeLength(o))&&(i=o);return i}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,r){const i=this.node,o=this.getNodeType(e),s=i.build(e,o);return e.format(s,o,r)}}class Mr extends Qt{static get type(){return"TempNode"}constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,r){if(e.getBuildStage()==="generate"){const o=e.getVectorType(this.getNodeType(e,r)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,o,r);if(o!=="void"&&r!=="void"&&this.hasDependencies(e)){const a=super.build(e,o),l=e.getVarFromNode(this,null,o),c=e.getPropertyName(l);return e.addLineFlowCode(`${c} = ${a}`,this),s.snippet=a,s.propertyName=c,e.format(s.propertyName,o,r)}}return super.build(e,r)}}class yde extends Mr{static get type(){return"JoinNode"}constructor(e=[],r=null){super(r),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((r,i)=>r+e.getTypeLength(i.getNodeType(e)),0))}generate(e,r){const i=this.getNodeType(e),o=this.nodes,s=e.getComponentType(i),a=[];for(const c of o){let u=c.build(e);const d=e.getComponentType(c.getNodeType(e));d!==s&&(u=e.format(u,d,s)),a.push(u)}const l=`${e.getType(i)}( ${a.join(", ")} )`;return e.format(l,i,r)}}const _de=th.join("");class qO extends Qt{static get type(){return"SplitNode"}constructor(e,r="x"){super(),this.node=e,this.components=r,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const r of this.components)e=Math.max(th.indexOf(r)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,r){const i=this.node,o=e.getTypeLength(i.getNodeType(e));let s=null;if(o>1){let a=null;this.getVectorLength()>=o&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const c=i.build(e,a);this.components.length===o&&this.components===_de.slice(0,this.components.length)?s=e.format(c,a,r):s=e.format(`${c}.${this.components}`,this.getNodeType(e),r)}else s=i.build(e,r);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class xde extends Mr{static get type(){return"SetNode"}constructor(e,r,i){super(),this.sourceNode=e,this.components=r,this.targetNode=i}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:r,components:i,targetNode:o}=this,s=this.getNodeType(e),a=e.getTypeFromLength(i.length,o.getNodeType(e)),l=o.build(e,a),c=r.build(e,s),u=e.getTypeLength(s),d=[];for(let f=0;f<u;f++){const h=th[f];h===i[0]?(d.push(l),f+=i.length-1):d.push(c+"."+h)}return`${e.getType(s)}( ${d.join(", ")} )`}}class bde extends Mr{static get type(){return"FlipNode"}constructor(e,r){super(),this.sourceNode=e,this.components=r}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:r,sourceNode:i}=this,o=this.getNodeType(e),s=i.build(e),a=e.getVarFromNode(this),l=e.getPropertyName(a);e.addLineFlowCode(l+" = "+s,this);const c=e.getTypeLength(o),u=[];let d=0;for(let f=0;f<c;f++){const h=th[f];h===r[d]?(u.push("1.0 - "+(l+"."+h)),d++):u.push(l+"."+h)}return`${e.getType(o)}( ${u.join(", ")} )`}}class BM extends Qt{static get type(){return"InputNode"}constructor(e,r=null){super(r),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?My(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=My(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=pde(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?nk(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}class Za extends BM{static get type(){return"ConstNode"}constructor(e,r=null){super(e,r),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,r){const i=this.getNodeType(e);return e.format(this.generateConst(e),i,r)}}let Af=null;const Ed=new Map;function Ne(n,e){if(Ed.has(n)){console.warn(`Redefinition of method chaining ${n}`);return}if(typeof e!="function")throw new Error(`Node element ${n} is not a function`);Ed.set(n,e)}const ik=n=>n.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),XO=n=>ik(n).split("").sort().join(""),ok={setup(n,e){const r=e.shift();return n(ix(r),...e)},get(n,e,r){if(typeof e=="string"&&n[e]===void 0){if(n.isStackNode!==!0&&e==="assign")return(...i)=>(Af.assign(r,...i),r);if(Ed.has(e)){const i=Ed.get(e);return n.isStackNode?(...o)=>r.add(i(...o)):(...o)=>i(r,...o)}else{if(e==="self")return n;if(e.endsWith("Assign")&&Ed.has(e.slice(0,e.length-6))){const i=Ed.get(e.slice(0,e.length-6));return n.isStackNode?(...o)=>r.assign(o[0],i(...o)):(...o)=>r.assign(i(r,...o))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=ik(e),nt(new qO(r,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=XO(e.slice(3).toLowerCase()),i=>nt(new xde(n,e,i));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=XO(e.slice(4).toLowerCase()),()=>nt(new bde(nt(n),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),nt(new qO(n,e));if(/^\d+$/.test(e)===!0)return nt(new rg(r,new Za(Number(e),"uint")))}}}return Reflect.get(n,e,r)},set(n,e,r,i){return typeof e=="string"&&n[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(i[e].assign(r),!0):Reflect.set(n,e,r,i)}},ES=new WeakMap,KO=new WeakMap,Sde=function(n,e=null){const r=My(n);if(r==="node"){let i=ES.get(n);return i===void 0&&(i=new Proxy(n,ok),ES.set(n,i),ES.set(i,i)),i}else{if(e===null&&(r==="float"||r==="boolean")||r&&r!=="shader"&&r!=="string")return nt(DE(n,e));if(r==="shader")return at(n)}return n},wde=function(n,e=null){for(const r in n)n[r]=nt(n[r],e);return n},Ede=function(n,e=null){const r=n.length;for(let i=0;i<r;i++)n[i]=nt(n[i],e);return n},Cde=function(n,e=null,r=null,i=null){const o=s=>nt(i!==null?Object.assign(s,i):s);return e===null?(...s)=>o(new n(...zd(s))):r!==null?(r=nt(r),(...s)=>o(new n(e,...zd(s),r))):(...s)=>o(new n(e,...zd(s)))},Tde=function(n,...e){return nt(new n(...zd(e)))};class Mde extends Qt{constructor(e,r){super(),this.shaderNode=e,this.inputNodes=r}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}call(e){const{shaderNode:r,inputNodes:i}=this,o=e.getNodeProperties(r);if(o.onceOutput)return o.onceOutput;let s=null;if(r.layout){let a=KO.get(e.constructor);a===void 0&&(a=new WeakMap,KO.set(e.constructor,a));let l=a.get(r);l===void 0&&(l=nt(e.buildFunctionNode(r)),a.set(r,l)),e.currentFunctionNode!==null&&e.currentFunctionNode.includes.push(l),s=nt(l.call(i))}else{const a=r.jsFunc,l=i!==null?a(i,e):a(e);s=nt(l)}return r.once&&(o.onceOutput=s),s}getOutputNode(e){const r=e.getNodeProperties(this);return r.outputNode===null&&(r.outputNode=this.setupOutput(e)),r.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,r){return this.getOutputNode(e).build(e,r)}}class Rde extends Qt{constructor(e,r){super(r),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return ix(e),nt(new Mde(this,e))}setup(){return this.call()}}const Ade=[!1,!0],Nde=[0,1,2,3],Pde=[-1,-2],sk=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],$M=new Map;for(const n of Ade)$M.set(n,new Za(n));const zM=new Map;for(const n of Nde)zM.set(n,new Za(n,"uint"));const kM=new Map([...zM].map(n=>new Za(n.value,"int")));for(const n of Pde)kM.set(n,new Za(n,"int"));const nx=new Map([...kM].map(n=>new Za(n.value)));for(const n of sk)nx.set(n,new Za(n));for(const n of sk)nx.set(-n,new Za(-n));const rx={bool:$M,uint:zM,ints:kM,float:nx},YO=new Map([...$M,...nx]),DE=(n,e)=>YO.has(n)?YO.get(n):n.isNode===!0?n:new Za(n,e),Ode=n=>{try{return n.getNodeType()}catch{return}},Rr=function(n,e=null){return(...r)=>{if((r.length===0||!["bool","float","int","uint"].includes(n)&&r.every(o=>typeof o!="object"))&&(r=[nk(n,...r)]),r.length===1&&e!==null&&e.has(r[0]))return nt(e.get(r[0]));if(r.length===1){const o=DE(r[0],n);return Ode(o)===n?nt(o):nt(new rk(o,n))}const i=r.map(o=>DE(o));return nt(new yde(i,n))}},QO=n=>typeof n=="object"&&n!==null?n.value:n,Ide=n=>n!=null?n.nodeType||n.convertTo||(typeof n=="string"?n:null):null;function h0(n,e){return new Proxy(new Rde(n,e),ok)}const nt=(n,e=null)=>Sde(n,e),ix=(n,e=null)=>new wde(n,e),zd=(n,e=null)=>new Ede(n,e),Be=(...n)=>new Cde(...n),lt=(...n)=>new Tde(...n),at=(n,e)=>{const r=new h0(n,e),i=(...o)=>{let s;return ix(o),o[0]&&o[0].isNode?s=[...o]:s=o[0],r.call(s)};return i.shaderNode=r,i.setLayout=o=>(r.setLayout(o),i),i.once=()=>(r.once=!0,i),i};Ne("toGlobal",n=>(n.global=!0,n));const Ry=n=>{Af=n},ak=()=>Af,Cr=(...n)=>Af.If(...n);function Dde(n){return Af&&Af.add(n),n}Ne("append",Dde);const Lde=new Rr("color"),Ae=new Rr("float",rx.float),cr=new Rr("int",rx.ints),Fde=new Rr("uint",rx.uint),lk=new Rr("bool",rx.bool),ft=new Rr("vec2"),ya=new Rr("ivec2"),Ude=new Rr("uvec2"),Bde=new Rr("bvec2"),Ie=new Rr("vec3"),$de=new Rr("ivec3"),zde=new Rr("uvec3"),kde=new Rr("bvec3"),Kt=new Rr("vec4"),Vde=new Rr("ivec4"),Gde=new Rr("uvec4"),Hde=new Rr("bvec4"),VM=new Rr("mat2"),Ai=new Rr("mat3"),kd=new Rr("mat4");Ne("toColor",Lde);Ne("toFloat",Ae);Ne("toInt",cr);Ne("toUint",Fde);Ne("toBool",lk);Ne("toVec2",ft);Ne("toIVec2",ya);Ne("toUVec2",Ude);Ne("toBVec2",Bde);Ne("toVec3",Ie);Ne("toIVec3",$de);Ne("toUVec3",zde);Ne("toBVec3",kde);Ne("toVec4",Kt);Ne("toIVec4",Vde);Ne("toUVec4",Gde);Ne("toBVec4",Hde);Ne("toMat2",VM);Ne("toMat3",Ai);Ne("toMat4",kd);const jde=Be(rg),Wde=(n,e)=>nt(new rk(nt(n),e));Ne("element",jde);Ne("convert",Wde);class ck extends Qt{static get type(){return"UniformGroupNode"}constructor(e,r=!1,i=1){super("string"),this.name=e,this.version=0,this.shared=r,this.order=i,this.isUniformGroup=!0}set needsUpdate(e){e===!0&&this.version++}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const qde=n=>new ck(n),uk=(n,e=0)=>new ck(n,!0,e),Xde=uk("frame"),Ht=uk("render"),dk=qde("object");class ig extends BM{static get type(){return"UniformNode"}constructor(e,r=null){super(e,r),this.isUniformNode=!0,this.name="",this.groupNode=dk}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,r){const i=this.getSelf();return e=e.bind(i),super.onUpdate(o=>{const s=e(o,i);s!==void 0&&(this.value=s)},r)}generate(e,r){const i=this.getNodeType(e),o=this.getUniformHash(e);let s=e.getNodeFromHash(o);s===void 0&&(e.setHashNode(this,o),s=this);const a=s.getInputType(e),l=e.getUniformFromNode(s,a,e.shaderStage,this.name||e.context.label),c=e.getPropertyName(l);return e.context.label!==void 0&&delete e.context.label,e.format(c,i,r)}}const qt=(n,e)=>{const r=Ide(e||n),i=n&&n.isNode===!0?n.node&&n.node.value||n.value:n;return nt(new ig(i,r))};class Mn extends Qt{static get type(){return"PropertyNode"}constructor(e,r=null,i=!1){super(e),this.name=r,this.varying=i,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let r;return this.varying===!0?(r=e.getVaryingFromNode(this,this.name),r.needsInterpolation=!0):r=e.getVarFromNode(this,this.name),e.getPropertyName(r)}}const Kde=(n,e)=>nt(new Mn(n,e)),Ay=(n,e)=>nt(new Mn(n,e,!0)),Sn=lt(Mn,"vec4","DiffuseColor"),ZO=lt(Mn,"vec3","EmissiveColor"),Sa=lt(Mn,"float","Roughness"),Ny=lt(Mn,"float","Metalness"),LE=lt(Mn,"float","Clearcoat"),Py=lt(Mn,"float","ClearcoatRoughness"),Cd=lt(Mn,"vec3","Sheen"),GM=lt(Mn,"float","SheenRoughness"),HM=lt(Mn,"float","Iridescence"),fk=lt(Mn,"float","IridescenceIOR"),hk=lt(Mn,"float","IridescenceThickness"),FE=lt(Mn,"float","AlphaT"),Tc=lt(Mn,"float","Anisotropy"),p0=lt(Mn,"vec3","AnisotropyT"),Vd=lt(Mn,"vec3","AnisotropyB"),uo=lt(Mn,"color","SpecularColor"),Oy=lt(Mn,"float","SpecularF90"),UE=lt(Mn,"float","Shininess"),Yde=lt(Mn,"vec4","Output"),CS=lt(Mn,"float","dashSize"),JO=lt(Mn,"float","gapSize"),m0=lt(Mn,"float","IOR"),BE=lt(Mn,"float","Transmission"),pk=lt(Mn,"float","Thickness"),mk=lt(Mn,"float","AttenuationDistance"),gk=lt(Mn,"color","AttenuationColor"),vk=lt(Mn,"float","Dispersion");class Qde extends Mr{static get type(){return"AssignNode"}constructor(e,r){super(),this.targetNode=e,this.sourceNode=r}hasDependencies(){return!1}getNodeType(e,r){return r!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:r}=this;if(e.isAvailable("swizzleAssign")===!1&&r.isSplitNode&&r.components.length>1){const i=e.getTypeLength(r.node.getNodeType(e));return th.join("").slice(0,i)!==r.components}return!1}generate(e,r){const{targetNode:i,sourceNode:o}=this,s=this.needsSplitAssign(e),a=i.getNodeType(e),l=i.context({assign:!0}).build(e),c=o.build(e,a),u=o.getNodeType(e),d=e.getDataFromNode(this);let f;if(d.initialized===!0)r!=="void"&&(f=l);else if(s){const h=e.getVarFromNode(this,null,a),p=e.getPropertyName(h);e.addLineFlowCode(`${p} = ${c}`,this);const g=i.node.context({assign:!0}).build(e);for(let y=0;y<i.components.length;y++){const v=i.components[y];e.addLineFlowCode(`${g}.${v} = ${p}[ ${y} ]`,this)}r!=="void"&&(f=l)}else f=`${l} = ${c}`,(r==="void"||u==="void")&&(e.addLineFlowCode(f,this),r!=="void"&&(f=l));return d.initialized=!0,e.format(f,a,r)}}const Zde=Be(Qde);Ne("assign",Zde);class Jde extends Mr{static get type(){return"FunctionCallNode"}constructor(e=null,r={}){super(),this.functionNode=e,this.parameters=r}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const r=[],i=this.functionNode,o=i.getInputs(e),s=this.parameters,a=(c,u)=>{const d=u.type,f=d==="pointer";let h;return f?h="&"+c.build(e):h=c.build(e,d),h};if(Array.isArray(s))for(let c=0;c<s.length;c++)r.push(a(s[c],o[c]));else for(const c of o){const u=s[c.name];if(u!==void 0)r.push(a(u,c));else throw new Error(`FunctionCallNode: Input '${c.name}' not found in FunctionNode.`)}return`${i.build(e,"property")}( ${r.join(", ")} )`}}const efe=(n,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?zd(e):ix(e[0]),nt(new Jde(nt(n),e)));Ne("call",efe);class tr extends Mr{static get type(){return"OperatorNode"}constructor(e,r,i,...o){if(super(),o.length>0){let s=new tr(e,r,i);for(let a=0;a<o.length-1;a++)s=new tr(e,s,o[a]);r=s,i=o[o.length-1]}this.op=e,this.aNode=r,this.bNode=i}getNodeType(e,r){const i=this.op,o=this.aNode,s=this.bNode,a=o.getNodeType(e),l=typeof s<"u"?s.getNodeType(e):null;if(a==="void"||l==="void")return"void";if(i==="%")return a;if(i==="~"||i==="&"||i==="|"||i==="^"||i===">>"||i==="<<")return e.getIntegerType(a);if(i==="!"||i==="=="||i==="&&"||i==="||"||i==="^^")return"bool";if(i==="<"||i===">"||i==="<="||i===">="){const c=r?e.getTypeLength(r):Math.max(e.getTypeLength(a),e.getTypeLength(l));return c>1?`bvec${c}`:"bool"}else return a==="float"&&e.isMatrix(l)?l:e.isMatrix(a)&&e.isVector(l)?e.getVectorFromMatrix(a):e.isVector(a)&&e.isMatrix(l)?e.getVectorFromMatrix(l):e.getTypeLength(l)>e.getTypeLength(a)?l:a}generate(e,r){const i=this.op,o=this.aNode,s=this.bNode,a=this.getNodeType(e,r);let l=null,c=null;a!=="void"?(l=o.getNodeType(e),c=typeof s<"u"?s.getNodeType(e):null,i==="<"||i===">"||i==="<="||i===">="||i==="=="?e.isVector(l)?c=l:l!==c&&(l=c="float"):i===">>"||i==="<<"?(l=a,c=e.changeComponentType(c,"uint")):e.isMatrix(l)&&e.isVector(c)?c=e.getVectorFromMatrix(l):e.isVector(l)&&e.isMatrix(c)?l=e.getVectorFromMatrix(c):l=c=a):l=c=a;const u=o.build(e,l),d=typeof s<"u"?s.build(e,c):null,f=e.getTypeLength(r),h=e.getFunctionOperator(i);if(r!=="void")return i==="<"&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThan",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} < ${d} )`,a,r):i==="<="&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThanEqual",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} <= ${d} )`,a,r):i===">"&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThan",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} > ${d} )`,a,r):i===">="&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThanEqual",r)}( ${u}, ${d} )`,a,r):e.format(`( ${u} >= ${d} )`,a,r):i==="!"||i==="~"?e.format(`(${i}${u})`,l,r):h?e.format(`${h}( ${u}, ${d} )`,a,r):e.format(`( ${u} ${i} ${d} )`,a,r);if(l!=="void")return h?e.format(`${h}( ${u}, ${d} )`,a,r):e.format(`${u} ${i} ${d}`,a,r)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Ni=Be(tr,"+"),$i=Be(tr,"-"),sn=Be(tr,"*"),Ha=Be(tr,"/"),yk=Be(tr,"%"),tfe=Be(tr,"=="),nfe=Be(tr,"!="),rfe=Be(tr,"<"),ife=Be(tr,">"),ofe=Be(tr,"<="),sfe=Be(tr,">="),afe=Be(tr,"&&"),lfe=Be(tr,"||"),cfe=Be(tr,"!"),ufe=Be(tr,"^^"),dfe=Be(tr,"&"),ffe=Be(tr,"~"),hfe=Be(tr,"|"),pfe=Be(tr,"^"),mfe=Be(tr,"<<"),gfe=Be(tr,">>");Ne("add",Ni);Ne("sub",$i);Ne("mul",sn);Ne("div",Ha);Ne("modInt",yk);Ne("equal",tfe);Ne("notEqual",nfe);Ne("lessThan",rfe);Ne("greaterThan",ife);Ne("lessThanEqual",ofe);Ne("greaterThanEqual",sfe);Ne("and",afe);Ne("or",lfe);Ne("not",cfe);Ne("xor",ufe);Ne("bitAnd",dfe);Ne("bitNot",ffe);Ne("bitOr",hfe);Ne("bitXor",pfe);Ne("shiftLeft",mfe);Ne("shiftRight",gfe);const vfe=(...n)=>(console.warn("TSL.OperatorNode: .remainder() has been renamed to .modInt()."),yk(...n));Ne("remainder",vfe);class le extends Mr{static get type(){return"MathNode"}constructor(e,r,i=null,o=null){super(),this.method=e,this.aNode=r,this.bNode=i,this.cNode=o}getInputType(e){const r=this.aNode.getNodeType(e),i=this.bNode?this.bNode.getNodeType(e):null,o=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(r)?0:e.getTypeLength(r),a=e.isMatrix(i)?0:e.getTypeLength(i),l=e.isMatrix(o)?0:e.getTypeLength(o);return s>a&&s>l?r:a>l?i:l>s?o:r}getNodeType(e){const r=this.method;return r===le.LENGTH||r===le.DISTANCE||r===le.DOT?"float":r===le.CROSS?"vec3":r===le.ALL?"bool":r===le.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):r===le.MOD?this.aNode.getNodeType(e):this.getInputType(e)}generate(e,r){const i=this.method,o=this.getNodeType(e),s=this.getInputType(e),a=this.aNode,l=this.bNode,c=this.cNode,u=e.renderer.isWebGLRenderer===!0;if(i===le.TRANSFORM_DIRECTION){let d=a,f=l;e.isMatrix(d.getNodeType(e))?f=Kt(Ie(f),0):d=Kt(Ie(d),0);const h=sn(d,f).xyz;return Em(h).build(e,r)}else{if(i===le.NEGATE)return e.format("( - "+a.build(e,s)+" )",o,r);if(i===le.ONE_MINUS)return $i(1,a).build(e,r);if(i===le.RECIPROCAL)return Ha(1,a).build(e,r);if(i===le.DIFFERENCE)return Lo($i(a,l)).build(e,r);{const d=[];return i===le.CROSS||i===le.MOD?d.push(a.build(e,o),l.build(e,o)):u&&i===le.STEP?d.push(a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":s),l.build(e,s)):u&&(i===le.MIN||i===le.MAX)||i===le.MOD?d.push(a.build(e,s),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":s)):i===le.REFRACT?d.push(a.build(e,s),l.build(e,s),c.build(e,"float")):i===le.MIX?d.push(a.build(e,s),l.build(e,s),c.build(e,e.getTypeLength(c.getNodeType(e))===1?"float":s)):(d.push(a.build(e,s)),l!==null&&d.push(l.build(e,s)),c!==null&&d.push(c.build(e,s))),e.format(`${e.getMethod(i,o)}( ${d.join(", ")} )`,o,r)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}le.ALL="all";le.ANY="any";le.EQUALS="equals";le.RADIANS="radians";le.DEGREES="degrees";le.EXP="exp";le.EXP2="exp2";le.LOG="log";le.LOG2="log2";le.SQRT="sqrt";le.INVERSE_SQRT="inversesqrt";le.FLOOR="floor";le.CEIL="ceil";le.NORMALIZE="normalize";le.FRACT="fract";le.SIN="sin";le.COS="cos";le.TAN="tan";le.ASIN="asin";le.ACOS="acos";le.ATAN="atan";le.ABS="abs";le.SIGN="sign";le.LENGTH="length";le.NEGATE="negate";le.ONE_MINUS="oneMinus";le.DFDX="dFdx";le.DFDY="dFdy";le.ROUND="round";le.RECIPROCAL="reciprocal";le.TRUNC="trunc";le.FWIDTH="fwidth";le.BITCAST="bitcast";le.TRANSPOSE="transpose";le.ATAN2="atan2";le.MIN="min";le.MAX="max";le.MOD="mod";le.STEP="step";le.REFLECT="reflect";le.DISTANCE="distance";le.DIFFERENCE="difference";le.DOT="dot";le.CROSS="cross";le.POW="pow";le.TRANSFORM_DIRECTION="transformDirection";le.MIX="mix";le.CLAMP="clamp";le.REFRACT="refract";le.SMOOTHSTEP="smoothstep";le.FACEFORWARD="faceforward";const yfe=Ae(1e-6),_fe=Ae(Math.PI),_k=Be(le,le.ALL),xfe=Be(le,le.ANY),bfe=Be(le,le.EQUALS),Sfe=Be(le,le.RADIANS),wfe=Be(le,le.DEGREES),xk=Be(le,le.EXP),wm=Be(le,le.EXP2),bk=Be(le,le.LOG),Da=Be(le,le.LOG2),jM=Be(le,le.SQRT),Efe=Be(le,le.INVERSE_SQRT),Qc=Be(le,le.FLOOR),WM=Be(le,le.CEIL),Em=Be(le,le.NORMALIZE),cc=Be(le,le.FRACT),cs=Be(le,le.SIN),Sl=Be(le,le.COS),Cfe=Be(le,le.TAN),Tfe=Be(le,le.ASIN),Mfe=Be(le,le.ACOS),Rfe=Be(le,le.ATAN),Lo=Be(le,le.ABS),Iy=Be(le,le.SIGN),jl=Be(le,le.LENGTH),Afe=Be(le,le.NEGATE),Nfe=Be(le,le.ONE_MINUS),Sk=Be(le,le.DFDX),wk=Be(le,le.DFDY),Pfe=Be(le,le.ROUND),Ofe=Be(le,le.RECIPROCAL),Ife=Be(le,le.TRUNC),Dfe=Be(le,le.FWIDTH);le.BITCAST;const Lfe=Be(le,le.TRANSPOSE),Ffe=Be(le,le.ATAN2),Cm=Be(le,le.MIN),Ji=Be(le,le.MAX),Ek=Be(le,le.MOD),Ck=Be(le,le.STEP),Ufe=Be(le,le.REFLECT),Bfe=Be(le,le.DISTANCE),$fe=Be(le,le.DIFFERENCE),qM=Be(le,le.DOT),Tk=Be(le,le.CROSS),ox=Be(le,le.POW),Mk=Be(le,le.POW,2),zfe=Be(le,le.POW,3),kfe=Be(le,le.POW,4),Vfe=Be(le,le.TRANSFORM_DIRECTION),Gfe=n=>sn(Iy(n),ox(Lo(n),1/3)),Hfe=n=>qM(n,n),Hn=Be(le,le.MIX),ja=(n,e=0,r=1)=>nt(new le(le.CLAMP,nt(n),nt(e),nt(r))),jfe=n=>ja(n),Rk=Be(le,le.REFRACT),pu=Be(le,le.SMOOTHSTEP),Wfe=Be(le,le.FACEFORWARD),qfe=at(([n])=>{const i=43758.5453,o=qM(n.xy,ft(12.9898,78.233)),s=Ek(o,_fe);return cc(cs(s).mul(i))}),Xfe=(n,e,r)=>Hn(e,r,n),Kfe=(n,e,r)=>pu(e,r,n);Ne("all",_k);Ne("any",xfe);Ne("equals",bfe);Ne("radians",Sfe);Ne("degrees",wfe);Ne("exp",xk);Ne("exp2",wm);Ne("log",bk);Ne("log2",Da);Ne("sqrt",jM);Ne("inverseSqrt",Efe);Ne("floor",Qc);Ne("ceil",WM);Ne("normalize",Em);Ne("fract",cc);Ne("sin",cs);Ne("cos",Sl);Ne("tan",Cfe);Ne("asin",Tfe);Ne("acos",Mfe);Ne("atan",Rfe);Ne("abs",Lo);Ne("sign",Iy);Ne("length",jl);Ne("lengthSq",Hfe);Ne("negate",Afe);Ne("oneMinus",Nfe);Ne("dFdx",Sk);Ne("dFdy",wk);Ne("round",Pfe);Ne("reciprocal",Ofe);Ne("trunc",Ife);Ne("fwidth",Dfe);Ne("atan2",Ffe);Ne("min",Cm);Ne("max",Ji);Ne("mod",Ek);Ne("step",Ck);Ne("reflect",Ufe);Ne("distance",Bfe);Ne("dot",qM);Ne("cross",Tk);Ne("pow",ox);Ne("pow2",Mk);Ne("pow3",zfe);Ne("pow4",kfe);Ne("transformDirection",Vfe);Ne("mix",Xfe);Ne("clamp",ja);Ne("refract",Rk);Ne("smoothstep",Kfe);Ne("faceForward",Wfe);Ne("difference",$fe);Ne("saturate",jfe);Ne("cbrt",Gfe);Ne("transpose",Lfe);Ne("rand",qfe);class Yfe extends Qt{static get type(){return"ConditionalNode"}constructor(e,r,i=null){super(),this.condNode=e,this.ifNode=r,this.elseNode=i}getNodeType(e){const r=this.ifNode.getNodeType(e);if(this.elseNode!==null){const i=this.elseNode.getNodeType(e);if(e.getTypeLength(i)>e.getTypeLength(r))return i}return r}setup(e){const r=this.condNode.cache(),i=this.ifNode.cache(),o=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(i).parentNodeBlock=s,o!==null&&(e.getDataFromNode(o).parentNodeBlock=s);const a=e.getNodeProperties(this);a.condNode=r,a.ifNode=i.context({nodeBlock:i}),a.elseNode=o?o.context({nodeBlock:o}):null}generate(e,r){const i=this.getNodeType(e),o=e.getDataFromNode(this);if(o.nodeProperty!==void 0)return o.nodeProperty;const{condNode:s,ifNode:a,elseNode:l}=e.getNodeProperties(this),c=r!=="void",u=c?Kde(i).build(e):"";o.nodeProperty=u;const d=s.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${d} ) {

`).addFlowTab();let f=a.build(e,i);if(f&&(c?f=u+" = "+f+";":f="return "+f+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+f+`

`+e.tab+"}"),l!==null){e.addFlowCode(` else {

`).addFlowTab();let h=l.build(e,i);h&&(c?h=u+" = "+h+";":h="return "+h+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+h+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(u,i,r)}}const Hi=Be(Yfe);Ne("select",Hi);const Qfe=(...n)=>(console.warn("TSL.ConditionalNode: cond() has been renamed to select()."),Hi(...n));Ne("cond",Qfe);class Ak extends Qt{static get type(){return"ContextNode"}constructor(e,r={}){super(),this.isContextNode=!0,this.node=e,this.value=r}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const r=e.getContext();e.setContext({...e.context,...this.value});const i=this.node.build(e);return e.setContext(r),i}generate(e,r){const i=e.getContext();e.setContext({...e.context,...this.value});const o=this.node.build(e,r);return e.setContext(i),o}}const XM=Be(Ak),Zfe=(n,e)=>XM(n,{label:e});Ne("context",XM);Ne("label",Zfe);class Nk extends Qt{static get type(){return"VarNode"}constructor(e,r=null){super(),this.node=e,this.name=r,this.global=!0,this.isVarNode=!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:r,name:i}=this,o=e.getVarFromNode(this,i,e.getVectorType(this.getNodeType(e))),s=e.getPropertyName(o),a=r.build(e,o.type);return e.addLineFlowCode(`${s} = ${a}`,this),s}}const Pk=Be(Nk);Ne("toVar",(...n)=>Pk(...n).append());const Jfe=n=>(console.warn('TSL: "temp" is deprecated. Use ".toVar()" instead.'),Pk(n));Ne("temp",Jfe);class ehe extends Qt{static get type(){return"VaryingNode"}constructor(e,r=null){super(),this.node=e,this.name=r,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const r=e.getNodeProperties(this);let i=r.varying;if(i===void 0){const o=this.name,s=this.getNodeType(e);r.varying=i=e.getVaryingFromNode(this,o,s),r.node=this.node}return i.needsInterpolation||(i.needsInterpolation=e.shaderStage==="fragment"),i}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const r=e.getNodeProperties(this),i=this.setupVarying(e);if(r.propertyName===void 0){const o=this.getNodeType(e),s=e.getPropertyName(i,HO.VERTEX);e.flowNodeFromShaderStage(HO.VERTEX,this.node,o,s),r.propertyName=s}return e.getPropertyName(i)}}const Ja=Be(ehe);Ne("varying",Ja);const the=at(([n])=>{const e=n.mul(.9478672986).add(.0521327014).pow(2.4),r=n.mul(.0773993808),i=n.lessThanEqual(.04045);return Hn(e,r,i)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),nhe=at(([n])=>{const e=n.pow(.41666).mul(1.055).sub(.055),r=n.mul(12.92),i=n.lessThanEqual(.0031308);return Hn(e,r,i)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),og="WorkingColorSpace",KM="OutputColorSpace";class sx extends Mr{static get type(){return"ColorSpaceNode"}constructor(e,r,i){super("vec4"),this.colorNode=e,this.source=r,this.target=i}resolveColorSpace(e,r){return r===og?rn.workingColorSpace:r===KM?e.context.outputColorSpace||e.renderer.outputColorSpace:r}setup(e){const{colorNode:r}=this,i=this.resolveColorSpace(e,this.source),o=this.resolveColorSpace(e,this.target);let s=r;return rn.enabled===!1||i===o||!i||!o||(rn.getTransfer(i)===Tn&&(s=Kt(the(s.rgb),s.a)),rn.getPrimaries(i)!==rn.getPrimaries(o)&&(s=Kt(Ai(rn._getMatrix(new kt,i,o)).mul(s.rgb),s.a)),rn.getTransfer(o)===Tn&&(s=Kt(nhe(s.rgb),s.a))),s}}const rhe=n=>nt(new sx(nt(n),og,KM)),ihe=n=>nt(new sx(nt(n),KM,og)),ohe=(n,e)=>nt(new sx(nt(n),og,e)),Ok=(n,e)=>nt(new sx(nt(n),e,og));Ne("toOutputColorSpace",rhe);Ne("toWorkingColorSpace",ihe);Ne("workingToColorSpace",ohe);Ne("colorSpaceToWorking",Ok);let she=class extends rg{static get type(){return"ReferenceElementNode"}constructor(e,r){super(e,r),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const r=super.generate(e),i=this.referenceNode.getNodeType(),o=this.getNodeType();return e.format(r,i,o)}};class Ik extends Qt{static get type(){return"ReferenceBaseNode"}constructor(e,r,i=null,o=null){super(),this.property=e,this.uniformType=r,this.object=i,this.count=o,this.properties=e.split("."),this.reference=i,this.node=null,this.group=null,this.updateType=on.OBJECT}setGroup(e){return this.group=e,this}element(e){return nt(new she(this,nt(e)))}setNodeType(e){const r=qt(null,e).getSelf();this.group!==null&&r.setGroup(this.group),this.node=r}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:r}=this;let i=e[r[0]];for(let o=1;o<r.length;o++)i=i[r[o]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const ahe=(n,e,r)=>nt(new Ik(n,e,r));class lhe extends Ik{static get type(){return"RendererReferenceNode"}constructor(e,r,i=null){super(e,r,i),this.renderer=i,this.setGroup(Ht)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const che=(n,e,r)=>nt(new lhe(n,e,r));class uhe extends Mr{static get type(){return"ToneMappingNode"}constructor(e,r=fhe,i=null){super("vec3"),this.toneMapping=e,this.exposureNode=r,this.colorNode=i}getCacheKey(){return ek(super.getCacheKey(),this.toneMapping)}setup(e){const r=this.colorNode||e.context.color,i=this.toneMapping;if(i===Qi)return r;let o=null;const s=e.renderer.library.getToneMappingFunction(i);return s!==null?o=Kt(s(r.rgb,this.exposureNode),r.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",i),o=r),o}}const dhe=(n,e,r)=>nt(new uhe(n,nt(e),nt(r))),fhe=che("toneMappingExposure","float");Ne("toneMapping",(n,e,r)=>dhe(e,r,n));class hhe extends BM{static get type(){return"BufferAttributeNode"}constructor(e,r=null,i=0,o=0){super(e,r),this.isBufferNode=!0,this.bufferType=r,this.bufferStride=i,this.bufferOffset=o,this.usage=uy,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let r=e.globalCache.getData(this.value);return r===void 0&&(r={node:this},e.globalCache.setData(this.value,r)),r.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const r=this.getNodeType(e),i=this.value,o=e.getTypeLength(r),s=this.bufferStride||o,a=this.bufferOffset,l=i.isInterleavedBuffer===!0?i:new U$(i,s),c=new hM(l,o,a);l.setUsage(this.usage),this.attribute=c,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const r=this.getNodeType(e),i=e.getBufferAttributeFromNode(this,r),o=e.getPropertyName(i);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=o,s=o):s=Ja(this).build(e,r),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const YM=(n,e,r,i)=>nt(new hhe(n,e,r,i)),phe=(n,e,r,i)=>YM(n,e,r,i).setUsage(bd),eI=(n,e,r,i)=>YM(n,e,r,i).setInstanced(!0),tI=(n,e,r,i)=>phe(n,e,r,i).setInstanced(!0);Ne("toAttribute",n=>YM(n.value));class mhe extends Qt{static get type(){return"ComputeNode"}constructor(e,r,i=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=r,this.workgroupSize=i,this.dispatchCount=0,this.version=1,this.updateBeforeType=on.OBJECT,this.onInitFunction=null,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:r}=this;let i=r[0];for(let o=1;o<r.length;o++)i*=r[o];this.dispatchCount=Math.ceil(e/i)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}generate(e){const{shaderStage:r}=e;if(r==="compute"){const i=this.computeNode.build(e,"void");i!==""&&e.addLineFlowCode(i,this)}}}const ghe=(n,e,r)=>nt(new mhe(nt(n),e,r));Ne("compute",ghe);class vhe extends Qt{static get type(){return"CacheNode"}constructor(e,r=!0){super(),this.node=e,this.parent=r,this.isCacheNode=!0}getNodeType(e){return this.node.getNodeType(e)}build(e,...r){const i=e.getCache(),o=e.getCacheFromNode(this,this.parent);e.setCache(o);const s=this.node.build(e,...r);return e.setCache(i),s}}const g0=(n,...e)=>nt(new vhe(nt(n),...e));Ne("cache",g0);class yhe extends Qt{static get type(){return"BypassNode"}constructor(e,r){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=r}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const r=this.callNode.build(e,"void");return r!==""&&e.addLineFlowCode(r,this),this.outputNode.build(e)}}const _he=Be(yhe);Ne("bypass",_he);class Dk extends Qt{static get type(){return"RemapNode"}constructor(e,r,i,o=Ae(0),s=Ae(1)){super(),this.node=e,this.inLowNode=r,this.inHighNode=i,this.outLowNode=o,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:r,inHighNode:i,outLowNode:o,outHighNode:s,doClamp:a}=this;let l=e.sub(r).div(i.sub(r));return a===!0&&(l=l.clamp()),l.mul(s.sub(o)).add(o)}}const xhe=Be(Dk,null,null,{doClamp:!1}),bhe=Be(Dk);Ne("remap",xhe);Ne("remapClamp",bhe);class Lk extends Qt{static get type(){return"ExpressionNode"}constructor(e="",r="void"){super(r),this.snippet=e}generate(e,r){const i=this.getNodeType(e),o=this.snippet;if(i==="void")e.addLineFlowCode(o,this);else return e.format(`( ${o} )`,i,r)}}const Tm=Be(Lk),She=n=>(n?Hi(n,Tm("discard")):Tm("discard")).append();Ne("discard",She);class whe extends Mr{static get type(){return"RenderOutputNode"}constructor(e,r,i){super("vec4"),this.colorNode=e,this.toneMapping=r,this.outputColorSpace=i,this.isRenderOutput=!0}setup({context:e}){let r=this.colorNode||e.color;const i=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||Qi,o=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||mo;return i!==Qi&&(r=r.toneMapping(i)),o!==mo&&o!==rn.workingColorSpace&&(r=r.workingToColorSpace(o)),r}}const Ehe=(n,e=null,r=null)=>nt(new whe(nt(n),e,r));Ne("renderOutput",Ehe);class Che extends Qt{static get type(){return"AttributeNode"}constructor(e,r=null){super(r),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let r=this.nodeType;if(r===null){const i=this.getAttributeName(e);if(e.hasGeometryAttribute(i)){const o=e.geometry.getAttribute(i);r=e.getTypeFromAttribute(o)}else r="float"}return r}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const r=this.getAttributeName(e),i=this.getNodeType(e);if(e.hasGeometryAttribute(r)===!0){const s=e.geometry.getAttribute(r),a=e.getTypeFromAttribute(s),l=e.getAttribute(r,a);return e.shaderStage==="vertex"?e.format(l.name,a,i):Ja(this).build(e,i)}else return console.warn(`AttributeNode: Vertex attribute "${r}" not found on geometry.`),e.generateConst(i)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const Wa=(n,e)=>nt(new Che(n,e)),ax=n=>Wa("uv"+(n>0?n:""),"vec2");class The extends Qt{static get type(){return"TextureSizeNode"}constructor(e,r=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=r}generate(e,r){const i=this.textureNode.build(e,"property"),o=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${i}, ${o} )`,this.getNodeType(e),r)}}const Sp=Be(The);class Mhe extends ig{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=on.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,r=e.images,i=r&&r.length>0?r[0]&&r[0].image||r[0]:e.image;if(i&&i.width!==void 0){const{width:o,height:s}=i;this.value=Math.log2(Math.max(o,s))}}}const Rhe=Be(Mhe);class sg extends ig{static get type(){return"TextureNode"}constructor(e,r=null,i=null,o=null){super(e),this.isTextureNode=!0,this.uvNode=r,this.levelNode=i,this.biasNode=o,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=on.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(r===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===rr?"uvec4":this.value.type===Xr?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return ax(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=qt(this.value.matrix)),this._matrixUniform.mul(Ie(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?on.FRAME:on.NONE,this}setupUV(e,r){const i=this.value;return e.isFlipY()&&(i.image instanceof ImageBitmap&&i.flipY===!0||i.isRenderTargetTexture===!0||i.isFramebufferTexture===!0||i.isDepthTexture===!0)&&(this.sampler?r=r.flipY():r=r.setY(cr(Sp(this,this.levelNode).y).sub(r.y).sub(1))),r}setup(e){const r=e.getNodeProperties(this);r.referenceNode=this.referenceNode;let i=this.uvNode;(i===null||e.context.forceUVContext===!0)&&e.context.getUV&&(i=e.context.getUV(this)),i||(i=this.getDefaultUV()),this.updateMatrix===!0&&(i=this.getTransformedUV(i)),i=this.setupUV(e,i);let o=this.levelNode;o===null&&e.context.getTextureLevel&&(o=e.context.getTextureLevel(this)),r.uvNode=i,r.levelNode=o,r.biasNode=this.biasNode,r.compareNode=this.compareNode,r.gradNode=this.gradNode,r.depthNode=this.depthNode}generateUV(e,r){return r.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,r,i,o,s,a,l,c){const u=this.value;let d;return o?d=e.generateTextureLevel(u,r,i,o,a):s?d=e.generateTextureBias(u,r,i,s,a):c?d=e.generateTextureGrad(u,r,i,c,a):l?d=e.generateTextureCompare(u,r,i,l,a):this.sampler===!1?d=e.generateTextureLoad(u,r,i,a):d=e.generateTexture(u,r,i,a),d}generate(e,r){const i=e.getNodeProperties(this),o=this.value;if(!o||o.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const s=super.generate(e,"property");if(r==="sampler")return s+"_sampler";if(e.isReference(r))return s;{const a=e.getDataFromNode(this);let l=a.propertyName;if(l===void 0){const{uvNode:d,levelNode:f,biasNode:h,compareNode:p,depthNode:g,gradNode:y}=i,v=this.generateUV(e,d),m=f?f.build(e,"float"):null,_=h?h.build(e,"float"):null,x=g?g.build(e,"int"):null,S=p?p.build(e,"float"):null,w=y?[y[0].build(e,"vec2"),y[1].build(e,"vec2")]:null,E=e.getVarFromNode(this);l=e.getPropertyName(E);const C=this.generateSnippet(e,s,v,m,_,x,S,w);e.addLineFlowCode(`${l} = ${C}`,this),a.snippet=C,a.propertyName=l}let c=l;const u=this.getNodeType(e);return e.needsToWorkingColorSpace(o)&&(c=Ok(Tm(c,u),o.colorSpace).setup(e).build(e,u)),e.format(c,u,r)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){const r=this.clone();return r.uvNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}blur(e){const r=this.clone();return r.biasNode=nt(e).mul(Rhe(r)),r.referenceNode=this.getSelf(),nt(r)}level(e){const r=this.clone();return r.levelNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}size(e){return Sp(this,e)}bias(e){const r=this.clone();return r.biasNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}compare(e){const r=this.clone();return r.compareNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}grad(e,r){const i=this.clone();return i.gradNode=[nt(e),nt(r)],i.referenceNode=this.getSelf(),nt(i)}depth(e){const r=this.clone();return r.depthNode=nt(e),r.referenceNode=this.getSelf(),nt(r)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,r=this._matrixUniform;r!==null&&(r.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const mn=Be(sg),ts=(...n)=>mn(...n).setSampler(!1),Ic=qt("float").label("cameraNear").setGroup(Ht).onRenderUpdate(({camera:n})=>n.near),Dc=qt("float").label("cameraFar").setGroup(Ht).onRenderUpdate(({camera:n})=>n.far),Dy=qt("mat4").label("cameraProjectionMatrix").setGroup(Ht).onRenderUpdate(({camera:n})=>n.projectionMatrix),el=qt("mat4").label("cameraViewMatrix").setGroup(Ht).onRenderUpdate(({camera:n})=>n.matrixWorldInverse),Ahe=qt(new K).label("cameraPosition").setGroup(Ht).onRenderUpdate(({camera:n},e)=>e.value.setFromMatrixPosition(n.matrixWorld));class _n extends Qt{static get type(){return"Object3DNode"}constructor(e,r=null){super(),this.scope=e,this.object3d=r,this.updateType=on.OBJECT,this._uniformNode=new ig(null)}getNodeType(){const e=this.scope;if(e===_n.WORLD_MATRIX)return"mat4";if(e===_n.POSITION||e===_n.VIEW_POSITION||e===_n.DIRECTION||e===_n.SCALE)return"vec3"}update(e){const r=this.object3d,i=this._uniformNode,o=this.scope;if(o===_n.WORLD_MATRIX)i.value=r.matrixWorld;else if(o===_n.POSITION)i.value=i.value||new K,i.value.setFromMatrixPosition(r.matrixWorld);else if(o===_n.SCALE)i.value=i.value||new K,i.value.setFromMatrixScale(r.matrixWorld);else if(o===_n.DIRECTION)i.value=i.value||new K,r.getWorldDirection(i.value);else if(o===_n.VIEW_POSITION){const s=e.camera;i.value=i.value||new K,i.value.setFromMatrixPosition(r.matrixWorld),i.value.applyMatrix4(s.matrixWorldInverse)}}generate(e){const r=this.scope;return r===_n.WORLD_MATRIX?this._uniformNode.nodeType="mat4":(r===_n.POSITION||r===_n.VIEW_POSITION||r===_n.DIRECTION||r===_n.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}_n.WORLD_MATRIX="worldMatrix";_n.POSITION="position";_n.SCALE="scale";_n.VIEW_POSITION="viewPosition";_n.DIRECTION="direction";_n.DIRECTION;_n.WORLD_MATRIX;const Nhe=Be(_n,_n.POSITION);_n.SCALE;_n.VIEW_POSITION;class Ks extends _n{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}Ks.DIRECTION;const mu=lt(Ks,Ks.WORLD_MATRIX);Ks.POSITION;Ks.SCALE;Ks.VIEW_POSITION;const Phe=qt(new kt).onObjectUpdate(({object:n},e)=>e.value.getNormalMatrix(n.matrixWorld)),lx=el.mul(mu).toVar("modelViewMatrix"),Fk=Wa("position","vec3"),ii=Fk.varying("positionLocal"),nI=Fk.varying("positionPrevious"),Mm=mu.mul(ii).xyz.varying("v_positionWorld"),Uk=ii.transformDirection(mu).varying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),Lr=lx.mul(ii).xyz.varying("v_positionView"),ir=Lr.negate().varying("v_positionViewDirection").normalize().toVar("positionViewDirection");class Ohe extends Qt{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:r,material:i}=e;return r.coordinateSystem===Bo&&i.side===er?"false":e.getFrontFacing()}}const Ihe=lt(Ohe),cx=Ae(Ihe).mul(2).sub(1),Bk=Wa("normal","vec3"),Ys=at(n=>n.geometry.hasAttribute("normal")===!1?(console.warn('TSL.NormalNode: Vertex attribute "normal" not found on geometry.'),Ie(0,1,0)):Bk,"vec3").once()().toVar("normalLocal"),Dhe=Lr.dFdx().cross(Lr.dFdy()).normalize().toVar("normalFlat"),ws=at(n=>{let e;return n.material.flatShading===!0?e=Dhe:e=Ja(zk(Ys),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),$k=Ja(ws.transformDirection(el),"v_normalWorld").normalize().toVar("normalWorld"),Sr=at(n=>n.context.setupNormal(),"vec3").once()().mul(cx).toVar("transformedNormalView"),QM=Sr.transformDirection(el).toVar("transformedNormalWorld"),ep=at(n=>n.context.setupClearcoatNormal(),"vec3").once()().mul(cx).toVar("transformedClearcoatNormalView"),Lhe=at(([n,e=mu])=>{const r=Ai(e),i=n.div(Ie(r[0].dot(r[0]),r[1].dot(r[1]),r[2].dot(r[2])));return r.mul(i).xyz}),zk=at(([n],e)=>{const r=e.renderer.nodes.modelNormalViewMatrix;if(r!==null)return r.transformDirection(n);const i=Phe.mul(n);return el.transformDirection(i)}),Fhe=qt(0).onReference(({material:n})=>n).onRenderUpdate(({material:n})=>n.refractionRatio),Uhe=ir.negate().reflect(Sr),Bhe=ir.negate().refract(Sr,Fhe),$he=Uhe.transformDirection(el).toVar("reflectVector"),zhe=Bhe.transformDirection(el).toVar("reflectVector");class khe extends sg{static get type(){return"CubeTextureNode"}constructor(e,r=null,i=null,o=null){super(e,r,i,o),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===Wo?$he:e.mapping===qo?zhe:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),Ie(0,0,0))}setUpdateMatrix(){}setupUV(e,r){const i=this.value;return e.renderer.coordinateSystem===fu||!i.isRenderTargetTexture?Ie(r.x.negate(),r.yz):r}generateUV(e,r){return r.build(e,"vec3")}}const Rm=Be(khe);class kk extends ig{static get type(){return"BufferNode"}constructor(e,r,i=0){super(e,r),this.isBufferNode=!0,this.bufferType=r,this.bufferCount=i}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const ZM=(n,e,r)=>nt(new kk(n,e,r));class Vhe extends rg{static get type(){return"UniformArrayElementNode"}constructor(e,r){super(e,r),this.isArrayBufferElementNode=!0}generate(e){const r=super.generate(e),i=this.getNodeType();return e.format(r,"vec4",i)}}class Ghe extends kk{static get type(){return"UniformArrayNode"}constructor(e,r=null){super(null,"vec4"),this.array=e,this.elementType=r,this._elementType=null,this._elementLength=0,this.updateType=on.RENDER,this.isArrayBufferNode=!0}getElementType(){return this.elementType||this._elementType}getElementLength(){return this._elementLength}update(){const{array:e,value:r}=this,i=this.getElementLength(),o=this.getElementType();if(i===1)for(let s=0;s<e.length;s++){const a=s*4;r[a]=e[s]}else if(o==="color")for(let s=0;s<e.length;s++){const a=s*4,l=e[s];r[a]=l.r,r[a+1]=l.g,r[a+2]=l.b||0}else for(let s=0;s<e.length;s++){const a=s*4,l=e[s];r[a]=l.x,r[a+1]=l.y,r[a+2]=l.z||0,r[a+3]=l.w||0}}setup(e){const r=this.array.length;this._elementType=this.elementType===null?My(this.array[0]):this.elementType,this._elementLength=e.getTypeLength(this._elementType);let i=Float32Array;return this._elementType.charAt(0)==="i"?i=Int32Array:this._elementType.charAt(0)==="u"&&(i=Uint32Array),this.value=new i(r*4),this.bufferCount=r,this.bufferType=e.changeComponentType("vec4",e.getComponentType(this._elementType)),super.setup(e)}element(e){return nt(new Vhe(this,nt(e)))}}const Cl=(n,e)=>nt(new Ghe(n,e));class Hhe extends rg{static get type(){return"ReferenceElementNode"}constructor(e,r){super(e,r),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const r=super.generate(e),i=this.referenceNode.getNodeType(),o=this.getNodeType();return e.format(r,i,o)}}class JM extends Qt{static get type(){return"ReferenceNode"}constructor(e,r,i=null,o=null){super(),this.property=e,this.uniformType=r,this.object=i,this.count=o,this.properties=e.split("."),this.reference=i,this.node=null,this.group=null,this.name=null,this.updateType=on.OBJECT}element(e){return nt(new Hhe(this,nt(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let r=null;this.count!==null?r=ZM(null,e,this.count):Array.isArray(this.getValueFromReference())?r=Cl(null,e):e==="texture"?r=mn(null):e==="cubeTexture"?r=Rm(null):r=qt(null,e),this.group!==null&&r.setGroup(this.group),this.name!==null&&r.label(this.name),this.node=r.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:r}=this;let i=e[r[0]];for(let o=1;o<r.length;o++)i=i[r[o]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const An=(n,e,r)=>nt(new JM(n,e,r)),rI=(n,e,r,i)=>nt(new JM(n,e,i,r));class jhe extends JM{static get type(){return"MaterialReferenceNode"}constructor(e,r,i=null){super(e,r,i),this.material=i,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const Tl=(n,e,r)=>nt(new jhe(n,e,r)),Vk=at(n=>(n.geometry.hasAttribute("tangent")===!1&&n.geometry.computeTangents(),Wa("tangent","vec4")))(),eR=Vk.xyz.toVar("tangentLocal"),Gk=lx.mul(Kt(eR,0)).xyz.varying("v_tangentView").normalize().toVar("tangentView"),Whe=n=>n.mul(Vk.w).xyz,qhe=Ja(Whe(ws.cross(Gk)),"v_bitangentView").normalize().toVar("bitangentView"),tp=Ai(Gk,qhe,ws),Xhe=(()=>{let n=Vd.cross(ir);return n=n.cross(Vd).normalize(),n=Hn(n,Sr,Tc.mul(Sa.oneMinus()).oneMinus().pow2().pow2()).normalize(),n})(),Khe=at(n=>{const{eye_pos:e,surf_norm:r,mapN:i,uv:o}=n,s=e.dFdx(),a=e.dFdy(),l=o.dFdx(),c=o.dFdy(),u=r,d=a.cross(u),f=u.cross(s),h=d.mul(l.x).add(f.mul(c.x)),p=d.mul(l.y).add(f.mul(c.y)),g=h.dot(h).max(p.dot(p)),y=cx.mul(g.inverseSqrt());return Ni(h.mul(i.x,y),p.mul(i.y,y),u.mul(i.z)).normalize()});class Yhe extends Mr{static get type(){return"NormalMapNode"}constructor(e,r=null){super("vec3"),this.node=e,this.scaleNode=r,this.normalMapType=Ga}setup(e){const{normalMapType:r,scaleNode:i}=this;let o=this.node.mul(2).sub(1);i!==null&&(o=Ie(o.xy.mul(i),o.z));let s=null;return r===M$?s=zk(o):r===Ga&&(e.hasGeometryAttribute("tangent")===!0?s=tp.mul(o).normalize():s=Khe({eye_pos:Lr,surf_norm:ws,mapN:o,uv:ax()})),s}}const iI=Be(Yhe),Qhe=at(({textureNode:n,bumpScale:e})=>{const r=o=>n.cache().context({getUV:s=>o(s.uvNode||ax()),forceUVContext:!0}),i=Ae(r(o=>o));return ft(Ae(r(o=>o.add(o.dFdx()))).sub(i),Ae(r(o=>o.add(o.dFdy()))).sub(i)).mul(e)}),Zhe=at(n=>{const{surf_pos:e,surf_norm:r,dHdxy:i}=n,o=e.dFdx().normalize(),s=e.dFdy().normalize(),a=r,l=s.cross(a),c=a.cross(o),u=o.dot(l).mul(cx),d=u.sign().mul(i.x.mul(l).add(i.y.mul(c)));return u.abs().mul(r).sub(d).normalize()});class Jhe extends Mr{static get type(){return"BumpMapNode"}constructor(e,r=null){super("vec3"),this.textureNode=e,this.scaleNode=r}setup(){const e=this.scaleNode!==null?this.scaleNode:1,r=Qhe({textureNode:this.textureNode,bumpScale:e});return Zhe({surf_pos:Lr,surf_norm:ws,dHdxy:r})}}const epe=Be(Jhe),oI=new Map;class Te extends Qt{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,r){let i=oI.get(e);return i===void 0&&(i=Tl(e,r),oI.set(e,i)),i}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const r=e.context.material,i=this.scope;let o=null;if(i===Te.COLOR){const s=r.color!==void 0?this.getColor(i):Ie();r.map&&r.map.isTexture===!0?o=s.mul(this.getTexture("map")):o=s}else if(i===Te.OPACITY){const s=this.getFloat(i);r.alphaMap&&r.alphaMap.isTexture===!0?o=s.mul(this.getTexture("alpha")):o=s}else if(i===Te.SPECULAR_STRENGTH)r.specularMap&&r.specularMap.isTexture===!0?o=this.getTexture("specular").r:o=Ae(1);else if(i===Te.SPECULAR_INTENSITY){const s=this.getFloat(i);r.specularMap?o=s.mul(this.getTexture(i).a):o=s}else if(i===Te.SPECULAR_COLOR){const s=this.getColor(i);r.specularColorMap&&r.specularColorMap.isTexture===!0?o=s.mul(this.getTexture(i).rgb):o=s}else if(i===Te.ROUGHNESS){const s=this.getFloat(i);r.roughnessMap&&r.roughnessMap.isTexture===!0?o=s.mul(this.getTexture(i).g):o=s}else if(i===Te.METALNESS){const s=this.getFloat(i);r.metalnessMap&&r.metalnessMap.isTexture===!0?o=s.mul(this.getTexture(i).b):o=s}else if(i===Te.EMISSIVE){const s=this.getFloat("emissiveIntensity"),a=this.getColor(i).mul(s);r.emissiveMap&&r.emissiveMap.isTexture===!0?o=a.mul(this.getTexture(i)):o=a}else if(i===Te.NORMAL)r.normalMap?(o=iI(this.getTexture("normal"),this.getCache("normalScale","vec2")),o.normalMapType=r.normalMapType):r.bumpMap?o=epe(this.getTexture("bump").r,this.getFloat("bumpScale")):o=ws;else if(i===Te.CLEARCOAT){const s=this.getFloat(i);r.clearcoatMap&&r.clearcoatMap.isTexture===!0?o=s.mul(this.getTexture(i).r):o=s}else if(i===Te.CLEARCOAT_ROUGHNESS){const s=this.getFloat(i);r.clearcoatRoughnessMap&&r.clearcoatRoughnessMap.isTexture===!0?o=s.mul(this.getTexture(i).r):o=s}else if(i===Te.CLEARCOAT_NORMAL)r.clearcoatNormalMap?o=iI(this.getTexture(i),this.getCache(i+"Scale","vec2")):o=ws;else if(i===Te.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));r.sheenColorMap&&r.sheenColorMap.isTexture===!0?o=s.mul(this.getTexture("sheenColor").rgb):o=s}else if(i===Te.SHEEN_ROUGHNESS){const s=this.getFloat(i);r.sheenRoughnessMap&&r.sheenRoughnessMap.isTexture===!0?o=s.mul(this.getTexture(i).a):o=s,o=o.clamp(.07,1)}else if(i===Te.ANISOTROPY)if(r.anisotropyMap&&r.anisotropyMap.isTexture===!0){const s=this.getTexture(i);o=VM(Ah.x,Ah.y,Ah.y.negate(),Ah.x).mul(s.rg.mul(2).sub(ft(1)).normalize().mul(s.b))}else o=Ah;else if(i===Te.IRIDESCENCE_THICKNESS){const s=An("1","float",r.iridescenceThicknessRange);if(r.iridescenceThicknessMap){const a=An("0","float",r.iridescenceThicknessRange);o=s.sub(a).mul(this.getTexture(i).g).add(a)}else o=s}else if(i===Te.TRANSMISSION){const s=this.getFloat(i);r.transmissionMap?o=s.mul(this.getTexture(i).r):o=s}else if(i===Te.THICKNESS){const s=this.getFloat(i);r.thicknessMap?o=s.mul(this.getTexture(i).g):o=s}else if(i===Te.IOR)o=this.getFloat(i);else if(i===Te.LIGHT_MAP)o=this.getTexture(i).rgb.mul(this.getFloat("lightMapIntensity"));else if(i===Te.AO_MAP)o=this.getTexture(i).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const s=this.getNodeType(e);o=this.getCache(i,s)}return o}}Te.ALPHA_TEST="alphaTest";Te.COLOR="color";Te.OPACITY="opacity";Te.SHININESS="shininess";Te.SPECULAR="specular";Te.SPECULAR_STRENGTH="specularStrength";Te.SPECULAR_INTENSITY="specularIntensity";Te.SPECULAR_COLOR="specularColor";Te.REFLECTIVITY="reflectivity";Te.ROUGHNESS="roughness";Te.METALNESS="metalness";Te.NORMAL="normal";Te.CLEARCOAT="clearcoat";Te.CLEARCOAT_ROUGHNESS="clearcoatRoughness";Te.CLEARCOAT_NORMAL="clearcoatNormal";Te.EMISSIVE="emissive";Te.ROTATION="rotation";Te.SHEEN="sheen";Te.SHEEN_ROUGHNESS="sheenRoughness";Te.ANISOTROPY="anisotropy";Te.IRIDESCENCE="iridescence";Te.IRIDESCENCE_IOR="iridescenceIOR";Te.IRIDESCENCE_THICKNESS="iridescenceThickness";Te.IOR="ior";Te.TRANSMISSION="transmission";Te.THICKNESS="thickness";Te.ATTENUATION_DISTANCE="attenuationDistance";Te.ATTENUATION_COLOR="attenuationColor";Te.LINE_SCALE="scale";Te.LINE_DASH_SIZE="dashSize";Te.LINE_GAP_SIZE="gapSize";Te.LINE_WIDTH="linewidth";Te.LINE_DASH_OFFSET="dashOffset";Te.POINT_WIDTH="pointWidth";Te.DISPERSION="dispersion";Te.LIGHT_MAP="light";Te.AO_MAP="ao";const tpe=lt(Te,Te.ALPHA_TEST),npe=lt(Te,Te.COLOR),rpe=lt(Te,Te.SHININESS),ipe=lt(Te,Te.EMISSIVE),Hk=lt(Te,Te.OPACITY),ope=lt(Te,Te.SPECULAR),sI=lt(Te,Te.SPECULAR_INTENSITY),spe=lt(Te,Te.SPECULAR_COLOR),v0=lt(Te,Te.SPECULAR_STRENGTH),TS=lt(Te,Te.REFLECTIVITY),ape=lt(Te,Te.ROUGHNESS),lpe=lt(Te,Te.METALNESS),cpe=lt(Te,Te.NORMAL).context({getUV:null}),upe=lt(Te,Te.CLEARCOAT),dpe=lt(Te,Te.CLEARCOAT_ROUGHNESS),fpe=lt(Te,Te.CLEARCOAT_NORMAL).context({getUV:null}),hpe=lt(Te,Te.ROTATION),ppe=lt(Te,Te.SHEEN),mpe=lt(Te,Te.SHEEN_ROUGHNESS),gpe=lt(Te,Te.ANISOTROPY),vpe=lt(Te,Te.IRIDESCENCE),ype=lt(Te,Te.IRIDESCENCE_IOR),_pe=lt(Te,Te.IRIDESCENCE_THICKNESS),xpe=lt(Te,Te.TRANSMISSION),bpe=lt(Te,Te.THICKNESS),Spe=lt(Te,Te.IOR),wpe=lt(Te,Te.ATTENUATION_DISTANCE),Epe=lt(Te,Te.ATTENUATION_COLOR),Cpe=lt(Te,Te.LINE_SCALE),Tpe=lt(Te,Te.LINE_DASH_SIZE),Mpe=lt(Te,Te.LINE_GAP_SIZE);Te.LINE_WIDTH;const Rpe=lt(Te,Te.LINE_DASH_OFFSET);Te.POINT_WIDTH;const Ape=lt(Te,Te.DISPERSION),jk=lt(Te,Te.LIGHT_MAP),Npe=lt(Te,Te.AO_MAP),Ah=qt(new je).onReference(function(n){return n.material}).onRenderUpdate(function({material:n}){this.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation))});class Ppe extends Mr{static get type(){return"ModelViewProjectionNode"}constructor(e=null){super("vec4"),this.positionNode=e}setup(e){if(e.shaderStage==="fragment")return Ja(e.context.mvp);const r=this.positionNode||ii,i=e.renderer.nodes.modelViewMatrix||lx;return Dy.mul(i).mul(r)}}const Wk=Be(Ppe);class jn extends Qt{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const r=this.getNodeType(e),i=this.scope;let o;if(i===jn.VERTEX)o=e.getVertexIndex();else if(i===jn.INSTANCE)o=e.getInstanceIndex();else if(i===jn.DRAW)o=e.getDrawIndex();else if(i===jn.INVOCATION_LOCAL)o=e.getInvocationLocalIndex();else if(i===jn.INVOCATION_SUBGROUP)o=e.getInvocationSubgroupIndex();else if(i===jn.SUBGROUP)o=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+i);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=o:s=Ja(this).build(e,r),s}}jn.VERTEX="vertex";jn.INSTANCE="instance";jn.SUBGROUP="subgroup";jn.INVOCATION_LOCAL="invocationLocal";jn.INVOCATION_SUBGROUP="invocationSubgroup";jn.DRAW="draw";const Ope=lt(jn,jn.VERTEX),tR=lt(jn,jn.INSTANCE);jn.SUBGROUP;jn.INVOCATION_SUBGROUP;jn.INVOCATION_LOCAL;const Ipe=lt(jn,jn.DRAW);class Dpe extends Qt{static get type(){return"InstanceNode"}constructor(e,r,i){super("void"),this.count=e,this.instanceMatrix=r,this.instanceColor=i,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=on.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{count:r,instanceMatrix:i,instanceColor:o}=this;let{instanceMatrixNode:s,instanceColorNode:a}=this;if(s===null){if(r<=1e3)s=ZM(i.array,"mat4",Math.max(r,1)).element(tR);else{const c=new Xte(i.array,16,1);this.buffer=c;const u=i.usage===bd?tI:eI,d=[u(c,"vec4",16,0),u(c,"vec4",16,4),u(c,"vec4",16,8),u(c,"vec4",16,12)];s=kd(...d)}this.instanceMatrixNode=s}if(o&&a===null){const c=new ote(o.array,3),u=o.usage===bd?tI:eI;this.bufferColor=c,a=Ie(u(c,"vec3",3,0)),this.instanceColorNode=a}const l=s.mul(ii).xyz;if(ii.assign(l),e.hasGeometryAttribute("normal")){const c=Lhe(Ys,s);Ys.assign(c)}this.instanceColorNode!==null&&Ay("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==bd&&this.buffer!=null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==bd&&this.bufferColor!=null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}class Lpe extends Dpe{static get type(){return"InstancedMeshNode"}constructor(e){const{count:r,instanceMatrix:i,instanceColor:o}=e;super(r,i,o),this.instanceMesh=e}}const Fpe=Be(Lpe);class Upe extends Qt{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=tR:this.batchingIdNode=Ipe);const i=at(([g])=>{const y=Sp(ts(this.batchMesh._indirectTexture),0),v=cr(g).modInt(cr(y)),m=cr(g).div(cr(y));return ts(this.batchMesh._indirectTexture,ya(v,m)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(cr(this.batchingIdNode)),o=this.batchMesh._matricesTexture,s=Sp(ts(o),0),a=Ae(i).mul(4).toInt().toVar(),l=a.modInt(s),c=a.div(cr(s)),u=kd(ts(o,ya(l,c)),ts(o,ya(l.add(1),c)),ts(o,ya(l.add(2),c)),ts(o,ya(l.add(3),c))),d=this.batchMesh._colorsTexture;if(d!==null){const y=at(([v])=>{const m=Sp(ts(d),0).x,_=v,x=_.modInt(m),S=_.div(m);return ts(d,ya(x,S)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(i);Ay("vec3","vBatchColor").assign(y)}const f=Ai(u);ii.assign(u.mul(ii));const h=Ys.div(Ie(f[0].dot(f[0]),f[1].dot(f[1]),f[2].dot(f[2]))),p=f.mul(h).xyz;Ys.assign(p),e.hasGeometryAttribute("tangent")&&eR.mulAssign(f)}}const Bpe=Be(Upe),aI=new WeakMap;class $pe extends Qt{static get type(){return"SkinningNode"}constructor(e,r=!1){super("void"),this.skinnedMesh=e,this.useReference=r,this.updateType=on.OBJECT,this.skinIndexNode=Wa("skinIndex","uvec4"),this.skinWeightNode=Wa("skinWeight","vec4");let i,o,s;r?(i=An("bindMatrix","mat4"),o=An("bindMatrixInverse","mat4"),s=rI("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(i=qt(e.bindMatrix,"mat4"),o=qt(e.bindMatrixInverse,"mat4"),s=ZM(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),this.bindMatrixNode=i,this.bindMatrixInverseNode=o,this.boneMatricesNode=s,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,r=ii){const{skinIndexNode:i,skinWeightNode:o,bindMatrixNode:s,bindMatrixInverseNode:a}=this,l=e.element(i.x),c=e.element(i.y),u=e.element(i.z),d=e.element(i.w),f=s.mul(r),h=Ni(l.mul(o.x).mul(f),c.mul(o.y).mul(f),u.mul(o.z).mul(f),d.mul(o.w).mul(f));return a.mul(h).xyz}getSkinnedNormal(e=this.boneMatricesNode,r=Ys){const{skinIndexNode:i,skinWeightNode:o,bindMatrixNode:s,bindMatrixInverseNode:a}=this,l=e.element(i.x),c=e.element(i.y),u=e.element(i.z),d=e.element(i.w);let f=Ni(o.x.mul(l),o.y.mul(c),o.z.mul(u),o.w.mul(d));return f=a.mul(f).mul(s),f.transformDirection(r).xyz}getPreviousSkinnedPosition(e){const r=e.object;return this.previousBoneMatricesNode===null&&(r.skeleton.previousBoneMatrices=new Float32Array(r.skeleton.boneMatrices),this.previousBoneMatricesNode=rI("skeleton.previousBoneMatrices","mat4",r.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,nI)}needsPreviousBoneMatrices(e){const r=e.renderer.getMRT();return r&&r.has("velocity")}setup(e){this.needsPreviousBoneMatrices(e)&&nI.assign(this.getPreviousSkinnedPosition(e));const r=this.getSkinnedPosition();if(ii.assign(r),e.hasGeometryAttribute("normal")){const i=this.getSkinnedNormal();Ys.assign(i),e.hasGeometryAttribute("tangent")&&eR.assign(i)}}generate(e,r){if(r!=="void")return ii.build(e,r)}update(e){const i=(this.useReference?e.object:this.skinnedMesh).skeleton;aI.get(i)!==e.frameId&&(aI.set(i,e.frameId),this.previousBoneMatricesNode!==null&&i.previousBoneMatrices.set(i.boneMatrices),i.update())}}const zpe=n=>nt(new $pe(n,!0));class kpe extends Qt{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const r=e.getNodeProperties(this);if(r.stackNode!==void 0)return r;const i={};for(let s=0,a=this.params.length-1;s<a;s++){const l=this.params[s],c=l.isNode!==!0&&l.name||this.getVarName(s),u=l.isNode!==!0&&l.type||"int";i[c]=Tm(c,u)}const o=e.addStack();return r.returnsNode=this.params[this.params.length-1](i,o,e),r.stackNode=o,e.removeStack(),r}getNodeType(e){const{returnsNode:r}=this.getProperties(e);return r?r.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const r=this.getProperties(e),i=this.params,o=r.stackNode;for(let l=0,c=i.length-1;l<c;l++){const u=i[l];let d=null,f=null,h=null,p=null,g=null,y=null;u.isNode?(p="int",h=this.getVarName(l),d="0",f=u.build(e,p),g="<"):(p=u.type||"int",h=u.name||this.getVarName(l),d=u.start,f=u.end,g=u.condition,y=u.update,typeof d=="number"?d=e.generateConst(p,d):d&&d.isNode&&(d=d.build(e,p)),typeof f=="number"?f=e.generateConst(p,f):f&&f.isNode&&(f=f.build(e,p)),d!==void 0&&f===void 0?(d=d+" - 1",f="0",g=">="):f!==void 0&&d===void 0&&(d="0",g="<"),g===void 0&&(Number(d)>Number(f)?g=">=":g="<"));const v={start:d,end:f},m=v.start,_=v.end;let x="",S="",w="";y||(p==="int"||p==="uint"?g.includes("<")?y="++":y="--":g.includes("<")?y="+= 1.":y="-= 1."),x+=e.getVar(p,h)+" = "+m,S+=h+" "+g+" "+_,w+=h+" "+y;const E=`for ( ${x}; ${S}; ${w} )`;e.addFlowCode((l===0?`
`:"")+e.tab+E+` {

`).addFlowTab()}const s=o.build(e,"void"),a=r.returnsNode?r.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let l=0,c=this.params.length-1;l<c;l++)e.addFlowCode((l===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),a}}const fs=(...n)=>nt(new kpe(zd(n,"int"))).append(),Vpe=()=>Tm("break").append(),MS=new WeakMap,lo=new Wt,lI=at(({bufferMap:n,influence:e,stride:r,width:i,depth:o,offset:s})=>{const a=cr(Ope).mul(r).add(s),l=a.div(i),c=a.sub(l.mul(i));return ts(n,ya(c,l)).depth(o).mul(e)});function Gpe(n){const e=n.morphAttributes.position!==void 0,r=n.morphAttributes.normal!==void 0,i=n.morphAttributes.color!==void 0,o=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,s=o!==void 0?o.length:0;let a=MS.get(n);if(a===void 0||a.count!==s){let _=function(){v.dispose(),MS.delete(n),n.removeEventListener("dispose",_)};var l=_;a!==void 0&&a.texture.dispose();const c=n.morphAttributes.position||[],u=n.morphAttributes.normal||[],d=n.morphAttributes.color||[];let f=0;e===!0&&(f=1),r===!0&&(f=2),i===!0&&(f=3);let h=n.attributes.position.count*f,p=1;const g=4096;h>g&&(p=Math.ceil(h/g),h=g);const y=new Float32Array(h*p*4*s),v=new lM(y,h,p,s);v.type=hr,v.needsUpdate=!0;const m=f*4;for(let x=0;x<s;x++){const S=c[x],w=u[x],E=d[x],C=h*p*4*x;for(let T=0;T<S.count;T++){const M=T*m;e===!0&&(lo.fromBufferAttribute(S,T),y[C+M+0]=lo.x,y[C+M+1]=lo.y,y[C+M+2]=lo.z,y[C+M+3]=0),r===!0&&(lo.fromBufferAttribute(w,T),y[C+M+4]=lo.x,y[C+M+5]=lo.y,y[C+M+6]=lo.z,y[C+M+7]=0),i===!0&&(lo.fromBufferAttribute(E,T),y[C+M+8]=lo.x,y[C+M+9]=lo.y,y[C+M+10]=lo.z,y[C+M+11]=E.itemSize===4?lo.w:1)}}a={count:s,texture:v,stride:f,size:new je(h,p)},MS.set(n,a),n.addEventListener("dispose",_)}return a}class Hpe extends Qt{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=qt(1),this.updateType=on.OBJECT}setup(e){const{geometry:r}=e,i=r.morphAttributes.position!==void 0,o=r.hasAttribute("normal")&&r.morphAttributes.normal!==void 0,s=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,a=s!==void 0?s.length:0,{texture:l,stride:c,size:u}=Gpe(r);i===!0&&ii.mulAssign(this.morphBaseInfluence),o===!0&&Ys.mulAssign(this.morphBaseInfluence);const d=cr(u.width);fs(a,({i:f})=>{const h=Ae(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?h.assign(ts(this.mesh.morphTexture,ya(cr(f).add(1),cr(tR))).r):h.assign(An("morphTargetInfluences","float").element(f).toVar()),i===!0&&ii.addAssign(lI({bufferMap:l,influence:h,stride:c,width:d,depth:f,offset:cr(0)})),o===!0&&Ys.addAssign(lI({bufferMap:l,influence:h,stride:c,width:d,depth:f,offset:cr(1)}))})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((r,i)=>r+i,0)}}const jpe=Be(Hpe);class nh extends Qt{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}generate(){console.warn("Abstract function.")}}class Wpe extends nh{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class qpe extends Ak{static get type(){return"LightingContextNode"}constructor(e,r=null,i=null,o=null){super(e),this.lightingModel=r,this.backdropNode=i,this.backdropAlphaNode=o,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:r}=this,i=Ie().toVar("directDiffuse"),o=Ie().toVar("directSpecular"),s=Ie().toVar("indirectDiffuse"),a=Ie().toVar("indirectSpecular"),l={directDiffuse:i,directSpecular:o,indirectDiffuse:s,indirectSpecular:a};return{radiance:Ie().toVar("radiance"),irradiance:Ie().toVar("irradiance"),iblIrradiance:Ie().toVar("iblIrradiance"),ambientOcclusion:Ae(1).toVar("ambientOcclusion"),reflectedLight:l,backdrop:e,backdropAlpha:r}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const Xpe=Be(qpe);class Kpe extends nh{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let Nh,Ph;class _r extends Qt{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===_r.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=on.NONE;return(this.scope===_r.SIZE||this.scope===_r.VIEWPORT)&&(e=on.RENDER),this.updateType=e,e}update({renderer:e}){const r=e.getRenderTarget();this.scope===_r.VIEWPORT?r!==null?Ph.copy(r.viewport):(e.getViewport(Ph),Ph.multiplyScalar(e.getPixelRatio())):r!==null?(Nh.width=r.width,Nh.height=r.height):e.getDrawingBufferSize(Nh)}setup(){const e=this.scope;let r=null;return e===_r.SIZE?r=qt(Nh||(Nh=new je)):e===_r.VIEWPORT?r=qt(Ph||(Ph=new Wt)):r=ft(ux.div($E)),r}generate(e){if(this.scope===_r.COORDINATE){let r=e.getFragCoord();if(e.isFlipY()){const i=e.getNodeProperties($E).outputNode.build(e);r=`${e.getType("vec2")}( ${r}.x, ${i}.y - ${r}.y )`}return r}return super.generate(e)}}_r.COORDINATE="coordinate";_r.VIEWPORT="viewport";_r.SIZE="size";_r.UV="uv";const Am=lt(_r,_r.UV),$E=lt(_r,_r.SIZE),ux=lt(_r,_r.COORDINATE),qk=lt(_r,_r.VIEWPORT);qk.zw;qk.xy;const Oh=new je;class Xk extends sg{static get type(){return"ViewportTextureNode"}constructor(e=Am,r=null,i=null){i===null&&(i=new ute,i.minFilter=ki),super(i,e,r),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=on.FRAME}updateBefore(e){const r=e.renderer;r.getDrawingBufferSize(Oh);const i=this.value;(i.image.width!==Oh.width||i.image.height!==Oh.height)&&(i.image.width=Oh.width,i.image.height=Oh.height,i.needsUpdate=!0);const o=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,r.copyFramebufferToTexture(i),i.generateMipmaps=o}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const Kk=Be(Xk,null,null,{generateMipmaps:!0});let RS=null;class Ype extends Xk{static get type(){return"ViewportDepthTextureNode"}constructor(e=Am,r=null){RS===null&&(RS=new ac),super(e,r,RS)}}const Qpe=Be(Ype);class ji extends Qt{static get type(){return"ViewportDepthNode"}constructor(e,r=null){super("float"),this.scope=e,this.valueNode=r,this.isViewportDepthNode=!0}generate(e){const{scope:r}=this;return r===ji.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:r}=this,i=this.valueNode;let o=null;if(r===ji.DEPTH_BASE)i!==null&&(o=Zk().assign(i));else if(r===ji.DEPTH)e.isPerspectiveCamera?o=Zpe(Lr.z,Ic,Dc):o=wp(Lr.z,Ic,Dc);else if(r===ji.LINEAR_DEPTH)if(i!==null)if(e.isPerspectiveCamera){const s=Yk(i,Ic,Dc);o=wp(s,Ic,Dc)}else o=i;else o=wp(Lr.z,Ic,Dc);return o}}ji.DEPTH_BASE="depthBase";ji.DEPTH="depth";ji.LINEAR_DEPTH="linearDepth";const wp=(n,e,r)=>n.add(e).div(e.sub(r)),Zpe=(n,e,r)=>e.add(n).mul(r).div(r.sub(e).mul(n)),Yk=(n,e,r)=>e.mul(r).div(r.sub(e).mul(n).sub(r)),Qk=(n,e,r)=>{e=e.max(1e-6).toVar();const i=Da(n.negate().div(e)),o=Da(r.div(e));return i.div(o)},Zk=Be(ji,ji.DEPTH_BASE),Jk=lt(ji,ji.DEPTH),Jpe=Be(ji,ji.LINEAR_DEPTH);Qpe();Jk.assign=n=>Zk(n);class eme extends Qt{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const tme=Be(eme);class Vo extends Qt{static get type(){return"ClippingNode"}constructor(e=Vo.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const r=e.clippingContext,{intersectionPlanes:i,unionPlanes:o}=r;return this.hardwareClipping=e.material.hardwareClipping,this.scope===Vo.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(i,o):this.scope===Vo.HARDWARE?this.setupHardwareClipping(o,e):this.setupDefault(i,o)}setupAlphaToCoverage(e,r){return at(()=>{const i=Ae().toVar("distanceToPlane"),o=Ae().toVar("distanceToGradient"),s=Ae(1).toVar("clipOpacity"),a=r.length;if(!this.hardwareClipping&&a>0){const c=Cl(r);fs(a,({i:u})=>{const d=c.element(u);i.assign(Lr.dot(d.xyz).negate().add(d.w)),o.assign(i.fwidth().div(2)),s.mulAssign(pu(o.negate(),o,i))})}const l=e.length;if(l>0){const c=Cl(e),u=Ae(1).toVar("intersectionClipOpacity");fs(l,({i:d})=>{const f=c.element(d);i.assign(Lr.dot(f.xyz).negate().add(f.w)),o.assign(i.fwidth().div(2)),u.mulAssign(pu(o.negate(),o,i).oneMinus())}),s.mulAssign(u.oneMinus())}Sn.a.mulAssign(s),Sn.a.equal(0).discard()})()}setupDefault(e,r){return at(()=>{const i=r.length;if(!this.hardwareClipping&&i>0){const s=Cl(r);fs(i,({i:a})=>{const l=s.element(a);Lr.dot(l.xyz).greaterThan(l.w).discard()})}const o=e.length;if(o>0){const s=Cl(e),a=lk(!0).toVar("clipped");fs(o,({i:l})=>{const c=s.element(l);a.assign(Lr.dot(c.xyz).greaterThan(c.w).and(a))}),a.discard()}})()}setupHardwareClipping(e,r){const i=e.length;return r.enableHardwareClipping(i),at(()=>{const o=Cl(e),s=tme(r.getClipDistance());fs(i,({i:a})=>{const l=o.element(a),c=Lr.dot(l.xyz).sub(l.w).negate();s.element(a).assign(c)})})()}}Vo.ALPHA_TO_COVERAGE="alphaToCoverage";Vo.DEFAULT="default";Vo.HARDWARE="hardware";const nme=()=>nt(new Vo),rme=()=>nt(new Vo(Vo.ALPHA_TO_COVERAGE)),ime=()=>nt(new Vo(Vo.HARDWARE)),ome=.05,cI=at(([n])=>cc(sn(1e4,cs(sn(17,n.x).add(sn(.1,n.y)))).mul(Ni(.1,Lo(cs(sn(13,n.y).add(n.x))))))),uI=at(([n])=>cI(ft(cI(n.xy),n.z))),sme=at(([n])=>{const e=Ji(jl(Sk(n.xyz)),jl(wk(n.xyz))),r=Ae(1).div(Ae(ome).mul(e)).toVar("pixScale"),i=ft(wm(Qc(Da(r))),wm(WM(Da(r)))),o=ft(uI(Qc(i.x.mul(n.xyz))),uI(Qc(i.y.mul(n.xyz)))),s=cc(Da(r)),a=Ni(sn(s.oneMinus(),o.x),sn(s,o.y)),l=Cm(s,s.oneMinus()),c=Ie(a.mul(a).div(sn(2,l).mul($i(1,l))),a.sub(sn(.5,l)).div($i(1,l)),$i(1,$i(1,a).mul($i(1,a)).div(sn(2,l).mul($i(1,l))))),u=a.lessThan(l.oneMinus()).select(a.lessThan(l).select(c.x,c.y),c.z);return ja(u,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class Tr extends mi{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.forceSinglePass=!1,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.shadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+tk(this)}build(e){this.setup(e)}setupObserver(e){return new ude(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e);const r=e.renderer,i=r.getRenderTarget();e.addStack(),e.stack.outputNode=this.vertexNode||this.setupPosition(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let o;const s=this.setupClipping(e);if(this.depthWrite===!0&&(i!==null?i.depthBuffer===!0&&this.setupDepth(e):r.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const a=this.setupLighting(e);s!==null&&e.stack.add(s);const l=Kt(a,Sn.a).max(0);if(o=this.setupOutput(e,l),Yde.assign(o),this.outputNode!==null&&(o=this.outputNode),i!==null){const c=r.getMRT(),u=this.mrtNode;c!==null?(o=c,u!==null&&(o=c.merge(u))):u!==null&&(o=u)}}else{let a=this.fragmentNode;a.isOutputStructNode!==!0&&(a=Kt(a)),o=this.setupOutput(e,a)}e.stack.outputNode=o,e.addFlow("fragment",e.removeStack()),e.monitor=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:r,intersectionPlanes:i}=e.clippingContext;let o=null;if(r.length>0||i.length>0){const s=e.renderer.samples;this.alphaToCoverage&&s>1?o=rme():e.stack.add(nme())}return o}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const r=e.clippingContext.unionPlanes.length;r>0&&r<=8&&e.isAvailable("clipDistance")&&(e.stack.add(ime()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:r,camera:i}=e;let o=this.depthNode;if(o===null){const s=r.getMRT();s&&s.has("depth")?o=s.get("depth"):r.logarithmicDepthBuffer===!0&&(i.isPerspectiveCamera?o=Qk(Lr.z,Ic,Dc):o=wp(Lr.z,Ic,Dc))}o!==null&&Jk.assign(o).append()}setupPosition(e){const{object:r}=e,i=r.geometry;if(e.addStack(),(i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color)&&jpe(r).append(),r.isSkinnedMesh===!0&&zpe(r).append(),this.displacementMap){const s=Tl("displacementMap","texture"),a=Tl("displacementScale","float"),l=Tl("displacementBias","float");ii.addAssign(Ys.normalize().mul(s.x.mul(a).add(l)))}r.isBatchedMesh&&Bpe(r).append(),r.isInstancedMesh&&r.instanceMatrix&&r.instanceMatrix.isInstancedBufferAttribute===!0&&Fpe(r).append(),this.positionNode!==null&&ii.assign(this.positionNode),this.setupHardwareClipping(e);const o=Wk();return e.context.vertex=e.removeStack(),e.context.mvp=o,o}setupDiffuseColor({object:e,geometry:r}){let i=this.colorNode?Kt(this.colorNode):npe;this.vertexColors===!0&&r.hasAttribute("color")&&(i=Kt(i.xyz.mul(Wa("color","vec3")),i.a)),e.instanceColor&&(i=Ay("vec3","vInstanceColor").mul(i)),e.isBatchedMesh&&e._colorsTexture&&(i=Ay("vec3","vBatchColor").mul(i)),Sn.assign(i);const o=this.opacityNode?Ae(this.opacityNode):Hk;if(Sn.a.assign(Sn.a.mul(o)),this.alphaTestNode!==null||this.alphaTest>0){const s=this.alphaTestNode!==null?Ae(this.alphaTestNode):tpe;Sn.a.lessThanEqual(s).discard()}this.alphaHash===!0&&Sn.a.lessThan(sme(ii)).discard(),this.transparent===!1&&this.blending===zo&&this.alphaToCoverage===!1&&Sn.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?Ie(0):Sn.rgb}setupNormal(){return this.normalNode?Ie(this.normalNode):cpe}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?Tl("envMap","cubeTexture"):Tl("envMap","texture")),e}setupLightMap(e){let r=null;return e.material.lightMap&&(r=new Kpe(jk)),r}setupLights(e){const r=[],i=this.setupEnvironment(e);i&&i.isLightingNode&&r.push(i);const o=this.setupLightMap(e);if(o&&o.isLightingNode&&r.push(o),this.aoNode!==null||e.material.aoMap){const a=this.aoNode!==null?this.aoNode:Npe;r.push(new Wpe(a))}let s=this.lightsNode||e.lightsNode;return r.length>0&&(s=e.renderer.lighting.createNode([...s.getLights(),...r])),s}setupLightingModel(){}setupLighting(e){const{material:r}=e,{backdropNode:i,backdropAlphaNode:o,emissiveNode:s}=this,l=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let c=this.setupOutgoingLight(e);if(l&&l.getScope().hasLights){const u=this.setupLightingModel(e);c=Xpe(l,u,i,o)}else i!==null&&(c=Ie(o!==null?Hn(c,i,o):i));return(s&&s.isNode===!0||r.emissive&&r.emissive.isColor===!0)&&(ZO.assign(Ie(s||ipe)),c=c.add(ZO)),c}setupOutput(e,r){if(this.fog===!0){const i=e.fogNode;i&&(r=Kt(i.mix(r.rgb,i.colorNode),r.a))}return r}setDefaultValues(e){for(const i in e){const o=e[i];this[i]===void 0&&(this[i]=o,o&&o.clone&&(this[i]=o.clone()))}const r=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const i in r)Object.getOwnPropertyDescriptor(this.constructor.prototype,i)===void 0&&r[i].get!==void 0&&Object.defineProperty(this.constructor.prototype,i,r[i])}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{},nodes:{}});const i=mi.prototype.toJSON.call(this,e),o=Ty(this);i.inputNodes={};for(const{property:a,childNode:l}of o)i.inputNodes[a]=l.toJSON(e).uuid;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}if(r){const a=s(e.textures),l=s(e.images),c=s(e.nodes);a.length>0&&(i.textures=a),l.length>0&&(i.images=l),c.length>0&&(i.nodes=c)}return i}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.shadowPositionNode=e.shadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const ame=new K_;class lme extends Tr{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(ame),this.setValues(e)}}const cme=new Dte;class ume extends Tr{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.setDefaultValues(cme),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?Ae(this.offsetNodeNode):Rpe,r=this.dashScaleNode?Ae(this.dashScaleNode):Cpe,i=this.dashSizeNode?Ae(this.dashSizeNode):Tpe,o=this.dashSizeNode?Ae(this.dashGapNode):Mpe;CS.assign(i),JO.assign(o);const s=Ja(Wa("lineDistance").mul(r));(e?s.add(e):s).mod(CS.add(JO)).greaterThan(CS).discard()}}const dme=n=>nt(n).mul(.5).add(.5),fme=new Nte;class hme extends Tr{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(fme),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?Ae(this.opacityNode):Hk;Sn.assign(Kt(dme(Sr),e))}}class pme extends Mr{static get type(){return"EquirectUVNode"}constructor(e=Uk){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,r=e.z.atan2(e.x).mul(1/(Math.PI*2)).add(.5),i=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return ft(r,i)}}const e4=Be(pme);class t4 extends F${constructor(e=1,r={}){super(e,r),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,r){const i=r.minFilter,o=r.generateMipmaps;r.generateMipmaps=!0,this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const s=new Eu(5,5,5),a=e4(Uk),l=new Tr;l.colorNode=mn(r,a,0),l.side=er,l.blending=Mi;const c=new Br(s,l),u=new fM;u.add(c),r.minFilter===ki&&(r.minFilter=Ur);const d=new L$(1,10,this),f=e.getMRT();return e.setMRT(null),d.update(e,u),e.setMRT(f),r.minFilter=i,r.currentGenerateMipmaps=o,c.geometry.dispose(),c.material.dispose(),this}}const Ep=new WeakMap;class mme extends Mr{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=Rm();const r=new q_;r.isRenderTargetTexture=!0,this._defaultTexture=r,this.updateBeforeType=on.RENDER}updateBefore(e){const{renderer:r,material:i}=e,o=this.envNode;if(o.isTextureNode||o.isMaterialReferenceNode){const s=o.isTextureNode?o.value:i[o.property];if(s&&s.isTexture){const a=s.mapping;if(a===Ql||a===Zl){if(Ep.has(s)){const l=Ep.get(s);dI(l,s.mapping),this._cubeTexture=l}else{const l=s.image;if(gme(l)){const c=new t4(l.height);c.fromEquirectangularTexture(r,s),dI(c.texture,s.mapping),this._cubeTexture=c.texture,Ep.set(s,c.texture),s.addEventListener("dispose",n4)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function gme(n){return n==null?!1:n.height>0}function n4(n){const e=n.target;e.removeEventListener("dispose",n4);const r=Ep.get(e);r!==void 0&&(Ep.delete(e),r.dispose())}function dI(n,e){e===Ql?n.mapping=Wo:e===Zl&&(n.mapping=qo)}const r4=Be(mme);class nR extends nh{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=r4(this.envNode)}}class vme extends nh{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const r=Ae(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(r)}}class dx{start(){}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class i4 extends dx{constructor(){super()}indirect(e,r,i){const o=e.ambientOcclusion,s=e.reflectedLight,a=i.context.irradianceLightMap;s.indirectDiffuse.assign(Kt(0)),a?s.indirectDiffuse.addAssign(a):s.indirectDiffuse.addAssign(Kt(1,1,1,0)),s.indirectDiffuse.mulAssign(o),s.indirectDiffuse.mulAssign(Sn.rgb)}finish(e,r,i){const o=i.material,s=e.outgoingLight,a=i.context.environment;if(a)switch(o.combine){case Km:s.rgb.assign(Hn(s.rgb,s.rgb.mul(a.rgb),v0.mul(TS)));break;case _$:s.rgb.assign(Hn(s.rgb,a.rgb,v0.mul(TS)));break;case x$:s.rgb.addAssign(a.rgb.mul(v0.mul(TS)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",o.combine);break}}}const yme=new Qf;class _me extends Tr{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(yme),this.setValues(e)}setupNormal(){return ws}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new nR(r):null}setupLightMap(e){let r=null;return e.material.lightMap&&(r=new vme(jk)),r}setupOutgoingLight(){return Sn.rgb}setupLightingModel(){return new i4}}const Nm=at(({f0:n,f90:e,dotVH:r})=>{const i=r.mul(-5.55473).sub(6.98316).mul(r).exp2();return n.mul(i.oneMinus()).add(e.mul(i))}),Nf=at(n=>n.diffuseColor.mul(1/Math.PI)),xme=()=>Ae(.25),bme=at(({dotNH:n})=>UE.mul(Ae(.5)).add(1).mul(Ae(1/Math.PI)).mul(n.pow(UE))),Sme=at(({lightDirection:n})=>{const e=n.add(ir).normalize(),r=Sr.dot(e).clamp(),i=ir.dot(e).clamp(),o=Nm({f0:uo,f90:1,dotVH:i}),s=xme(),a=bme({dotNH:r});return o.mul(s).mul(a)});class o4 extends i4{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:r,reflectedLight:i}){const s=Sr.dot(e).clamp().mul(r);i.directDiffuse.addAssign(s.mul(Nf({diffuseColor:Sn.rgb}))),this.specular===!0&&i.directSpecular.addAssign(s.mul(Sme({lightDirection:e})).mul(v0))}indirect({ambientOcclusion:e,irradiance:r,reflectedLight:i}){i.indirectDiffuse.addAssign(r.mul(Nf({diffuseColor:Sn}))),i.indirectDiffuse.mulAssign(e)}}const wme=new yM;class Eme extends Tr{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(wme),this.setValues(e)}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new nR(r):null}setupLightingModel(){return new o4(!1)}}const Cme=new Rte;class Tme extends Tr{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(Cme),this.setValues(e)}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new nR(r):null}setupLightingModel(){return new o4}setupVariants(){const e=(this.shininessNode?Ae(this.shininessNode):rpe).max(1e-4);UE.assign(e);const r=this.specularNode||ope;uo.assign(r)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const Mme=at(n=>{if(n.geometry.hasAttribute("normal")===!1)return Ae(0);const e=ws.dFdx().abs().max(ws.dFdy().abs());return e.x.max(e.y).max(e.z)}),s4=at(n=>{const{roughness:e}=n,r=Mme();let i=e.max(.0525);return i=i.add(r),i=i.min(1),i}),Rme=at(({alpha:n,dotNL:e,dotNV:r})=>{const i=n.pow2(),o=e.mul(i.add(i.oneMinus().mul(r.pow2())).sqrt()),s=r.mul(i.add(i.oneMinus().mul(e.pow2())).sqrt());return Ha(.5,o.add(s).max(yfe))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),Ame=at(({alphaT:n,alphaB:e,dotTV:r,dotBV:i,dotTL:o,dotBL:s,dotNV:a,dotNL:l})=>{const c=l.mul(Ie(n.mul(r),e.mul(i),a).length()),u=a.mul(Ie(n.mul(o),e.mul(s),l).length());return Ha(.5,c.add(u)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),Nme=at(({alpha:n,dotNH:e})=>{const r=n.pow2(),i=e.pow2().mul(r.oneMinus()).oneMinus();return r.div(i.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),Pme=Ae(1/Math.PI),Ome=at(({alphaT:n,alphaB:e,dotNH:r,dotTH:i,dotBH:o})=>{const s=n.mul(e),a=Ie(e.mul(i),n.mul(o),s.mul(r)),l=a.dot(a),c=s.div(l);return Pme.mul(s.mul(c.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),fI=at(n=>{const{lightDirection:e,f0:r,f90:i,roughness:o,f:s,USE_IRIDESCENCE:a,USE_ANISOTROPY:l}=n,c=n.normalView||Sr,u=o.pow2(),d=e.add(ir).normalize(),f=c.dot(e).clamp(),h=c.dot(ir).clamp(),p=c.dot(d).clamp(),g=ir.dot(d).clamp();let y=Nm({f0:r,f90:i,dotVH:g}),v,m;if(QO(a)&&(y=HM.mix(y,s)),QO(l)){const _=p0.dot(e),x=p0.dot(ir),S=p0.dot(d),w=Vd.dot(e),E=Vd.dot(ir),C=Vd.dot(d);v=Ame({alphaT:FE,alphaB:u,dotTV:x,dotBV:E,dotTL:_,dotBL:w,dotNV:h,dotNL:f}),m=Ome({alphaT:FE,alphaB:u,dotNH:p,dotTH:S,dotBH:C})}else v=Rme({alpha:u,dotNL:f,dotNV:h}),m=Nme({alpha:u,dotNH:p});return y.mul(v).mul(m)}),a4=at(({roughness:n,dotNV:e})=>{const r=Kt(-1,-.0275,-.572,.022),i=Kt(1,.0425,1.04,-.04),o=n.mul(r).add(i),s=o.x.mul(o.x).min(e.mul(-9.28).exp2()).mul(o.x).add(o.y);return ft(-1.04,1.04).mul(s).add(o.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),l4=at(n=>{const{dotNV:e,specularColor:r,specularF90:i,roughness:o}=n,s=a4({dotNV:e,roughness:o});return r.mul(s.x).add(i.mul(s.y))}),Ime=at(({f:n,f90:e,dotVH:r})=>{const i=r.oneMinus().saturate(),o=i.mul(i),s=i.mul(o,o).clamp(0,.9999);return n.sub(Ie(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),Dme=at(({roughness:n,dotNH:e})=>{const r=n.pow2(),i=Ae(1).div(r),s=e.pow2().oneMinus().max(.0078125);return Ae(2).add(i).mul(s.pow(i.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),Lme=at(({dotNV:n,dotNL:e})=>Ae(1).div(Ae(4).mul(e.add(n).sub(e.mul(n))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),Fme=at(({lightDirection:n})=>{const e=n.add(ir).normalize(),r=Sr.dot(n).clamp(),i=Sr.dot(ir).clamp(),o=Sr.dot(e).clamp(),s=Dme({roughness:GM,dotNH:o}),a=Lme({dotNV:i,dotNL:r});return Cd.mul(s).mul(a)}),Ume=at(({N:n,V:e,roughness:r})=>{const s=.0078125,a=n.dot(e).saturate(),l=ft(r,a.oneMinus().sqrt());return l.assign(l.mul(.984375).add(s)),l}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),Bme=at(({f:n})=>{const e=n.length();return Ji(e.mul(e).add(n.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),_v=at(({v1:n,v2:e})=>{const r=n.dot(e),i=r.abs().toVar(),o=i.mul(.0145206).add(.4965155).mul(i).add(.8543985).toVar(),s=i.add(4.1616724).mul(i).add(3.417594).toVar(),a=o.div(s),l=r.greaterThan(0).select(a,Ji(r.mul(r).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(a));return n.cross(e).mul(l)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),hI=at(({N:n,V:e,P:r,mInv:i,p0:o,p1:s,p2:a,p3:l})=>{const c=s.sub(o).toVar(),u=l.sub(o).toVar(),d=c.cross(u),f=Ie().toVar();return Cr(d.dot(r.sub(o)).greaterThanEqual(0),()=>{const h=e.sub(n.mul(e.dot(n))).normalize(),p=n.cross(h).negate(),g=i.mul(Ai(h,p,n).transpose()).toVar(),y=g.mul(o.sub(r)).normalize().toVar(),v=g.mul(s.sub(r)).normalize().toVar(),m=g.mul(a.sub(r)).normalize().toVar(),_=g.mul(l.sub(r)).normalize().toVar(),x=Ie(0).toVar();x.addAssign(_v({v1:y,v2:v})),x.addAssign(_v({v1:v,v2:m})),x.addAssign(_v({v1:m,v2:_})),x.addAssign(_v({v1:_,v2:y})),f.assign(Ie(Bme({f:x})))}),f}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),fx=1/6,c4=n=>sn(fx,sn(n,sn(n,n.negate().add(3)).sub(3)).add(1)),zE=n=>sn(fx,sn(n,sn(n,sn(3,n).sub(6))).add(4)),u4=n=>sn(fx,sn(n,sn(n,sn(-3,n).add(3)).add(3)).add(1)),kE=n=>sn(fx,ox(n,3)),pI=n=>c4(n).add(zE(n)),mI=n=>u4(n).add(kE(n)),gI=n=>Ni(-1,zE(n).div(c4(n).add(zE(n)))),vI=n=>Ni(1,kE(n).div(u4(n).add(kE(n)))),yI=(n,e,r)=>{const i=n.uvNode,o=sn(i,e.zw).add(.5),s=Qc(o),a=cc(o),l=pI(a.x),c=mI(a.x),u=gI(a.x),d=vI(a.x),f=gI(a.y),h=vI(a.y),p=ft(s.x.add(u),s.y.add(f)).sub(.5).mul(e.xy),g=ft(s.x.add(d),s.y.add(f)).sub(.5).mul(e.xy),y=ft(s.x.add(u),s.y.add(h)).sub(.5).mul(e.xy),v=ft(s.x.add(d),s.y.add(h)).sub(.5).mul(e.xy),m=pI(a.y).mul(Ni(l.mul(n.uv(p).level(r)),c.mul(n.uv(g).level(r)))),_=mI(a.y).mul(Ni(l.mul(n.uv(y).level(r)),c.mul(n.uv(v).level(r))));return m.add(_)},$me=at(([n,e=Ae(3)])=>{const r=ft(n.size(cr(e))),i=ft(n.size(cr(e.add(1)))),o=Ha(1,r),s=Ha(1,i),a=yI(n,Kt(o,r),Qc(e)),l=yI(n,Kt(s,i),WM(e));return cc(e).mix(a,l)}),_I=at(([n,e,r,i,o])=>{const s=Ie(Rk(e.negate(),Em(n),Ha(1,i))),a=Ie(jl(o[0].xyz),jl(o[1].xyz),jl(o[2].xyz));return Em(s).mul(r.mul(a))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),zme=at(([n,e])=>n.mul(ja(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),kme=Kk(),Vme=Kk(),xI=at(([n,e,r],{material:i})=>{const s=(i.side==er?kme:Vme).uv(n),a=Da($E.x).mul(zme(e,r));return $me(s,a)}),bI=at(([n,e,r])=>(Cr(r.notEqual(0),()=>{const i=bk(e).negate().div(r);return xk(i.negate().mul(n))}),Ie(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),Gme=at(([n,e,r,i,o,s,a,l,c,u,d,f,h,p,g])=>{let y,v;if(g){y=Kt().toVar(),v=Ie().toVar();const w=d.sub(1).mul(g.mul(.025)),E=Ie(d.sub(w),d,d.add(w));fs({start:0,end:3},({i:C})=>{const T=E.element(C),M=_I(n,e,f,T,l),R=a.add(M),P=u.mul(c.mul(Kt(R,1))),D=ft(P.xy.div(P.w)).toVar();D.addAssign(1),D.divAssign(2),D.assign(ft(D.x,D.y.oneMinus()));const F=xI(D,r,T);y.element(C).assign(F.element(C)),y.a.addAssign(F.a),v.element(C).assign(i.element(C).mul(bI(jl(M),h,p).element(C)))}),y.a.divAssign(3)}else{const w=_I(n,e,f,d,l),E=a.add(w),C=u.mul(c.mul(Kt(E,1))),T=ft(C.xy.div(C.w)).toVar();T.addAssign(1),T.divAssign(2),T.assign(ft(T.x,T.y.oneMinus())),y=xI(T,r,d),v=i.mul(bI(jl(w),h,p))}const m=v.rgb.mul(y.rgb),_=n.dot(e).clamp(),x=Ie(l4({dotNV:_,specularColor:o,specularF90:s,roughness:r})),S=v.r.add(v.g,v.b).div(3);return Kt(x.oneMinus().mul(m),y.a.oneMinus().mul(S).oneMinus())}),Hme=Ai(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),jme=n=>{const e=n.sqrt();return Ie(1).add(e).div(Ie(1).sub(e))},SI=(n,e)=>n.sub(e).div(n.add(e)).pow2(),Wme=(n,e)=>{const r=n.mul(2*Math.PI*1e-9),i=Ie(54856e-17,44201e-17,52481e-17),o=Ie(1681e3,1795300,2208400),s=Ie(43278e5,93046e5,66121e5),a=Ae(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(r.mul(2239900).add(e.x).cos()).mul(r.pow2().mul(-45282e5).exp());let l=i.mul(s.mul(2*Math.PI).sqrt()).mul(o.mul(r).add(e).cos()).mul(r.pow2().negate().mul(s).exp());return l=Ie(l.x.add(a),l.y,l.z).div(10685e-11),Hme.mul(l)},qme=at(({outsideIOR:n,eta2:e,cosTheta1:r,thinFilmThickness:i,baseF0:o})=>{const s=Hn(n,e,pu(0,.03,i)),l=n.div(s).pow2().mul(r.pow2().oneMinus()).oneMinus();Cr(l.lessThan(0),()=>Ie(1));const c=l.sqrt(),u=SI(s,n),d=Nm({f0:u,f90:1,dotVH:r}),f=d.oneMinus(),h=s.lessThan(n).select(Math.PI,0),p=Ae(Math.PI).sub(h),g=jme(o.clamp(0,.9999)),y=SI(g,s.toVec3()),v=Nm({f0:y,f90:1,dotVH:c}),m=Ie(g.x.lessThan(s).select(Math.PI,0),g.y.lessThan(s).select(Math.PI,0),g.z.lessThan(s).select(Math.PI,0)),_=s.mul(i,c,2),x=Ie(p).add(m),S=d.mul(v).clamp(1e-5,.9999),w=S.sqrt(),E=f.pow2().mul(v).div(Ie(1).sub(S)),T=d.add(E).toVar(),M=E.sub(f).toVar();return fs({start:1,end:2,condition:"<=",name:"m"},({m:R})=>{M.mulAssign(w);const P=Wme(Ae(R).mul(_),Ae(R).mul(x)).mul(2);T.addAssign(M.mul(P))}),T.max(Ie(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),Xme=at(({normal:n,viewDir:e,roughness:r})=>{const i=n.dot(e).saturate(),o=r.pow2(),s=Hi(r.lessThan(.25),Ae(-339.2).mul(o).add(Ae(161.4).mul(r)).sub(25.9),Ae(-8.48).mul(o).add(Ae(14.3).mul(r)).sub(9.95)),a=Hi(r.lessThan(.25),Ae(44).mul(o).sub(Ae(23.7).mul(r)).add(3.26),Ae(1.97).mul(o).sub(Ae(3.27).mul(r)).add(.72));return Hi(r.lessThan(.25),0,Ae(.1).mul(r).sub(.025)).add(s.mul(i).add(a).exp()).mul(1/Math.PI).saturate()}),AS=Ie(.04),NS=Ae(1);class d4 extends dx{constructor(e=!1,r=!1,i=!1,o=!1,s=!1,a=!1){super(),this.clearcoat=e,this.sheen=r,this.iridescence=i,this.anisotropy=o,this.transmission=s,this.dispersion=a,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=Ie().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=Ie().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=Ie().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=Ie().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=Ie().toVar("sheenSpecularIndirect")),this.iridescence===!0){const r=Sr.dot(ir).clamp();this.iridescenceFresnel=qme({outsideIOR:Ae(1),eta2:fk,cosTheta1:r,thinFilmThickness:hk,baseF0:uo}),this.iridescenceF0=Ime({f:this.iridescenceFresnel,f90:1,dotVH:r})}if(this.transmission===!0){const r=Mm,i=Ahe.sub(Mm).normalize(),o=QM;e.backdrop=Gme(o,i,Sa,Sn,uo,Oy,r,mu,el,Dy,m0,pk,gk,mk,this.dispersion?vk:null),e.backdropAlpha=BE,Sn.a.mulAssign(Hn(1,e.backdrop.a,BE))}}computeMultiscattering(e,r,i){const o=Sr.dot(ir).clamp(),s=a4({roughness:Sa,dotNV:o}),l=(this.iridescenceF0?HM.mix(uo,this.iridescenceF0):uo).mul(s.x).add(i.mul(s.y)),u=s.x.add(s.y).oneMinus(),d=uo.add(uo.oneMinus().mul(.047619)),f=l.mul(d).div(u.mul(d).oneMinus());e.addAssign(l),r.addAssign(f.mul(u))}direct({lightDirection:e,lightColor:r,reflectedLight:i}){const s=Sr.dot(e).clamp().mul(r);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(Fme({lightDirection:e}))),this.clearcoat===!0){const l=ep.dot(e).clamp().mul(r);this.clearcoatSpecularDirect.addAssign(l.mul(fI({lightDirection:e,f0:AS,f90:NS,roughness:Py,normalView:ep})))}i.directDiffuse.addAssign(s.mul(Nf({diffuseColor:Sn.rgb}))),i.directSpecular.addAssign(s.mul(fI({lightDirection:e,f0:uo,f90:1,roughness:Sa,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:r,halfWidth:i,halfHeight:o,reflectedLight:s,ltc_1:a,ltc_2:l}){const c=r.add(i).sub(o),u=r.sub(i).sub(o),d=r.sub(i).add(o),f=r.add(i).add(o),h=Sr,p=ir,g=Lr.toVar(),y=Ume({N:h,V:p,roughness:Sa}),v=a.uv(y).toVar(),m=l.uv(y).toVar(),_=Ai(Ie(v.x,0,v.y),Ie(0,1,0),Ie(v.z,0,v.w)).toVar(),x=uo.mul(m.x).add(uo.oneMinus().mul(m.y)).toVar();s.directSpecular.addAssign(e.mul(x).mul(hI({N:h,V:p,P:g,mInv:_,p0:c,p1:u,p2:d,p3:f}))),s.directDiffuse.addAssign(e.mul(Sn).mul(hI({N:h,V:p,P:g,mInv:Ai(1,0,0,0,1,0,0,0,1),p0:c,p1:u,p2:d,p3:f})))}indirect(e,r,i){this.indirectDiffuse(e,r,i),this.indirectSpecular(e,r,i),this.ambientOcclusion(e,r,i)}indirectDiffuse({irradiance:e,reflectedLight:r}){r.indirectDiffuse.addAssign(e.mul(Nf({diffuseColor:Sn})))}indirectSpecular({radiance:e,iblIrradiance:r,reflectedLight:i}){if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(r.mul(Cd,Xme({normal:Sr,viewDir:ir,roughness:GM}))),this.clearcoat===!0){const u=ep.dot(ir).clamp(),d=l4({dotNV:u,specularColor:AS,specularF90:NS,roughness:Py});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(d))}const o=Ie().toVar("singleScattering"),s=Ie().toVar("multiScattering"),a=r.mul(1/Math.PI);this.computeMultiscattering(o,s,Oy);const l=o.add(s),c=Sn.mul(l.r.max(l.g).max(l.b).oneMinus());i.indirectSpecular.addAssign(e.mul(o)),i.indirectSpecular.addAssign(s.mul(a)),i.indirectDiffuse.addAssign(c.mul(a))}ambientOcclusion({ambientOcclusion:e,reflectedLight:r}){const o=Sr.dot(ir).clamp().add(e),s=Sa.mul(-16).oneMinus().negate().exp2(),a=e.sub(o.pow(s).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(e),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(e),r.indirectDiffuse.mulAssign(e),r.indirectSpecular.mulAssign(a)}finish(e){const{outgoingLight:r}=e;if(this.clearcoat===!0){const i=ep.dot(ir).clamp(),o=Nm({dotVH:i,f0:AS,f90:NS}),s=r.mul(LE.mul(o).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(LE));r.assign(s)}if(this.sheen===!0){const i=Cd.r.max(Cd.g).max(Cd.b).mul(.157).oneMinus(),o=r.mul(i).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);r.assign(o)}}}const wI=Ae(1),VE=Ae(-2),xv=Ae(.8),PS=Ae(-1),bv=Ae(.4),OS=Ae(2),Sv=Ae(.305),IS=Ae(3),EI=Ae(.21),Kme=Ae(4),CI=Ae(4),Yme=Ae(16),Qme=at(([n])=>{const e=Ie(Lo(n)).toVar(),r=Ae(-1).toVar();return Cr(e.x.greaterThan(e.z),()=>{Cr(e.x.greaterThan(e.y),()=>{r.assign(Hi(n.x.greaterThan(0),0,3))}).Else(()=>{r.assign(Hi(n.y.greaterThan(0),1,4))})}).Else(()=>{Cr(e.z.greaterThan(e.y),()=>{r.assign(Hi(n.z.greaterThan(0),2,5))}).Else(()=>{r.assign(Hi(n.y.greaterThan(0),1,4))})}),r}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),Zme=at(([n,e])=>{const r=ft().toVar();return Cr(e.equal(0),()=>{r.assign(ft(n.z,n.y).div(Lo(n.x)))}).ElseIf(e.equal(1),()=>{r.assign(ft(n.x.negate(),n.z.negate()).div(Lo(n.y)))}).ElseIf(e.equal(2),()=>{r.assign(ft(n.x.negate(),n.y).div(Lo(n.z)))}).ElseIf(e.equal(3),()=>{r.assign(ft(n.z.negate(),n.y).div(Lo(n.x)))}).ElseIf(e.equal(4),()=>{r.assign(ft(n.x.negate(),n.z).div(Lo(n.y)))}).Else(()=>{r.assign(ft(n.x,n.y).div(Lo(n.z)))}),sn(.5,r.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),Jme=at(([n])=>{const e=Ae(0).toVar();return Cr(n.greaterThanEqual(xv),()=>{e.assign(wI.sub(n).mul(PS.sub(VE)).div(wI.sub(xv)).add(VE))}).ElseIf(n.greaterThanEqual(bv),()=>{e.assign(xv.sub(n).mul(OS.sub(PS)).div(xv.sub(bv)).add(PS))}).ElseIf(n.greaterThanEqual(Sv),()=>{e.assign(bv.sub(n).mul(IS.sub(OS)).div(bv.sub(Sv)).add(OS))}).ElseIf(n.greaterThanEqual(EI),()=>{e.assign(Sv.sub(n).mul(Kme.sub(IS)).div(Sv.sub(EI)).add(IS))}).Else(()=>{e.assign(Ae(-2).mul(Da(sn(1.16,n))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),ege=at(([n,e])=>{const r=n.toVar();r.assign(sn(2,r).sub(1));const i=Ie(r,1).toVar();return Cr(e.equal(0),()=>{i.assign(i.zyx)}).ElseIf(e.equal(1),()=>{i.assign(i.xzy),i.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{i.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{i.assign(i.zyx),i.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{i.assign(i.xzy),i.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{i.z.mulAssign(-1)}),i}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),tge=at(([n,e,r,i,o,s])=>{const a=Ae(r),l=Ie(e),c=ja(Jme(a),VE,s),u=cc(c),d=Qc(c),f=Ie(GE(n,l,d,i,o,s)).toVar();return Cr(u.notEqual(0),()=>{const h=Ie(GE(n,l,d.add(1),i,o,s)).toVar();f.assign(Hn(f,h,u))}),f}),GE=at(([n,e,r,i,o,s])=>{const a=Ae(r).toVar(),l=Ie(e),c=Ae(Qme(l)).toVar(),u=Ae(Ji(CI.sub(a),0)).toVar();a.assign(Ji(a,CI));const d=Ae(wm(a)).toVar(),f=ft(Zme(l,c).mul(d.sub(2)).add(1)).toVar();return Cr(c.greaterThan(2),()=>{f.y.addAssign(d),c.subAssign(3)}),f.x.addAssign(c.mul(d)),f.x.addAssign(u.mul(sn(3,Yme))),f.y.addAssign(sn(4,wm(s).sub(d))),f.x.mulAssign(i),f.y.mulAssign(o),n.uv(f).grad(ft(),ft())}),DS=at(({envMap:n,mipInt:e,outputDirection:r,theta:i,axis:o,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:l})=>{const c=Sl(i),u=r.mul(c).add(o.cross(r).mul(cs(i))).add(o.mul(o.dot(r).mul(c.oneMinus())));return GE(n,u,e,s,a,l)}),nge=at(({n,latitudinal:e,poleAxis:r,outputDirection:i,weights:o,samples:s,dTheta:a,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f})=>{const h=Ie(Hi(e,r,Tk(r,i))).toVar();Cr(_k(h.equals(Ie(0))),()=>{h.assign(Ie(i.z,0,i.x.negate()))}),h.assign(Em(h));const p=Ie().toVar();return p.addAssign(o.element(cr(0)).mul(DS({theta:0,axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f}))),fs({start:cr(1),end:n},({i:g})=>{Cr(g.greaterThanEqual(s),()=>{Vpe()});const y=Ae(a.mul(Ae(g))).toVar();p.addAssign(o.element(g).mul(DS({theta:y.mul(-1),axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f}))),p.addAssign(o.element(g).mul(DS({theta:y,axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f})))}),Kt(p,1)});let Ly=null;const TI=new WeakMap;function rge(n){const e=Math.log2(n)-2,r=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:r,maxMip:e}}function ige(n){let e=TI.get(n);if((e!==void 0?e.pmremVersion:-1)!==n.pmremVersion){const i=n.image;if(n.isCubeTexture)if(sge(i))e=Ly.fromCubemap(n,e);else return null;else if(age(i))e=Ly.fromEquirectangular(n,e);else return null;e.pmremVersion=n.pmremVersion,TI.set(n,e)}return e.texture}class oge extends Mr{static get type(){return"PMREMNode"}constructor(e,r=null,i=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=r,this.levelNode=i,this._generator=null;const o=new $r;o.isRenderTargetTexture=!0,this._texture=mn(o),this._width=qt(0),this._height=qt(0),this._maxMip=qt(0),this.updateBeforeType=on.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const r=rge(e.image.height);this._texture.value=e,this._width.value=r.texelWidth,this._height.value=r.texelHeight,this._maxMip.value=r.maxMip}updateBefore(){let e=this._pmrem;const r=e?e.pmremVersion:-1,i=this._value;r!==i.pmremVersion&&(i.isPMREMTexture===!0?e=i:e=ige(i),e!==null&&(this._pmrem=e,this.updateFromTexture(e)))}setup(e){Ly===null&&(Ly=e.createPMREMGenerator()),this.updateBefore(e);let r=this.uvNode;r===null&&e.context.getUV&&(r=e.context.getUV(this));const i=this.value;e.renderer.coordinateSystem===Bo&&i.isPMREMTexture!==!0&&i.isRenderTargetTexture===!0&&(r=Ie(r.x.negate(),r.yz));let o=this.levelNode;return o===null&&e.context.getTextureLevel&&(o=e.context.getTextureLevel(this)),tge(this._texture,r,o,this._width,this._height,this._maxMip)}}function sge(n){if(n==null)return!1;let e=0;const r=6;for(let i=0;i<r;i++)n[i]!==void 0&&e++;return e===r}function age(n){return n==null?!1:n.height>0}const f4=Be(oge),MI=new WeakMap;class lge extends nh{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:r}=e;let i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){const p=i.isTextureNode?i.value:r[i.property];let g=MI.get(p);g===void 0&&(g=f4(p),MI.set(p,g)),i=g}const s=r.envMap?An("envMapIntensity","float",e.material):An("environmentIntensity","float",e.scene),l=r.useAnisotropy===!0||r.anisotropy>0?Xhe:Sr,c=i.context(RI(Sa,l)).mul(s),u=i.context(cge(QM)).mul(Math.PI).mul(s),d=g0(c),f=g0(u);e.context.radiance.addAssign(d),e.context.iblIrradiance.addAssign(f);const h=e.context.lightingModel.clearcoatRadiance;if(h){const p=i.context(RI(Py,ep)).mul(s),g=g0(p);h.addAssign(g)}}}const RI=(n,e)=>{let r=null;return{getUV:()=>(r===null&&(r=ir.negate().reflect(e),r=n.mul(n).mix(r,e).normalize(),r=r.transformDirection(el)),r),getTextureLevel:()=>n}},cge=n=>({getUV:()=>n,getTextureLevel:()=>Ae(1)}),uge=new z$;class h4 extends Tr{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(uge),this.setValues(e)}setupEnvironment(e){let r=super.setupEnvironment(e);return r===null&&e.environmentNode&&(r=e.environmentNode),r?new lge(r):null}setupLightingModel(){return new d4}setupSpecular(){const e=Hn(Ie(.04),Sn.rgb,Ny);uo.assign(e),Oy.assign(1)}setupVariants(){const e=this.metalnessNode?Ae(this.metalnessNode):lpe;Ny.assign(e);let r=this.roughnessNode?Ae(this.roughnessNode):ape;r=s4({roughness:r}),Sa.assign(r),this.setupSpecular(),Sn.assign(Kt(Sn.rgb.mul(e.oneMinus()),Sn.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const dge=new Mte;class fge extends h4{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(dge),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?Ae(this.iorNode):Spe;m0.assign(e),uo.assign(Hn(Cm(Mk(m0.sub(1).div(m0.add(1))).mul(spe),Ie(1)).mul(sI),Sn.rgb,Ny)),Oy.assign(Hn(sI,1,Ny))}setupLightingModel(){return new d4(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const r=this.clearcoatNode?Ae(this.clearcoatNode):upe,i=this.clearcoatRoughnessNode?Ae(this.clearcoatRoughnessNode):dpe;LE.assign(r),Py.assign(s4({roughness:i}))}if(this.useSheen){const r=this.sheenNode?Ie(this.sheenNode):ppe,i=this.sheenRoughnessNode?Ae(this.sheenRoughnessNode):mpe;Cd.assign(r),GM.assign(i)}if(this.useIridescence){const r=this.iridescenceNode?Ae(this.iridescenceNode):vpe,i=this.iridescenceIORNode?Ae(this.iridescenceIORNode):ype,o=this.iridescenceThicknessNode?Ae(this.iridescenceThicknessNode):_pe;HM.assign(r),fk.assign(i),hk.assign(o)}if(this.useAnisotropy){const r=(this.anisotropyNode?ft(this.anisotropyNode):gpe).toVar();Tc.assign(r.length()),Cr(Tc.equal(0),()=>{r.assign(ft(1,0))}).Else(()=>{r.divAssign(ft(Tc)),Tc.assign(Tc.saturate())}),FE.assign(Tc.pow2().mix(Sa.pow2(),1)),p0.assign(tp[0].mul(r.x).add(tp[1].mul(r.y))),Vd.assign(tp[1].mul(r.x).sub(tp[0].mul(r.y)))}if(this.useTransmission){const r=this.transmissionNode?Ae(this.transmissionNode):xpe,i=this.thicknessNode?Ae(this.thicknessNode):bpe,o=this.attenuationDistanceNode?Ae(this.attenuationDistanceNode):wpe,s=this.attenuationColorNode?Ie(this.attenuationColorNode):Epe;if(BE.assign(r),pk.assign(i),mk.assign(o),gk.assign(s),this.useDispersion){const a=this.dispersionNode?Ae(this.dispersionNode):Ape;vk.assign(a)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?Ie(this.clearcoatNormalNode):fpe}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const hge=at(({normal:n,lightDirection:e,builder:r})=>{const i=n.dot(e),o=ft(i.mul(.5).add(.5),0);if(r.material.gradientMap){const s=Tl("gradientMap","texture").context({getUV:()=>o});return Ie(s.r)}else{const s=o.fwidth().mul(.5);return Hn(Ie(.7),Ie(1),pu(Ae(.7).sub(s.x),Ae(.7).add(s.x),o.x))}});class pge extends dx{direct({lightDirection:e,lightColor:r,reflectedLight:i},o,s){const a=hge({normal:Bk,lightDirection:e,builder:s}).mul(r);i.directDiffuse.addAssign(a.mul(Nf({diffuseColor:Sn.rgb})))}indirect({ambientOcclusion:e,irradiance:r,reflectedLight:i}){i.indirectDiffuse.addAssign(r.mul(Nf({diffuseColor:Sn}))),i.indirectDiffuse.mulAssign(e)}}const mge=new Ate;class gge extends Tr{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(mge),this.setValues(e)}setupLightingModel(){return new pge}}class vge extends Mr{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=Ie(ir.z,0,ir.x.negate()).normalize(),r=ir.cross(e);return ft(e.dot(Sr),r.dot(Sr)).mul(.495).add(.5)}}const yge=lt(vge),_ge=new Ite;class xge extends Tr{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(_ge),this.setValues(e)}setupVariants(e){const r=yge;let i;e.material.matcap?i=Tl("matcap","texture").context({getUV:()=>r}):i=Ie(Hn(.2,.8,r.y)),Sn.rgb.mulAssign(i.rgb)}}const bge=new cte;class Sge extends Tr{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.transparent=!0,this.sizeNode=null,this.setDefaultValues(bge),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}class wge extends Mr{static get type(){return"RotateNode"}constructor(e,r){super(),this.positionNode=e,this.rotationNode=r}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:r,positionNode:i}=this;if(this.getNodeType(e)==="vec2"){const s=r.cos(),a=r.sin();return VM(s,a,a.negate(),s).mul(i)}else{const s=r,a=kd(Kt(1,0,0,0),Kt(0,Sl(s.x),cs(s.x).negate(),0),Kt(0,cs(s.x),Sl(s.x),0),Kt(0,0,0,1)),l=kd(Kt(Sl(s.y),0,cs(s.y),0),Kt(0,1,0,0),Kt(cs(s.y).negate(),0,Sl(s.y),0),Kt(0,0,0,1)),c=kd(Kt(Sl(s.z),cs(s.z).negate(),0,0),Kt(cs(s.z),Sl(s.z),0,0),Kt(0,0,1,0),Kt(0,0,0,1));return a.mul(l).mul(c).mul(Kt(i,1)).xyz}}}const Ege=Be(wge),Cge=new rte;class Tge extends Tr{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(Cge),this.setValues(e)}setupPosition({object:e,camera:r,context:i}){const o=this.sizeAttenuation,{positionNode:s,rotationNode:a,scaleNode:l}=this,c=ii;let u=lx.mul(Ie(s||0)),d=ft(mu[0].xyz.length(),mu[1].xyz.length());if(l!==null&&(d=d.mul(l)),!o)if(r.isPerspectiveCamera)d=d.mul(u.z.negate());else{const y=Ae(2).div(Dy.element(1).element(1));d=d.mul(y.mul(2))}let f=c.xy;if(e.center&&e.center.isVector2===!0){const y=ahe("center","vec2");f=f.sub(y.sub(.5))}f=f.mul(d);const h=Ae(a||hpe),p=Ege(f,h);u=Kt(u.xy.add(p),u.zw);const g=Dy.mul(u);return i.vertex=c,g}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}class Mge extends dx{constructor(){super(),this.shadowNode=Ae(1).toVar("shadowMask")}direct({shadowMask:e}){this.shadowNode.mulAssign(e)}finish(e){Sn.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(Sn.rgb)}}const Rge=new Tte;class Age extends Tr{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.setDefaultValues(Rge),this.setValues(e)}setupLightingModel(){return new Mge}}at(({texture:n,uv:e})=>{const i=Ie().toVar();return Cr(e.x.lessThan(1e-4),()=>{i.assign(Ie(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{i.assign(Ie(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{i.assign(Ie(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{i.assign(Ie(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{i.assign(Ie(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{i.assign(Ie(0,0,-1))}).Else(()=>{const s=n.uv(e.add(Ie(-.01,0,0))).r.sub(n.uv(e.add(Ie(.01,0,0))).r),a=n.uv(e.add(Ie(0,-.01,0))).r.sub(n.uv(e.add(Ie(0,.01,0))).r),l=n.uv(e.add(Ie(0,0,-.01))).r.sub(n.uv(e.add(Ie(0,0,.01))).r);i.assign(Ie(s,a,l))}),i.normalize()});class Nge{constructor(e,r){this.nodes=e,this.info=r,this._context=self,this._animationLoop=null,this._requestId=null}start(){const e=(r,i)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(r,i)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}setAnimationLoop(e){this._animationLoop=e}setContext(e){this._context=e}dispose(){this.stop()}}class Qs{constructor(){this.weakMap=new WeakMap}get(e){let r=this.weakMap;for(let i=0;i<e.length;i++)if(r=r.get(e[i]),r===void 0)return;return r.get(e[e.length-1])}set(e,r){let i=this.weakMap;for(let o=0;o<e.length;o++){const s=e[o];i.has(s)===!1&&i.set(s,new WeakMap),i=i.get(s)}return i.set(e[e.length-1],r)}delete(e){let r=this.weakMap;for(let i=0;i<e.length;i++)if(r=r.get(e[i]),r===void 0)return!1;return r.delete(e[e.length-1])}}let Pge=0;function Oge(n){const e=Object.keys(n);let r=Object.getPrototypeOf(n);for(;r;){const i=Object.getOwnPropertyDescriptors(r);for(const o in i)if(i[o]!==void 0){const s=i[o];s&&typeof s.get=="function"&&e.push(o)}r=Object.getPrototypeOf(r)}return e}class Ige{constructor(e,r,i,o,s,a,l,c,u,d){this._nodes=e,this._geometries=r,this.id=Pge++,this.renderer=i,this.object=o,this.material=s,this.scene=a,this.camera=l,this.lightsNode=c,this.context=u,this.geometry=o.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=d,this.clippingContextCacheKey=d!==null?d.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().monitor)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,r=this.geometry,i=[],o=new Set;for(const s of e){const a=s.node&&s.node.attribute?s.node.attribute:r.getAttribute(s.name);if(a===void 0)continue;i.push(a);const l=a.isInterleavedBufferAttribute?a.data:a;o.add(l)}return this.attributes=i,this.vertexBuffers=Array.from(o.values()),i}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:r,geometry:i,group:o,drawRange:s}=this,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),l=this.getIndex(),c=l!==null,u=i.isInstancedBufferGeometry?i.instanceCount:e.count>1?e.count:1;if(u===0)return null;if(a.instanceCount=u,e.isBatchedMesh===!0)return a;let d=1;r.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(d=2);let f=s.start*d,h=(s.start+s.count)*d;o!==null&&(f=Math.max(f,o.start*d),h=Math.min(h,(o.start+o.count)*d));const p=i.attributes.position;let g=1/0;c?g=l.count:p!=null&&(g=p.count),f=Math.max(f,0),h=Math.min(h,g);const y=h-f;return y<0||y===1/0?null:(a.vertexCount=y,a.firstVertex=f,a)}getGeometryCacheKey(){const{geometry:e}=this;let r="";for(const i of Object.keys(e.attributes).sort()){const o=e.attributes[i];r+=i+",",o.data&&(r+=o.data.stride+","),o.offset&&(r+=o.offset+","),o.itemSize&&(r+=o.itemSize+","),o.normalized&&(r+="n,")}return e.index&&(r+="index,"),r}getMaterialCacheKey(){const{object:e,material:r}=this;let i=r.customProgramCacheKey();for(const o of Oge(r)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(o))continue;const s=r[o];let a;if(s!==null){const l=typeof s;l==="number"?a=s!==0?"1":"0":l==="object"?(a="{",s.isTexture&&(a+=s.mapping),a+="}"):a=String(s)}else a=String(s);i+=a+","}return i+=this.clippingContextCacheKey+",",e.geometry&&(i+=this.getGeometryCacheKey()),e.skeleton&&(i+=e.skeleton.bones.length+","),e.morphTargetInfluences&&(i+=e.morphTargetInfluences.length+","),e.isBatchedMesh&&(i+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(i+=e._colorsTexture.uuid+",")),e.count>1&&(i+=e.uuid+","),i+=e.receiveShadow+",",dde(i)}get needsGeometryUpdate(){return this.geometry.id!==this.object.geometry.id}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=this._nodes.getCacheKey(this.scene,this.lightsNode);return this.object.receiveShadow&&(e+=1),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const Zu=[];class Dge{constructor(e,r,i,o,s,a){this.renderer=e,this.nodes=r,this.geometries=i,this.pipelines=o,this.bindings=s,this.info=a,this.chainMaps={}}get(e,r,i,o,s,a,l,c){const u=this.getChainMap(c);Zu[0]=e,Zu[1]=r,Zu[2]=a,Zu[3]=s;let d=u.get(Zu);return d===void 0?(d=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,r,i,o,s,a,l,c),u.set(Zu,d)):(d.updateClipping(l),d.needsGeometryUpdate&&d.setGeometry(e.geometry),(d.version!==r.version||d.needsUpdate)&&(d.initialCacheKey!==d.getCacheKey()?(d.dispose(),d=this.get(e,r,i,o,s,a,l,c)):d.version=r.version)),d}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new Qs)}dispose(){this.chainMaps={}}createRenderObject(e,r,i,o,s,a,l,c,u,d,f){const h=this.getChainMap(f),p=new Ige(e,r,i,o,s,a,l,c,u,d);return p.onDispose=()=>{this.pipelines.delete(p),this.bindings.delete(p),this.nodes.delete(p),h.delete(p.getChainArray())},p}}class uc{constructor(){this.data=new WeakMap}get(e){let r=this.data.get(e);return r===void 0&&(r={},this.data.set(e,r)),r}delete(e){let r;return this.data.has(e)&&(r=this.data.get(e),this.data.delete(e)),r}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const zs={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},Ml=16,Lge=211,Fge=212;class Uge extends uc{constructor(e){super(),this.backend=e}delete(e){const r=super.delete(e);return r!==void 0&&this.backend.destroyAttribute(e),r}update(e,r){const i=this.get(e);if(i.version===void 0)r===zs.VERTEX?this.backend.createAttribute(e):r===zs.INDEX?this.backend.createIndexAttribute(e):r===zs.STORAGE?this.backend.createStorageAttribute(e):r===zs.INDIRECT&&this.backend.createIndirectStorageAttribute(e),i.version=this._getBufferAttribute(e).version;else{const o=this._getBufferAttribute(e);(i.version<o.version||o.usage===bd)&&(this.backend.updateAttribute(e),i.version=o.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function Bge(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function p4(n){return n.index!==null?n.index.version:n.attributes.position.version}function AI(n){const e=[],r=n.index,i=n.attributes.position;if(r!==null){const s=r.array;for(let a=0,l=s.length;a<l;a+=3){const c=s[a+0],u=s[a+1],d=s[a+2];e.push(c,u,u,d,d,c)}}else{const s=i.array;for(let a=0,l=s.length/3-1;a<l;a+=3){const c=a+0,u=a+1,d=a+2;e.push(c,u,u,d,d,c)}}const o=new(Bge(e)?dM:uM)(e,1);return o.version=p4(n),o}class $ge extends uc{constructor(e,r){super(),this.attributes=e,this.info=r,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const r=e.geometry;return super.has(r)&&this.get(r).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const r=e.geometry,i=this.get(r);i.initialized=!0,this.info.memory.geometries++;const o=()=>{this.info.memory.geometries--;const s=r.index,a=e.getAttributes();s!==null&&this.attributes.delete(s);for(const c of a)this.attributes.delete(c);const l=this.wireframes.get(r);l!==void 0&&this.attributes.delete(l),r.removeEventListener("dispose",o)};r.addEventListener("dispose",o)}updateAttributes(e){const r=e.getAttributes();for(const s of r)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,zs.STORAGE):this.updateAttribute(s,zs.VERTEX);const i=this.getIndex(e);i!==null&&this.updateAttribute(i,zs.INDEX);const o=e.geometry.indirect;o!==null&&this.updateAttribute(o,zs.INDIRECT)}updateAttribute(e,r){const i=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,r),this.attributeCall.set(e,i)):this.attributeCall.get(e.data)!==i&&(this.attributes.update(e,r),this.attributeCall.set(e.data,i),this.attributeCall.set(e,i)):this.attributeCall.get(e)!==i&&(this.attributes.update(e,r),this.attributeCall.set(e,i))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:r,material:i}=e;let o=r.index;if(i.wireframe===!0){const s=this.wireframes;let a=s.get(r);a===void 0?(a=AI(r),s.set(r,a)):a.version!==p4(r)&&(this.attributes.delete(a),a=AI(r),s.set(r,a)),o=a}return o}}class zge{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.compute={calls:0,frameCalls:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.memory={geometries:0,textures:0}}update(e,r,i){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=i*(r/3):e.isPoints?this.render.points+=i*r:e.isLineSegments?this.render.lines+=i*(r/2):e.isLine?this.render.lines+=i*(r-1):console.error("THREE.WebGPUInfo: Unknown object type.")}updateTimestamp(e,r){this[e].timestampCalls===0&&(this[e].timestamp=0),this[e].timestamp+=r,this[e].timestampCalls++,this[e].timestampCalls>=this[e].previousFrameCalls&&(this[e].timestampCalls=0)}reset(){const e=this.render.frameCalls;this.render.previousFrameCalls=e;const r=this.compute.frameCalls;this.compute.previousFrameCalls=r,this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class m4{constructor(e){this.cacheKey=e,this.usedTimes=0}}class kge extends m4{constructor(e,r,i){super(e),this.vertexProgram=r,this.fragmentProgram=i}}class Vge extends m4{constructor(e,r){super(e),this.computeProgram=r,this.isComputePipeline=!0}}let Gge=0;class LS{constructor(e,r,i=null,o=null){this.id=Gge++,this.code=e,this.stage=r,this.transforms=i,this.attributes=o,this.usedTimes=0}}class Hge extends uc{constructor(e,r){super(),this.backend=e,this.nodes=r,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,r){const{backend:i}=this,o=this.get(e);if(this._needsComputeUpdate(e)){const s=o.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const a=this.nodes.getForCompute(e);let l=this.programs.compute.get(a.computeShader);l===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),l=new LS(a.computeShader,"compute",a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,l),i.createProgram(l));const c=this._getComputeCacheKey(e,l);let u=this.caches.get(c);u===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),u=this._getComputePipeline(e,l,c,r)),u.usedTimes++,l.usedTimes++,o.version=e.version,o.pipeline=u}return o.pipeline}getForRender(e,r=null){const{backend:i}=this,o=this.get(e);if(this._needsRenderUpdate(e)){const s=o.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const a=e.getNodeBuilderState();let l=this.programs.vertex.get(a.vertexShader);l===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),l=new LS(a.vertexShader,"vertex"),this.programs.vertex.set(a.vertexShader,l),i.createProgram(l));let c=this.programs.fragment.get(a.fragmentShader);c===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),c=new LS(a.fragmentShader,"fragment"),this.programs.fragment.set(a.fragmentShader,c),i.createProgram(c));const u=this._getRenderCacheKey(e,l,c);let d=this.caches.get(u);d===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),d=this._getRenderPipeline(e,l,c,u,r)):e.pipeline=d,d.usedTimes++,l.usedTimes++,c.usedTimes++,o.pipeline=d}return o.pipeline}delete(e){const r=this.get(e).pipeline;return r&&(r.usedTimes--,r.usedTimes===0&&this._releasePipeline(r),r.isComputePipeline?(r.computeProgram.usedTimes--,r.computeProgram.usedTimes===0&&this._releaseProgram(r.computeProgram)):(r.fragmentProgram.usedTimes--,r.vertexProgram.usedTimes--,r.vertexProgram.usedTimes===0&&this._releaseProgram(r.vertexProgram),r.fragmentProgram.usedTimes===0&&this._releaseProgram(r.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,r,i,o){i=i||this._getComputeCacheKey(e,r);let s=this.caches.get(i);return s===void 0&&(s=new Vge(i,r),this.caches.set(i,s),this.backend.createComputePipeline(s,o)),s}_getRenderPipeline(e,r,i,o,s){o=o||this._getRenderCacheKey(e,r,i);let a=this.caches.get(o);return a===void 0&&(a=new kge(o,r,i),this.caches.set(o,a),e.pipeline=a,this.backend.createRenderPipeline(e,s)),a}_getComputeCacheKey(e,r){return e.id+","+r.id}_getRenderCacheKey(e,r,i){return r.id+","+i.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const r=e.code,i=e.stage;this.programs[i].delete(r)}_needsComputeUpdate(e){const r=this.get(e);return r.pipeline===void 0||r.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class jge extends uc{constructor(e,r,i,o,s,a){super(),this.backend=e,this.textures=i,this.pipelines=s,this.attributes=o,this.nodes=r,this.info=a,this.pipelines.bindings=this}getForRender(e){const r=e.getBindings();for(const i of r){const o=this.get(i);o.bindGroup===void 0&&(this._init(i),this.backend.createBindings(i,r,0),o.bindGroup=i)}return r}getForCompute(e){const r=this.nodes.getForCompute(e).bindings;for(const i of r){const o=this.get(i);o.bindGroup===void 0&&(this._init(i),this.backend.createBindings(i,r,0),o.bindGroup=i)}return r}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const r of e)this._update(r,e)}_init(e){for(const r of e.bindings)if(r.isSampledTexture)this.textures.updateTexture(r.texture);else if(r.isStorageBuffer){const i=r.attribute,o=i.isIndirectStorageBufferAttribute?zs.INDIRECT:zs.STORAGE;this.attributes.update(i,o)}}_update(e,r){const{backend:i}=this;let o=!1,s=!0,a=0,l=0;for(const c of e.bindings)if(!(c.isNodeUniformsGroup&&!this.nodes.updateGroup(c))){if(c.isUniformBuffer)c.update()&&i.updateBinding(c);else if(c.isSampler)c.update();else if(c.isSampledTexture){const u=this.textures.get(c.texture);c.needsBindingsUpdate(u.generation)&&(o=!0);const d=c.update(),f=c.texture;d&&this.textures.updateTexture(f);const h=i.get(f);if(h.externalTexture!==void 0||u.isDefaultTexture?s=!1:(a=a*10+f.id,l+=f.version),i.isWebGPUBackend===!0&&h.texture===void 0&&h.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",c,d,f,c.textureNode.value,o),this.textures.updateTexture(f),o=!0),f.isStorageTexture===!0){const p=this.get(f);c.store===!0?p.needsMipmap=!0:this.textures.needsMipmaps(f)&&p.needsMipmap===!0&&(this.backend.generateMipmaps(f),p.needsMipmap=!1)}}}o===!0&&this.backend.updateBindings(e,r,s?a:0,l)}}function Wge(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function NI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function PI(n){return(n.transmission>0||n.transmissionNode)&&n.side===wi&&n.forceSinglePass===!1}class qge{constructor(e,r,i){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(r,i),this.lightsArray=[],this.scene=r,this.camera=i,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,r,i,o,s,a,l){let c=this.renderItems[this.renderItemsIndex];return c===void 0?(c={id:e.id,object:e,geometry:r,material:i,groupOrder:o,renderOrder:e.renderOrder,z:s,group:a,clippingContext:l},this.renderItems[this.renderItemsIndex]=c):(c.id=e.id,c.object=e,c.geometry=r,c.material=i,c.groupOrder=o,c.renderOrder=e.renderOrder,c.z=s,c.group=a,c.clippingContext=l),this.renderItemsIndex++,c}push(e,r,i,o,s,a,l){const c=this.getNextRenderItem(e,r,i,o,s,a,l);e.occlusionTest===!0&&this.occlusionQueryCount++,i.transparent===!0||i.transmission>0?(PI(i)&&this.transparentDoublePass.push(c),this.transparent.push(c)):this.opaque.push(c)}unshift(e,r,i,o,s,a,l){const c=this.getNextRenderItem(e,r,i,o,s,a,l);i.transparent===!0||i.transmission>0?(PI(i)&&this.transparentDoublePass.unshift(c),this.transparent.unshift(c)):this.opaque.unshift(c)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,r){this.opaque.length>1&&this.opaque.sort(e||Wge),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(r||NI),this.transparent.length>1&&this.transparent.sort(r||NI)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,r=this.renderItems.length;e<r;e++){const i=this.renderItems[e];if(i.id===null)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.groupOrder=null,i.renderOrder=null,i.z=null,i.group=null,i.clippingContext=null}}}class Xge{constructor(e){this.lighting=e,this.lists=new Qs}get(e,r){const i=this.lists,o=[e,r];let s=i.get(o);return s===void 0&&(s=new qge(this.lighting,e,r),i.set(o,s)),s}dispose(){this.lists=new Qs}}let Kge=0;class Yge{constructor(){this.id=Kge++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new Wt,this.scissor=!1,this.scissorValue=new Wt,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.sampleCount=1,this.width=0,this.height=0,this.isRenderContext=!0}getCacheKey(){return g4(this)}}function g4(n){const{textures:e,activeCubeFace:r}=n,i=[r];for(const o of e)i.push(o.id);return Jz(i)}class Qge{constructor(){this.chainMaps={}}get(e,r,i=null){const o=[e,r];let s;if(i===null)s="default";else{const c=i.texture.format;s=`${i.textures.length}:${c}:${i.samples}:${i.depthBuffer}:${i.stencilBuffer}`}const a=this.getChainMap(s);let l=a.get(o);return l===void 0&&(l=new Yge,a.set(o,l)),i!==null&&(l.sampleCount=i.samples===0?1:i.samples),l}getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new Qs)}dispose(){this.chainMaps={}}}const Zge=new K;class Jge extends uc{constructor(e,r,i){super(),this.renderer=e,this.backend=r,this.info=i}updateRenderTarget(e,r=0){const i=this.get(e),o=e.samples===0?1:e.samples,s=i.depthTextureMips||(i.depthTextureMips={}),a=e.textures,l=this.getSize(a[0]),c=l.width>>r,u=l.height>>r;let d=e.depthTexture||s[r];const f=e.depthBuffer===!0||e.stencilBuffer===!0;let h=!1;d===void 0&&f&&(d=new ac,d.format=e.stencilBuffer?qs:Hs,d.type=e.stencilBuffer?Ws:rr,d.image.width=c,d.image.height=u,s[r]=d),(i.width!==l.width||l.height!==i.height)&&(h=!0,d&&(d.needsUpdate=!0,d.image.width=c,d.image.height=u)),i.width=l.width,i.height=l.height,i.textures=a,i.depthTexture=d||null,i.depth=e.depthBuffer,i.stencil=e.stencilBuffer,i.renderTarget=e,i.sampleCount!==o&&(h=!0,d&&(d.needsUpdate=!0),i.sampleCount=o);const p={sampleCount:o};for(let g=0;g<a.length;g++){const y=a[g];h&&(y.needsUpdate=!0),this.updateTexture(y,p)}if(d&&this.updateTexture(d,p),i.initialized!==!0){i.initialized=!0;const g=()=>{e.removeEventListener("dispose",g);for(let y=0;y<a.length;y++)this._destroyTexture(a[y]);d&&this._destroyTexture(d),this.delete(e)};e.addEventListener("dispose",g)}}updateTexture(e,r={}){const i=this.get(e);if(i.initialized===!0&&i.version===e.version)return;const o=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(o&&i.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const u=this.renderer.getRenderTarget();u?e.type=u.texture.type:e.type=fi}const{width:a,height:l,depth:c}=this.getSize(e);if(r.width=a,r.height=l,r.depth=c,r.needsMipmaps=this.needsMipmaps(e),r.levels=r.needsMipmaps?this.getMipLevels(e,a,l):1,o||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,r),i.generation=e.version;else if(i.initialized!==!0&&s.createSampler(e),e.version>0){const d=e.image;if(d===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(d.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const f=[];for(const h of e.images)f.push(h);r.images=f}else r.image=d;(i.isDefaultTexture===void 0||i.isDefaultTexture===!0)&&(s.createTexture(e,r),i.isDefaultTexture=!1,i.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,r),r.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),i.isDefaultTexture=!0,i.generation=e.version;if(i.initialized!==!0){i.initialized=!0,i.generation=e.version,this.info.memory.textures++;const u=()=>{e.removeEventListener("dispose",u),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",u)}i.version=e.version}getSize(e,r=Zge){let i=e.images?e.images[0]:e.image;return i?(i.image!==void 0&&(i=i.image),r.width=i.width||1,r.height=i.height||1,r.depth=e.isCubeTexture?6:i.depth||1):r.width=r.height=r.depth=1,r}getMipLevels(e,r,i){let o;return e.isCompressedTexture?e.mipmaps?o=e.mipmaps.length:o=1:o=Math.floor(Math.log2(Math.max(r,i)))+1,o}needsMipmaps(e){return this.isEnvironmentTexture(e)||e.isCompressedTexture===!0||e.generateMipmaps}isEnvironmentTexture(e){const r=e.mapping;return r===Ql||r===Zl||r===Wo||r===qo}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}class rR extends Tt{constructor(e,r,i,o=1){super(e,r,i),this.a=o}set(e,r,i,o=1){return this.a=o,super.set(e,r,i)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class eve extends Mn{static get type(){return"ParameterNode"}constructor(e,r=null){super(e,r),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}class tve extends Qt{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(e),this}If(e,r){const i=new h0(r);return this._currentCond=Hi(e,i),this.add(this._currentCond)}ElseIf(e,r){const i=new h0(r),o=Hi(e,i);return this._currentCond.elseNode=o,this._currentCond=o,this}Else(e){return this._currentCond.elseNode=new h0(e),this}build(e,...r){const i=ak();Ry(this);for(const o of this.nodes)o.build(e,"void");return Ry(i),this.outputNode?this.outputNode.build(e,...r):super.build(e,...r)}else(...e){return console.warn("TSL.StackNode: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("TSL.StackNode: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const FS=Be(tve);new ls;new K;new K;new K;new fn;new K(0,0,-1);new Wt;new K;new K;new Wt;new je;const nve=new Yf;Am.flipX();nve.depthTexture=new ac(1,1);const US=new Zm(-1,1,1,-1,0,1);class rve extends Di{constructor(e=!1){super();const r=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new mr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new mr(r,2))}}const ive=new rve;class v4 extends Br{constructor(e=null){super(ive,e),this.camera=US,this.isQuadMesh=!0}renderAsync(e){return e.renderAsync(this,US)}render(e){e.render(this,US)}}const Ih=new xo,BS=new fn;class Wi extends Qt{static get type(){return"SceneNode"}constructor(e=Wi.BACKGROUND_BLURRINESS,r=null){super(),this.scope=e,this.scene=r}setup(e){const r=this.scope,i=this.scene!==null?this.scene:e.scene;let o;return r===Wi.BACKGROUND_BLURRINESS?o=An("backgroundBlurriness","float",i):r===Wi.BACKGROUND_INTENSITY?o=An("backgroundIntensity","float",i):r===Wi.BACKGROUND_ROTATION?o=qt("mat4").label("backgroundRotation").setGroup(Ht).onRenderUpdate(()=>{const s=i.background;return s!==null&&s.isTexture&&s.mapping!==YT?(Ih.copy(i.backgroundRotation),Ih.x*=-1,Ih.y*=-1,Ih.z*=-1,BS.makeRotationFromEuler(Ih)):BS.identity(),BS}):console.error("THREE.SceneNode: Unknown scope:",r),o}}Wi.BACKGROUND_BLURRINESS="backgroundBlurriness";Wi.BACKGROUND_INTENSITY="backgroundIntensity";Wi.BACKGROUND_ROTATION="backgroundRotation";const ove=lt(Wi,Wi.BACKGROUND_BLURRINESS),OI=lt(Wi,Wi.BACKGROUND_INTENSITY),sve=lt(Wi,Wi.BACKGROUND_ROTATION),ave=new je;class lve extends sg{static get type(){return"PassTextureNode"}constructor(e,r){super(r),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class II extends lve{static get type(){return"PassMultipleTextureNode"}constructor(e,r,i=!1){super(e,null),this.textureName=r,this.previousTexture=i}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class hx extends Mr{static get type(){return"PassNode"}constructor(e,r,i,o={}){super("vec4"),this.scope=e,this.scene=r,this.camera=i,this.options=o,this._pixelRatio=1,this._width=1,this._height=1;const s=new ac;s.isRenderTargetTexture=!0,s.name="depth";const a=new Yf(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Yr,...o});a.texture.name="output",a.depthTexture=s,this.renderTarget=a,this.updateBeforeType=on.FRAME,this._textures={output:a.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=qt(0),this._cameraFar=qt(0),this._mrt=null,this.isPassNode=!0}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let r=this._textures[e];return r===void 0&&(r=this.renderTarget.texture.clone(),r.isRenderTargetTexture=!0,r.name=e,this._textures[e]=r,this.renderTarget.textures.push(r)),r}getPreviousTexture(e){let r=this._previousTextures[e];return r===void 0&&(r=this.getTexture(e).clone(),r.isRenderTargetTexture=!0,this._previousTextures[e]=r),r}toggleTexture(e){const r=this._previousTextures[e];if(r!==void 0){const i=this._textures[e],o=this.renderTarget.textures.indexOf(i);this.renderTarget.textures[o]=r,this._textures[e]=r,this._previousTextures[e]=i,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let r=this._textureNodes[e];return r===void 0&&(r=nt(new II(this,e)),r.updateTexture(),this._textureNodes[e]=r),r}getPreviousTextureNode(e="output"){let r=this._previousTextureNodes[e];return r===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),r=nt(new II(this,e,!0)),r.updateTexture(),this._previousTextureNodes[e]=r),r}getViewZNode(e="depth"){let r=this._viewZNodes[e];if(r===void 0){const i=this._cameraNear,o=this._cameraFar;this._viewZNodes[e]=r=Yk(this.getTextureNode(e),i,o)}return r}getLinearDepthNode(e="depth"){let r=this._linearDepthNodes[e];if(r===void 0){const i=this._cameraNear,o=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=r=wp(s,i,o)}return r}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.depthTexture.isMultisampleRenderTargetTexture=this.renderTarget.samples>1,this.scope===hx.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:r}=e,{scene:i,camera:o}=this;this._pixelRatio=r.getPixelRatio();const s=r.getSize(ave);this.setSize(s.width,s.height);const a=r.getRenderTarget(),l=r.getMRT();this._cameraNear.value=o.near,this._cameraFar.value=o.far;for(const c in this._previousTextures)this.toggleTexture(c);r.setRenderTarget(this.renderTarget),r.setMRT(this._mrt),r.render(i,o),r.setRenderTarget(a),r.setMRT(l)}setSize(e,r){this._width=e,this._height=r;const i=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget.setSize(i,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}hx.COLOR="color";hx.DEPTH="depth";const cve=at(([n,e])=>n.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),uve=at(([n,e])=>(n=n.mul(e),n.div(n.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),dve=at(([n,e])=>{n=n.mul(e),n=n.sub(.004).max(0);const r=n.mul(n.mul(6.2).add(.5)),i=n.mul(n.mul(6.2).add(1.7)).add(.06);return r.div(i).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),fve=at(([n])=>{const e=n.mul(n.add(.0245786)).sub(90537e-9),r=n.mul(n.add(.432951).mul(.983729)).add(.238081);return e.div(r)}),hve=at(([n,e])=>{const r=Ai(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),i=Ai(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return n=n.mul(e).div(.6),n=r.mul(n),n=fve(n),n=i.mul(n),n.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),pve=Ai(Ie(1.6605,-.1246,-.0182),Ie(-.5876,1.1329,-.1006),Ie(-.0728,-.0083,1.1187)),mve=Ai(Ie(.6274,.0691,.0164),Ie(.3293,.9195,.088),Ie(.0433,.0113,.8956)),gve=at(([n])=>{const e=Ie(n).toVar(),r=Ie(e.mul(e)).toVar(),i=Ie(r.mul(r)).toVar();return Ae(15.5).mul(i.mul(r)).sub(sn(40.14,i.mul(e))).add(sn(31.96,i).sub(sn(6.868,r.mul(e))).add(sn(.4298,r).add(sn(.1191,e).sub(.00232))))}),vve=at(([n,e])=>{const r=Ie(n).toVar(),i=Ai(Ie(.856627153315983,.137318972929847,.11189821299995),Ie(.0951212405381588,.761241990602591,.0767994186031903),Ie(.0482516061458583,.101439036467562,.811302368396859)),o=Ai(Ie(1.1271005818144368,-.1413297634984383,-.14132976349843826),Ie(-.11060664309660323,1.157823702216272,-.11060664309660294),Ie(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=Ae(-12.47393),a=Ae(4.026069);return r.mulAssign(e),r.assign(mve.mul(r)),r.assign(i.mul(r)),r.assign(Ji(r,1e-10)),r.assign(Da(r)),r.assign(r.sub(s).div(a.sub(s))),r.assign(ja(r,0,1)),r.assign(gve(r)),r.assign(o.mul(r)),r.assign(ox(Ji(Ie(0),r),Ie(2.2))),r.assign(pve.mul(r)),r.assign(ja(r,0,1)),r}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),yve=at(([n,e])=>{const r=Ae(.76),i=Ae(.15);n=n.mul(e);const o=Cm(n.r,Cm(n.g,n.b)),s=Hi(o.lessThan(.08),o.sub(sn(6.25,o.mul(o))),.04);n.subAssign(s);const a=Ji(n.r,Ji(n.g,n.b));Cr(a.lessThan(r),()=>n);const l=$i(1,r),c=$i(1,l.mul(l).div(a.add(l.sub(r))));n.mulAssign(c.div(a));const u=$i(1,Ha(1,i.mul(a.sub(c)).add(1)));return Hn(n,Ie(c),u)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class Ir extends Qt{static get type(){return"CodeNode"}constructor(e="",r=[],i=""){super("code"),this.isCodeNode=!0,this.code=e,this.language=i,this.includes=r}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const r=this.getIncludes(e);for(const o of r)o.build(e);const i=e.getCodeFromNode(this,this.getNodeType(e));return i.code=this.code,i.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}class _ve extends Ir{static get type(){return"FunctionNode"}constructor(e="",r=[],i=""){super(e,r,i)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const r=e.getDataFromNode(this);let i=r.nodeFunction;return i===void 0&&(i=e.parser.parseFunction(this.code),r.nodeFunction=i),i}generate(e,r){super.generate(e);const i=this.getNodeFunction(e),o=i.name,s=i.type,a=e.getCodeFromNode(this,s);o!==""&&(a.name=o);const l=e.getPropertyName(a),c=this.getNodeFunction(e).getCode(l);return a.code=c+`
`,r==="property"?l:e.format(`${l}()`,s,r)}}class y4 extends Qt{static get type(){return"FogNode"}constructor(e,r){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=r}getViewZNode(e){let r;const i=e.context.getViewZ;return i!==void 0&&(r=i(this)),(r||Lr.z).negate()}setup(){return this.factorNode}}class xve extends y4{static get type(){return"FogRangeNode"}constructor(e,r,i){super(e),this.isFogRangeNode=!0,this.nearNode=r,this.farNode=i}setup(e){const r=this.getViewZNode(e);return pu(this.nearNode,this.farNode,r)}}const bve=Be(xve);class Sve extends y4{static get type(){return"FogExp2Node"}constructor(e,r){super(e),this.isFogExp2Node=!0,this.densityNode=r}setup(e){const r=this.getViewZNode(e),i=this.densityNode;return i.mul(i,r,r).negate().exp().oneMinus()}}const wve=Be(Sve);class Eve extends Qt{constructor(e){super(),this.scope=e}generate(e){const{scope:r}=this,{renderer:i}=e;i.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${r}Barrier 
`):e.addLineFlowCode(`${r}Barrier()`,this)}}Be(Eve);class ta extends Mr{static get type(){return"AtomicFunctionNode"}constructor(e,r,i,o=null){super("uint"),this.method=e,this.pointerNode=r,this.valueNode=i,this.storeNode=o}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const r=this.method,i=this.getNodeType(e),o=this.getInputType(e),s=this.pointerNode,a=this.valueNode,l=[];l.push(`&${s.build(e,o)}`),l.push(a.build(e,o));const c=`${e.getMethod(r,i)}( ${l.join(", ")} )`;if(this.storeNode!==null){const u=this.storeNode.build(e,o);e.addLineFlowCode(`${u} = ${c}`,this)}else e.addLineFlowCode(c,this)}}ta.ATOMIC_LOAD="atomicLoad";ta.ATOMIC_STORE="atomicStore";ta.ATOMIC_ADD="atomicAdd";ta.ATOMIC_SUB="atomicSub";ta.ATOMIC_MAX="atomicMax";ta.ATOMIC_MIN="atomicMin";ta.ATOMIC_AND="atomicAnd";ta.ATOMIC_OR="atomicOr";ta.ATOMIC_XOR="atomicXor";Be(ta);let wv;function ag(n){wv=wv||new WeakMap;let e=wv.get(n);return e===void 0&&wv.set(n,e={}),e}function _4(n){const e=ag(n);return e.shadowMatrix||(e.shadowMatrix=qt("mat4").setGroup(Ht).onRenderUpdate(()=>(n.shadow.updateMatrices(n),n.shadow.matrix)))}function Cve(n){const e=ag(n);if(e.projectionUV===void 0){const r=_4(n).mul(Mm);e.projectionUV=r.xyz.div(r.w)}return e.projectionUV}function x4(n){const e=ag(n);return e.position||(e.position=qt(new K).setGroup(Ht).onRenderUpdate((r,i)=>i.value.setFromMatrixPosition(n.matrixWorld)))}function Tve(n){const e=ag(n);return e.targetPosition||(e.targetPosition=qt(new K).setGroup(Ht).onRenderUpdate((r,i)=>i.value.setFromMatrixPosition(n.target.matrixWorld)))}function iR(n){const e=ag(n);return e.viewPosition||(e.viewPosition=qt(new K).setGroup(Ht).onRenderUpdate(({camera:r},i)=>{i.value=i.value||new K,i.value.setFromMatrixPosition(n.matrixWorld),i.value.applyMatrix4(r.matrixWorldInverse)}))}const b4=n=>el.transformDirection(x4(n).sub(Tve(n))),Mve=n=>n.sort((e,r)=>e.id-r.id),Rve=(n,e)=>{for(const r of e)if(r.isAnalyticLightNode&&r.light.id===n)return r;return null},$S=new WeakMap;class S4 extends Qt{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=Ie().toVar("totalDiffuse"),this.totalSpecularNode=Ie().toVar("totalSpecular"),this.outgoingLightNode=Ie().toVar("outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const r=[];for(const i of this._lightNodes)r.push(i.getSelf().getHash());this._lightNodesHash="lights-"+r.join(",")}return this._lightNodesHash}analyze(e){const r=e.getDataFromNode(this);for(const i of r.nodes)i.build(e)}setupLightsNode(e){const r=[],i=this._lightNodes,o=Mve(this._lights),s=e.renderer.library;for(const a of o)if(a.isNode)r.push(nt(a));else{let l=null;if(i!==null&&(l=Rve(a.id,i)),l===null){const c=s.getLightNodeClass(a.constructor);if(c===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${a.constructor.name}`);continue}let u=null;$S.has(a)?u=$S.get(a):(u=nt(new c(a)),$S.set(a,u)),r.push(u)}}this._lightNodes=r}setupLights(e,r){for(const i of r)i.build(e)}setup(e){this._lightNodes===null&&this.setupLightsNode(e);const r=e.context,i=r.lightingModel;let o=this.outgoingLightNode;if(i){const{_lightNodes:s,totalDiffuseNode:a,totalSpecularNode:l}=this;r.outgoingLight=o;const c=e.addStack(),u=e.getDataFromNode(this);u.nodes=c.nodes,i.start(r,c,e),this.setupLights(e,s),i.indirect(r,c,e);const{backdrop:d,backdropAlpha:f}=r,{directDiffuse:h,directSpecular:p,indirectDiffuse:g,indirectSpecular:y}=r.reflectedLight;let v=h.add(g);d!==null&&(f!==null?v=Ie(f.mix(v,d)):v=Ie(d),r.material.transparent=!0),a.assign(v),l.assign(p.add(y)),o.assign(a.add(l)),i.finish(r,c,e),o=o.bypass(e.removeStack())}return o}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const DI=new WeakMap,LI=Ie().toVar("shadowWorldPosition"),Ave=at(([n,e,r])=>{let i=Mm.sub(n).length();return i=i.sub(e).div(r.sub(e)),i=i.saturate(),i}),Nve=n=>{const e=n.shadow.camera,r=An("near","float",e).setGroup(Ht),i=An("far","float",e).setGroup(Ht),o=Nhe(n);return Ave(o,r,i)},Pve=n=>{let e=DI.get(n);if(e===void 0){const r=n.isPointLight?Nve(n):null;e=new Tr,e.colorNode=Kt(0,0,0,1),e.depthNode=r,e.isShadowNodeMaterial=!0,e.blending=Mi,e.name="ShadowMaterial",DI.set(n,e)}return e},Ove=at(({depthTexture:n,shadowCoord:e})=>mn(n,e.xy).compare(e.z)),Ive=at(({depthTexture:n,shadowCoord:e,shadow:r})=>{const i=(y,v)=>mn(n,y).compare(v),o=An("mapSize","vec2",r).setGroup(Ht),s=An("radius","float",r).setGroup(Ht),a=ft(1).div(o),l=a.x.negate().mul(s),c=a.y.negate().mul(s),u=a.x.mul(s),d=a.y.mul(s),f=l.div(2),h=c.div(2),p=u.div(2),g=d.div(2);return Ni(i(e.xy.add(ft(l,c)),e.z),i(e.xy.add(ft(0,c)),e.z),i(e.xy.add(ft(u,c)),e.z),i(e.xy.add(ft(f,h)),e.z),i(e.xy.add(ft(0,h)),e.z),i(e.xy.add(ft(p,h)),e.z),i(e.xy.add(ft(l,0)),e.z),i(e.xy.add(ft(f,0)),e.z),i(e.xy,e.z),i(e.xy.add(ft(p,0)),e.z),i(e.xy.add(ft(u,0)),e.z),i(e.xy.add(ft(f,g)),e.z),i(e.xy.add(ft(0,g)),e.z),i(e.xy.add(ft(p,g)),e.z),i(e.xy.add(ft(l,d)),e.z),i(e.xy.add(ft(0,d)),e.z),i(e.xy.add(ft(u,d)),e.z)).mul(1/17)}),Dve=at(({depthTexture:n,shadowCoord:e,shadow:r})=>{const i=(d,f)=>mn(n,d).compare(f),o=An("mapSize","vec2",r).setGroup(Ht),s=ft(1).div(o),a=s.x,l=s.y,c=e.xy,u=cc(c.mul(o).add(.5));return c.subAssign(u.mul(s)),Ni(i(c,e.z),i(c.add(ft(a,0)),e.z),i(c.add(ft(0,l)),e.z),i(c.add(s),e.z),Hn(i(c.add(ft(a.negate(),0)),e.z),i(c.add(ft(a.mul(2),0)),e.z),u.x),Hn(i(c.add(ft(a.negate(),l)),e.z),i(c.add(ft(a.mul(2),l)),e.z),u.x),Hn(i(c.add(ft(0,l.negate())),e.z),i(c.add(ft(0,l.mul(2))),e.z),u.y),Hn(i(c.add(ft(a,l.negate())),e.z),i(c.add(ft(a,l.mul(2))),e.z),u.y),Hn(Hn(i(c.add(ft(a.negate(),l.negate())),e.z),i(c.add(ft(a.mul(2),l.negate())),e.z),u.x),Hn(i(c.add(ft(a.negate(),l.mul(2))),e.z),i(c.add(ft(a.mul(2),l.mul(2))),e.z),u.x),u.y)).mul(1/9)}),Lve=at(({depthTexture:n,shadowCoord:e})=>{const r=Ae(1).toVar(),i=mn(n).uv(e.xy).rg,o=Ck(e.z,i.x);return Cr(o.notEqual(Ae(1)),()=>{const s=e.z.sub(i.x),a=Ji(0,i.y.mul(i.y));let l=a.div(a.add(s.mul(s)));l=ja($i(l,.3).div(.95-.3)),r.assign(ja(Ji(o,l)))}),r}),Fve=at(({samples:n,radius:e,size:r,shadowPass:i})=>{const o=Ae(0).toVar(),s=Ae(0).toVar(),a=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(2).div(n.sub(1))),l=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(-1));fs({start:cr(0),end:cr(n),type:"int",condition:"<"},({i:u})=>{const d=l.add(Ae(u).mul(a)),f=i.uv(Ni(ux.xy,ft(0,d).mul(e)).div(r)).x;o.addAssign(f),s.addAssign(f.mul(f))}),o.divAssign(n),s.divAssign(n);const c=jM(s.sub(o.mul(o)));return ft(o,c)}),Uve=at(({samples:n,radius:e,size:r,shadowPass:i})=>{const o=Ae(0).toVar(),s=Ae(0).toVar(),a=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(2).div(n.sub(1))),l=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(-1));fs({start:cr(0),end:cr(n),type:"int",condition:"<"},({i:u})=>{const d=l.add(Ae(u).mul(a)),f=i.uv(Ni(ux.xy,ft(d,0).mul(e)).div(r));o.addAssign(f.x),s.addAssign(Ni(f.y.mul(f.y),f.x.mul(f.x)))}),o.divAssign(n),s.divAssign(n);const c=jM(s.sub(o.mul(o)));return ft(o,c)}),Bve=[Ove,Ive,Dve,Lve],Ev=new v4;class w4 extends Qt{static get type(){return"ShadowNode"}constructor(e,r=null){super(),this.light=e,this.shadow=r||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this.updateBeforeType=on.RENDER,this._node=null,this.isShadowNode=!0}setupShadowFilter(e,{filterFn:r,depthTexture:i,shadowCoord:o,shadow:s}){const a=o.x.greaterThanEqual(0).and(o.x.lessThanEqual(1)).and(o.y.greaterThanEqual(0)).and(o.y.lessThanEqual(1)).and(o.z.lessThanEqual(1)),l=r({depthTexture:i,shadowCoord:o,shadow:s});return a.select(l,Ae(1))}setupShadowCoord(e,r){const{shadow:i}=this,{renderer:o}=e,s=An("bias","float",i).setGroup(Ht);let a=r,l;if(i.camera.isOrthographicCamera||o.logarithmicDepthBuffer!==!0)a=a.xyz.div(a.w),l=a.z,o.coordinateSystem===fu&&(l=l.mul(2).sub(1));else{const c=a.w;a=a.xy.div(c);const u=An("near","float",i.camera).setGroup(Ht),d=An("far","float",i.camera).setGroup(Ht);l=Qk(c.negate(),u,d)}return a=Ie(a.x,a.y.oneMinus(),l.add(s)),a}getShadowFilterFn(e){return Bve[e]}setupShadow(e){const{renderer:r}=e,{light:i,shadow:o}=this,s=r.shadowMap.type,a=new ac(o.mapSize.width,o.mapSize.height);a.compareFunction=G_;const l=e.createRenderTarget(o.mapSize.width,o.mapSize.height);if(l.depthTexture=a,o.camera.updateProjectionMatrix(),s===ho){a.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:du,type:Yr}),this.vsmShadowMapHorizontal=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:du,type:Yr});const m=mn(a),_=mn(this.vsmShadowMapVertical.texture),x=An("blurSamples","float",o).setGroup(Ht),S=An("radius","float",o).setGroup(Ht),w=An("mapSize","vec2",o).setGroup(Ht);let E=this.vsmMaterialVertical||(this.vsmMaterialVertical=new Tr);E.fragmentNode=Fve({samples:x,radius:S,size:w,shadowPass:m}).context(e.getSharedContext()),E.name="VSMVertical",E=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new Tr),E.fragmentNode=Uve({samples:x,radius:S,size:w,shadowPass:_}).context(e.getSharedContext()),E.name="VSMHorizontal"}const c=An("intensity","float",o).setGroup(Ht),u=An("normalBias","float",o).setGroup(Ht),d=_4(i).mul(LI.add(QM.mul(u))),f=this.setupShadowCoord(e,d),h=o.filterNode||this.getShadowFilterFn(r.shadowMap.type)||null;if(h===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const p=s===ho?this.vsmShadowMapHorizontal.texture:a,g=this.setupShadowFilter(e,{filterFn:h,shadowTexture:l.texture,depthTexture:p,shadowCoord:f,shadow:o}),y=mn(l.texture,f),v=Hn(1,g.rgb.mix(y,1),c.mul(y.a)).toVar();return this.shadowMap=l,this.shadow.map=l,v}setup(e){if(e.renderer.shadowMap.enabled!==!1)return at(({material:r})=>{LI.assign(r.shadowPositionNode||Mm);let i=this._node;return i===null&&(this._node=i=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(i=e.material.receivedShadowNode(i)),i})()}renderShadow(e){const{shadow:r,shadowMap:i}=this,{renderer:o,scene:s}=e;i.setSize(r.mapSize.width,r.mapSize.height),o.render(s,r.camera)}updateShadow(e){const{shadowMap:r,light:i,shadow:o}=this,{renderer:s,scene:a,camera:l}=e,c=s.shadowMap.type,u=r.depthTexture.version;this._depthVersionCached=u;const d=a.overrideMaterial;a.overrideMaterial=Pve(i),o.camera.layers.mask=l.layers.mask;const f=s.getRenderTarget(),h=s.getRenderObjectFunction(),p=s.getMRT();s.setMRT(null),s.setRenderObjectFunction((g,...y)=>{(g.castShadow===!0||g.receiveShadow&&c===ho)&&s.renderObject(g,...y)}),s.setRenderTarget(r),this.renderShadow(e),s.setRenderObjectFunction(h),i.isPointLight!==!0&&c===ho&&this.vsmPass(s),s.setRenderTarget(f),s.setMRT(p),a.overrideMaterial=d}vsmPass(e){const{shadow:r}=this;this.vsmShadowMapVertical.setSize(r.mapSize.width,r.mapSize.height),this.vsmShadowMapHorizontal.setSize(r.mapSize.width,r.mapSize.height),e.setRenderTarget(this.vsmShadowMapVertical),Ev.material=this.vsmMaterialVertical,Ev.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),Ev.material=this.vsmMaterialHorizontal,Ev.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),this.updateBeforeType=on.NONE}updateBefore(e){const{shadow:r}=this;(r.needsUpdate||r.autoUpdate)&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(r.needsUpdate=!1))}}const $ve=(n,e)=>nt(new w4(n,e));class Tu extends nh{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Tt,this.colorNode=e&&e.colorNode||qt(this.color).setGroup(Ht),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=on.FRAME}getCacheKey(){return ek(super.getCacheKey(),this.light.id,this.light.castShadow?1:0)}getHash(){return this.light.uuid}setupShadowNode(){return $ve(this.light)}setupShadow(e){const{renderer:r}=e;if(r.shadowMap.enabled===!1)return;let i=this.shadowColorNode;if(i===null){const o=this.light.shadow.shadowNode;let s;o!==void 0?s=nt(o):s=this.setupShadowNode(e),this.shadowNode=s,this.shadowColorNode=i=this.colorNode.mul(s),this.baseColorNode=this.colorNode}this.colorNode=i}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const E4=at(n=>{const{lightDistance:e,cutoffDistance:r,decayExponent:i}=n,o=e.pow(i).max(.01).reciprocal();return r.greaterThan(0).select(o.mul(e.div(r).pow4().oneMinus().clamp().pow2()),o)}),zve=new Tt,Ps=at(([n,e])=>{const r=n.toVar(),i=Lo(r),o=Ha(1,Ji(i.x,Ji(i.y,i.z)));i.mulAssign(o),r.mulAssign(o.mul(e.mul(2).oneMinus()));const s=ft(r.xy).toVar(),l=e.mul(1.5).oneMinus();return Cr(i.z.greaterThanEqual(l),()=>{Cr(r.z.greaterThan(0),()=>{s.x.assign($i(4,r.x))})}).ElseIf(i.x.greaterThanEqual(l),()=>{const c=Iy(r.x);s.x.assign(r.z.mul(c).add(c.mul(2)))}).ElseIf(i.y.greaterThanEqual(l),()=>{const c=Iy(r.y);s.x.assign(r.x.add(c.mul(2)).add(2)),s.y.assign(r.z.mul(c).sub(2))}),ft(.125,.25).mul(s).add(ft(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),kve=at(({depthTexture:n,bd3D:e,dp:r,texelSize:i})=>mn(n,Ps(e,i.y)).compare(r)),Vve=at(({depthTexture:n,bd3D:e,dp:r,texelSize:i,shadow:o})=>{const s=An("radius","float",o).setGroup(Ht),a=ft(-1,1).mul(s).mul(i.y);return mn(n,Ps(e.add(a.xyy),i.y)).compare(r).add(mn(n,Ps(e.add(a.yyy),i.y)).compare(r)).add(mn(n,Ps(e.add(a.xyx),i.y)).compare(r)).add(mn(n,Ps(e.add(a.yyx),i.y)).compare(r)).add(mn(n,Ps(e,i.y)).compare(r)).add(mn(n,Ps(e.add(a.xxy),i.y)).compare(r)).add(mn(n,Ps(e.add(a.yxy),i.y)).compare(r)).add(mn(n,Ps(e.add(a.xxx),i.y)).compare(r)).add(mn(n,Ps(e.add(a.yxx),i.y)).compare(r)).mul(1/9)}),Gve=at(({filterFn:n,depthTexture:e,shadowCoord:r,shadow:i})=>{const o=r.xyz.toVar(),s=o.length(),a=qt("float").setGroup(Ht).onRenderUpdate(()=>i.camera.near),l=qt("float").setGroup(Ht).onRenderUpdate(()=>i.camera.far),c=An("bias","float",i).setGroup(Ht),u=qt(i.mapSize).setGroup(Ht),d=Ae(1).toVar();return Cr(s.sub(l).lessThanEqual(0).and(s.sub(a).greaterThanEqual(0)),()=>{const f=s.sub(a).div(l.sub(a)).toVar();f.addAssign(c);const h=o.normalize(),p=ft(1).div(u.mul(ft(4,2)));d.assign(n({depthTexture:e,bd3D:h,dp:f,texelSize:p,shadow:i}))}),d}),FI=new Wt,Ju=new je,Dh=new je;class Hve extends w4{static get type(){return"PointShadowNode"}constructor(e,r=null){super(e,r)}getShadowFilterFn(e){return e===KJ?kve:Vve}setupShadowCoord(e,r){return r}setupShadowFilter(e,{filterFn:r,shadowTexture:i,depthTexture:o,shadowCoord:s,shadow:a}){return Gve({filterFn:r,shadowTexture:i,depthTexture:o,shadowCoord:s,shadow:a})}renderShadow(e){const{shadow:r,shadowMap:i,light:o}=this,{renderer:s,scene:a}=e,l=r.getFrameExtents();Dh.copy(r.mapSize),Dh.multiply(l),i.setSize(Dh.width,Dh.height),Ju.copy(r.mapSize);const c=s.autoClear,u=s.getClearColor(zve),d=s.getClearAlpha();s.autoClear=!1,s.setClearColor(r.clearColor,r.clearAlpha),s.clear();const f=r.getViewportCount();for(let h=0;h<f;h++){const p=r.getViewport(h),g=Ju.x*p.x,y=Dh.y-Ju.y-Ju.y*p.y;FI.set(g,y,Ju.x*p.z,Ju.y*p.w),i.viewport.copy(FI),r.updateMatrices(o,h),s.render(a,r.camera)}s.autoClear=c,s.setClearColor(u,d)}}const jve=(n,e)=>nt(new Hve(n,e)),Wve=at(({color:n,lightViewPosition:e,cutoffDistance:r,decayExponent:i},o)=>{const s=o.context.lightingModel,a=e.sub(Lr),l=a.normalize(),c=a.length(),u=E4({lightDistance:c,cutoffDistance:r,decayExponent:i}),d=n.mul(u),f=o.context.reflectedLight;s.direct({lightDirection:l,lightColor:d,reflectedLight:f},o.stack,o)});class qve extends Tu{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=qt(0).setGroup(Ht),this.decayExponentNode=qt(0).setGroup(Ht)}update(e){const{light:r}=this;super.update(e),this.cutoffDistanceNode.value=r.distance,this.decayExponentNode.value=r.decay}setupShadowNode(){return jve(this.light)}setup(e){super.setup(e),Wve({color:this.colorNode,lightViewPosition:iR(this.light),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode}).append()}}const Xve=at(([n,e])=>{const r=n.x,i=n.y,o=n.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(i)),s=s.add(e.element(2).mul(2*.511664).mul(o)),s=s.add(e.element(3).mul(2*.511664).mul(r)),s=s.add(e.element(4).mul(2*.429043).mul(r).mul(i)),s=s.add(e.element(5).mul(2*.429043).mul(i).mul(o)),s=s.add(e.element(6).mul(o.mul(o).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(r).mul(o)),s=s.add(e.element(8).mul(.429043).mul(sn(r,r).sub(sn(i,i)))),s}),ca=new rR;class Kve extends uc{constructor(e,r){super(),this.renderer=e,this.nodes=r}update(e,r,i){const o=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let a=!1;if(s===null)o._clearColor.getRGB(ca,ko),ca.a=o._clearColor.a;else if(s.isColor===!0)s.getRGB(ca,ko),ca.a=1,a=!0;else if(s.isNode===!0){const l=this.get(e),c=s;ca.copy(o._clearColor);let u=l.backgroundMesh;if(u===void 0){const f=XM(Kt(c).mul(OI),{getUV:()=>sve.mul($k),getTextureLevel:()=>ove});let h=Wk();h=h.setZ(h.w);const p=new Tr;p.name="Background.material",p.side=er,p.depthTest=!1,p.depthWrite=!1,p.fog=!1,p.lights=!1,p.vertexNode=h,p.colorNode=f,l.backgroundMeshNode=f,l.backgroundMesh=u=new Br(new Zf(1,32,32),p),u.frustumCulled=!1,u.name="Background.mesh",u.onBeforeRender=function(g,y,v){this.matrixWorld.copyPosition(v.matrixWorld)}}const d=c.getCacheKey();l.backgroundCacheKey!==d&&(l.backgroundMeshNode.node=Kt(c).mul(OI),l.backgroundMeshNode.needsUpdate=!0,u.material.needsUpdate=!0,l.backgroundCacheKey=d),r.unshift(u,u.geometry,u.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);if(o.autoClear===!0||a===!0){const l=i.clearColorValue;l.r=ca.r,l.g=ca.g,l.b=ca.b,l.a=ca.a,(o.backend.isWebGLBackend===!0||o.alpha===!0)&&(l.r*=l.a,l.g*=l.a,l.b*=l.a),i.depthClearValue=o._clearDepth,i.stencilClearValue=o._clearStencil,i.clearColor=o.autoClearColor===!0,i.clearDepth=o.autoClearDepth===!0,i.clearStencil=o.autoClearStencil===!0}else i.clearColor=!1,i.clearDepth=!1,i.clearStencil=!1}}let Yve=0;class HE{constructor(e="",r=[],i=0,o=[]){this.name=e,this.bindings=r,this.index=i,this.bindingsReference=o,this.id=Yve++}}class Qve{constructor(e,r,i,o,s,a,l,c,u,d=[]){this.vertexShader=e,this.fragmentShader=r,this.computeShader=i,this.transforms=d,this.nodeAttributes=o,this.bindings=s,this.updateNodes=a,this.updateBeforeNodes=l,this.updateAfterNodes=c,this.monitor=u,this.usedTimes=0}createBindings(){const e=[];for(const r of this.bindings)if(r.bindings[0].groupNode.shared!==!0){const o=new HE(r.name,[],r.index,r);e.push(o);for(const s of r.bindings)o.bindings.push(s.clone())}else e.push(r);return e}}class UI{constructor(e,r,i=null){this.isNodeAttribute=!0,this.name=e,this.type=r,this.node=i}}class Zve{constructor(e,r,i){this.isNodeUniform=!0,this.name=e,this.type=r,this.node=i.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class C4{constructor(e,r){this.isNodeVar=!0,this.name=e,this.type=r}}class Jve extends C4{constructor(e,r){super(e,r),this.needsInterpolation=!1,this.isNodeVarying=!0}}class e0e{constructor(e,r,i=""){this.name=e,this.type=r,this.code=i,Object.defineProperty(this,"isNodeCode",{value:!0})}}let t0e=0;class zS{constructor(e=null){this.id=t0e++,this.nodesData=new WeakMap,this.parent=e}getData(e){let r=this.nodesData.get(e);return r===void 0&&this.parent!==null&&(r=this.parent.getData(e)),r}setData(e,r){this.nodesData.set(e,r)}}class Mu{constructor(e,r){this.name=e,this.value=r,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class n0e extends Mu{constructor(e,r=0){super(e,r),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class r0e extends Mu{constructor(e,r=new je){super(e,r),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class i0e extends Mu{constructor(e,r=new K){super(e,r),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class o0e extends Mu{constructor(e,r=new Wt){super(e,r),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class s0e extends Mu{constructor(e,r=new Tt){super(e,r),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class a0e extends Mu{constructor(e,r=new kt){super(e,r),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class l0e extends Mu{constructor(e,r=new fn){super(e,r),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class c0e extends n0e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class u0e extends r0e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class d0e extends i0e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class f0e extends o0e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class h0e extends s0e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class p0e extends a0e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class m0e extends l0e{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const Td=4,BI=[.125,.215,.35,.446,.526,.582],Lc=20,kS=new Zm(-1,1,1,-1,0,1),g0e=new Si(90,1),$I=new Tt;let VS=null,GS=0,HS=0;const Mc=(1+Math.sqrt(5))/2,ed=1/Mc,zI=[new K(-Mc,ed,0),new K(Mc,ed,0),new K(-ed,0,Mc),new K(ed,0,Mc),new K(0,Mc,-ed),new K(0,Mc,ed),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)],v0e=[3,1,5,0,4,2],jS=ege(ax(),Wa("faceIndex")).normalize(),oR=Ie(jS.x,jS.y.negate(),jS.z);class y0e{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,r=0,i=.1,o=100,s=null){if(this._setSize(256),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const l=s||this._allocateTargets();return this.fromSceneAsync(e,r,i,o,l),l}VS=this._renderer.getRenderTarget(),GS=this._renderer.getActiveCubeFace(),HS=this._renderer.getActiveMipmapLevel();const a=s||this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,i,o,a),r>0&&this._blur(a,0,0,r),this._applyPMREM(a),this._cleanup(a),a}async fromSceneAsync(e,r=0,i=.1,o=100,s=null){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,r,i,o,s)}fromEquirectangular(e,r=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const i=r||this._allocateTargets();return this.fromEquirectangularAsync(e,i),i}return this._fromTexture(e,r)}async fromEquirectangularAsync(e,r=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,r)}fromCubemap(e,r=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const i=r||this._allocateTargets();return this.fromCubemapAsync(e,r),i}return this._fromTexture(e,r)}async fromCubemapAsync(e,r=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,r)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=VI(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=GI(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===Wo||e.mapping===qo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(VS,GS,HS),e.scissorTest=!1,Cv(e,0,0,e.width,e.height)}_fromTexture(e,r){this._setSizeFromTexture(e),VS=this._renderer.getRenderTarget(),GS=this._renderer.getActiveCubeFace(),HS=this._renderer.getActiveMipmapLevel();const i=r||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:Ur,minFilter:Ur,generateMipmaps:!1,type:Yr,format:ti,colorSpace:ko},o=kI(e,r,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=kI(e,r,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=_0e(s)),this._blurMaterial=x0e(s,e,r)}return o}async _compileMaterial(e){const r=new Br(this._lodPlanes[0],e);await this._renderer.compile(r,kS)}_sceneToCubeUV(e,r,i,o){const s=g0e;s.near=r,s.far=i;const a=[-1,1,-1,-1,-1,-1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear;c.getClearColor($I),c.autoClear=!1;let d=this._backgroundBox;if(d===null){const p=new Qf({name:"PMREM.Background",side:er,depthWrite:!1,depthTest:!1});d=new Br(new Eu,p)}let f=!1;const h=e.background;h?h.isColor&&(d.material.color.copy(h),e.background=null,f=!0):(d.material.color.copy($I),f=!0),c.setRenderTarget(o),c.clear(),f&&c.render(d,s);for(let p=0;p<6;p++){const g=p%3;g===0?(s.up.set(0,a[p],0),s.lookAt(l[p],0,0)):g===1?(s.up.set(0,0,a[p]),s.lookAt(0,l[p],0)):(s.up.set(0,a[p],0),s.lookAt(0,0,l[p]));const y=this._cubeSize;Cv(o,g*y,p>2?y:0,y,y),c.render(e,s)}c.autoClear=u,e.background=h}_textureToCubeUV(e,r){const i=this._renderer,o=e.mapping===Wo||e.mapping===qo;o?this._cubemapMaterial===null&&(this._cubemapMaterial=VI(e)):this._equirectMaterial===null&&(this._equirectMaterial=GI(e));const s=o?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const a=this._lodMeshes[0];a.material=s;const l=this._cubeSize;Cv(r,0,0,3*l,2*l),i.setRenderTarget(r),i.render(a,kS)}_applyPMREM(e){const r=this._renderer,i=r.autoClear;r.autoClear=!1;const o=this._lodPlanes.length;for(let s=1;s<o;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=zI[(o-s-1)%zI.length];this._blur(e,s-1,s,a,l)}r.autoClear=i}_blur(e,r,i,o,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,r,i,o,"latitudinal",s),this._halfBlur(a,e,i,i,o,"longitudinal",s)}_halfBlur(e,r,i,o,s,a,l){const c=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=this._lodMeshes[o];f.material=u;const h=u.uniforms,p=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Lc-1),y=s/g,v=isFinite(s)?1+Math.floor(d*y):Lc;v>Lc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Lc}`);const m=[];let _=0;for(let C=0;C<Lc;++C){const T=C/y,M=Math.exp(-T*T/2);m.push(M),C===0?_+=M:C<v&&(_+=2*M)}for(let C=0;C<m.length;C++)m[C]=m[C]/_;e.texture.frame=(e.texture.frame||0)+1,h.envMap.value=e.texture,h.samples.value=v,h.weights.array=m,h.latitudinal.value=a==="latitudinal"?1:0,l&&(h.poleAxis.value=l);const{_lodMax:x}=this;h.dTheta.value=g,h.mipInt.value=x-i;const S=this._sizeLods[o],w=3*S*(o>x-Td?o-x+Td:0),E=4*(this._cubeSize-S);Cv(r,w,E,3*S,2*S),c.setRenderTarget(r),c.render(f,kS)}}function _0e(n){const e=[],r=[],i=[],o=[];let s=n;const a=n-Td+1+BI.length;for(let l=0;l<a;l++){const c=Math.pow(2,s);r.push(c);let u=1/c;l>n-Td?u=BI[l-n+Td-1]:l===0&&(u=0),i.push(u);const d=1/(c-2),f=-d,h=1+d,p=[f,f,h,f,h,h,f,f,h,h,f,h],g=6,y=6,v=3,m=2,_=1,x=new Float32Array(v*y*g),S=new Float32Array(m*y*g),w=new Float32Array(_*y*g);for(let C=0;C<g;C++){const T=C%3*2/3-1,M=C>2?0:-1,R=[T,M,0,T+2/3,M,0,T+2/3,M+1,0,T,M,0,T+2/3,M+1,0,T,M+1,0],P=v0e[C];x.set(R,v*y*P),S.set(p,m*y*P);const D=[P,P,P,P,P,P];w.set(D,_*y*P)}const E=new Di;E.setAttribute("position",new ri(x,v)),E.setAttribute("uv",new ri(S,m)),E.setAttribute("faceIndex",new ri(w,_)),e.push(E),o.push(new Br(E,null)),s>Td&&s--}return{lodPlanes:e,sizeLods:r,sigmas:i,lodMeshes:o}}function kI(n,e,r){const i=new Yf(n,e,r);return i.texture.mapping=lu,i.texture.name="PMREM.cubeUv",i.texture.isPMREMTexture=!0,i.scissorTest=!0,i}function Cv(n,e,r,i,o){n.viewport.set(e,r,i,o),n.scissor.set(e,r,i,o)}function sR(n){const e=new Tr;return e.depthTest=!1,e.depthWrite=!1,e.blending=Mi,e.name=`PMREM_${n}`,e}function x0e(n,e,r){const i=Cl(new Array(Lc).fill(0)),o=qt(new K(0,1,0)),s=qt(0),a=Ae(Lc),l=qt(0),c=qt(1),u=mn(null),d=qt(0),f=Ae(1/e),h=Ae(1/r),p=Ae(n),g={n:a,latitudinal:l,weights:i,poleAxis:o,outputDirection:oR,dTheta:s,samples:c,envMap:u,mipInt:d,CUBEUV_TEXEL_WIDTH:f,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:p},y=sR("blur");return y.uniforms=g,y.fragmentNode=nge({...g,latitudinal:l.equal(1)}),y}function VI(n){const e=sR("cubemap");return e.fragmentNode=Rm(n,oR),e}function GI(n){const e=sR("equirect");return e.fragmentNode=mn(n,e4(oR),0),e}const HI=new WeakMap,b0e=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),Tv=n=>/e/g.test(n)?String(n).replace(/\+/g,""):(n=Number(n),n+(n%1?"":".0"));class T4{constructor(e,r,i){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=r,this.parser=i,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.monitor=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.flow={code:""},this.chaining=[],this.stack=FS(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new zS,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.useComparisonMethod=!1}getBindGroupsCache(){let e=HI.get(this.renderer);return e===void 0&&(e=new Qs,HI.set(this.renderer,e)),e}createRenderTarget(e,r,i){return new Yf(e,r,i)}createCubeRenderTarget(e,r){return new t4(e,r)}createPMREMGenerator(){return new y0e(this.renderer)}includes(e){return this.nodes.includes(e)}_getBindGroup(e,r){const i=this.getBindGroupsCache(),o=[];let s=!0;for(const l of r)o.push(l),s=s&&l.groupNode.shared!==!0;let a;return s?(a=i.get(o),a===void 0&&(a=new HE(e,o,this.bindingsIndexes[e].group,o),i.set(o,a))):a=new HE(e,o,this.bindingsIndexes[e].group,o),a}getBindGroupArray(e,r){const i=this.bindings[r];let o=i[e];return o===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),i[e]=o=[]),o}getBindings(){let e=this.bindGroups;if(e===null){const r={},i=this.bindings;for(const o of WO)for(const s in i[o]){const a=i[o][s];(r[s]||(r[s]=[])).push(...a)}e=[];for(const o in r){const s=r[o],a=this._getBindGroup(o,s);e.push(a)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((r,i)=>r.bindings[0].groupNode.order-i.bindings[0].groupNode.order);for(let r=0;r<e.length;r++){const i=e[r];this.bindingsIndexes[i.name].group=r,i.index=r}}setHashNode(e,r){this.hashNodes[r]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==on.NONE&&this.updateNodes.push(e.getSelf());for(const e of this.sequentialNodes){const r=e.getUpdateBeforeType(),i=e.getUpdateAfterType();r!==on.NONE&&this.updateBeforeNodes.push(e.getSelf()),i!==on.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Ur||e.magFilter===Fd||e.magFilter===$s||e.magFilter===ki||e.minFilter===Ur||e.minFilter===Fd||e.minFilter===$s||e.minFilter===ki}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,r){return this.flowNodes[e].push(r),r}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,r=!0){const i=this.getDataFromNode(e);return i.cache===void 0&&(i.cache=new zS(r?this.getCache():null)),i.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const r=this.getDataFromNode(e);return r.usageCount=r.usageCount===void 0?1:r.usageCount+1,r.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateConst(e,r=null){if(r===null&&(e==="float"||e==="int"||e==="uint"?r=0:e==="bool"?r=!1:e==="color"?r=new Tt:e==="vec2"?r=new je:e==="vec3"?r=new K:e==="vec4"&&(r=new Wt)),e==="float")return Tv(r);if(e==="int")return`${Math.round(r)}`;if(e==="uint")return r>=0?`${Math.round(r)}u`:"0u";if(e==="bool")return r?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${Tv(r.r)}, ${Tv(r.g)}, ${Tv(r.b)} )`;const i=this.getTypeLength(e),o=this.getComponentType(e),s=a=>this.generateConst(o,a);if(i===2)return`${this.getType(e)}( ${s(r.x)}, ${s(r.y)} )`;if(i===3)return`${this.getType(e)}( ${s(r.x)}, ${s(r.y)}, ${s(r.z)} )`;if(i===4)return`${this.getType(e)}( ${s(r.x)}, ${s(r.y)}, ${s(r.z)}, ${s(r.w)} )`;if(i>4&&r&&(r.isMatrix3||r.isMatrix4))return`${this.getType(e)}( ${r.elements.map(s).join(", ")} )`;if(i>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,r){const i=this.attributes;for(const s of i)if(s.name===e)return s;const o=new UI(e,r);return i.push(o),o}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const r=e.type;if(e.isDataTexture){if(r===Xr)return"int";if(r===rr)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const r=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return r===null?null:r[1]==="b"?"bool":r[1]==="i"?"int":r[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,r="float"){if(e===1)return r;const i=hde(e);return(r==="float"?"":r[0])+i}getTypeFromArray(e){return b0e.get(e.constructor)}getTypeFromAttribute(e){let r=e;e.isInterleavedBufferAttribute&&(r=e.data);const i=r.array,o=e.itemSize,s=e.normalized;let a;return!(e instanceof O$)&&s!==!0&&(a=this.getTypeFromArray(i)),this.getTypeFromLength(o,a)}getTypeLength(e){const r=this.getVectorType(e),i=/vec([2-4])/.exec(r);return i!==null?Number(i[1]):r==="float"||r==="bool"||r==="int"||r==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,r){return this.getTypeFromLength(this.getTypeLength(e),r)}getIntegerType(e){const r=this.getComponentType(e);return r==="int"||r==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=FS(this.stack),this.stacks.push(ak()||this.stack),Ry(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,Ry(this.stacks.pop()),e}getDataFromNode(e,r=this.shaderStage,i=null){i=i===null?e.isGlobal(this)?this.globalCache:this.cache:i;let o=i.getData(e);return o===void 0&&(o={},i.setData(e,o)),o[r]===void 0&&(o[r]={}),o[r]}getNodeProperties(e,r="any"){const i=this.getDataFromNode(e,r);return i.properties||(i.properties={outputNode:null})}getBufferAttributeFromNode(e,r){const i=this.getDataFromNode(e);let o=i.bufferAttribute;if(o===void 0){const s=this.uniforms.index++;o=new UI("nodeAttribute"+s,r,e),this.bufferAttributes.push(o),i.bufferAttribute=o}return o}getStructTypeFromNode(e,r=this.shaderStage){const i=this.getDataFromNode(e,r);if(i.structType===void 0){const o=this.structs.index++;e.name=`StructType${o}`,this.structs[r].push(e),i.structType=e}return e}getUniformFromNode(e,r,i=this.shaderStage,o=null){const s=this.getDataFromNode(e,i,this.globalCache);let a=s.uniform;if(a===void 0){const l=this.uniforms.index++;a=new Zve(o||"nodeUniform"+l,r,e),this.uniforms[i].push(a),s.uniform=a}return a}getVarFromNode(e,r=null,i=e.getNodeType(this),o=this.shaderStage){const s=this.getDataFromNode(e,o);let a=s.variable;if(a===void 0){const l=this.vars[o]||(this.vars[o]=[]);r===null&&(r="nodeVar"+l.length),a=new C4(r,i),l.push(a),s.variable=a}return a}getVaryingFromNode(e,r=null,i=e.getNodeType(this)){const o=this.getDataFromNode(e,"any");let s=o.varying;if(s===void 0){const a=this.varyings,l=a.length;r===null&&(r="nodeVarying"+l),s=new Jve(r,i),a.push(s),o.varying=s}return s}getCodeFromNode(e,r,i=this.shaderStage){const o=this.getDataFromNode(e);let s=o.code;if(s===void 0){const a=this.codes[i]||(this.codes[i]=[]),l=a.length;s=new e0e("nodeCode"+l,r),a.push(s),o.code=s}return s}addFlowCodeHierarchy(e,r){const{flowCodes:i,flowCodeBlock:o}=this.getDataFromNode(e);let s=!0,a=r;for(;a;){if(o.get(a)===!0){s=!1;break}a=this.getDataFromNode(a).parentNodeBlock}if(s)for(const l of i)this.addLineFlowCode(l)}addLineFlowCodeBlock(e,r,i){const o=this.getDataFromNode(e),s=o.flowCodes||(o.flowCodes=[]),a=o.flowCodeBlock||(o.flowCodeBlock=new WeakMap);s.push(r),a.set(i,!0)}addLineFlowCode(e,r=null){return e===""?this:(r!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(r,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const r=e.getNodeType(this),i=this.flowChildNode(e,r);return this.flowsData.set(e,i),i}buildFunctionNode(e){const r=new _ve,i=this.currentFunctionNode;return this.currentFunctionNode=r,r.code=this.buildFunctionCode(e),this.currentFunctionNode=i,r}flowShaderNode(e){const r=e.layout,i={[Symbol.iterator](){let a=0;const l=Object.values(this);return{next:()=>({value:l[a],done:a++>=l.length})}}};for(const a of r.inputs)i[a.name]=new eve(a.type,a.name);e.layout=null;const o=e.call(i),s=this.flowStagesNode(o,r.type);return e.layout=r,s}flowStagesNode(e,r=null){const i=this.flow,o=this.vars,s=this.cache,a=this.buildStage,l=this.stack,c={code:""};this.flow=c,this.vars={},this.cache=new zS,this.stack=FS();for(const u of jO)this.setBuildStage(u),c.result=e.build(this,r);return c.vars=this.getVars(this.shaderStage),this.flow=i,this.vars=o,this.cache=s,this.stack=l,this.setBuildStage(a),c}getFunctionOperator(){return null}flowChildNode(e,r=null){const i=this.flow,o={code:""};return this.flow=o,o.result=e.build(this,r),this.flow=i,o}flowNodeFromShaderStage(e,r,i=null,o=null){const s=this.shaderStage;this.setShaderStage(e);const a=this.flowChildNode(r,i);return o!==null&&(a.code+=`${this.tab+o} = ${a.result};
`),this.flowCode[e]=this.flowCode[e]+a.code,this.setShaderStage(s),a}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,r){return`${this.getType(e)} ${r}`}getVars(e){let r="";const i=this.vars[e];if(i!==void 0)for(const o of i)r+=`${this.getVar(o.type,o.name)}; `;return r}getUniforms(){console.warn("Abstract function.")}getCodes(e){const r=this.codes[e];let i="";if(r!==void 0)for(const o of r)i+=o.code+`
`;return i}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:r,renderer:i}=this;if(r!==null){let o=i.library.fromMaterial(r);o===null&&(console.error(`NodeMaterial: Material "${r.type}" is not compatible.`),o=new Tr),o.build(this)}else this.addFlow("compute",e);for(const o of jO){this.setBuildStage(o),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of WO){this.setShaderStage(s);const a=this.flowNodes[s];for(const l of a)o==="generate"?this.flowNode(l):l.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,r){if(r==="float"||r==="int"||r==="uint")return new c0e(e);if(r==="vec2"||r==="ivec2"||r==="uvec2")return new u0e(e);if(r==="vec3"||r==="ivec3"||r==="uvec3")return new d0e(e);if(r==="vec4"||r==="ivec4"||r==="uvec4")return new f0e(e);if(r==="color")return new h0e(e);if(r==="mat3")return new p0e(e);if(r==="mat4")return new m0e(e);throw new Error(`Uniform "${r}" not declared.`)}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}format(e,r,i){if(r=this.getVectorType(r),i=this.getVectorType(i),r===i||i===null||this.isReference(i))return e;const o=this.getTypeLength(r),s=this.getTypeLength(i);return o===16&&s===9?`${this.getType(i)}(${e}[0].xyz, ${e}[1].xyz, ${e}[2].xyz)`:o===9&&s===4?`${this.getType(i)}(${e}[0].xy, ${e}[1].xy)`:o>4||s>4||s===0?e:o===s?`${this.getType(i)}( ${e} )`:o>s?this.format(`${e}.${"xyz".slice(0,s)}`,this.getTypeFromLength(s,this.getComponentType(r)),i):s===4&&o>1?`${this.getType(i)}( ${this.format(e,r,"vec3")}, 1.0 )`:o===2?`${this.getType(i)}( ${this.format(e,r,"vec2")}, 0.0 )`:(o===1&&s>1&&r!==this.getComponentType(i)&&(e=`${this.getType(this.getComponentType(i))}( ${e} )`),`${this.getType(i)}( ${e} )`)}getSignature(){return`// Three.js r${Wf} - Node System
`}}class jI{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,r){let i=e.get(r);return i===void 0&&(i={renderMap:new WeakMap,frameMap:new WeakMap},e.set(r,i)),i}updateBeforeNode(e){const r=e.getUpdateBeforeType(),i=e.updateReference(this);if(r===on.FRAME){const{frameMap:o}=this._getMaps(this.updateBeforeMap,i);o.get(i)!==this.frameId&&e.updateBefore(this)!==!1&&o.set(i,this.frameId)}else if(r===on.RENDER){const{renderMap:o}=this._getMaps(this.updateBeforeMap,i);o.get(i)!==this.renderId&&e.updateBefore(this)!==!1&&o.set(i,this.renderId)}else r===on.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const r=e.getUpdateAfterType(),i=e.updateReference(this);if(r===on.FRAME){const{frameMap:o}=this._getMaps(this.updateAfterMap,i);o.get(i)!==this.frameId&&e.updateAfter(this)!==!1&&o.set(i,this.frameId)}else if(r===on.RENDER){const{renderMap:o}=this._getMaps(this.updateAfterMap,i);o.get(i)!==this.renderId&&e.updateAfter(this)!==!1&&o.set(i,this.renderId)}else r===on.OBJECT&&e.updateAfter(this)}updateNode(e){const r=e.getUpdateType(),i=e.updateReference(this);if(r===on.FRAME){const{frameMap:o}=this._getMaps(this.updateMap,i);o.get(i)!==this.frameId&&e.update(this)!==!1&&o.set(i,this.frameId)}else if(r===on.RENDER){const{renderMap:o}=this._getMaps(this.updateMap,i);o.get(i)!==this.renderId&&e.update(this)!==!1&&o.set(i,this.renderId)}else r===on.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class aR{constructor(e,r,i=null,o="",s=!1){this.type=e,this.name=r,this.count=i,this.qualifier=o,this.isConst=s}}aR.isNodeFunctionInput=!0;class S0e extends Tu{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setup(e){super.setup(e);const r=e.context.lightingModel,i=this.colorNode,o=b4(this.light),s=e.context.reflectedLight;r.direct({lightDirection:o,lightColor:i,reflectedLight:s},e.stack,e)}}const WS=new fn,Mv=new fn;let Lh=null;class w0e extends Tu{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=qt(new K).setGroup(Ht),this.halfWidth=qt(new K).setGroup(Ht),this.updateType=on.RENDER}update(e){super.update(e);const{light:r}=this,i=e.camera.matrixWorldInverse;Mv.identity(),WS.copy(r.matrixWorld),WS.premultiply(i),Mv.extractRotation(WS),this.halfWidth.value.set(r.width*.5,0,0),this.halfHeight.value.set(0,r.height*.5,0),this.halfWidth.value.applyMatrix4(Mv),this.halfHeight.value.applyMatrix4(Mv)}setup(e){super.setup(e);let r,i;e.isAvailable("float32Filterable")?(r=mn(Lh.LTC_FLOAT_1),i=mn(Lh.LTC_FLOAT_2)):(r=mn(Lh.LTC_HALF_1),i=mn(Lh.LTC_HALF_2));const{colorNode:o,light:s}=this,a=e.context.lightingModel,l=iR(s),c=e.context.reflectedLight;a.directRectArea({lightColor:o,lightPosition:l,halfWidth:this.halfWidth,halfHeight:this.halfHeight,reflectedLight:c,ltc_1:r,ltc_2:i},e.stack,e)}static setLTC(e){Lh=e}}class M4 extends Tu{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=qt(0).setGroup(Ht),this.penumbraCosNode=qt(0).setGroup(Ht),this.cutoffDistanceNode=qt(0).setGroup(Ht),this.decayExponentNode=qt(0).setGroup(Ht)}update(e){super.update(e);const{light:r}=this;this.coneCosNode.value=Math.cos(r.angle),this.penumbraCosNode.value=Math.cos(r.angle*(1-r.penumbra)),this.cutoffDistanceNode.value=r.distance,this.decayExponentNode.value=r.decay}getSpotAttenuation(e){const{coneCosNode:r,penumbraCosNode:i}=this;return pu(r,i,e)}setup(e){super.setup(e);const r=e.context.lightingModel,{colorNode:i,cutoffDistanceNode:o,decayExponentNode:s,light:a}=this,l=iR(a).sub(Lr),c=l.normalize(),u=c.dot(b4(a)),d=this.getSpotAttenuation(u),f=l.length(),h=E4({lightDistance:f,cutoffDistance:o,decayExponent:s});let p=i.mul(d).mul(h);if(a.map){const y=Cve(a),v=mn(a.map,y.xy).onRenderUpdate(()=>a.map);p=y.mul(2).sub(1).abs().lessThan(1).all().select(p.mul(v),p)}const g=e.context.reflectedLight;r.direct({lightDirection:c,lightColor:p,reflectedLight:g},e.stack,e)}}class E0e extends M4{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e){const r=this.light.iesMap;let i=null;if(r&&r.isTexture===!0){const o=e.acos().mul(1/Math.PI);i=mn(r,ft(o,0),0).r}else i=super.getSpotAttenuation(e);return i}}class C0e extends Tu{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class T0e extends Tu{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=x4(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=qt(new Tt).setGroup(Ht)}update(e){const{light:r}=this;super.update(e),this.lightPositionNode.object3d=r,this.groundColorNode.value.copy(r.groundColor).multiplyScalar(r.intensity)}setup(e){const{colorNode:r,groundColorNode:i,lightDirectionNode:o}=this,a=ws.dot(o).mul(.5).add(.5),l=Hn(i,r,a);e.context.irradiance.addAssign(l)}}class M0e extends Tu{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const r=[];for(let i=0;i<9;i++)r.push(new K);this.lightProbe=Cl(r)}update(e){const{light:r}=this;super.update(e);for(let i=0;i<9;i++)this.lightProbe.array[i].copy(r.sh.coefficients[i]).multiplyScalar(r.intensity)}setup(e){const r=Xve($k,this.lightProbe);e.context.irradiance.addAssign(r)}}class R4{parseFunction(){console.warn("Abstract function.")}}class lR{constructor(e,r,i="",o=""){this.type=e,this.inputs=r,this.name=i,this.precision=o}getCode(){console.warn("Abstract function.")}}lR.isNodeFunction=!0;const R0e=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,A0e=/[a-z_0-9]+/ig,WI="#pragma main",N0e=n=>{n=n.trim();const e=n.indexOf(WI),r=e!==-1?n.slice(e+WI.length):n,i=r.match(R0e);if(i!==null&&i.length===5){const o=i[4],s=[];let a=null;for(;(a=A0e.exec(o))!==null;)s.push(a);const l=[];let c=0;for(;c<s.length;){const g=s[c][0]==="const";g===!0&&c++;let y=s[c][0];y==="in"||y==="out"||y==="inout"?c++:y="";const v=s[c++][0];let m=Number.parseInt(s[c][0]);Number.isNaN(m)===!1?c++:m=null;const _=s[c++][0];l.push(new aR(v,_,m,y,g))}const u=r.substring(i[0].length),d=i[3]!==void 0?i[3]:"",f=i[2],h=i[1]!==void 0?i[1]:"",p=e!==-1?n.slice(0,e):"";return{type:f,inputs:l,name:d,precision:h,inputsCode:o,blockCode:u,headerCode:p}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class P0e extends lR{constructor(e){const{type:r,inputs:i,name:o,precision:s,inputsCode:a,blockCode:l,headerCode:c}=N0e(e);super(r,i,o,s),this.inputsCode=a,this.blockCode=l,this.headerCode=c}getCode(e=this.name){let r;const i=this.blockCode;if(i!==""){const{type:o,inputsCode:s,headerCode:a,precision:l}=this;let c=`${o} ${e} ( ${s.trim()} )`;l!==""&&(c=`${l} ${c}`),r=a+c+i}else r="";return r}}class O0e extends R4{parseFunction(e){return new P0e(e)}}const qI=new WeakMap;class I0e extends uc{constructor(e,r){super(),this.renderer=e,this.backend=r,this.nodeFrame=new jI,this.nodeBuilderCache=new Map,this.callHashCache=new Qs,this.groupsData=new Qs}updateGroup(e){const r=e.groupNode,i=r.name;if(i===dk.name)return!0;if(i===Ht.name){const a=this.get(e),l=this.nodeFrame.renderId;return a.renderId!==l?(a.renderId=l,!0):!1}if(i===Xde.name){const a=this.get(e),l=this.nodeFrame.frameId;return a.frameId!==l?(a.frameId=l,!0):!1}const o=[r,e];let s=this.groupsData.get(o);return s===void 0&&this.groupsData.set(o,s={}),s.version!==r.version?(s.version=r.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const r=this.get(e);let i=r.nodeBuilderState;if(i===void 0){const{nodeBuilderCache:o}=this,s=this.getForRenderCacheKey(e);if(i=o.get(s),i===void 0){const a=this.backend.createNodeBuilder(e.object,this.renderer);a.scene=e.scene,a.material=e.material,a.camera=e.camera,a.context.material=e.material,a.lightsNode=e.lightsNode,a.environmentNode=this.getEnvironmentNode(e.scene),a.fogNode=this.getFogNode(e.scene),a.clippingContext=e.clippingContext,a.build(),i=this._createNodeBuilderState(a),o.set(s,i)}i.usedTimes++,r.nodeBuilderState=i}return i}delete(e){if(e.isRenderObject){const r=this.get(e).nodeBuilderState;r.usedTimes--,r.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const r=this.get(e);let i=r.nodeBuilderState;if(i===void 0){const o=this.backend.createNodeBuilder(e,this.renderer);o.build(),i=this._createNodeBuilderState(o),r.nodeBuilderState=i}return i}_createNodeBuilderState(e){return new Qve(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.monitor,e.transforms)}getEnvironmentNode(e){return e.environmentNode||this.get(e).environmentNode||null}getBackgroundNode(e){return e.backgroundNode||this.get(e).backgroundNode||null}getFogNode(e){return e.fogNode||this.get(e).fogNode||null}getCacheKey(e,r){const i=[e,r],o=this.renderer.info.calls;let s=this.callHashCache.get(i);if(s===void 0||s.callId!==o){const a=this.getEnvironmentNode(e),l=this.getFogNode(e),c=[];r&&c.push(r.getCacheKey(!0)),a&&c.push(a.getCacheKey()),l&&c.push(l.getCacheKey()),c.push(this.renderer.shadowMap.enabled?1:0),s={callId:o,cacheKey:Jz(c)},this.callHashCache.set(i,s)}return s.cacheKey}updateScene(e){this.updateEnvironment(e),this.updateFog(e),this.updateBackground(e)}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const r=this.get(e),i=e.background;if(i){const o=e.backgroundBlurriness===0&&r.backgroundBlurriness>0||e.backgroundBlurriness>0&&r.backgroundBlurriness===0;if(r.background!==i||o){let s=null;if(i.isCubeTexture===!0||i.mapping===Ql||i.mapping===Zl||i.mapping===lu)if(e.backgroundBlurriness>0||i.mapping===lu)s=f4(i);else{let a;i.isCubeTexture===!0?a=Rm(i):a=mn(i),s=r4(a)}else i.isTexture===!0?s=mn(i,Am.flipY()).setUpdateMatrix(!0):i.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",i);r.backgroundNode=s,r.background=i,r.backgroundBlurriness=e.backgroundBlurriness}}else r.backgroundNode&&(delete r.backgroundNode,delete r.background)}updateFog(e){const r=this.get(e),i=e.fog;if(i){if(r.fog!==i){let o=null;if(i.isFogExp2){const s=An("color","color",i).setGroup(Ht),a=An("density","float",i).setGroup(Ht);o=wve(s,a)}else if(i.isFog){const s=An("color","color",i).setGroup(Ht),a=An("near","float",i).setGroup(Ht),l=An("far","float",i).setGroup(Ht);o=bve(s,a,l)}else console.error("WebGPUNodes: Unsupported fog configuration.",i);r.fogNode=o,r.fog=i}}else delete r.fogNode,delete r.fog}updateEnvironment(e){const r=this.get(e),i=e.environment;if(i){if(r.environment!==i){let o=null;i.isCubeTexture===!0?o=Rm(i):i.isTexture===!0?o=mn(i):console.error("Nodes: Unsupported environment configuration.",i),r.environmentNode=o,r.environment=i}}else r.environmentNode&&(delete r.environmentNode,delete r.environment)}getNodeFrame(e=this.renderer,r=null,i=null,o=null,s=null){const a=this.nodeFrame;return a.renderer=e,a.scene=r,a.object=i,a.camera=o,a.material=s,a}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace}hasOutputChange(e){return qI.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const r=this.renderer,i=this.getOutputCacheKey(),o=mn(e,Am).renderOutput(r.toneMapping,r.currentColorSpace);return qI.set(e,i),o}updateBefore(e){const r=e.getNodeBuilderState();for(const i of r.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(i)}updateAfter(e){const r=e.getNodeBuilderState();for(const i of r.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(i)}updateForCompute(e){const r=this.getNodeFrame(),i=this.getForCompute(e);for(const o of i.updateNodes)r.updateNode(o)}updateForRender(e){const r=this.getNodeFrameForRender(e),i=e.getNodeBuilderState();for(const o of i.updateNodes)r.updateNode(o)}needsRefresh(e){const r=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,r)}dispose(){super.dispose(),this.nodeFrame=new jI,this.nodeBuilderCache=new Map}}const qS=new ls;class Fy{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",e===null?(this.intersectionPlanes=[],this.unionPlanes=[],this.viewNormalMatrix=new kt,this.clippingGroupContexts=new WeakMap,this.shadowPass=!1):(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix),this.parentVersion=null}projectPlanes(e,r,i){const o=e.length;for(let s=0;s<o;s++){qS.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const a=r[i+s],l=qS.normal;a.x=-l.x,a.y=-l.y,a.z=-l.z,a.w=qS.constant}}updateGlobal(e,r){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowNodeMaterial,this.viewMatrix=r.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,r){let i=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==r.clipIntersection&&(this.clipIntersection=r.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const o=r.clippingPlanes,s=o.length;let a,l;if(this.clipIntersection?(a=this.intersectionPlanes,l=e.intersectionPlanes.length):(a=this.unionPlanes,l=e.unionPlanes.length),a.length!==l+s){a.length=l+s;for(let c=0;c<s;c++)a[l+c]=new Wt;i=!0}this.projectPlanes(o,a,l),i&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let r=this.clippingGroupContexts.get(e);return r===void 0&&(r=new Fy(this),this.clippingGroupContexts.set(e,r)),r.update(this,e),r}get unionClippingCount(){return this.unionPlanes.length}}class D0e{constructor(e,r){this.scene=e,this.camera=r}clone(){return Object.assign(new this.constructor,this)}}class L0e{constructor(){this.lists=new Qs}get(e,r){const i=this.lists,o=[e,r];let s=i.get(o);return s===void 0&&(s=new D0e(e,r),i.set(o,s)),s}dispose(){this.lists=new Qs}}class A4{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let r=null;const i=this.getMaterialNodeClass(e.type);if(i!==null){r=new i;for(const o in e)r[o]=e[o]}return r}addToneMapping(e,r){this.addType(e,r,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,r){this.addType(e,r,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,r){this.addClass(e,r,this.lightNodes)}addType(e,r,i){if(i.has(r)){console.warn(`Redefinition of node ${r}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof r=="function"||typeof r=="object")throw new Error(`Base class ${r} is not a class.`);i.set(r,e)}addClass(e,r,i){if(i.has(r)){console.warn(`Redefinition of node ${r.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof r!="function")throw new Error(`Base class ${r.name} is not a class.`);i.set(r,e)}}const F0e=new S4;class U0e extends Qs{constructor(){super()}createNode(e=[]){return new S4().setLights(e)}getNode(e,r){if(e.isQuadMesh)return F0e;const i=[e,r];let o=this.get(i);return o===void 0&&(o=this.createNode(),this.set(i,o)),o}}const XI=new fM,Rv=new je,XS=new Wt,KS=new X_,Av=new fn,fl=new Wt;class B0e{constructor(e,r={}){this.isRenderer=!0;const{logarithmicDepthBuffer:i=!1,alpha:o=!0,depth:s=!0,stencil:a=!1,antialias:l=!1,samples:c=0,getFallback:u=null}=r;this.domElement=e.getDomElement(),this.backend=e,this.samples=c||l===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=o,this.logarithmicDepthBuffer=i,this.outputColorSpace=Dt,this.toneMapping=Qi,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=a,this.info=new zge,this.nodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new A4,this.lighting=new U0e,this._getFallback=u,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new Wt(0,0,this._width,this._height),this._scissor=new Wt(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new v4(new Tr),this._quad.material.type="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const d=this.alpha===!0?0:1;this._clearColor=new rR(0,0,0,d),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:UT},this.xr={enabled:!1},this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(f,h,p)=>{await this.compileAsync(f,h);const g=this._renderLists.get(f,h),y=this._renderContexts.get(f,h,this._renderTarget),v=f.overrideMaterial||p.material,m=this._objects.get(p,v,f,h,g.lightsNode,y,y.clippingContext),{fragmentShader:_,vertexShader:x}=m.getNodeBuilderState();return{fragmentShader:_,vertexShader:x}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,r)=>{let i=this.backend;try{await i.init(this)}catch(o){if(this._getFallback!==null)try{this.backend=i=this._getFallback(o),await i.init(this)}catch(s){r(s);return}else{r(o);return}}this._nodes=new I0e(this,i),this._animation=new Nge(this._nodes,this.info),this._attributes=new Uge(i),this._background=new Kve(this,this._nodes),this._geometries=new $ge(this._attributes,this.info),this._textures=new Jge(this,i,this.info),this._pipelines=new Hge(i,this._nodes),this._bindings=new jge(i,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new Dge(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new Xge(this.lighting),this._bundles=new L0e,this._renderContexts=new Qge,this._animation.start(),this._initialized=!0,e()}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,r,i=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const o=this._nodes.nodeFrame,s=o.renderId,a=this._currentRenderContext,l=this._currentRenderObjectFunction,c=this._compilationPromises,u=e.isScene===!0?e:XI;i===null&&(i=e);const d=this._renderTarget,f=this._renderContexts.get(i,r,d),h=this._activeMipmapLevel,p=[];this._currentRenderContext=f,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=p,o.renderId++,o.update(),f.depth=this.depth,f.stencil=this.stencil,f.clippingContext||(f.clippingContext=new Fy),f.clippingContext.updateGlobal(u,r),u.onBeforeRender(this,e,r,d);const g=this._renderLists.get(e,r);if(g.begin(),this._projectObject(e,r,0,g,f.clippingContext),i!==e&&i.traverseVisible(function(x){x.isLight&&x.layers.test(r.layers)&&g.pushLight(x)}),g.finish(),d!==null){this._textures.updateRenderTarget(d,h);const x=this._textures.get(d);f.textures=x.textures,f.depthTexture=x.depthTexture}else f.textures=null,f.depthTexture=null;this._nodes.updateScene(u),this._background.update(u,g,f);const y=g.opaque,v=g.transparent,m=g.transparentDoublePass,_=g.lightsNode;this.opaque===!0&&y.length>0&&this._renderObjects(y,r,u,_),this.transparent===!0&&v.length>0&&this._renderTransparents(v,m,r,u,_),o.renderId=s,this._currentRenderContext=a,this._currentRenderObjectFunction=l,this._compilationPromises=c,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(p)}async renderAsync(e,r){this._initialized===!1&&await this.init();const i=this._renderScene(e,r);await this.backend.resolveTimestampAsync(i,"render")}async waitForGPU(){await this.backend.waitForGPU()}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}_onDeviceLost(e){let r=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(r+=`
Reason: ${e.reason}`),console.error(r),this._isDeviceLost=!0}_renderBundle(e,r,i){const{bundleGroup:o,camera:s,renderList:a}=e,l=this._currentRenderContext,c=this._bundles.get(o,s),u=this.backend.get(c);u.renderContexts===void 0&&(u.renderContexts=new Set);const d=o.version!==u.version,f=u.renderContexts.has(l)===!1||d;if(u.renderContexts.add(l),f){this.backend.beginBundle(l),(u.renderObjects===void 0||d)&&(u.renderObjects=[]),this._currentRenderBundle=c;const h=a.opaque;this.opaque===!0&&h.length>0&&this._renderObjects(h,s,r,i),this._currentRenderBundle=null,this.backend.finishBundle(l,c),u.version=o.version}else{const{renderObjects:h}=u;for(let p=0,g=h.length;p<g;p++){const y=h[p];this._nodes.needsRefresh(y)&&(this._nodes.updateBefore(y),this._nodes.updateForRender(y),this._bindings.updateForRender(y),this._nodes.updateAfter(y))}}this.backend.addBundle(l,c)}render(e,r){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,r);this._renderScene(e,r)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:r}=this;if(e!==Qi===!1&&r!==ko===!1)return null;const{width:s,height:a}=this.getDrawingBufferSize(Rv),{depth:l,stencil:c}=this;let u=this._frameBufferTarget;return u===null&&(u=new Yf(s,a,{depthBuffer:l,stencilBuffer:c,type:Yr,format:ti,colorSpace:ko,generateMipmaps:!1,minFilter:Ur,magFilter:Ur,samples:this.samples}),u.isPostProcessingRenderTarget=!0,this._frameBufferTarget=u),u.depthBuffer=l,u.stencilBuffer=c,u.setSize(s,a),u.viewport.copy(this._viewport),u.scissor.copy(this._scissor),u.viewport.multiplyScalar(this._pixelRatio),u.scissor.multiplyScalar(this._pixelRatio),u.scissorTest=this._scissorTest,u}_renderScene(e,r,i=!0){if(this._isDeviceLost===!0)return;const o=i?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,a=s.renderId,l=this._currentRenderContext,c=this._currentRenderObjectFunction,u=e.isScene===!0?e:XI,d=this._renderTarget,f=this._activeCubeFace,h=this._activeMipmapLevel;let p;o!==null?(p=o,this.setRenderTarget(p)):p=d;const g=this._renderContexts.get(e,r,p);this._currentRenderContext=g,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const y=this.coordinateSystem;r.coordinateSystem!==y&&(r.coordinateSystem=y,r.updateProjectionMatrix()),e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),r.parent===null&&r.matrixWorldAutoUpdate===!0&&r.updateMatrixWorld();let v=this._viewport,m=this._scissor,_=this._pixelRatio;p!==null&&(v=p.viewport,m=p.scissor,_=1),this.getDrawingBufferSize(Rv),XS.set(0,0,Rv.width,Rv.height);const x=v.minDepth===void 0?0:v.minDepth,S=v.maxDepth===void 0?1:v.maxDepth;g.viewportValue.copy(v).multiplyScalar(_).floor(),g.viewportValue.width>>=h,g.viewportValue.height>>=h,g.viewportValue.minDepth=x,g.viewportValue.maxDepth=S,g.viewport=g.viewportValue.equals(XS)===!1,g.scissorValue.copy(m).multiplyScalar(_).floor(),g.scissor=this._scissorTest&&g.scissorValue.equals(XS)===!1,g.scissorValue.width>>=h,g.scissorValue.height>>=h,g.clippingContext||(g.clippingContext=new Fy),g.clippingContext.updateGlobal(u,r),u.onBeforeRender(this,e,r,p),Av.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),KS.setFromProjectionMatrix(Av,y);const w=this._renderLists.get(e,r);if(w.begin(),this._projectObject(e,r,0,w,g.clippingContext),w.finish(),this.sortObjects===!0&&w.sort(this._opaqueSort,this._transparentSort),p!==null){this._textures.updateRenderTarget(p,h);const P=this._textures.get(p);g.textures=P.textures,g.depthTexture=P.depthTexture,g.width=P.width,g.height=P.height,g.renderTarget=p,g.depth=p.depthBuffer,g.stencil=p.stencilBuffer}else g.textures=null,g.depthTexture=null,g.width=this.domElement.width,g.height=this.domElement.height,g.depth=this.depth,g.stencil=this.stencil;g.width>>=h,g.height>>=h,g.activeCubeFace=f,g.activeMipmapLevel=h,g.occlusionQueryCount=w.occlusionQueryCount,this._nodes.updateScene(u),this._background.update(u,w,g),this.backend.beginRender(g);const{bundles:E,lightsNode:C,transparentDoublePass:T,transparent:M,opaque:R}=w;if(E.length>0&&this._renderBundles(E,u,C),this.opaque===!0&&R.length>0&&this._renderObjects(R,r,u,C),this.transparent===!0&&M.length>0&&this._renderTransparents(M,T,r,u,C),this.backend.finishRender(g),s.renderId=a,this._currentRenderContext=l,this._currentRenderObjectFunction=c,o!==null){this.setRenderTarget(d,f,h);const P=this._quad;this._nodes.hasOutputChange(p.texture)&&(P.material.fragmentNode=this._nodes.getOutputNode(p.texture),P.material.needsUpdate=!0),this._renderScene(P,P.camera,!1)}return u.onAfterRender(this,e,r,p),g}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,r,i){this._width=e,this._height=r,this._pixelRatio=i,this.domElement.width=Math.floor(e*i),this.domElement.height=Math.floor(r*i),this.setViewport(0,0,e,r),this._initialized&&this.backend.updateSize()}setSize(e,r,i=!0){this._width=e,this._height=r,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(r*this._pixelRatio),i===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=r+"px"),this.setViewport(0,0,e,r),this._initialized&&this.backend.updateSize()}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const r=this._scissor;return e.x=r.x,e.y=r.y,e.width=r.width,e.height=r.height,e}setScissor(e,r,i,o){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,r,i,o)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,r,i,o,s=0,a=1){const l=this._viewport;e.isVector4?l.copy(e):l.set(e,r,i,o),l.minDepth=s,l.maxDepth=a}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,r=1){this._clearColor.set(e),this._clearColor.a=r}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const r=this._currentRenderContext;return r&&this.backend.isOccluded(r,e)}clear(e=!0,r=!0,i=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,r,i);const o=this._renderTarget||this._getFrameBufferTarget();let s=null;if(o!==null&&(this._textures.updateRenderTarget(o),s=this._textures.get(o)),this.backend.clear(e,r,i,s),o!==null&&this._renderTarget===null){const a=this._quad;this._nodes.hasOutputChange(o.texture)&&(a.material.fragmentNode=this._nodes.getOutputNode(o.texture),a.material.needsUpdate=!0),this._renderScene(a,a.camera,!1)}}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,r=!0,i=!0){this._initialized===!1&&await this.init(),this.clear(e,r,i)}clearColorAsync(){return this.clearAsync(!0,!1,!1)}clearDepthAsync(){return this.clearAsync(!1,!0,!1)}clearStencilAsync(){return this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this._renderTarget!==null?Qi:this.toneMapping}get currentColorSpace(){return this._renderTarget!==null?ko:this.outputColorSpace}dispose(){this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,r=0,i=0){this._renderTarget=e,this._activeCubeFace=r,this._activeMipmapLevel=i}getRenderTarget(){return this._renderTarget}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e){if(this.isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const r=this._nodes.nodeFrame,i=r.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,r.renderId=this.info.calls;const o=this.backend,s=this._pipelines,a=this._bindings,l=this._nodes,c=Array.isArray(e)?e:[e];if(c[0]===void 0||c[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");o.beginCompute(e);for(const u of c){if(s.has(u)===!1){const h=()=>{u.removeEventListener("dispose",h),s.delete(u),a.delete(u),l.delete(u)};u.addEventListener("dispose",h);const p=u.onInitFunction;p!==null&&p.call(u,{renderer:this})}l.updateForCompute(u),a.updateForCompute(u);const d=a.getForCompute(u),f=s.getForCompute(u,d);o.compute(e,u,d,f)}o.finishCompute(e),r.renderId=i}async computeAsync(e){this._initialized===!1&&await this.init(),this.compute(e),await this.backend.resolveTimestampAsync(e,"compute")}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){if(this._initialized===!1)return console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),!1;this._textures.updateTexture(e)}copyFramebufferToTexture(e,r=null){if(r!==null)if(r.isVector2)r=fl.set(r.x,r.y,e.image.width,e.image.height).floor();else if(r.isVector4)r=fl.copy(r).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else r=fl.set(0,0,e.image.width,e.image.height);let i=this._currentRenderContext,o;i!==null?o=i.renderTarget:(o=this._renderTarget||this._getFrameBufferTarget(),o!==null&&(this._textures.updateRenderTarget(o),i=this._textures.get(o))),this._textures.updateTexture(e,{renderTarget:o}),this.backend.copyFramebufferToTexture(e,i,r)}copyTextureToTexture(e,r,i=null,o=null,s=0){this._textures.updateTexture(e),this._textures.updateTexture(r),this.backend.copyTextureToTexture(e,r,i,o,s)}readRenderTargetPixelsAsync(e,r,i,o,s,a=0,l=0){return this.backend.copyTextureToBuffer(e.textures[a],r,i,o,s,l)}_projectObject(e,r,i,o,s){if(e.visible===!1)return;if(e.layers.test(r.layers)){if(e.isGroup)i=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(r);else if(e.isLight)o.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||KS.intersectsSprite(e)){this.sortObjects===!0&&fl.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Av);const{geometry:c,material:u}=e;u.visible&&o.push(e,c,u,i,fl.z,null,s)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||KS.intersectsObject(e))){const{geometry:c,material:u}=e;if(this.sortObjects===!0&&(c.boundingSphere===null&&c.computeBoundingSphere(),fl.copy(c.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(Av)),Array.isArray(u)){const d=c.groups;for(let f=0,h=d.length;f<h;f++){const p=d[f],g=u[p.materialIndex];g&&g.visible&&o.push(e,c,g,i,fl.z,p,s)}}else u.visible&&o.push(e,c,u,i,fl.z,null,s)}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const c=o;o=this._renderLists.get(e,r),o.begin(),c.pushBundle({bundleGroup:e,camera:r,renderList:o}),o.finish()}const l=e.children;for(let c=0,u=l.length;c<u;c++)this._projectObject(l[c],r,i,o,s)}_renderBundles(e,r,i){for(const o of e)this._renderBundle(o,r,i)}_renderTransparents(e,r,i,o,s){if(r.length>0){for(const{material:a}of r)a.side=er;this._renderObjects(r,i,o,s,"backSide");for(const{material:a}of r)a.side=Ss;this._renderObjects(e,i,o,s);for(const{material:a}of r)a.side=wi}else this._renderObjects(e,i,o,s)}_renderObjects(e,r,i,o,s=null){for(let a=0,l=e.length;a<l;a++){const c=e[a],{object:u,geometry:d,material:f,group:h,clippingContext:p}=c;if(r.isArrayCamera){const g=r.cameras;for(let y=0,v=g.length;y<v;y++){const m=g[y];if(u.layers.test(m.layers)){const _=m.viewport,x=_.minDepth===void 0?0:_.minDepth,S=_.maxDepth===void 0?1:_.maxDepth,w=this._currentRenderContext.viewportValue;w.copy(_).multiplyScalar(this._pixelRatio).floor(),w.minDepth=x,w.maxDepth=S,this.backend.updateViewport(this._currentRenderContext),this._currentRenderObjectFunction(u,i,m,d,f,h,o,p,s)}}}else this._currentRenderObjectFunction(u,i,r,d,f,h,o,p,s)}}renderObject(e,r,i,o,s,a,l,c=null,u=null){let d,f,h;if(e.onBeforeRender(this,r,i,o,s,a),r.overrideMaterial!==null){const p=r.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(d=p.positionNode,p.positionNode=s.positionNode),p.alphaTest=s.alphaTest,p.alphaMap=s.alphaMap,p.isShadowNodeMaterial&&(p.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(h=p.depthNode,p.depthNode=s.depthNode),s.castShadowNode&&s.castShadowNode.isNode&&(f=p.colorNode,p.colorNode=s.castShadowNode)),s=p}s.transparent===!0&&s.side===wi&&s.forceSinglePass===!1?(s.side=er,this._handleObjectFunction(e,s,r,i,l,a,c,"backSide"),s.side=Ss,this._handleObjectFunction(e,s,r,i,l,a,c,u),s.side=wi):this._handleObjectFunction(e,s,r,i,l,a,c,u),d!==void 0&&(r.overrideMaterial.positionNode=d),h!==void 0&&(r.overrideMaterial.depthNode=h),f!==void 0&&(r.overrideMaterial.colorNode=f),e.onAfterRender(this,r,i,o,s,a)}_renderObjectDirect(e,r,i,o,s,a,l,c){const u=this._objects.get(e,r,i,o,s,this._currentRenderContext,l,c);u.drawRange=e.geometry.drawRange,u.group=a;const d=this._nodes.needsRefresh(u);d&&(this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u)),this._pipelines.updateForRender(u),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(u),u.bundle=this._currentRenderBundle.scene),this.backend.draw(u,this.info),d&&this._nodes.updateAfter(u)}_createObjectPipeline(e,r,i,o,s,a,l){const c=this._objects.get(e,r,i,o,s,this._currentRenderContext,a,l);this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c),this._pipelines.getForRender(c,this._compilationPromises),this._nodes.updateAfter(c)}get compile(){return this.compileAsync}}class cR{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function $0e(n){return n+(Ml-n%Ml)%Ml}class N4 extends cR{constructor(e,r=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=r}get byteLength(){return $0e(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class P4 extends N4{constructor(e,r=null){super(e,r),this.isUniformBuffer=!0}}let z0e=0;class O4 extends P4{constructor(e,r){super("UniformBuffer_"+z0e++,e?e.value:null),this.nodeUniform=e,this.groupNode=r}get buffer(){return this.nodeUniform.value}}class k0e extends P4{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const r=this.uniforms.indexOf(e);return r!==-1&&this.uniforms.splice(r,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const r=this.byteLength;e=new Float32Array(new ArrayBuffer(r)),this._buffer=e}return e}get byteLength(){let e=0;for(let r=0,i=this.uniforms.length;r<i;r++){const o=this.uniforms[r],{boundary:s,itemSize:a}=o,l=e%Ml,c=Ml-l;l!==0&&c-s<0?e+=Ml-l:l%s!==0&&(e+=l%s),o.offset=e/this.bytesPerElement,e+=a*this.bytesPerElement}return Math.ceil(e/Ml)*Ml}update(){let e=!1;for(const r of this.uniforms)this.updateByType(r)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s]!==o){const l=this._getBufferForType(a);l[s]=i[s]=o,r=!0}return r}updateVector2(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s+0]!==o.x||i[s+1]!==o.y){const l=this._getBufferForType(a);l[s+0]=i[s+0]=o.x,l[s+1]=i[s+1]=o.y,r=!0}return r}updateVector3(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s+0]!==o.x||i[s+1]!==o.y||i[s+2]!==o.z){const l=this._getBufferForType(a);l[s+0]=i[s+0]=o.x,l[s+1]=i[s+1]=o.y,l[s+2]=i[s+2]=o.z,r=!0}return r}updateVector4(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset,a=e.getType();if(i[s+0]!==o.x||i[s+1]!==o.y||i[s+2]!==o.z||i[s+4]!==o.w){const l=this._getBufferForType(a);l[s+0]=i[s+0]=o.x,l[s+1]=i[s+1]=o.y,l[s+2]=i[s+2]=o.z,l[s+3]=i[s+3]=o.w,r=!0}return r}updateColor(e){let r=!1;const i=this.values,o=e.getValue(),s=e.offset;if(i[s+0]!==o.r||i[s+1]!==o.g||i[s+2]!==o.b){const a=this.buffer;a[s+0]=i[s+0]=o.r,a[s+1]=i[s+1]=o.g,a[s+2]=i[s+2]=o.b,r=!0}return r}updateMatrix3(e){let r=!1;const i=this.values,o=e.getValue().elements,s=e.offset;if(i[s+0]!==o[0]||i[s+1]!==o[1]||i[s+2]!==o[2]||i[s+4]!==o[3]||i[s+5]!==o[4]||i[s+6]!==o[5]||i[s+8]!==o[6]||i[s+9]!==o[7]||i[s+10]!==o[8]){const a=this.buffer;a[s+0]=i[s+0]=o[0],a[s+1]=i[s+1]=o[1],a[s+2]=i[s+2]=o[2],a[s+4]=i[s+4]=o[3],a[s+5]=i[s+5]=o[4],a[s+6]=i[s+6]=o[5],a[s+8]=i[s+8]=o[6],a[s+9]=i[s+9]=o[7],a[s+10]=i[s+10]=o[8],r=!0}return r}updateMatrix4(e){let r=!1;const i=this.values,o=e.getValue().elements,s=e.offset;return G0e(i,o,s)===!1&&(this.buffer.set(o,s),V0e(i,o,s),r=!0),r}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function V0e(n,e,r){for(let i=0,o=e.length;i<o;i++)n[r+i]=e[i]}function G0e(n,e,r){for(let i=0,o=e.length;i<o;i++)if(n[r+i]!==e[i])return!1;return!0}let H0e=0;class I4 extends k0e{constructor(e,r){super(e),this.id=H0e++,this.groupNode=r,this.isNodeUniformsGroup=!0}getNodes(){const e=[];for(const r of this.uniforms){const i=r.nodeUniform.node;if(!i)throw new Error("NodeUniformsGroup: Uniform has no node.");e.push(i)}return e}}let j0e=0;class W0e extends cR{constructor(e,r){super(e),this.id=j0e++,this.texture=r,this.version=r?r.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:r}=this;return e!==this.generation?(this.generation=e,!0):r.isVideoTexture}update(){const{texture:e,version:r}=this;return r!==e.version?(this.version=e.version,!0):!1}}class px extends W0e{constructor(e,r,i,o=null){super(e,r?r.value:null),this.textureNode=r,this.groupNode=i,this.access=o}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class D4 extends px{constructor(e,r,i,o){super(e,r,i,o),this.isSampledCubeTexture=!0}}class L4 extends px{constructor(e,r,i,o){super(e,r,i,o),this.isSampledTexture3D=!0}}const q0e={atan2:"atan",textureDimensions:"textureSize",equals:"equal"},X0e={low:"lowp",medium:"mediump",high:"highp"},KI={swizzleAssign:!0,storageBuffer:!1},YI=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
`;class K0e extends T4{constructor(e,r){super(e,r,new O0e),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]},this.useComparisonMethod=!0}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==mo}getMethod(e){return q0e[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const r=e.layout,i=this.flowShaderNode(e),o=[];for(const a of r.inputs)o.push(this.getType(a.type)+" "+a.name);return`${this.getType(r.type)} ${r.name}( ${o.join(", ")} ) {

	${i.vars}

${i.code}
	return ${i.result};

}`}setupPBO(e){const r=e.value;if(r.pbo===void 0){const i=r.array,o=r.count*r.itemSize,{itemSize:s}=r,a=r.array.constructor.name.toLowerCase().includes("int");let l=a?qf:Qm;s===2?l=a?Xf:du:s===3?l=a?nee:Ym:s===4&&(l=a?Kf:ti);const c={Float32Array:hr,Uint8Array:fi,Uint16Array:ps,Uint32Array:rr,Int8Array:Wc,Int16Array:qc,Int32Array:Xr,Uint8ClampedArray:fi},u=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(o/s))));let d=Math.ceil(o/s/u);u*d*s<o&&d++;const f=u*d*s,h=new i.constructor(f);h.set(i,0),r.array=h;const p=new ite(r.array,u,d,l,c[r.array.constructor.name]||hr);p.needsUpdate=!0,p.isPBOTexture=!0;const g=new sg(p,null,null);g.setPrecision("high"),r.pboNode=g,r.pbo=g.value,this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,r=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?r.charAt(0)+"_"+e.name:super.getPropertyName(e,r)}generatePBO(e){const{node:r,indexNode:i}=e,o=r.value;if(this.renderer.backend.has(o)){const d=this.renderer.backend.get(o);d.pbo=o.pbo}const s=this.getUniformFromNode(o.pboNode,"texture",this.shaderStage,this.context.label),a=this.getPropertyName(s);this.increaseUsage(i);const l=i.build(this,"uint"),c=this.getDataFromNode(e);let u=c.propertyName;if(u===void 0){const d=this.getVarFromNode(e);u=this.getPropertyName(d);const f=this.getDataFromNode(r);let h=f.propertySizeName;h===void 0&&(h=u+"Size",this.getVarFromNode(r,h,"uint"),this.addLineFlowCode(`${h} = uint( textureSize( ${a}, 0 ).x )`,e),f.propertySizeName=h);const{itemSize:p}=o,g="."+th.join("").slice(0,p),y=`ivec2(${l} % ${h}, ${l} / ${h})`,v=this.generateTextureLoad(null,a,y,null,"0");let m="vec4";o.pbo.type===rr?m="uvec4":o.pbo.type===Xr&&(m="ivec4"),this.addLineFlowCode(`${u} = ${m}(${v})${g}`,e),c.propertyName=u}return u}generateTextureLoad(e,r,i,o,s="0"){return o?`texelFetch( ${r}, ivec3( ${i}, ${o} ), ${s} )`:`texelFetch( ${r}, ${i}, ${s} )`}generateTexture(e,r,i,o){return e.isDepthTexture?`texture( ${r}, ${i} ).x`:(o&&(i=`vec3( ${i}, ${o} )`),`texture( ${r}, ${i} )`)}generateTextureLevel(e,r,i,o){return`textureLod( ${r}, ${i}, ${o} )`}generateTextureBias(e,r,i,o){return`texture( ${r}, ${i}, ${o} )`}generateTextureGrad(e,r,i,o){return`textureGrad( ${r}, ${i}, ${o[0]}, ${o[1]} )`}generateTextureCompare(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`texture( ${r}, vec3( ${i}, ${o} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${a} shader.`)}getVars(e){const r=[],i=this.vars[e];if(i!==void 0)for(const o of i)r.push(`${this.getVar(o.type,o.name)};`);return r.join(`
	`)}getUniforms(e){const r=this.uniforms[e],i=[],o={};for(const a of r){let l=null,c=!1;if(a.type==="texture"){const d=a.node.value;let f="";d.isDataTexture===!0&&(d.type===rr?f="u":d.type===Xr&&(f="i")),d.compareFunction?l=`sampler2DShadow ${a.name};`:d.isDataArrayTexture===!0||d.isCompressedArrayTexture===!0?l=`${f}sampler2DArray ${a.name};`:l=`${f}sampler2D ${a.name};`}else if(a.type==="cubeTexture")l=`samplerCube ${a.name};`;else if(a.type==="texture3D")l=`sampler3D ${a.name};`;else if(a.type==="buffer"){const d=a.node,f=this.getType(d.bufferType),h=d.bufferCount,p=h>0?h:"";l=`${d.name} {
	${f} ${a.name}[${p}];
};
`}else l=`${this.getVectorType(a.type)} ${this.getPropertyName(a,e)};`,c=!0;const u=a.node.precision;if(u!==null&&(l=X0e[u]+" "+l),c){l="	"+l;const d=a.groupNode.name;(o[d]||(o[d]=[])).push(l)}else l="uniform "+l,i.push(l)}let s="";for(const a in o){const l=o[a];s+=this._getGLSLUniformStruct(e+"_"+a,l.join(`
`))+`
`}return s+=i.join(`
`),s}getTypeFromAttribute(e){let r=super.getTypeFromAttribute(e);if(/^[iu]/.test(r)&&e.gpuType!==Xr){let i=e;e.isInterleavedBufferAttribute&&(i=e.data);const o=i.array;o instanceof Uint32Array||o instanceof Int32Array||(r=r.slice(1))}return r}getAttributes(e){let r="";if(e==="vertex"||e==="compute"){const i=this.getAttributesArray();let o=0;for(const s of i)r+=`layout( location = ${o++} ) in ${s.type} ${s.name};
`}return r}getStructMembers(e){const r=[],i=e.getMemberTypes();for(let o=0;o<i.length;o++){const s=i[o];r.push(`layout( location = ${o} ) out ${s} m${o};`)}return r.join(`
`)}getStructs(e){const r=[],i=this.structs[e];if(i.length===0)return`layout( location = 0 ) out vec4 fragColor;
`;for(let o=0,s=i.length;o<s;o++){const a=i[o];let l=`
`;l+=this.getStructMembers(a),l+=`
`,r.push(l)}return r.join(`

`)}getVaryings(e){let r="";const i=this.varyings;if(e==="vertex"||e==="compute")for(const o of i){e==="compute"&&(o.needsInterpolation=!0);const s=this.getType(o.type),a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";r+=`${a}${o.needsInterpolation?"out":"/*out*/"} ${s} ${o.name};
`}else if(e==="fragment"){for(const o of i)if(o.needsInterpolation){const s=this.getType(o.type),a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";r+=`${a}in ${s} ${o.name};
`}}for(const o of this.builtins[e])r+=`${o};
`;return r}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((i,o)=>i*o,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,r,i=this.shaderStage){const o=this.extensions[i]||(this.extensions[i]=new Map);o.has(e)===!1&&o.set(e,{name:e,behavior:r})}getExtensions(e){const r=[];if(e==="vertex"){const o=this.renderer.backend.extensions;this.object.isBatchedMesh&&o.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const i=this.extensions[e];if(i!==void 0)for(const{name:o,behavior:s}of i.values())r.push(`#extension ${o} : ${s}`);return r.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let r=KI[e];if(r===void 0){let i;switch(r=!1,e){case"float32Filterable":i="OES_texture_float_linear";break;case"clipDistance":i="WEBGL_clip_cull_distance";break}if(i!==void 0){const o=this.renderer.backend.extensions;o.has(i)&&(o.get(i),r=!0)}KI[e]=r}return r}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}registerTransform(e,r){this.transforms.push({varyingName:e,attributeNode:r})}getTransforms(){const e=this.transforms;let r="";for(let i=0;i<e.length;i++){const o=e[i],s=this.getPropertyName(o.attributeNode);r+=`${o.varyingName} = ${s};
	`}return r}_getGLSLUniformStruct(e,r){return`
layout( std140 ) uniform ${e} {
${r}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions 
${e.extensions}

// precision
${YI}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
${YI}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const r in e){let i=`// code

`;i+=this.flowCode[r];const o=this.flowNodes[r],s=o[o.length-1];for(const l of o){const c=this.getFlowData(l),u=l.name;u&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${u}
	`),i+=`${c.code}
	`,l===s&&r!=="compute"&&(i+=`// result
	`,r==="vertex"?(i+="gl_Position = ",i+=`${c.result};`):r==="fragment"&&(l.outputNode.isOutputStructNode||(i+="fragColor = ",i+=`${c.result};`)))}const a=e[r];a.extensions=this.getExtensions(r),a.uniforms=this.getUniforms(r),a.attributes=this.getAttributes(r),a.varyings=this.getVaryings(r),a.vars=this.getVars(r),a.structs=this.getStructs(r),a.codes=this.getCodes(r),a.transforms=this.getTransforms(r),a.flow=i}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,r,i,o=null){const s=super.getUniformFromNode(e,r,i,o),a=this.getDataFromNode(e,i,this.globalCache);let l=a.uniformGPU;if(l===void 0){const c=e.groupNode,u=c.name,d=this.getBindGroupArray(u,i);if(r==="texture")l=new px(s.name,s.node,c),d.push(l);else if(r==="cubeTexture")l=new D4(s.name,s.node,c),d.push(l);else if(r==="texture3D")l=new L4(s.name,s.node,c),d.push(l);else if(r==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const f=new O4(e,c);f.name=e.name,d.push(f),l=f}else{const f=this.uniformGroups[i]||(this.uniformGroups[i]={});let h=f[u];h===void 0&&(h=new I4(i+"_"+u,c),f[u]=h,d.push(h)),l=this.getNodeUniform(s,r),h.addUniform(l)}a.uniformGPU=l}return s}}let YS=null,QS=null,td=null;class F4{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null}async init(e){this.renderer=e}begin(){}finish(){}draw(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}createRenderPipeline(){}createComputePipeline(){}destroyPipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}createDefaultTexture(){}createTexture(){}copyTextureToBuffer(){}createAttribute(){}createIndexAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}resolveTimestampAsync(){}hasFeatureAsync(){}hasFeature(){}getInstanceCount(e){const{object:r,geometry:i}=e;return i.isInstancedBufferGeometry?i.instanceCount:r.count>1?r.count:1}getDrawingBufferSize(){return YS=YS||new je,this.renderer.getDrawingBufferSize(YS)}getScissor(){return QS=QS||new Wt,this.renderer.getScissor(QS)}setScissorTest(){}getClearColor(){const e=this.renderer;return td=td||new rR,e.getClearColor(td),td.getRGB(td,this.renderer.currentColorSpace),td}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:A$(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Wf} webgpu`),this.domElement=e),e}set(e,r){this.data.set(e,r)}get(e){let r=this.data.get(e);return r===void 0&&(r={},this.data.set(e,r)),r}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let Y0e=0;class Q0e{constructor(e,r){this.buffers=[e.bufferGPU,r],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class Z0e{constructor(e){this.backend=e}createAttribute(e,r){const i=this.backend,{gl:o}=i,s=e.array,a=e.usage||o.STATIC_DRAW,l=e.isInterleavedBufferAttribute?e.data:e,c=i.get(l);let u=c.bufferGPU;u===void 0&&(u=this._createBuffer(o,r,s,a),c.bufferGPU=u,c.bufferType=r,c.version=l.version);let d;if(s instanceof Float32Array)d=o.FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?d=o.HALF_FLOAT:d=o.UNSIGNED_SHORT;else if(s instanceof Int16Array)d=o.SHORT;else if(s instanceof Uint32Array)d=o.UNSIGNED_INT;else if(s instanceof Int32Array)d=o.INT;else if(s instanceof Int8Array)d=o.BYTE;else if(s instanceof Uint8Array)d=o.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)d=o.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let f={bufferGPU:u,bufferType:r,type:d,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:d===o.INT||d===o.UNSIGNED_INT||e.gpuType===Xr,id:Y0e++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const h=this._createBuffer(o,r,s,a);f=new Q0e(f,h)}i.set(e,f)}updateAttribute(e){const r=this.backend,{gl:i}=r,o=e.array,s=e.isInterleavedBufferAttribute?e.data:e,a=r.get(s),l=a.bufferType,c=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(i.bindBuffer(l,a.bufferGPU),c.length===0)i.bufferSubData(l,0,o);else{for(let u=0,d=c.length;u<d;u++){const f=c[u];i.bufferSubData(l,f.start*o.BYTES_PER_ELEMENT,o,f.start,f.count)}s.clearUpdateRanges()}i.bindBuffer(l,null),a.version=s.version}destroyAttribute(e){const r=this.backend,{gl:i}=r;e.isInterleavedBufferAttribute&&r.delete(e.data);const o=r.get(e);i.deleteBuffer(o.bufferGPU),r.delete(e)}async getArrayBufferAsync(e){const r=this.backend,{gl:i}=r,o=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=r.get(o),a=e.array,l=a.byteLength;i.bindBuffer(i.COPY_READ_BUFFER,s);const c=i.createBuffer();i.bindBuffer(i.COPY_WRITE_BUFFER,c),i.bufferData(i.COPY_WRITE_BUFFER,l,i.STREAM_READ),i.copyBufferSubData(i.COPY_READ_BUFFER,i.COPY_WRITE_BUFFER,0,0,l),await r.utils._clientWaitAsync();const u=new e.array.constructor(a.length);return i.bindBuffer(i.COPY_WRITE_BUFFER,c),i.getBufferSubData(i.COPY_WRITE_BUFFER,0,u),i.deleteBuffer(c),i.bindBuffer(i.COPY_READ_BUFFER,null),i.bindBuffer(i.COPY_WRITE_BUFFER,null),u.buffer}_createBuffer(e,r,i,o){const s=e.createBuffer();return e.bindBuffer(r,s),e.bufferData(r,i,o),e.bindBuffer(r,null),s}}let QI=!1,ZS,Fh;class J0e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},QI===!1&&(this._init(this.gl),QI=!0)}_init(e){ZS={[po]:e.FUNC_ADD,[$T]:e.FUNC_SUBTRACT,[zT]:e.FUNC_REVERSE_SUBTRACT},Fh={[kT]:e.ZERO,[VT]:e.ONE,[GT]:e.SRC_COLOR,[em]:e.SRC_ALPHA,[KT]:e.SRC_ALPHA_SATURATE,[qT]:e.DST_COLOR,[jT]:e.DST_ALPHA,[HT]:e.ONE_MINUS_SRC_COLOR,[tm]:e.ONE_MINUS_SRC_ALPHA,[XT]:e.ONE_MINUS_DST_COLOR,[WT]:e.ONE_MINUS_DST_ALPHA}}enable(e){const{enabled:r}=this;r[e]!==!0&&(this.gl.enable(e),r[e]=!0)}disable(e){const{enabled:r}=this;r[e]!==!1&&(this.gl.disable(e),r[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:r}=this;e?r.frontFace(r.CW):r.frontFace(r.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:r}=this;e!==m$?(this.enable(r.CULL_FACE),e!==this.currentCullFace&&(e===hE?r.cullFace(r.BACK):e===g$?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):this.disable(r.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:r,gl:i}=this;e!==r&&(i.lineWidth(e),this.currentLineWidth=e)}setBlending(e,r,i,o,s,a,l,c){const{gl:u}=this;if(e===Mi){this.currentBlendingEnabled===!0&&(this.disable(u.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(u.BLEND),this.currentBlendingEnabled=!0),e!==BT){if(e!==this.currentBlending||c!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==po||this.currentBlendEquationAlpha!==po)&&(u.blendEquation(u.FUNC_ADD),this.currentBlendEquation=po,this.currentBlendEquationAlpha=po),c)switch(e){case zo:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case au:u.blendFunc(u.ONE,u.ONE);break;case lf:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case cf:u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ZERO,u.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case zo:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case au:u.blendFunc(u.SRC_ALPHA,u.ONE);break;case lf:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case cf:u.blendFunc(u.ZERO,u.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=c}return}s=s||r,a=a||i,l=l||o,(r!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(u.blendEquationSeparate(ZS[r],ZS[s]),this.currentBlendEquation=r,this.currentBlendEquationAlpha=s),(i!==this.currentBlendSrc||o!==this.currentBlendDst||a!==this.currentBlendSrcAlpha||l!==this.currentBlendDstAlpha)&&(u.blendFuncSeparate(Fh[i],Fh[o],Fh[a],Fh[l]),this.currentBlendSrc=i,this.currentBlendDst=o,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=l),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:r}=this;e?this.enable(r.DEPTH_TEST):this.disable(r.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:r}=this;switch(e){case nm:r.depthFunc(r.NEVER);break;case rm:r.depthFunc(r.ALWAYS);break;case im:r.depthFunc(r.LESS);break;case Yl:r.depthFunc(r.LEQUAL);break;case om:r.depthFunc(r.EQUAL);break;case sm:r.depthFunc(r.GEQUAL);break;case am:r.depthFunc(r.GREATER);break;case lm:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}this.currentDepthFunc=e}}setStencilTest(e){const{gl:r}=this;e?this.enable(r.STENCIL_TEST):this.disable(r.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,r,i){(this.currentStencilFunc!==e||this.currentStencilRef!==r||this.currentStencilFuncMask!==i)&&(this.gl.stencilFunc(e,r,i),this.currentStencilFunc=e,this.currentStencilRef=r,this.currentStencilFuncMask=i)}setStencilOp(e,r,i){(this.currentStencilFail!==e||this.currentStencilZFail!==r||this.currentStencilZPass!==i)&&(this.gl.stencilOp(e,r,i),this.currentStencilFail=e,this.currentStencilZFail=r,this.currentStencilZPass=i)}setMaterial(e,r,i){const{gl:o}=this;e.side===wi?this.disable(o.CULL_FACE):this.enable(o.CULL_FACE);let s=e.side===er;r&&(s=!s),this.setFlipSided(s),e.blending===zo&&e.transparent===!1?this.setBlending(Mi):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const a=e.stencilWrite;if(this.setStencilTest(a),a&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(o.SAMPLE_ALPHA_TO_COVERAGE):this.disable(o.SAMPLE_ALPHA_TO_COVERAGE),i>0&&this.currentClippingPlanes!==i)for(let c=0;c<8;c++)c<i?this.enable(12288+c):this.disable(12288+c)}setPolygonOffset(e,r,i){const{gl:o}=this;e?(this.enable(o.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==r||this.currentPolygonOffsetUnits!==i)&&(o.polygonOffset(r,i),this.currentPolygonOffsetFactor=r,this.currentPolygonOffsetUnits=i)):this.disable(o.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}bindFramebuffer(e,r){const{gl:i,currentBoundFramebuffers:o}=this;return o[e]!==r?(i.bindFramebuffer(e,r),o[e]=r,e===i.DRAW_FRAMEBUFFER&&(o[i.FRAMEBUFFER]=r),e===i.FRAMEBUFFER&&(o[i.DRAW_FRAMEBUFFER]=r),!0):!1}drawBuffers(e,r){const{gl:i}=this;let o=[],s=!1;if(e.textures!==null){o=this.currentDrawbuffers.get(r),o===void 0&&(o=[],this.currentDrawbuffers.set(r,o));const a=e.textures;if(o.length!==a.length||o[0]!==i.COLOR_ATTACHMENT0){for(let l=0,c=a.length;l<c;l++)o[l]=i.COLOR_ATTACHMENT0+l;o.length=a.length,s=!0}}else o[0]!==i.BACK&&(o[0]=i.BACK,s=!0);s&&i.drawBuffers(o)}activeTexture(e){const{gl:r,currentTextureSlot:i,maxTextures:o}=this;e===void 0&&(e=r.TEXTURE0+o-1),i!==e&&(r.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,r,i){const{gl:o,currentTextureSlot:s,currentBoundTextures:a,maxTextures:l}=this;i===void 0&&(s===null?i=o.TEXTURE0+l-1:i=s);let c=a[i];c===void 0&&(c={type:void 0,texture:void 0},a[i]=c),(c.type!==e||c.texture!==r)&&(s!==i&&(o.activeTexture(i),this.currentTextureSlot=i),o.bindTexture(e,r),c.type=e,c.texture=r)}bindBufferBase(e,r,i){const{gl:o}=this,s=`${e}-${r}`;return this.currentBoundBufferBases[s]!==i?(o.bindBufferBase(e,r,i),this.currentBoundBufferBases[s]=i,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:r,currentBoundTextures:i}=this,o=i[r];o!==void 0&&o.type!==void 0&&(e.bindTexture(o.type,null),o.type=void 0,o.texture=void 0)}}class eye{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,r=mo){const{gl:i,extensions:o}=this;let s;if(e===fi)return i.UNSIGNED_BYTE;if(e===z_)return i.UNSIGNED_SHORT_4_4_4_4;if(e===k_)return i.UNSIGNED_SHORT_5_5_5_1;if(e===V_)return i.UNSIGNED_INT_5_9_9_9_REV;if(e===Wc)return i.BYTE;if(e===qc)return i.SHORT;if(e===ps)return i.UNSIGNED_SHORT;if(e===Xr)return i.INT;if(e===rr)return i.UNSIGNED_INT;if(e===hr)return i.FLOAT;if(e===Yr)return i.HALF_FLOAT;if(e===QT)return i.ALPHA;if(e===Ym)return i.RGB;if(e===ti)return i.RGBA;if(e===ZT)return i.LUMINANCE;if(e===JT)return i.LUMINANCE_ALPHA;if(e===Hs)return i.DEPTH_COMPONENT;if(e===qs)return i.DEPTH_STENCIL;if(e===Qm)return i.RED;if(e===qf)return i.RED_INTEGER;if(e===du)return i.RG;if(e===Xf)return i.RG_INTEGER;if(e===Kf)return i.RGBA_INTEGER;if(e===Xc||e===kl||e===Vl||e===Gl)if(r===Dt)if(s=o.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===Xc)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===kl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===Vl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===Gl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=o.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===Xc)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===kl)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Vl)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Gl)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===cm||e===um||e===dm||e===fm)if(s=o.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===cm)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===um)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===dm)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===fm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===hm||e===uf||e===df)if(s=o.get("WEBGL_compressed_texture_etc"),s!==null){if(e===hm||e===uf)return r===Dt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===df)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===ff||e===hf||e===pf||e===mf||e===gf||e===vf||e===yf||e===_f||e===xf||e===bf||e===Sf||e===wf||e===Ef||e===Cf)if(s=o.get("WEBGL_compressed_texture_astc"),s!==null){if(e===ff)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===hf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===pf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===mf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===gf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===vf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===yf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===_f)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===xf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===bf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===Sf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===wf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Ef)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Cf)return r===Dt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===Kc)if(s=o.get("EXT_texture_compression_bptc"),s!==null){if(e===Kc)return r===Dt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===eM||e===pm||e===mm||e===gm)if(s=o.get("EXT_texture_compression_rgtc"),s!==null){if(e===Kc)return s.COMPRESSED_RED_RGTC1_EXT;if(e===pm)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===mm)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===gm)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Ws?i.UNSIGNED_INT_24_8:i[e]!==void 0?i[e]:null}_clientWaitAsync(){const{gl:e}=this,r=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((i,o)=>{function s(){const a=e.clientWaitSync(r,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED){e.deleteSync(r),o();return}if(a===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(r),i()}s()})}}let ZI=!1,Nv,JS,JI;class tye{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},ZI===!1&&(this._init(this.gl),ZI=!0)}_init(e){Nv={[cu]:e.REPEAT,[Bs]:e.CLAMP_TO_EDGE,[uu]:e.MIRRORED_REPEAT},JS={[Wn]:e.NEAREST,[ly]:e.NEAREST_MIPMAP_NEAREST,[$s]:e.NEAREST_MIPMAP_LINEAR,[Ur]:e.LINEAR,[Fd]:e.LINEAR_MIPMAP_NEAREST,[ki]:e.LINEAR_MIPMAP_LINEAR},JI={[tM]:e.NEVER,[sM]:e.ALWAYS,[G_]:e.LESS,[H_]:e.LEQUAL,[nM]:e.EQUAL,[oM]:e.GEQUAL,[rM]:e.GREATER,[iM]:e.NOTEQUAL}}filterFallback(e){const{gl:r}=this;return e===Wn||e===ly||e===$s?r.NEAREST:r.LINEAR}getGLTextureType(e){const{gl:r}=this;let i;return e.isCubeTexture===!0?i=r.TEXTURE_CUBE_MAP:e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?i=r.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?i=r.TEXTURE_3D:i=r.TEXTURE_2D,i}getInternalFormat(e,r,i,o,s=!1){const{gl:a,extensions:l}=this;if(e!==null){if(a[e]!==void 0)return a[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let c=r;return r===a.RED&&(i===a.FLOAT&&(c=a.R32F),i===a.HALF_FLOAT&&(c=a.R16F),i===a.UNSIGNED_BYTE&&(c=a.R8),i===a.UNSIGNED_SHORT&&(c=a.R16),i===a.UNSIGNED_INT&&(c=a.R32UI),i===a.BYTE&&(c=a.R8I),i===a.SHORT&&(c=a.R16I),i===a.INT&&(c=a.R32I)),r===a.RED_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.R8UI),i===a.UNSIGNED_SHORT&&(c=a.R16UI),i===a.UNSIGNED_INT&&(c=a.R32UI),i===a.BYTE&&(c=a.R8I),i===a.SHORT&&(c=a.R16I),i===a.INT&&(c=a.R32I)),r===a.RG&&(i===a.FLOAT&&(c=a.RG32F),i===a.HALF_FLOAT&&(c=a.RG16F),i===a.UNSIGNED_BYTE&&(c=a.RG8),i===a.UNSIGNED_SHORT&&(c=a.RG16),i===a.UNSIGNED_INT&&(c=a.RG32UI),i===a.BYTE&&(c=a.RG8I),i===a.SHORT&&(c=a.RG16I),i===a.INT&&(c=a.RG32I)),r===a.RG_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.RG8UI),i===a.UNSIGNED_SHORT&&(c=a.RG16UI),i===a.UNSIGNED_INT&&(c=a.RG32UI),i===a.BYTE&&(c=a.RG8I),i===a.SHORT&&(c=a.RG16I),i===a.INT&&(c=a.RG32I)),r===a.RGB&&(i===a.FLOAT&&(c=a.RGB32F),i===a.HALF_FLOAT&&(c=a.RGB16F),i===a.UNSIGNED_BYTE&&(c=a.RGB8),i===a.UNSIGNED_SHORT&&(c=a.RGB16),i===a.UNSIGNED_INT&&(c=a.RGB32UI),i===a.BYTE&&(c=a.RGB8I),i===a.SHORT&&(c=a.RGB16I),i===a.INT&&(c=a.RGB32I),i===a.UNSIGNED_BYTE&&(c=o===Dt&&s===!1?a.SRGB8:a.RGB8),i===a.UNSIGNED_SHORT_5_6_5&&(c=a.RGB565),i===a.UNSIGNED_SHORT_5_5_5_1&&(c=a.RGB5_A1),i===a.UNSIGNED_SHORT_4_4_4_4&&(c=a.RGB4),i===a.UNSIGNED_INT_5_9_9_9_REV&&(c=a.RGB9_E5)),r===a.RGB_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.RGB8UI),i===a.UNSIGNED_SHORT&&(c=a.RGB16UI),i===a.UNSIGNED_INT&&(c=a.RGB32UI),i===a.BYTE&&(c=a.RGB8I),i===a.SHORT&&(c=a.RGB16I),i===a.INT&&(c=a.RGB32I)),r===a.RGBA&&(i===a.FLOAT&&(c=a.RGBA32F),i===a.HALF_FLOAT&&(c=a.RGBA16F),i===a.UNSIGNED_BYTE&&(c=a.RGBA8),i===a.UNSIGNED_SHORT&&(c=a.RGBA16),i===a.UNSIGNED_INT&&(c=a.RGBA32UI),i===a.BYTE&&(c=a.RGBA8I),i===a.SHORT&&(c=a.RGBA16I),i===a.INT&&(c=a.RGBA32I),i===a.UNSIGNED_BYTE&&(c=o===Dt&&s===!1?a.SRGB8_ALPHA8:a.RGBA8),i===a.UNSIGNED_SHORT_4_4_4_4&&(c=a.RGBA4),i===a.UNSIGNED_SHORT_5_5_5_1&&(c=a.RGB5_A1)),r===a.RGBA_INTEGER&&(i===a.UNSIGNED_BYTE&&(c=a.RGBA8UI),i===a.UNSIGNED_SHORT&&(c=a.RGBA16UI),i===a.UNSIGNED_INT&&(c=a.RGBA32UI),i===a.BYTE&&(c=a.RGBA8I),i===a.SHORT&&(c=a.RGBA16I),i===a.INT&&(c=a.RGBA32I)),r===a.DEPTH_COMPONENT&&(i===a.UNSIGNED_INT&&(c=a.DEPTH24_STENCIL8),i===a.FLOAT&&(c=a.DEPTH_COMPONENT32F)),r===a.DEPTH_STENCIL&&i===a.UNSIGNED_INT_24_8&&(c=a.DEPTH24_STENCIL8),(c===a.R16F||c===a.R32F||c===a.RG16F||c===a.RG32F||c===a.RGBA16F||c===a.RGBA32F)&&l.get("EXT_color_buffer_float"),c}setTextureParameters(e,r){const{gl:i,extensions:o,backend:s}=this;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,r.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,r.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),i.texParameteri(e,i.TEXTURE_WRAP_S,Nv[r.wrapS]),i.texParameteri(e,i.TEXTURE_WRAP_T,Nv[r.wrapT]),(e===i.TEXTURE_3D||e===i.TEXTURE_2D_ARRAY)&&i.texParameteri(e,i.TEXTURE_WRAP_R,Nv[r.wrapR]),i.texParameteri(e,i.TEXTURE_MAG_FILTER,JS[r.magFilter]);const a=r.mipmaps!==void 0&&r.mipmaps.length>0,l=r.minFilter===Ur&&a?ki:r.minFilter;if(i.texParameteri(e,i.TEXTURE_MIN_FILTER,JS[l]),r.compareFunction&&(i.texParameteri(e,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(e,i.TEXTURE_COMPARE_FUNC,JI[r.compareFunction])),o.has("EXT_texture_filter_anisotropic")===!0){if(r.magFilter===Wn||r.minFilter!==$s&&r.minFilter!==ki||r.type===hr&&o.has("OES_texture_float_linear")===!1)return;if(r.anisotropy>1){const c=o.get("EXT_texture_filter_anisotropic");i.texParameterf(e,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:r,backend:i,defaultTextures:o}=this,s=this.getGLTextureType(e);let a=o[s];a===void 0&&(a=r.createTexture(),i.state.bindTexture(s,a),r.texParameteri(s,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(s,r.TEXTURE_MAG_FILTER,r.NEAREST),o[s]=a),i.set(e,{textureGPU:a,glTextureType:s,isDefault:!0})}createTexture(e,r){const{gl:i,backend:o}=this,{levels:s,width:a,height:l,depth:c}=r,u=o.utils.convert(e.format,e.colorSpace),d=o.utils.convert(e.type),f=this.getInternalFormat(e.internalFormat,u,d,e.colorSpace,e.isVideoTexture),h=i.createTexture(),p=this.getGLTextureType(e);o.state.bindTexture(p,h),this.setTextureParameters(p,e),e.isDataArrayTexture||e.isCompressedArrayTexture?i.texStorage3D(i.TEXTURE_2D_ARRAY,s,f,a,l,c):e.isData3DTexture?i.texStorage3D(i.TEXTURE_3D,s,f,a,l,c):e.isVideoTexture||i.texStorage2D(p,s,f,a,l),o.set(e,{textureGPU:h,glTextureType:p,glFormat:u,glType:d,glInternalFormat:f})}copyBufferToTexture(e,r){const{gl:i,backend:o}=this,{textureGPU:s,glTextureType:a,glFormat:l,glType:c}=o.get(r),{width:u,height:d}=r.source.data;i.bindBuffer(i.PIXEL_UNPACK_BUFFER,e),o.state.bindTexture(a,s),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.texSubImage2D(a,0,0,0,u,d,l,c,0),i.bindBuffer(i.PIXEL_UNPACK_BUFFER,null),o.state.unbindTexture()}updateTexture(e,r){const{gl:i}=this,{width:o,height:s}=r,{textureGPU:a,glTextureType:l,glFormat:c,glType:u,glInternalFormat:d}=this.backend.get(e);if(e.isRenderTargetTexture||a===void 0)return;const f=h=>h.isDataTexture?h.image.data:typeof HTMLImageElement<"u"&&h instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&h instanceof ImageBitmap||h instanceof OffscreenCanvas?h:h.data;if(this.backend.state.bindTexture(l,a),this.setTextureParameters(l,e),e.isCompressedTexture){const h=e.mipmaps,p=r.image;for(let g=0;g<h.length;g++){const y=h[g];e.isCompressedArrayTexture?e.format!==i.RGBA?c!==null?i.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,g,0,0,0,y.width,y.height,p.depth,c,y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texSubImage3D(i.TEXTURE_2D_ARRAY,g,0,0,0,y.width,y.height,p.depth,c,u,y.data):c!==null?i.compressedTexSubImage2D(i.TEXTURE_2D,g,0,0,y.width,y.height,c,y.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const h=r.images;for(let p=0;p<6;p++){const g=f(h[p]);i.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,0,0,o,s,c,u,g)}}else if(e.isDataArrayTexture){const h=r.image;i.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,h.width,h.height,h.depth,c,u,h.data)}else if(e.isData3DTexture){const h=r.image;i.texSubImage3D(i.TEXTURE_3D,0,0,0,0,h.width,h.height,h.depth,c,u,h.data)}else if(e.isVideoTexture)e.update(),i.texImage2D(l,0,d,c,u,r.image);else{const h=f(r.image);i.texSubImage2D(l,0,0,0,o,s,c,u,h)}}generateMipmaps(e){const{gl:r,backend:i}=this,{textureGPU:o,glTextureType:s}=i.get(e);i.state.bindTexture(s,o),r.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:r,backend:i}=this;if(e){const o=i.get(e);if(o.renderBufferStorageSetup=void 0,o.framebuffers){for(const s in o.framebuffers)r.deleteFramebuffer(o.framebuffers[s]);delete o.framebuffers}if(o.depthRenderbuffer&&(r.deleteRenderbuffer(o.depthRenderbuffer),delete o.depthRenderbuffer),o.stencilRenderbuffer&&(r.deleteRenderbuffer(o.stencilRenderbuffer),delete o.stencilRenderbuffer),o.msaaFrameBuffer&&(r.deleteFramebuffer(o.msaaFrameBuffer),delete o.msaaFrameBuffer),o.msaaRenderbuffers){for(let s=0;s<o.msaaRenderbuffers.length;s++)r.deleteRenderbuffer(o.msaaRenderbuffers[s]);delete o.msaaRenderbuffers}}}destroyTexture(e){const{gl:r,backend:i}=this,{textureGPU:o,renderTarget:s}=i.get(e);this.deallocateRenderBuffers(s),r.deleteTexture(o),i.delete(e)}copyTextureToTexture(e,r,i=null,o=null,s=0){const{gl:a,backend:l}=this,{state:c}=this.backend,{textureGPU:u,glTextureType:d,glType:f,glFormat:h}=l.get(r);let p,g,y,v,m,_;i!==null?(p=i.max.x-i.min.x,g=i.max.y-i.min.y,y=i.min.x,v=i.min.y):(p=e.image.width,g=e.image.height,y=0,v=0),o!==null?(m=o.x,_=o.y):(m=0,_=0),c.bindTexture(d,u),a.pixelStorei(a.UNPACK_ALIGNMENT,r.unpackAlignment),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,r.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,r.unpackAlignment);const x=a.getParameter(a.UNPACK_ROW_LENGTH),S=a.getParameter(a.UNPACK_IMAGE_HEIGHT),w=a.getParameter(a.UNPACK_SKIP_PIXELS),E=a.getParameter(a.UNPACK_SKIP_ROWS),C=a.getParameter(a.UNPACK_SKIP_IMAGES),T=e.isCompressedTexture?e.mipmaps[s]:e.image;if(a.pixelStorei(a.UNPACK_ROW_LENGTH,T.width),a.pixelStorei(a.UNPACK_IMAGE_HEIGHT,T.height),a.pixelStorei(a.UNPACK_SKIP_PIXELS,y),a.pixelStorei(a.UNPACK_SKIP_ROWS,v),e.isRenderTargetTexture||e.isDepthTexture){const M=l.get(e),R=l.get(r),P=l.get(M.renderTarget),D=l.get(R.renderTarget),F=P.framebuffers[M.cacheKey],A=D.framebuffers[R.cacheKey];c.bindFramebuffer(a.READ_FRAMEBUFFER,F),c.bindFramebuffer(a.DRAW_FRAMEBUFFER,A);let I=a.COLOR_BUFFER_BIT;e.isDepthTexture&&(I=a.DEPTH_BUFFER_BIT),a.blitFramebuffer(y,v,p,g,m,_,p,g,I,a.NEAREST),c.bindFramebuffer(a.READ_FRAMEBUFFER,null),c.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)}else e.isDataTexture?a.texSubImage2D(a.TEXTURE_2D,s,m,_,p,g,h,f,T.data):e.isCompressedTexture?a.compressedTexSubImage2D(a.TEXTURE_2D,s,m,_,T.width,T.height,h,T.data):a.texSubImage2D(a.TEXTURE_2D,s,m,_,p,g,h,f,T);a.pixelStorei(a.UNPACK_ROW_LENGTH,x),a.pixelStorei(a.UNPACK_IMAGE_HEIGHT,S),a.pixelStorei(a.UNPACK_SKIP_PIXELS,w),a.pixelStorei(a.UNPACK_SKIP_ROWS,E),a.pixelStorei(a.UNPACK_SKIP_IMAGES,C),s===0&&r.generateMipmaps&&a.generateMipmap(a.TEXTURE_2D),c.unbindTexture()}copyFramebufferToTexture(e,r,i){const{gl:o}=this,{state:s}=this.backend,{textureGPU:a}=this.backend.get(e),{x:l,y:c,z:u,w:d}=i,f=e.isDepthTexture===!0||r.renderTarget&&r.renderTarget.samples>0,h=r.renderTarget?r.renderTarget.height:this.backend.gerDrawingBufferSize().y;if(f){const p=l!==0||c!==0;let g,y;if(e.isDepthTexture===!0?(g=o.DEPTH_BUFFER_BIT,y=o.DEPTH_ATTACHMENT,r.stencil&&(g|=o.STENCIL_BUFFER_BIT)):(g=o.COLOR_BUFFER_BIT,y=o.COLOR_ATTACHMENT0),p){const v=this.backend.get(r.renderTarget),m=v.framebuffers[r.getCacheKey()],_=v.msaaFrameBuffer;s.bindFramebuffer(o.DRAW_FRAMEBUFFER,m),s.bindFramebuffer(o.READ_FRAMEBUFFER,_);const x=h-c-d;o.blitFramebuffer(l,x,l+u,x+d,l,x,l+u,x+d,g,o.NEAREST),s.bindFramebuffer(o.READ_FRAMEBUFFER,m),s.bindTexture(o.TEXTURE_2D,a),o.copyTexSubImage2D(o.TEXTURE_2D,0,0,0,l,x,u,d),s.unbindTexture()}else{const v=o.createFramebuffer();s.bindFramebuffer(o.DRAW_FRAMEBUFFER,v),o.framebufferTexture2D(o.DRAW_FRAMEBUFFER,y,o.TEXTURE_2D,a,0),o.blitFramebuffer(0,0,u,d,0,0,u,d,g,o.NEAREST),o.deleteFramebuffer(v)}}else s.bindTexture(o.TEXTURE_2D,a),o.copyTexSubImage2D(o.TEXTURE_2D,0,0,0,l,h-d-c,u,d),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(r)}setupRenderBufferStorage(e,r){const{gl:i}=this,o=r.renderTarget,{samples:s,depthTexture:a,depthBuffer:l,stencilBuffer:c,width:u,height:d}=o;if(i.bindRenderbuffer(i.RENDERBUFFER,e),l&&!c){let f=i.DEPTH_COMPONENT24;s>0?(a&&a.isDepthTexture&&a.type===i.FLOAT&&(f=i.DEPTH_COMPONENT32F),i.renderbufferStorageMultisample(i.RENDERBUFFER,s,f,u,d)):i.renderbufferStorage(i.RENDERBUFFER,f,u,d),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,e)}else l&&c&&(s>0?i.renderbufferStorageMultisample(i.RENDERBUFFER,s,i.DEPTH24_STENCIL8,u,d):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,u,d),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e))}async copyTextureToBuffer(e,r,i,o,s,a){const{backend:l,gl:c}=this,{textureGPU:u,glFormat:d,glType:f}=this.backend.get(e),h=c.createFramebuffer();c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const p=e.isCubeTexture?c.TEXTURE_CUBE_MAP_POSITIVE_X+a:c.TEXTURE_2D;c.framebufferTexture2D(c.READ_FRAMEBUFFER,c.COLOR_ATTACHMENT0,p,u,0);const g=this._getTypedArrayType(f),y=this._getBytesPerTexel(f,d),m=o*s*y,_=c.createBuffer();c.bindBuffer(c.PIXEL_PACK_BUFFER,_),c.bufferData(c.PIXEL_PACK_BUFFER,m,c.STREAM_READ),c.readPixels(r,i,o,s,d,f,0),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),await l.utils._clientWaitAsync();const x=new g(m/g.BYTES_PER_ELEMENT);return c.bindBuffer(c.PIXEL_PACK_BUFFER,_),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,x),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),c.deleteFramebuffer(h),x}_getTypedArrayType(e){const{gl:r}=this;if(e===r.UNSIGNED_BYTE)return Uint8Array;if(e===r.UNSIGNED_SHORT_4_4_4_4||e===r.UNSIGNED_SHORT_5_5_5_1||e===r.UNSIGNED_SHORT_5_6_5||e===r.UNSIGNED_SHORT)return Uint16Array;if(e===r.UNSIGNED_INT)return Uint32Array;if(e===r.HALF_FLOAT)return Uint16Array;if(e===r.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,r){const{gl:i}=this;let o=0;if(e===i.UNSIGNED_BYTE&&(o=1),(e===i.UNSIGNED_SHORT_4_4_4_4||e===i.UNSIGNED_SHORT_5_5_5_1||e===i.UNSIGNED_SHORT_5_6_5||e===i.UNSIGNED_SHORT||e===i.HALF_FLOAT)&&(o=2),(e===i.UNSIGNED_INT||e===i.FLOAT)&&(o=4),r===i.RGBA)return o*4;if(r===i.RGB)return o*3;if(r===i.ALPHA)return o}}class nye{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let r=this.extensions[e];return r===void 0&&(r=this.gl.getExtension(e),this.extensions[e]=r),r}has(e){return this.availableExtensions.includes(e)}}class rye{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,r=this.backend.extensions;if(r.has("EXT_texture_filter_anisotropic")===!0){const i=r.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const eD={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"};class iye{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,r){const{gl:i,mode:o,object:s,type:a,info:l,index:c}=this;c!==0?i.drawElements(o,r,a,e):i.drawArrays(o,e,r),l.update(s,r,o,1)}renderInstances(e,r,i){const{gl:o,mode:s,type:a,index:l,object:c,info:u}=this;i!==0&&(l!==0?o.drawElementsInstanced(s,r,a,e,i):o.drawArraysInstanced(s,e,r,i),u.update(c,r,s,i))}renderMultiDraw(e,r,i){const{extensions:o,mode:s,object:a,info:l}=this;if(i===0)return;const c=o.get("WEBGL_multi_draw");if(c===null)for(let u=0;u<i;u++)this.render(e[u],r[u]);else{this.index!==0?c.multiDrawElementsWEBGL(s,r,0,this.type,e,0,i):c.multiDrawArraysWEBGL(s,e,0,r,0,i);let u=0;for(let d=0;d<i;d++)u+=r[d];l.update(a,u,s,1)}}renderMultiDrawInstances(e,r,i,o){const{extensions:s,mode:a,object:l,info:c}=this;if(i===0)return;const u=s.get("WEBGL_multi_draw");if(u===null)for(let d=0;d<i;d++)this.renderInstances(e[d],r[d],o[d]);else{this.index!==0?u.multiDrawElementsInstancedWEBGL(a,r,0,this.type,e,0,o,0,i):u.multiDrawArraysInstancedWEBGL(a,e,0,r,0,o,0,i);let d=0;for(let f=0;f<i;f++)d+=r[f]*o[f];c.update(l,d,a,1)}}}class tD extends F4{constructor(e={}){super(e),this.isWebGLBackend=!0}init(e){super.init(e);const r=this.parameters,i=r.context!==void 0?r.context:e.domElement.getContext("webgl2");function o(s){s.preventDefault();const a={api:"WebGL",message:s.statusMessage||"Unknown reason",reason:null,originalEvent:s};e.onDeviceLost(a)}this._onContextLost=o,e.domElement.addEventListener("webglcontextlost",o,!1),this.gl=i,this.extensions=new nye(this),this.capabilities=new rye(this),this.attributeUtils=new Z0e(this),this.textureUtils=new tye(this),this.bufferRenderer=new iye(this),this.state=new J0e(this),this.utils=new eye(this),this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.trackTimestamp=r.trackTimestamp===!0,this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile"),this._knownBindings=new WeakSet,this._currentContext=null}get coordinateSystem(){return Bo}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const r=this.get(e);if(this.queryRunning){r.queryQueue||(r.queryQueue=[]),r.queryQueue.push(e);return}r.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),r.activeQuery=null),r.activeQuery=this.gl.createQuery(),r.activeQuery!==null&&(this.gl.beginQuery(this.disjoint.TIME_ELAPSED_EXT,r.activeQuery),this.queryRunning=!0)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const r=this.get(e);if(r.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),r.gpuQueries||(r.gpuQueries=[]),r.gpuQueries.push({query:r.activeQuery}),r.activeQuery=null,this.queryRunning=!1,r.queryQueue&&r.queryQueue.length>0)){const i=r.queryQueue.shift();this.initTimestampQuery(i)}}async resolveTimestampAsync(e,r="render"){if(!this.disjoint||!this.trackTimestamp)return;const i=this.get(e);i.gpuQueries||(i.gpuQueries=[]);for(let o=0;o<i.gpuQueries.length;o++){const s=i.gpuQueries[o],a=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT_AVAILABLE),l=this.gl.getParameter(this.disjoint.GPU_DISJOINT_EXT);if(a&&!l){const c=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT),u=Number(c)/1e6;this.gl.deleteQuery(s.query),i.gpuQueries.splice(o,1),o--,this.renderer.info.updateTimestamp(r,u)}}}getContext(){return this.gl}beginRender(e){const{gl:r}=this,i=this.get(e);if(this.initTimestampQuery(e),i.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1),e.viewport?this.updateViewport(e):r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),e.scissor){const{x:s,y:a,width:l,height:c}=e.scissorValue;r.scissor(s,e.height-c-a,l,c)}const o=e.occlusionQueryCount;o>0&&(i.currentOcclusionQueries=i.occlusionQueries,i.currentOcclusionQueryObjects=i.occlusionQueryObjects,i.lastOcclusionObject=null,i.occlusionQueries=new Array(o),i.occlusionQueryObjects=new Array(o),i.occlusionQueryIndex=0)}finishRender(e){const{gl:r,state:i}=this,o=this.get(e),s=o.previousContext,a=e.occlusionQueryCount;a>0&&(a>o.occlusionQueryIndex&&r.endQuery(r.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const l=e.textures;if(l!==null)for(let c=0;c<l.length;c++){const u=l[c];u.generateMipmaps&&this.generateMipmaps(u)}if(this._currentContext=s,e.textures!==null&&e.renderTarget){const c=this.get(e.renderTarget),{samples:u}=e.renderTarget;if(u>0){const d=c.framebuffers[e.getCacheKey()],f=r.COLOR_BUFFER_BIT,h=c.msaaFrameBuffer,p=e.textures;i.bindFramebuffer(r.READ_FRAMEBUFFER,h),i.bindFramebuffer(r.DRAW_FRAMEBUFFER,d);for(let g=0;g<p.length;g++)if(e.scissor){const{x:y,y:v,width:m,height:_}=e.scissorValue,x=e.height-_-v;r.blitFramebuffer(y,x,y+m,x+_,y,x,y+m,x+_,f,r.NEAREST),r.invalidateSubFramebuffer(r.READ_FRAMEBUFFER,c.invalidationArray,y,x,m,_)}else r.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,f,r.NEAREST),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,c.invalidationArray)}}s!==null&&(this._setFramebuffer(s),s.viewport?this.updateViewport(s):r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight)),this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const r=this.get(e),{currentOcclusionQueries:i,currentOcclusionQueryObjects:o}=r;if(i&&o){const s=new WeakSet,{gl:a}=this;r.currentOcclusionQueryObjects=null,r.currentOcclusionQueries=null;const l=()=>{let c=0;for(let u=0;u<i.length;u++){const d=i[u];d!==null&&a.getQueryParameter(d,a.QUERY_RESULT_AVAILABLE)&&(a.getQueryParameter(d,a.QUERY_RESULT)>0&&s.add(o[u]),i[u]=null,a.deleteQuery(d),c++)}c<i.length?requestAnimationFrame(l):r.occluded=s};l()}}isOccluded(e,r){const i=this.get(e);return i.occluded&&i.occluded.has(r)}updateViewport(e){const r=this.gl,{x:i,y:o,width:s,height:a}=e.viewportValue;r.viewport(i,e.height-a-o,s,a)}setScissorTest(e){const r=this.gl;e?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST)}clear(e,r,i,o=null,s=!0){const{gl:a}=this;if(o===null){const c=this.getClearColor();c.r*=c.a,c.g*=c.a,c.b*=c.a,o={textures:null,clearColorValue:c}}let l=0;if(e&&(l|=a.COLOR_BUFFER_BIT),r&&(l|=a.DEPTH_BUFFER_BIT),i&&(l|=a.STENCIL_BUFFER_BIT),l!==0){let c;if(o.clearColorValue?c=o.clearColorValue:(c=this.getClearColor(),c.r*=c.a,c.g*=c.a,c.b*=c.a),r&&this.state.setDepthMask(!0),o.textures===null)a.clearColor(c.r,c.g,c.b,c.a),a.clear(l);else{if(s&&this._setFramebuffer(o),e)for(let u=0;u<o.textures.length;u++)a.clearBufferfv(a.COLOR,u,[c.r,c.g,c.b,c.a]);r&&i?a.clearBufferfi(a.DEPTH_STENCIL,0,1,0):r?a.clearBufferfv(a.DEPTH,0,[1]):i&&a.clearBufferiv(a.STENCIL,0,[0])}}}beginCompute(e){const{state:r,gl:i}=this;r.bindFramebuffer(i.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,r,i,o){const{state:s,gl:a}=this;this.discard||(a.enable(a.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:l,transformBuffers:c,attributes:u}=this.get(o),d=this._getVaoKey(null,u),f=this.vaoCache[d];f===void 0?this._createVao(null,u):a.bindVertexArray(f),s.useProgram(l),this._bindUniforms(i);const h=this._getTransformFeedback(c);a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,h),a.beginTransformFeedback(a.POINTS),u[0].isStorageInstancedBufferAttribute?a.drawArraysInstanced(a.POINTS,0,1,r.count):a.drawArrays(a.POINTS,0,r.count),a.endTransformFeedback(),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,null);for(let p=0;p<c.length;p++){const g=c[p];g.pbo&&this.textureUtils.copyBufferToTexture(g.transformBuffer,g.pbo),g.switchBuffers()}}finishCompute(e){const r=this.gl;this.discard=!1,r.disable(r.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e),this._currentContext&&this._setFramebuffer(this._currentContext)}draw(e){const{object:r,pipeline:i,material:o,context:s,hardwareClippingPlanes:a}=e,{programGPU:l}=this.get(i),{gl:c,state:u}=this,d=this.get(s),f=e.getDrawParameters();if(f===null)return;this._bindUniforms(e.getBindings());const h=r.isMesh&&r.matrixWorld.determinant()<0;u.setMaterial(o,h,a),u.useProgram(l);const p=this.get(e);let g=p.staticVao;if(g===void 0||p.geometryId!==e.geometry.id){const w=this._getVaoKey(e.getIndex(),e.getAttributes());if(g=this.vaoCache[w],g===void 0){let E;({vaoGPU:g,staticVao:E}=this._createVao(e.getIndex(),e.getAttributes())),E&&(p.staticVao=g,p.geometryId=e.geometry.id)}}c.bindVertexArray(g);const y=e.getIndex(),v=d.lastOcclusionObject;if(v!==r&&v!==void 0){if(v!==null&&v.occlusionTest===!0&&(c.endQuery(c.ANY_SAMPLES_PASSED),d.occlusionQueryIndex++),r.occlusionTest===!0){const w=c.createQuery();c.beginQuery(c.ANY_SAMPLES_PASSED,w),d.occlusionQueries[d.occlusionQueryIndex]=w,d.occlusionQueryObjects[d.occlusionQueryIndex]=r}d.lastOcclusionObject=r}const m=this.bufferRenderer;r.isPoints?m.mode=c.POINTS:r.isLineSegments?m.mode=c.LINES:r.isLine?m.mode=c.LINE_STRIP:r.isLineLoop?m.mode=c.LINE_LOOP:o.wireframe===!0?(u.setLineWidth(o.wireframeLinewidth*this.renderer.getPixelRatio()),m.mode=c.LINES):m.mode=c.TRIANGLES;const{vertexCount:_,instanceCount:x}=f;let{firstVertex:S}=f;if(m.object=r,y!==null){S*=y.array.BYTES_PER_ELEMENT;const w=this.get(y);m.index=y.count,m.type=w.type}else m.index=0;r.isBatchedMesh?r._multiDrawInstances!==null?m.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances):this.hasFeature("WEBGL_multi_draw")?m.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount):Pc("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):x>1?m.renderInstances(S,_,x):m.render(S,_),c.bindVertexArray(null)}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,r){this.textureUtils.createTexture(e,r)}updateTexture(e,r){this.textureUtils.updateTexture(e,r)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,r,i,o,s,a){return this.textureUtils.copyTextureToBuffer(e,r,i,o,s,a)}createSampler(){}destroySampler(){}createNodeBuilder(e,r){return new K0e(e,r)}createProgram(e){const r=this.gl,{stage:i,code:o}=e,s=i==="fragment"?r.createShader(r.FRAGMENT_SHADER):r.createShader(r.VERTEX_SHADER);r.shaderSource(s,o),r.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(){console.warn("Abstract class.")}createRenderPipeline(e,r){const i=this.gl,o=e.pipeline,{fragmentProgram:s,vertexProgram:a}=o,l=i.createProgram(),c=this.get(s).shaderGPU,u=this.get(a).shaderGPU;if(i.attachShader(l,c),i.attachShader(l,u),i.linkProgram(l),this.set(o,{programGPU:l,fragmentShader:c,vertexShader:u}),r!==null&&this.parallel){const d=new Promise(f=>{const h=this.parallel,p=()=>{i.getProgramParameter(l,h.COMPLETION_STATUS_KHR)?(this._completeCompile(e,o),f()):requestAnimationFrame(p)};p()});r.push(d);return}this._completeCompile(e,o)}_handleSource(e,r){const i=e.split(`
`),o=[],s=Math.max(r-6,0),a=Math.min(r+6,i.length);for(let l=s;l<a;l++){const c=l+1;o.push(`${c===r?">":" "} ${c}: ${i[l]}`)}return o.join(`
`)}_getShaderErrors(e,r,i){const o=e.getShaderParameter(r,e.COMPILE_STATUS),s=e.getShaderInfoLog(r).trim();if(o&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const l=parseInt(a[1]);return i.toUpperCase()+`

`+s+`

`+this._handleSource(e.getShaderSource(r),l)}else return s}_logProgramError(e,r,i){if(this.renderer.debug.checkShaderErrors){const o=this.gl,s=o.getProgramInfoLog(e).trim();if(o.getProgramParameter(e,o.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(o,e,i,r);else{const a=this._getShaderErrors(o,i,"vertex"),l=this._getShaderErrors(o,r,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(e,o.VALIDATE_STATUS)+`

Program Info Log: `+s+`
`+a+`
`+l)}else s!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",s)}}_completeCompile(e,r){const{state:i,gl:o}=this,s=this.get(r),{programGPU:a,fragmentShader:l,vertexShader:c}=s;o.getProgramParameter(a,o.LINK_STATUS)===!1&&this._logProgramError(a,l,c),i.useProgram(a);const u=e.getBindings();this._setupBindings(u,a),this.set(r,{programGPU:a})}createComputePipeline(e,r){const{state:i,gl:o}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:a}=e,l=o.createProgram(),c=this.get(s).shaderGPU,u=this.get(a).shaderGPU,d=a.transforms,f=[],h=[];for(let v=0;v<d.length;v++){const m=d[v];f.push(m.varyingName),h.push(m.attributeNode)}o.attachShader(l,c),o.attachShader(l,u),o.transformFeedbackVaryings(l,f,o.SEPARATE_ATTRIBS),o.linkProgram(l),o.getProgramParameter(l,o.LINK_STATUS)===!1&&this._logProgramError(l,c,u),i.useProgram(l),this._setupBindings(r,l);const p=a.attributes,g=[],y=[];for(let v=0;v<p.length;v++){const m=p[v].node.attribute;g.push(m),this.has(m)||this.attributeUtils.createAttribute(m,o.ARRAY_BUFFER)}for(let v=0;v<h.length;v++){const m=h[v].attribute;this.has(m)||this.attributeUtils.createAttribute(m,o.ARRAY_BUFFER);const _=this.get(m);y.push(_)}this.set(e,{programGPU:l,transformBuffers:y,attributes:g})}createBindings(e,r){if(this._knownBindings.has(r)===!1){this._knownBindings.add(r);let i=0,o=0;for(const s of r){this.set(s,{textures:o,uniformBuffers:i});for(const a of s.bindings)a.isUniformBuffer&&i++,a.isSampledTexture&&o++}}this.updateBindings(e,r)}updateBindings(e){const{gl:r}=this,i=this.get(e);let o=i.uniformBuffers,s=i.textures;for(const a of e.bindings)if(a.isUniformsGroup||a.isUniformBuffer){const l=a.buffer,c=r.createBuffer();r.bindBuffer(r.UNIFORM_BUFFER,c),r.bufferData(r.UNIFORM_BUFFER,l,r.DYNAMIC_DRAW),this.set(a,{index:o++,bufferGPU:c})}else if(a.isSampledTexture){const{textureGPU:l,glTextureType:c}=this.get(a.texture);this.set(a,{index:s++,textureGPU:l,glTextureType:c})}}updateBinding(e){const r=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const o=this.get(e).bufferGPU,s=e.buffer;r.bindBuffer(r.UNIFORM_BUFFER,o),r.bufferData(r.UNIFORM_BUFFER,s,r.DYNAMIC_DRAW)}}createIndexAttribute(e){const r=this.gl;this.attributeUtils.createAttribute(e,r.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const r=this.gl;this.attributeUtils.createAttribute(e,r.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const r=this.gl;this.attributeUtils.createAttribute(e,r.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){}hasFeature(e){const r=Object.keys(eD).filter(o=>eD[o]===e),i=this.extensions;for(let o=0;o<r.length;o++)if(i.has(r[o]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,r,i,o,s){this.textureUtils.copyTextureToTexture(e,r,i,o,s)}copyFramebufferToTexture(e,r,i){this.textureUtils.copyFramebufferToTexture(e,r,i)}_setFramebuffer(e){const{gl:r,state:i}=this;let o=null;if(e.textures!==null){const s=e.renderTarget,a=this.get(s),{samples:l,depthBuffer:c,stencilBuffer:u}=s,d=s.isWebGLCubeRenderTarget===!0;let f=a.msaaFrameBuffer,h=a.depthRenderbuffer;const p=g4(e);let g;if(d?(a.cubeFramebuffers||(a.cubeFramebuffers={}),g=a.cubeFramebuffers[p]):(a.framebuffers||(a.framebuffers={}),g=a.framebuffers[p]),g===void 0){g=r.createFramebuffer(),i.bindFramebuffer(r.FRAMEBUFFER,g);const y=e.textures;if(d){a.cubeFramebuffers[p]=g;const{textureGPU:v}=this.get(y[0]),m=this.renderer._activeCubeFace;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+m,v,0)}else{a.framebuffers[p]=g;for(let v=0;v<y.length;v++){const m=y[v],_=this.get(m);_.renderTarget=e.renderTarget,_.cacheKey=p;const x=r.COLOR_ATTACHMENT0+v;r.framebufferTexture2D(r.FRAMEBUFFER,x,r.TEXTURE_2D,_.textureGPU,0)}i.drawBuffers(e,g)}if(e.depthTexture!==null){const v=this.get(e.depthTexture),m=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;v.renderTarget=e.renderTarget,v.cacheKey=p,r.framebufferTexture2D(r.FRAMEBUFFER,m,r.TEXTURE_2D,v.textureGPU,0)}}if(l>0){if(f===void 0){const y=[];f=r.createFramebuffer(),i.bindFramebuffer(r.FRAMEBUFFER,f);const v=[],m=e.textures;for(let _=0;_<m.length;_++){if(v[_]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,v[_]),y.push(r.COLOR_ATTACHMENT0+_),c){const w=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;y.push(w)}const x=e.textures[_],S=this.get(x);r.renderbufferStorageMultisample(r.RENDERBUFFER,l,S.glInternalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+_,r.RENDERBUFFER,v[_])}if(a.msaaFrameBuffer=f,a.msaaRenderbuffers=v,h===void 0){h=r.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(h,e),a.depthRenderbuffer=h;const _=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;y.push(_)}a.invalidationArray=y}o=a.msaaFrameBuffer}else o=g}i.bindFramebuffer(r.FRAMEBUFFER,o)}_getVaoKey(e,r){let i=[];if(e!==null){const o=this.get(e);i+=":"+o.id}for(let o=0;o<r.length;o++){const s=this.get(r[o]);i+=":"+s.id}return i}_createVao(e,r){const{gl:i}=this,o=i.createVertexArray();let s="",a=!0;if(i.bindVertexArray(o),e!==null){const l=this.get(e);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,l.bufferGPU),s+=":"+l.id}for(let l=0;l<r.length;l++){const c=r[l],u=this.get(c);s+=":"+u.id,i.bindBuffer(i.ARRAY_BUFFER,u.bufferGPU),i.enableVertexAttribArray(l),(c.isStorageBufferAttribute||c.isStorageInstancedBufferAttribute)&&(a=!1);let d,f;c.isInterleavedBufferAttribute===!0?(d=c.data.stride*u.bytesPerElement,f=c.offset*u.bytesPerElement):(d=0,f=0),u.isInteger?i.vertexAttribIPointer(l,c.itemSize,u.type,d,f):i.vertexAttribPointer(l,c.itemSize,u.type,c.normalized,d,f),c.isInstancedBufferAttribute&&!c.isInterleavedBufferAttribute?i.vertexAttribDivisor(l,c.meshPerAttribute):c.isInterleavedBufferAttribute&&c.data.isInstancedInterleavedBuffer&&i.vertexAttribDivisor(l,c.data.meshPerAttribute)}return i.bindBuffer(i.ARRAY_BUFFER,null),this.vaoCache[s]=o,{vaoGPU:o,staticVao:a}}_getTransformFeedback(e){let r="";for(let s=0;s<e.length;s++)r+=":"+e[s].id;let i=this.transformFeedbackCache[r];if(i!==void 0)return i;const{gl:o}=this;i=o.createTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,i);for(let s=0;s<e.length;s++){const a=e[s];o.bindBufferBase(o.TRANSFORM_FEEDBACK_BUFFER,s,a.transformBuffer)}return o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[r]=i,i}_setupBindings(e,r){const i=this.gl;for(const o of e)for(const s of o.bindings){const l=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const c=i.getUniformBlockIndex(r,s.name);i.uniformBlockBinding(r,c,l)}else if(s.isSampledTexture){const c=i.getUniformLocation(r,s.name);i.uniform1i(c,l)}}}_bindUniforms(e){const{gl:r,state:i}=this;for(const o of e)for(const s of o.bindings){const a=this.get(s),l=a.index;s.isUniformsGroup||s.isUniformBuffer?i.bindBufferBase(r.UNIFORM_BUFFER,l,a.bufferGPU):s.isSampledTexture&&i.bindTexture(a.glTextureType,a.textureGPU,r.TEXTURE0+l)}}dispose(){this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const Md={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Qr={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},Zr={Store:"store"},yr={Load:"load",Clear:"clear"},e1={CCW:"ccw"},t1={None:"none",Front:"front",Back:"back"},Pf={Uint16:"uint16",Uint32:"uint32"},te={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},n1={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},Fc={Linear:"linear",Nearest:"nearest"},Gt={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},xc={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},nD={None:0,All:15},hl={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},r1={Storage:"storage",ReadOnlyStorage:"read-only-storage"},i1={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},Uh={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},rD={TwoD:"2d",ThreeD:"3d"},Po={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},oye={All:"all"},Pv={Vertex:"vertex",Instance:"instance"},jE={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"};class sye extends cR{constructor(e,r){super(e),this.texture=r,this.version=r?r.version:0,this.isSampler=!0}}class aye extends sye{constructor(e,r,i){super(e,r?r.value:null),this.textureNode=r,this.groupNode=i}update(){this.texture=this.textureNode.value}}class lye extends N4{constructor(e,r){super(e,r?r.array:null),this.attribute=r,this.isStorageBuffer=!0}}let cye=0;class uye extends lye{constructor(e,r){super("StorageBuffer_"+cye++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:Ma.READ_WRITE,this.groupNode=r}get buffer(){return this.nodeUniform.value}}class dye extends uc{constructor(e){super(),this.device=e;const r=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,o=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:Fc.Linear}),this.flipYSampler=e.createSampler({minFilter:Fc.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:r}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:i}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:o})}getTransferPipeline(e){let r=this.transferPipelines[e];return r===void 0&&(r=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Md.TriangleStrip,stripIndexFormat:Pf.Uint32},layout:"auto"}),this.transferPipelines[e]=r),r}getFlipYPipeline(e){let r=this.flipYPipelines[e];return r===void 0&&(r=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Md.TriangleStrip,stripIndexFormat:Pf.Uint32},layout:"auto"}),this.flipYPipelines[e]=r),r}flipY(e,r,i=0){const o=r.format,{width:s,height:a}=r.size,l=this.getTransferPipeline(o),c=this.getFlipYPipeline(o),u=this.device.createTexture({size:{width:s,height:a,depthOrArrayLayers:1},format:o,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),d=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Po.TwoD,baseArrayLayer:i}),f=u.createView({baseMipLevel:0,mipLevelCount:1,dimension:Po.TwoD,baseArrayLayer:0}),h=this.device.createCommandEncoder({}),p=(g,y,v)=>{const m=g.getBindGroupLayout(0),_=this.device.createBindGroup({layout:m,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:y}]}),x=h.beginRenderPass({colorAttachments:[{view:v,loadOp:yr.Clear,storeOp:Zr.Store,clearValue:[0,0,0,0]}]});x.setPipeline(g),x.setBindGroup(0,_),x.draw(4,1,0,0),x.end()};p(l,d,f),p(c,f,d),this.device.queue.submit([h.finish()]),u.destroy()}generateMipmaps(e,r,i=0){const o=this.get(e);o.useCount===void 0&&(o.useCount=0,o.layers=[]);const s=o.layers[i]||this._mipmapCreateBundles(e,r,i),a=this.device.createCommandEncoder({});this._mipmapRunBundles(a,s),this.device.queue.submit([a.finish()]),o.useCount!==0&&(o.layers[i]=s),o.useCount++}_mipmapCreateBundles(e,r,i){const o=this.getTransferPipeline(r.format),s=o.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Po.TwoD,baseArrayLayer:i});const l=[];for(let c=1;c<r.mipLevelCount;c++){const u=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),d=e.createView({baseMipLevel:c,mipLevelCount:1,dimension:Po.TwoD,baseArrayLayer:i}),f={colorAttachments:[{view:d,loadOp:yr.Clear,storeOp:Zr.Store,clearValue:[0,0,0,0]}]},h=this.device.createRenderBundleEncoder({colorFormats:[r.format]});h.setPipeline(o),h.setBindGroup(0,u),h.draw(4,1,0,0),l.push({renderBundles:[h.finish()],passDescriptor:f}),a=d}return l}_mipmapRunBundles(e,r){const i=r.length;for(let o=0;o<i;o++){const s=r[o],a=e.beginRenderPass(s.passDescriptor);a.executeBundles(s.renderBundles),a.end()}}}const fye={[tM]:"never",[G_]:"less",[nM]:"equal",[H_]:"less-equal",[rM]:"greater",[oM]:"greater-equal",[sM]:"always",[iM]:"not-equal"},hye=[0,1,3,2,4,5];class pye{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new ac,this.depthTexture.name="depthBuffer"}createSampler(e){const r=this.backend,i=r.device,o=r.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};s.magFilter===Fc.Linear&&s.minFilter===Fc.Linear&&s.mipmapFilter===Fc.Linear&&(s.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(s.compare=fye[e.compareFunction]),o.sampler=i.createSampler(s)}createDefaultTexture(e){let r;const i=WE(e);e.isCubeTexture?r=this._getDefaultCubeTextureGPU(i):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():r=this._getDefaultTextureGPU(i),this.backend.get(e).texture=r}createTexture(e,r={}){const i=this.backend,o=i.get(e);if(o.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");r.needsMipmaps===void 0&&(r.needsMipmaps=!1),r.levels===void 0&&(r.levels=1),r.depth===void 0&&(r.depth=1);const{width:s,height:a,depth:l,levels:c}=r;e.isFramebufferTexture&&(r.renderTarget?r.format=this.backend.utils.getCurrentColorFormat(r.renderTarget):r.format=this.backend.utils.getPreferredCanvasFormat());const u=this._getDimension(e),d=e.internalFormat||r.format||WE(e,i.device);o.format=d;let f=r.sampleCount!==void 0?r.sampleCount:1;f=i.utils.getSampleCount(f);const h=e.isRenderTargetTexture&&!e.isMultisampleRenderTargetTexture?1:f;let p=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(p|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(p|=GPUTextureUsage.RENDER_ATTACHMENT);const g={label:e.name,size:{width:s,height:a,depthOrArrayLayers:l},mipLevelCount:c,sampleCount:h,dimension:u,format:d,usage:p};if(e.isVideoTexture){const y=e.source.data,v=new VideoFrame(y);g.size.width=v.displayWidth,g.size.height=v.displayHeight,v.close(),o.externalTexture=y}else{if(d===void 0)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);o.texture=i.device.createTexture(g)}if(e.isRenderTargetTexture&&f>1&&!e.isMultisampleRenderTargetTexture){const y=Object.assign({},g);y.label=y.label+"-msaa",y.sampleCount=f,o.msaaTexture=i.device.createTexture(y)}o.initialized=!0,o.textureDescriptorGPU=g}destroyTexture(e){const r=this.backend,i=r.get(e);i.texture!==void 0&&i.texture.destroy(),i.msaaTexture!==void 0&&i.msaaTexture.destroy(),r.delete(e)}destroySampler(e){const i=this.backend.get(e);delete i.sampler}generateMipmaps(e){const r=this.backend.get(e);if(e.isCubeTexture)for(let i=0;i<6;i++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,i);else{const i=e.image.depth||1;for(let o=0;o<i;o++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,o)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:r,height:i}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:r,height:i,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,r=!1){const i=this.backend,{width:o,height:s}=i.getDrawingBufferSize(),a=this.depthTexture,l=i.get(a).texture;let c,u;if(r?(c=qs,u=Ws):e&&(c=Hs,u=rr),l!==void 0){if(a.image.width===o&&a.image.height===s&&a.format===c&&a.type===u)return l;this.destroyTexture(a)}return a.name="depthBuffer",a.format=c,a.type=u,a.image.width=o,a.image.height=s,this.createTexture(a,{sampleCount:i.utils.getSampleCount(i.renderer.samples),width:o,height:s}),i.get(a).texture}updateTexture(e,r){const i=this.backend.get(e),{textureDescriptorGPU:o}=i;if(!(e.isRenderTargetTexture||o===void 0)){if(e.isDataTexture)this._copyBufferToTexture(r.image,i.texture,o,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(let s=0;s<r.image.depth;s++)this._copyBufferToTexture(r.image,i.texture,o,s,e.flipY,s);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,i.texture,o);else if(e.isCubeTexture)this._copyCubeMapToTexture(r.images,i.texture,o,e.flipY);else if(e.isVideoTexture){const s=e.source.data;i.externalTexture=s}else this._copyImageToTexture(r.image,i.texture,o,0,e.flipY);i.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,r,i,o,s,a){const l=this.backend.device,c=this.backend.get(e),u=c.texture,d=c.textureDescriptorGPU.format,f=this._getBytesPerTexel(d);let h=o*f;h=Math.ceil(h/256)*256;const p=l.createBuffer({size:o*s*f,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),g=l.createCommandEncoder();g.copyTextureToBuffer({texture:u,origin:{x:r,y:i,z:a}},{buffer:p,bytesPerRow:h},{width:o,height:s});const y=this._getTypedArrayType(d);l.queue.submit([g.finish()]),await p.mapAsync(GPUMapMode.READ);const v=p.getMappedRange();return new y(v)}_isEnvironmentTexture(e){const r=e.mapping;return r===Ql||r===Zl||r===Wo||r===qo}_getDefaultTextureGPU(e){let r=this.defaultTexture[e];if(r===void 0){const i=new $r;i.minFilter=Wn,i.magFilter=Wn,this.createTexture(i,{width:1,height:1,format:e}),this.defaultTexture[e]=r=i}return this.backend.get(r).texture}_getDefaultCubeTextureGPU(e){let r=this.defaultTexture[e];if(r===void 0){const i=new q_;i.minFilter=Wn,i.magFilter=Wn,this.createTexture(i,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=r=i}return this.backend.get(r).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const r={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),r)}return e}_copyCubeMapToTexture(e,r,i,o){for(let s=0;s<6;s++){const a=e[s],l=o===!0?hye[s]:s;a.isDataTexture?this._copyBufferToTexture(a.image,r,i,l,o):this._copyImageToTexture(a,r,i,l,o)}}_copyImageToTexture(e,r,i,o,s){this.backend.device.queue.copyExternalImageToTexture({source:e},{texture:r,mipLevel:0,origin:{x:0,y:0,z:o}},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(r,i,o)}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new dye(this.backend.device)),e}_generateMipmaps(e,r,i=0){this._getPassUtils().generateMipmaps(e,r,i)}_flipY(e,r,i=0){this._getPassUtils().flipY(e,r,i)}_copyBufferToTexture(e,r,i,o,s,a=0){const l=this.backend.device,c=e.data,u=this._getBytesPerTexel(i.format),d=e.width*u;l.queue.writeTexture({texture:r,mipLevel:0,origin:{x:0,y:0,z:o}},c,{offset:e.width*e.height*u*a,bytesPerRow:d},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(r,i,o)}_copyCompressedBufferToTexture(e,r,i){const o=this.backend.device,s=this._getBlockData(i.format),a=i.size.depthOrArrayLayers>1;for(let l=0;l<e.length;l++){const c=e[l],u=c.width,d=c.height,f=a?i.size.depthOrArrayLayers:1,h=Math.ceil(u/s.width)*s.byteLength,p=h*Math.ceil(d/s.height);for(let g=0;g<f;g++)o.queue.writeTexture({texture:r,mipLevel:l,origin:{x:0,y:0,z:g}},c.data,{offset:g*p,bytesPerRow:h,rowsPerImage:Math.ceil(d/s.height)},{width:Math.ceil(u/s.width)*s.width,height:Math.ceil(d/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===te.BC1RGBAUnorm||e===te.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===te.BC2RGBAUnorm||e===te.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===te.BC3RGBAUnorm||e===te.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===te.BC4RUnorm||e===te.BC4RSNorm)return{byteLength:8,width:4,height:4};if(e===te.BC5RGUnorm||e===te.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===te.BC6HRGBUFloat||e===te.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===te.BC7RGBAUnorm||e===te.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===te.ETC2RGB8Unorm||e===te.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===te.ETC2RGB8A1Unorm||e===te.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===te.ETC2RGBA8Unorm||e===te.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===te.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===te.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===te.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===te.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===te.ASTC4x4Unorm||e===te.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===te.ASTC5x4Unorm||e===te.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===te.ASTC5x5Unorm||e===te.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===te.ASTC6x5Unorm||e===te.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===te.ASTC6x6Unorm||e===te.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===te.ASTC8x5Unorm||e===te.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===te.ASTC8x6Unorm||e===te.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===te.ASTC8x8Unorm||e===te.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===te.ASTC10x5Unorm||e===te.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===te.ASTC10x6Unorm||e===te.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===te.ASTC10x8Unorm||e===te.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===te.ASTC10x10Unorm||e===te.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===te.ASTC12x10Unorm||e===te.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===te.ASTC12x12Unorm||e===te.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let r=n1.ClampToEdge;return e===cu?r=n1.Repeat:e===uu&&(r=n1.MirrorRepeat),r}_convertFilterMode(e){let r=Fc.Linear;return(e===Wn||e===ly||e===$s)&&(r=Fc.Nearest),r}_getBytesPerTexel(e){if(e===te.R8Unorm||e===te.R8Snorm||e===te.R8Uint||e===te.R8Sint)return 1;if(e===te.R16Uint||e===te.R16Sint||e===te.R16Float||e===te.RG8Unorm||e===te.RG8Snorm||e===te.RG8Uint||e===te.RG8Sint)return 2;if(e===te.R32Uint||e===te.R32Sint||e===te.R32Float||e===te.RG16Uint||e===te.RG16Sint||e===te.RG16Float||e===te.RGBA8Unorm||e===te.RGBA8UnormSRGB||e===te.RGBA8Snorm||e===te.RGBA8Uint||e===te.RGBA8Sint||e===te.BGRA8Unorm||e===te.BGRA8UnormSRGB||e===te.RGB9E5UFloat||e===te.RGB10A2Unorm||e===te.RG11B10UFloat||e===te.Depth32Float||e===te.Depth24Plus||e===te.Depth24PlusStencil8||e===te.Depth32FloatStencil8)return 4;if(e===te.RG32Uint||e===te.RG32Sint||e===te.RG32Float||e===te.RGBA16Uint||e===te.RGBA16Sint||e===te.RGBA16Float)return 8;if(e===te.RGBA32Uint||e===te.RGBA32Sint||e===te.RGBA32Float)return 16}_getTypedArrayType(e){if(e===te.R8Uint)return Uint8Array;if(e===te.R8Sint)return Int8Array;if(e===te.R8Unorm)return Uint8Array;if(e===te.R8Snorm)return Int8Array;if(e===te.RG8Uint)return Uint8Array;if(e===te.RG8Sint)return Int8Array;if(e===te.RG8Unorm)return Uint8Array;if(e===te.RG8Snorm)return Int8Array;if(e===te.RGBA8Uint)return Uint8Array;if(e===te.RGBA8Sint)return Int8Array;if(e===te.RGBA8Unorm)return Uint8Array;if(e===te.RGBA8Snorm)return Int8Array;if(e===te.R16Uint)return Uint16Array;if(e===te.R16Sint)return Int16Array;if(e===te.RG16Uint)return Uint16Array;if(e===te.RG16Sint)return Int16Array;if(e===te.RGBA16Uint)return Uint16Array;if(e===te.RGBA16Sint)return Int16Array;if(e===te.R16Float||e===te.RG16Float||e===te.RGBA16Float)return Uint16Array;if(e===te.R32Uint)return Uint32Array;if(e===te.R32Sint)return Int32Array;if(e===te.R32Float)return Float32Array;if(e===te.RG32Uint)return Uint32Array;if(e===te.RG32Sint)return Int32Array;if(e===te.RG32Float)return Float32Array;if(e===te.RGBA32Uint)return Uint32Array;if(e===te.RGBA32Sint)return Int32Array;if(e===te.RGBA32Float)return Float32Array;if(e===te.BGRA8Unorm||e===te.BGRA8UnormSRGB)return Uint8Array;if(e===te.RGB10A2Unorm||e===te.RGB9E5UFloat||e===te.RG11B10UFloat)return Uint32Array;if(e===te.Depth32Float)return Float32Array;if(e===te.Depth24Plus||e===te.Depth24PlusStencil8)return Uint32Array;if(e===te.Depth32FloatStencil8)return Float32Array}_getDimension(e){let r;return e.isData3DTexture?r=rD.ThreeD:r=rD.TwoD,r}}function WE(n,e=null){const r=n.format,i=n.type,o=n.colorSpace;let s;if(n.isCompressedTexture===!0||n.isCompressedArrayTexture===!0)switch(r){case kl:s=o===Dt?te.BC1RGBAUnormSRGB:te.BC1RGBAUnorm;break;case Vl:s=o===Dt?te.BC2RGBAUnormSRGB:te.BC2RGBAUnorm;break;case Gl:s=o===Dt?te.BC3RGBAUnormSRGB:te.BC3RGBAUnorm;break;case uf:s=o===Dt?te.ETC2RGB8UnormSRGB:te.ETC2RGB8Unorm;break;case df:s=o===Dt?te.ETC2RGBA8UnormSRGB:te.ETC2RGBA8Unorm;break;case ff:s=o===Dt?te.ASTC4x4UnormSRGB:te.ASTC4x4Unorm;break;case hf:s=o===Dt?te.ASTC5x4UnormSRGB:te.ASTC5x4Unorm;break;case pf:s=o===Dt?te.ASTC5x5UnormSRGB:te.ASTC5x5Unorm;break;case mf:s=o===Dt?te.ASTC6x5UnormSRGB:te.ASTC6x5Unorm;break;case gf:s=o===Dt?te.ASTC6x6UnormSRGB:te.ASTC6x6Unorm;break;case vf:s=o===Dt?te.ASTC8x5UnormSRGB:te.ASTC8x5Unorm;break;case yf:s=o===Dt?te.ASTC8x6UnormSRGB:te.ASTC8x6Unorm;break;case _f:s=o===Dt?te.ASTC8x8UnormSRGB:te.ASTC8x8Unorm;break;case xf:s=o===Dt?te.ASTC10x5UnormSRGB:te.ASTC10x5Unorm;break;case bf:s=o===Dt?te.ASTC10x6UnormSRGB:te.ASTC10x6Unorm;break;case Sf:s=o===Dt?te.ASTC10x8UnormSRGB:te.ASTC10x8Unorm;break;case wf:s=o===Dt?te.ASTC10x10UnormSRGB:te.ASTC10x10Unorm;break;case Ef:s=o===Dt?te.ASTC12x10UnormSRGB:te.ASTC12x10Unorm;break;case Cf:s=o===Dt?te.ASTC12x12UnormSRGB:te.ASTC12x12Unorm;break;case ti:s=o===Dt?te.RGBA8UnormSRGB:te.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",r)}else switch(r){case ti:switch(i){case Wc:s=te.RGBA8Snorm;break;case qc:s=te.RGBA16Sint;break;case ps:s=te.RGBA16Uint;break;case rr:s=te.RGBA32Uint;break;case Xr:s=te.RGBA32Sint;break;case fi:s=o===Dt?te.RGBA8UnormSRGB:te.RGBA8Unorm;break;case Yr:s=te.RGBA16Float;break;case hr:s=te.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",i)}break;case Ym:switch(i){case V_:s=te.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",i)}break;case Qm:switch(i){case Wc:s=te.R8Snorm;break;case qc:s=te.R16Sint;break;case ps:s=te.R16Uint;break;case rr:s=te.R32Uint;break;case Xr:s=te.R32Sint;break;case fi:s=te.R8Unorm;break;case Yr:s=te.R16Float;break;case hr:s=te.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",i)}break;case du:switch(i){case Wc:s=te.RG8Snorm;break;case qc:s=te.RG16Sint;break;case ps:s=te.RG16Uint;break;case rr:s=te.RG32Uint;break;case Xr:s=te.RG32Sint;break;case fi:s=te.RG8Unorm;break;case Yr:s=te.RG16Float;break;case hr:s=te.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",i)}break;case Hs:switch(i){case ps:s=te.Depth16Unorm;break;case rr:s=te.Depth24Plus;break;case hr:s=te.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",i)}break;case qs:switch(i){case Ws:s=te.Depth24PlusStencil8;break;case hr:e&&e.features.has(jE.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),s=te.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",i)}break;case qf:switch(i){case Xr:s=te.R32Sint;break;case rr:s=te.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",i)}break;case Xf:switch(i){case Xr:s=te.RG32Sint;break;case rr:s=te.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",i)}break;case Kf:switch(i){case Xr:s=te.RGBA32Sint;break;case rr:s=te.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",i)}break;default:console.error("WebGPURenderer: Unsupported texture format.",r)}return s}const mye=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,gye=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,iD={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},vye=n=>{n=n.trim();const e=n.match(mye);if(e!==null&&e.length===4){const r=e[2],i=[];let o=null;for(;(o=gye.exec(r))!==null;)i.push({name:o[1],type:o[2]});const s=[];for(let d=0;d<i.length;d++){const{name:f,type:h}=i[d];let p=h;p.startsWith("ptr")?p="pointer":(p.startsWith("texture")&&(p=h.split("<")[0]),p=iD[p]),s.push(new aR(p,f))}const a=n.substring(e[0].length),l=e[3]||"void",c=e[1]!==void 0?e[1]:"";return{type:iD[l]||l,inputs:s,name:c,inputsCode:r,blockCode:a,outputType:l}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class yye extends lR{constructor(e){const{type:r,inputs:i,name:o,inputsCode:s,blockCode:a,outputType:l}=vye(e);super(r,i,o),this.inputsCode=s,this.blockCode=a,this.outputType=l}getCode(e=this.name){const r=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${r}`+this.blockCode}}class _ye extends R4{parseFunction(e){return new yye(e)}}const nd=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},xye={[Ma.READ_ONLY]:"read",[Ma.WRITE_ONLY]:"write",[Ma.READ_WRITE]:"read_write"},oD={[cu]:"repeat",[Bs]:"clamp",[uu]:"mirror"},Ov={vertex:nd?nd.VERTEX:1,fragment:nd?nd.FRAGMENT:2,compute:nd?nd.COMPUTE:4},sD={instance:!0,swizzleAssign:!1,storageBuffer:!0},bye={"^^":"tsl_xor"},Sye={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},aD={},Oo={tsl_xor:new Ir("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Ir("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Ir("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Ir("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Ir("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Ir("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Ir("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Ir("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Ir("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new Ir("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new Ir("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new Ir("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new Ir(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},np={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};typeof navigator<"u"&&/Windows/g.test(navigator.userAgent)&&(Oo.pow_float=new Ir("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),Oo.pow_vec2=new Ir("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[Oo.pow_float]),Oo.pow_vec3=new Ir("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[Oo.pow_float]),Oo.pow_vec4=new Ir("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[Oo.pow_float]),np.pow_float="tsl_pow_float",np.pow_vec2="tsl_pow_vec2",np.pow_vec3="tsl_pow_vec3",np.pow_vec4="tsl_pow_vec4");let U4="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(U4+=`diagnostic( off, derivative_uniformity );
`);class wye extends T4{constructor(e,r){super(e,r,new _ye),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==mo}_generateTextureSample(e,r,i,o,s=this.shaderStage){return s==="fragment"?o?`textureSample( ${r}, ${r}_sampler, ${i}, ${o} )`:`textureSample( ${r}, ${r}_sampler, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,r,i):this.generateTextureLod(e,r,i,o,"0")}_generateVideoSample(e,r,i=this.shaderStage){if(i==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${r}.x, 1.0 - ${r}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${i} shader.`)}_generateTextureSampleLevel(e,r,i,o,s,a=this.shaderStage){return a==="fragment"&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${r}, ${r}_sampler, ${i}, ${o} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,r,i,o):this.generateTextureLod(e,r,i,s,o)}generateWrapFunction(e){const r=`tsl_coord_${oD[e.wrapS]}S_${oD[e.wrapT]}T`;let i=aD[r];if(i===void 0){const o=[];let s=`fn ${r}( coord : vec2f ) -> vec2f {

	return vec2f(
`;const a=(l,c)=>{l===cu?(o.push(Oo.repeatWrapping_float),s+=`		tsl_repeatWrapping_float( coord.${c} )`):l===Bs?(o.push(Oo.clampWrapping_float),s+=`		tsl_clampWrapping_float( coord.${c} )`):l===uu?(o.push(Oo.mirrorWrapping_float),s+=`		tsl_mirrorWrapping_float( coord.${c} )`):(s+=`		coord.${c}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};a(e.wrapS,"x"),s+=`,
`,a(e.wrapT,"y"),s+=`
	);

}
`,aD[r]=i=new Ir(s,o)}return i.build(this),r}generateTextureDimension(e,r,i){const o=this.getDataFromNode(e,this.shaderStage,this.globalCache);o.dimensionsSnippet===void 0&&(o.dimensionsSnippet={});let s=o.dimensionsSnippet[i];if(o.dimensionsSnippet[i]===void 0){let a;e.isMultisampleRenderTargetTexture===!0?a=r:a=`${r}, u32( ${i} )`,s=new Nk(new Lk(`textureDimensions( ${a} )`,"uvec2")),o.dimensionsSnippet[i]=s}return s.build(this)}generateFilteredTexture(e,r,i,o="0u"){this._include("biquadraticTexture");const s=this.generateWrapFunction(e),a=this.generateTextureDimension(e,r,o);return`tsl_biquadraticTexture( ${r}, ${s}( ${i} ), ${a}, u32( ${o} ) )`}generateTextureLod(e,r,i,o,s="0u"){const a=this.generateWrapFunction(e),l=this.generateTextureDimension(e,r,s),c=`vec2u( ${a}( ${i} ) * vec2f( ${l} ) )`;return this.generateTextureLoad(e,r,c,o,s)}generateTextureLoad(e,r,i,o,s="0u"){return e.isVideoTexture===!0||e.isStorageTexture===!0?`textureLoad( ${r}, ${i} )`:o?`textureLoad( ${r}, ${i}, ${o}, u32( ${s} ) )`:`textureLoad( ${r}, ${i}, u32( ${s} ) )`}generateTextureStore(e,r,i,o){return`textureStore( ${r}, ${i}, ${o} )`}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===hr||this.isSampleCompare(e)===!1&&e.minFilter===Wn&&e.magFilter===Wn||e.isMultisampleRenderTargetTexture===!0}generateTexture(e,r,i,o,s=this.shaderStage){let a=null;return e.isVideoTexture===!0?a=this._generateVideoSample(r,i,s):this.isUnfilterable(e)?a=this.generateTextureLod(e,r,i,o,"0",s):a=this._generateTextureSample(e,r,i,o,s),a}generateTextureGrad(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`textureSampleGrad( ${r}, ${r}_sampler, ${i},  ${o[0]}, ${o[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${a} shader.`)}generateTextureCompare(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`textureSampleCompare( ${r}, ${r}_sampler, ${i}, ${o} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${a} shader.`)}generateTextureLevel(e,r,i,o,s,a=this.shaderStage){let l=null;return e.isVideoTexture===!0?l=this._generateVideoSample(r,i,a):l=this._generateTextureSampleLevel(e,r,i,o,s,a),l}generateTextureBias(e,r,i,o,s,a=this.shaderStage){if(a==="fragment")return`textureSampleBias( ${r}, ${r}_sampler, ${i}, ${o} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${a} shader.`)}getPropertyName(e,r=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(r==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const i=e.name,o=e.type;return o==="texture"||o==="cubeTexture"||o==="storageTexture"||o==="texture3D"?i:o==="buffer"||o==="storageBuffer"||o==="indirectStorageBuffer"?`NodeBuffer_${e.id}.${i}`:e.groupNode.name+"."+i}return super.getPropertyName(e)}getOutputStructName(){return"output"}_getUniformGroupCount(e){return Object.keys(this.uniforms[e]).length}getFunctionOperator(e){const r=bye[e];return r!==void 0?(this._include(r),r):null}getNodeAccess(e,r){return r!=="compute"?Ma.READ_ONLY:e.access}getStorageAccess(e,r){return xye[this.getNodeAccess(e,r)]}getUniformFromNode(e,r,i,o=null){const s=super.getUniformFromNode(e,r,i,o),a=this.getDataFromNode(e,i,this.globalCache);if(a.uniformGPU===void 0){let l;const c=e.groupNode,u=c.name,d=this.getBindGroupArray(u,i);if(r==="texture"||r==="cubeTexture"||r==="storageTexture"||r==="texture3D"){let f=null;const h=this.getNodeAccess(e,i);if(r==="texture"||r==="storageTexture"?f=new px(s.name,s.node,c,h):r==="cubeTexture"?f=new D4(s.name,s.node,c,h):r==="texture3D"&&(f=new L4(s.name,s.node,c,h)),f.store=e.isStorageTextureNode===!0,f.setVisibility(Ov[i]),i==="fragment"&&this.isUnfilterable(e.value)===!1&&f.store===!1){const p=new aye(`${s.name}_sampler`,s.node,c);p.setVisibility(Ov[i]),d.push(p,f),l=[p,f]}else d.push(f),l=[f]}else if(r==="buffer"||r==="storageBuffer"||r==="indirectStorageBuffer"){const f=r==="buffer"?O4:uye,h=new f(e,c);h.setVisibility(Ov[i]),d.push(h),l=h}else{const f=this.uniformGroups[i]||(this.uniformGroups[i]={});let h=f[u];h===void 0&&(h=new I4(u,c),h.setVisibility(Ov[i]),f[u]=h,d.push(h)),l=this.getNodeUniform(s,r),h.addUniform(l)}a.uniformGPU=l}return s}getBuiltin(e,r,i,o=this.shaderStage){const s=this.builtins[o]||(this.builtins[o]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:r,type:i}),r}hasBuiltin(e,r=this.shaderStage){return this.builtins[r]!==void 0&&this.builtins[r].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const r=e.layout,i=this.flowShaderNode(e),o=[];for(const a of r.inputs)o.push(a.name+" : "+this.getType(a.type));let s=`fn ${r.name}( ${o.join(", ")} ) -> ${this.getType(r.type)} {
${i.vars}
${i.code}
`;return i.result&&(s+=`	return ${i.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,r=this.shaderStage){(this.directives[r]||(this.directives[r]=new Set)).add(e)}getDirectives(e){const r=[],i=this.directives[e];if(i!==void 0)for(const o of i)r.push(`enable ${o};`);return r.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const r=[],i=this.builtins[e];if(i!==void 0)for(const{name:o,property:s,type:a}of i.values())r.push(`@builtin( ${o} ) ${s} : ${a}`);return r.join(`,
	`)}getScopedArray(e,r,i,o){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:r,bufferType:i,bufferCount:o}),e}getScopedArrays(e){if(e!=="compute")return;const r=[];for(const{name:i,scope:o,bufferType:s,bufferCount:a}of this.scopedArrays.values()){const l=this.getType(s);r.push(`var<${o}> ${i}: array< ${l}, ${a} >;`)}return r.join(`
`)}getAttributes(e){const r=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","id","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const i=this.getBuiltins("attribute");i&&r.push(i);const o=this.getAttributesArray();for(let s=0,a=o.length;s<a;s++){const l=o[s],c=l.name,u=this.getType(l.type);r.push(`@location( ${s} ) ${c} : ${u}`)}}return r.join(`,
	`)}getStructMembers(e){const r=[],i=e.getMemberTypes();for(let s=0;s<i.length;s++){const a=i[s];r.push(`	@location( ${s} ) m${s} : ${a}<f32>`)}const o=this.getBuiltins("output");return o&&r.push("	"+o),r.join(`,
`)}getStructs(e){const r=[],i=this.structs[e];for(let o=0,s=i.length;o<s;o++){const a=i[o],l=a.name;let c=`struct ${l} {
`;c+=this.getStructMembers(a),c+=`
}`,r.push(c),r.push(`
var<private> output : ${l};

`)}return r.join(`

`)}getVar(e,r){return`var ${r} : ${this.getType(e)}`}getVars(e){const r=[],i=this.vars[e];if(i!==void 0)for(const o of i)r.push(`	${this.getVar(o.type,o.name)};`);return`
${r.join(`
`)}
`}getVaryings(e){const r=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,a=this.vars[e];for(let l=0;l<s.length;l++){const c=s[l];if(c.needsInterpolation){let u=`@location( ${l} )`;/^(int|uint|ivec|uvec)/.test(c.type)&&(u+=" @interpolate( flat )"),r.push(`${u} ${c.name} : ${this.getType(c.type)}`)}else e==="vertex"&&a.includes(c)===!1&&a.push(c)}}const i=this.getBuiltins(e);i&&r.push(i);const o=r.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+o):o}getUniforms(e){const r=this.uniforms[e],i=[],o=[],s=[],a={};for(const c of r){const u=c.groupNode.name,d=this.bindingsIndexes[u];if(c.type==="texture"||c.type==="cubeTexture"||c.type==="storageTexture"||c.type==="texture3D"){const f=c.node.value;e==="fragment"&&this.isUnfilterable(f)===!1&&c.node.isStorageTextureNode!==!0&&(this.isSampleCompare(f)?i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name}_sampler : sampler_comparison;`):i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name}_sampler : sampler;`));let h,p="";if(f.isMultisampleRenderTargetTexture===!0&&(p="_multisampled"),f.isCubeTexture===!0)h="texture_cube<f32>";else if(f.isDataArrayTexture===!0||f.isCompressedArrayTexture===!0)h="texture_2d_array<f32>";else if(f.isDepthTexture===!0)h=`texture_depth${p}_2d`;else if(f.isVideoTexture===!0)h="texture_external";else if(f.isData3DTexture===!0)h="texture_3d<f32>";else if(c.node.isStorageTextureNode===!0){const g=WE(f),y=this.getStorageAccess(c.node,e);h=`texture_storage_2d<${g}, ${y}>`}else{const g=this.getComponentTypeFromTexture(f).charAt(0);h=`texture${p}_2d<${g}32>`}i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name} : ${h};`)}else if(c.type==="buffer"||c.type==="storageBuffer"||c.type==="indirectStorageBuffer"){const f=c.node,h=this.getType(f.bufferType),p=f.bufferCount,g=p>0&&c.type==="buffer"?", "+p:"",y=f.isAtomic?`atomic<${h}>`:`${h}`,v=`	${c.name} : array< ${y}${g} >
`,m=f.isStorageBufferNode?`storage, ${this.getStorageAccess(f,e)}`:"uniform";o.push(this._getWGSLStructBinding("NodeBuffer_"+f.id,v,m,d.binding++,d.group))}else{const f=this.getType(this.getVectorType(c.type)),h=c.groupNode.name;(a[h]||(a[h]={index:d.binding++,id:d.group,snippets:[]})).snippets.push(`	${c.name} : ${f}`)}}for(const c in a){const u=a[c];s.push(this._getWGSLStructBinding(c,u.snippets.join(`,
`),"uniform",u.index,u.id))}let l=i.join(`
`);return l+=o.join(`
`),l+=s.join(`
`),l}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const r in e){const i=e[r];i.uniforms=this.getUniforms(r),i.attributes=this.getAttributes(r),i.varyings=this.getVaryings(r),i.structs=this.getStructs(r),i.vars=this.getVars(r),i.codes=this.getCodes(r),i.directives=this.getDirectives(r),i.scopedArrays=this.getScopedArrays(r);let o=`// code

`;o+=this.flowCode[r];const s=this.flowNodes[r],a=s[s.length-1],l=a.outputNode,c=l!==void 0&&l.isOutputStructNode===!0;for(const u of s){const d=this.getFlowData(u),f=u.name;if(f&&(o.length>0&&(o+=`
`),o+=`	// flow -> ${f}
	`),o+=`${d.code}
	`,u===a&&r!=="compute"){if(o+=`// result

	`,r==="vertex")o+=`varyings.Vertex = ${d.result};`;else if(r==="fragment")if(c)i.returnType=l.nodeType,o+=`return ${d.result};`;else{let h="	@location(0) color: vec4<f32>";const p=this.getBuiltins("output");p&&(h+=`,
	`+p),i.returnType="OutputStruct",i.structs+=this._getWGSLStruct("OutputStruct",h),i.structs+=`
var<private> output : OutputStruct;

`,o+=`output.color = ${d.result};

	return output;`}}}i.flow=o}this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,r=null){let i;return r!==null&&(i=this._getWGSLMethod(e+"_"+r)),i===void 0&&(i=this._getWGSLMethod(e)),i||e}getType(e){return Sye[e]||e}isAvailable(e){let r=sD[e];return r===void 0&&(e==="float32Filterable"?r=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(r=this.renderer.hasFeature("clip-distances")),sD[e]=r),r}_getWGSLMethod(e){return Oo[e]!==void 0&&this._include(e),np[e]}_include(e){const r=Oo[e];return r.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(r),r}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${U4}

// uniforms
${e.uniforms}

// structs
${e.structs}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,r){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${r} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = id.x + id.y * numWorkgroups.x * u32(${r}) + id.z * numWorkgroups.x * numWorkgroups.y * u32(${r});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,r){return`
struct ${e} {
${r}
};`}_getWGSLStructBinding(e,r,i,o=0,s=0){const a=e+"Struct";return`${this._getWGSLStruct(a,r)}
@binding( ${o} ) @group( ${s} )
var<${i}> ${e} : ${a};`}}class Eye{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let r;return e.depthTexture!==null?r=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?r=te.Depth24PlusStencil8:e.depth&&(r=te.Depth24Plus),r}getTextureFormatGPU(e){return this.backend.get(e).format}getCurrentColorFormat(e){let r;return e.textures!==null?r=this.getTextureFormatGPU(e.textures[0]):r=this.getPreferredCanvasFormat(),r}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,r){if(e.isPoints)return Md.PointList;if(e.isLineSegments||e.isMesh&&r.wireframe===!0)return Md.LineList;if(e.isLine)return Md.LineStrip;if(e.isMesh)return Md.TriangleList}getSampleCount(e){let r=1;return e>1&&(r=Math.pow(2,Math.floor(Math.log2(e))),r===2&&(r=4)),r}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){return navigator.userAgent.includes("Quest")?te.BGRA8Unorm:navigator.gpu.getPreferredCanvasFormat()}}const Cye=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),Tye=new Map([[O$,["float16"]]]),Mye=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class Rye{constructor(e){this.backend=e}createAttribute(e,r){const i=this._getBufferAttribute(e),o=this.backend,s=o.get(i);let a=s.buffer;if(a===void 0){const l=o.device;let c=i.array;if(e.normalized===!1&&(c.constructor===Int16Array||c.constructor===Uint16Array)){const d=new Uint32Array(c.length);for(let f=0;f<c.length;f++)d[f]=c[f];c=d}if(i.array=c,(i.isStorageBufferAttribute||i.isStorageInstancedBufferAttribute)&&i.itemSize===3){c=new c.constructor(i.count*4);for(let d=0;d<i.count;d++)c.set(i.array.subarray(d*3,d*3+3),d*4);i.itemSize=4,i.array=c}const u=c.byteLength+(4-c.byteLength%4)%4;a=l.createBuffer({label:i.name,size:u,usage:r,mappedAtCreation:!0}),new c.constructor(a.getMappedRange()).set(c),a.unmap(),s.buffer=a}}updateAttribute(e){const r=this._getBufferAttribute(e),i=this.backend,o=i.device,s=i.get(r).buffer,a=r.array,l=this._isTypedArray(a),c=r.updateRanges;if(c.length===0)o.queue.writeBuffer(s,0,a,0);else{const u=l?1:a.BYTES_PER_ELEMENT;for(let d=0,f=c.length;d<f;d++){const h=c[d],p=h.start*u,g=h.count*u;o.queue.writeBuffer(s,0,a,p,g)}r.clearUpdateRanges()}}createShaderVertexBuffers(e){const r=e.getAttributes(),i=new Map;for(let o=0;o<r.length;o++){const s=r[o],a=s.array.BYTES_PER_ELEMENT,l=this._getBufferAttribute(s);let c=i.get(l);if(c===void 0){let f,h;s.isInterleavedBufferAttribute===!0?(f=s.data.stride*a,h=s.data.isInstancedInterleavedBuffer?Pv.Instance:Pv.Vertex):(f=s.itemSize*a,h=s.isInstancedBufferAttribute?Pv.Instance:Pv.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(f=4),c={arrayStride:f,attributes:[],stepMode:h},i.set(l,c)}const u=this._getVertexFormat(s),d=s.isInterleavedBufferAttribute===!0?s.offset*a:0;c.attributes.push({shaderLocation:o,offset:d,format:u})}return Array.from(i.values())}destroyAttribute(e){const r=this.backend;r.get(this._getBufferAttribute(e)).buffer.destroy(),r.delete(e)}async getArrayBufferAsync(e){const r=this.backend,i=r.device,s=r.get(this._getBufferAttribute(e)).buffer,a=s.size,l=i.createBuffer({label:e.name,size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=i.createCommandEncoder({});c.copyBufferToBuffer(s,0,l,0,a),l.unmap();const u=c.finish();return i.queue.submit([u]),await l.mapAsync(GPUMapMode.READ),l.getMappedRange()}_getVertexFormat(e){const{itemSize:r,normalized:i}=e,o=e.array.constructor,s=e.constructor;let a;if(r==1)a=Mye.get(o);else{const c=(Tye.get(s)||Cye.get(o))[i?1:0];if(c){const u=o.BYTES_PER_ELEMENT*r,f=Math.floor((u+3)/4)*4/o.BYTES_PER_ELEMENT;if(f%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");a=`${c}x${f}`}}return a||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),a}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class Aye{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const i=this.backend.device,o=[];let s=0;for(const a of e.bindings){const l={binding:s++,visibility:a.visibility};if(a.isUniformBuffer||a.isStorageBuffer){const c={};a.isStorageBuffer&&(a.visibility&4&&(a.access===Ma.READ_WRITE||a.access===Ma.WRITE_ONLY)?c.type=r1.Storage:c.type=r1.ReadOnlyStorage),l.buffer=c}else if(a.isSampler){const c={};a.texture.isDepthTexture&&a.texture.compareFunction!==null&&(c.type="comparison"),l.sampler=c}else if(a.isSampledTexture&&a.texture.isVideoTexture)l.externalTexture={};else if(a.isSampledTexture&&a.store){const c={};c.format=this.backend.get(a.texture).texture.format;const u=a.access;u===Ma.READ_WRITE?c.access=i1.ReadWrite:u===Ma.WRITE_ONLY?c.access=i1.WriteOnly:c.access=i1.ReadOnly,l.storageTexture=c}else if(a.isSampledTexture){const c={};if(a.texture.isMultisampleRenderTargetTexture===!0&&(c.multisampled=!0),a.texture.isDepthTexture)c.sampleType=Uh.Depth;else if(a.texture.isDataTexture||a.texture.isDataArrayTexture||a.texture.isData3DTexture){const u=a.texture.type;u===Xr?c.sampleType=Uh.SInt:u===rr?c.sampleType=Uh.UInt:u===hr&&(this.backend.hasFeature("float32-filterable")?c.sampleType=Uh.Float:c.sampleType=Uh.UnfilterableFloat)}a.isSampledCubeTexture?c.viewDimension=Po.Cube:a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?c.viewDimension=Po.TwoDArray:a.isSampledTexture3D&&(c.viewDimension=Po.ThreeD),l.texture=c}else console.error(`WebGPUBindingUtils: Unsupported binding "${a}".`);o.push(l)}return i.createBindGroupLayout({entries:o})}createBindings(e,r,i,o=0){const{backend:s,bindGroupLayoutCache:a}=this,l=s.get(e);let c=a.get(e.bindingsReference);c===void 0&&(c=this.createBindingsLayout(e),a.set(e.bindingsReference,c));let u;i>0&&(l.groups===void 0&&(l.groups=[],l.versions=[]),l.versions[i]===o&&(u=l.groups[i])),u===void 0&&(u=this.createBindGroup(e,c),i>0&&(l.groups[i]=u,l.versions[i]=o)),l.group=u,l.layout=c}updateBinding(e){const r=this.backend,i=r.device,o=e.buffer,s=r.get(e).buffer;i.queue.writeBuffer(s,0,o,0)}createBindGroup(e,r){const i=this.backend,o=i.device;let s=0;const a=[];for(const l of e.bindings){if(l.isUniformBuffer){const c=i.get(l);if(c.buffer===void 0){const u=l.byteLength,d=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,f=o.createBuffer({label:"bindingBuffer_"+l.name,size:u,usage:d});c.buffer=f}a.push({binding:s,resource:{buffer:c.buffer}})}else if(l.isStorageBuffer){const c=i.get(l);if(c.buffer===void 0){const u=l.attribute;c.buffer=i.get(u).buffer}a.push({binding:s,resource:{buffer:c.buffer}})}else if(l.isSampler){const c=i.get(l.texture);a.push({binding:s,resource:c.sampler})}else if(l.isSampledTexture){const c=i.get(l.texture);let u;if(c.externalTexture!==void 0)u=o.importExternalTexture({source:c.externalTexture});else{const d=l.store?1:c.texture.mipLevelCount,f=`view-${c.texture.width}-${c.texture.height}-${d}`;if(u=c[f],u===void 0){const h=oye.All;let p;l.isSampledCubeTexture?p=Po.Cube:l.isSampledTexture3D?p=Po.ThreeD:l.texture.isDataArrayTexture||l.texture.isCompressedArrayTexture?p=Po.TwoDArray:p=Po.TwoD,u=c[f]=c.texture.createView({aspect:h,dimension:p,mipLevelCount:d})}}a.push({binding:s,resource:u})}s++}return o.createBindGroup({label:"bindGroup_"+e.name,layout:r,entries:a})}}class Nye{constructor(e){this.backend=e}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,r){const{object:i,material:o,geometry:s,pipeline:a}=e,{vertexProgram:l,fragmentProgram:c}=a,u=this.backend,d=u.device,f=u.utils,h=u.get(a),p=[];for(const F of e.getBindings()){const A=u.get(F);p.push(A.layout)}const g=u.attributeUtils.createShaderVertexBuffers(e);let y;o.transparent===!0&&o.blending!==Mi&&(y=this._getBlending(o));let v={};o.stencilWrite===!0&&(v={compare:this._getStencilCompare(o),failOp:this._getStencilOperation(o.stencilFail),depthFailOp:this._getStencilOperation(o.stencilZFail),passOp:this._getStencilOperation(o.stencilZPass)});const m=this._getColorWriteMask(o),_=[];if(e.context.textures!==null){const F=e.context.textures;for(let A=0;A<F.length;A++){const I=f.getTextureFormatGPU(F[A]);_.push({format:I,blend:y,writeMask:m})}}else{const F=f.getCurrentColorFormat(e.context);_.push({format:F,blend:y,writeMask:m})}const x=u.get(l).module,S=u.get(c).module,w=this._getPrimitiveState(i,s,o),E=this._getDepthCompare(o),C=f.getCurrentDepthStencilFormat(e.context),T=this._getSampleCount(e.context),M={label:`renderPipeline_${o.name||o.type}_${o.id}`,vertex:Object.assign({},x,{buffers:g}),fragment:Object.assign({},S,{targets:_}),primitive:w,multisample:{count:T,alphaToCoverageEnabled:o.alphaToCoverage&&T>1},layout:d.createPipelineLayout({bindGroupLayouts:p})},R={},P=e.context.depth,D=e.context.stencil;if((P===!0||D===!0)&&(P===!0&&(R.format=C,R.depthWriteEnabled=o.depthWrite,R.depthCompare=E),D===!0&&(R.stencilFront=v,R.stencilBack={},R.stencilReadMask=o.stencilFuncMask,R.stencilWriteMask=o.stencilWriteMask),M.depthStencil=R),r===null)h.pipeline=d.createRenderPipeline(M);else{const F=new Promise(A=>{d.createRenderPipelineAsync(M).then(I=>{h.pipeline=I,A()})});r.push(F)}}createBundleEncoder(e){const r=this.backend,{utils:i,device:o}=r,s=i.getCurrentDepthStencilFormat(e),a=i.getCurrentColorFormat(e),l=this._getSampleCount(e),c={label:"renderBundleEncoder",colorFormats:[a],depthStencilFormat:s,sampleCount:l};return o.createRenderBundleEncoder(c)}createComputePipeline(e,r){const i=this.backend,o=i.device,s=i.get(e.computeProgram).module,a=i.get(e),l=[];for(const c of r){const u=i.get(c);l.push(u.layout)}a.pipeline=o.createComputePipeline({compute:s,layout:o.createPipelineLayout({bindGroupLayouts:l})})}_getBlending(e){let r,i;const o=e.blending,s=e.blendSrc,a=e.blendDst,l=e.blendEquation;if(o===BT){const c=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,u=e.blendDstAlpha!==null?e.blendDstAlpha:a,d=e.blendEquationAlpha!==null?e.blendEquationAlpha:l;r={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(l)},i={srcFactor:this._getBlendFactor(c),dstFactor:this._getBlendFactor(u),operation:this._getBlendOperation(d)}}else{const c=e.premultipliedAlpha,u=(d,f,h,p)=>{r={srcFactor:d,dstFactor:f,operation:xc.Add},i={srcFactor:h,dstFactor:p,operation:xc.Add}};if(c)switch(o){case zo:u(Gt.One,Gt.OneMinusSrcAlpha,Gt.One,Gt.OneMinusSrcAlpha);break;case au:u(Gt.One,Gt.One,Gt.One,Gt.One);break;case lf:u(Gt.Zero,Gt.OneMinusSrc,Gt.Zero,Gt.One);break;case cf:u(Gt.Zero,Gt.Src,Gt.Zero,Gt.SrcAlpha);break}else switch(o){case zo:u(Gt.SrcAlpha,Gt.OneMinusSrcAlpha,Gt.One,Gt.OneMinusSrcAlpha);break;case au:u(Gt.SrcAlpha,Gt.One,Gt.SrcAlpha,Gt.One);break;case lf:u(Gt.Zero,Gt.OneMinusSrc,Gt.Zero,Gt.One);break;case cf:u(Gt.Zero,Gt.Src,Gt.Zero,Gt.Src);break}}if(r!==void 0&&i!==void 0)return{color:r,alpha:i};console.error("THREE.WebGPURenderer: Invalid blending: ",o)}_getBlendFactor(e){let r;switch(e){case kT:r=Gt.Zero;break;case VT:r=Gt.One;break;case GT:r=Gt.Src;break;case HT:r=Gt.OneMinusSrc;break;case em:r=Gt.SrcAlpha;break;case tm:r=Gt.OneMinusSrcAlpha;break;case qT:r=Gt.Dst;break;case XT:r=Gt.OneMinusDstColor;break;case jT:r=Gt.DstAlpha;break;case WT:r=Gt.OneMinusDstAlpha;break;case KT:r=Gt.SrcAlphaSaturated;break;case Lge:r=Gt.Constant;break;case Fge:r=Gt.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return r}_getStencilCompare(e){let r;const i=e.stencilFunc;switch(i){case fee:r=Qr.Never;break;case gE:r=Qr.Always;break;case hee:r=Qr.Less;break;case mee:r=Qr.LessEqual;break;case pee:r=Qr.Equal;break;case yee:r=Qr.GreaterEqual;break;case gee:r=Qr.Greater;break;case vee:r=Qr.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",i)}return r}_getStencilOperation(e){let r;switch(e){case Ec:r=hl.Keep;break;case oee:r=hl.Zero;break;case see:r=hl.Replace;break;case dee:r=hl.Invert;break;case aee:r=hl.IncrementClamp;break;case lee:r=hl.DecrementClamp;break;case cee:r=hl.IncrementWrap;break;case uee:r=hl.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",r)}return r}_getBlendOperation(e){let r;switch(e){case po:r=xc.Add;break;case $T:r=xc.Subtract;break;case zT:r=xc.ReverseSubtract;break;case v$:r=xc.Min;break;case y$:r=xc.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return r}_getPrimitiveState(e,r,i){const o={},s=this.backend.utils;switch(o.topology=s.getPrimitiveTopology(e,i),r.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(o.stripIndexFormat=r.index.array instanceof Uint16Array?Pf.Uint16:Pf.Uint32),i.side){case Ss:o.frontFace=e1.CCW,o.cullMode=t1.Back;break;case er:o.frontFace=e1.CCW,o.cullMode=t1.Front;break;case wi:o.frontFace=e1.CCW,o.cullMode=t1.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",i.side);break}return o}_getColorWriteMask(e){return e.colorWrite===!0?nD.All:nD.None}_getDepthCompare(e){let r;if(e.depthTest===!1)r=Qr.Always;else{const i=e.depthFunc;switch(i){case nm:r=Qr.Never;break;case rm:r=Qr.Always;break;case im:r=Qr.Less;break;case Yl:r=Qr.LessEqual;break;case om:r=Qr.Equal;break;case sm:r=Qr.GreaterEqual;break;case am:r=Qr.Greater;break;case lm:r=Qr.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",i)}}return r}}class Pye extends F4{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.trackTimestamp=e.trackTimestamp===!0,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new Eye(this),this.attributeUtils=new Rye(this),this.bindingUtils=new Aye(this),this.pipelineUtils=new Nye(this),this.textureUtils=new pye(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const r=this.parameters;let i;if(r.device===void 0){const a={powerPreference:r.powerPreference},l=typeof navigator<"u"?await navigator.gpu.requestAdapter(a):null;if(l===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const c=Object.values(jE),u=[];for(const f of c)l.features.has(f)&&u.push(f);const d={requiredFeatures:u,requiredLimits:r.requiredLimits};i=await l.requestDevice(d)}else i=r.device;i.lost.then(a=>{const l={api:"WebGPU",message:a.message||"Unknown reason",reason:a.reason||null,originalEvent:a};e.onDeviceLost(l)});const o=r.context!==void 0?r.context:e.domElement.getContext("webgpu");this.device=i,this.context=o;const s=r.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(jE.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s}),this.updateSize()}get coordinateSystem(){return fu}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const i=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(i.depth,i.stencil).createView()});const o=e.colorAttachments[0];this.renderer.samples>0?o.view=this.colorBuffer.createView():o.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const r=e.colorAttachments[0];return this.renderer.samples>0?r.resolveTarget=this.context.getCurrentTexture().createView():r.view=this.context.getCurrentTexture().createView(),e}_getRenderPassDescriptor(e){const r=e.renderTarget,i=this.get(r);let o=i.descriptors;if(o===void 0||i.width!==r.width||i.height!==r.height||i.activeMipmapLevel!==r.activeMipmapLevel||i.samples!==r.samples){o={},i.descriptors=o;const l=()=>{r.removeEventListener("dispose",l),this.delete(r)};r.addEventListener("dispose",l)}const s=e.getCacheKey();let a=o[s];if(a===void 0){const l=e.textures,c=[];for(let u=0;u<l.length;u++){const d=this.get(l[u]),f=d.texture.createView({baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,dimension:Po.TwoD});let h,p;d.msaaTexture!==void 0?(h=d.msaaTexture.createView(),p=f):(h=f,p=void 0),c.push({view:h,resolveTarget:p,loadOp:yr.Load,storeOp:Zr.Store})}if(a={colorAttachments:c},e.depth){const d={view:this.get(e.depthTexture).texture.createView()};a.depthStencilAttachment=d}o[s]=a,i.width=r.width,i.height=r.height,i.samples=r.samples,i.activeMipmapLevel=r.activeMipmapLevel}return a}beginRender(e){const r=this.get(e),i=this.device,o=e.occlusionQueryCount;let s;o>0&&(r.currentOcclusionQuerySet&&r.currentOcclusionQuerySet.destroy(),r.currentOcclusionQueryBuffer&&r.currentOcclusionQueryBuffer.destroy(),r.currentOcclusionQuerySet=r.occlusionQuerySet,r.currentOcclusionQueryBuffer=r.occlusionQueryBuffer,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,s=i.createQuerySet({type:"occlusion",count:o,label:`occlusionQuerySet_${e.id}`}),r.occlusionQuerySet=s,r.occlusionQueryIndex=0,r.occlusionQueryObjects=new Array(o),r.lastOcclusionObject=null);let a;e.textures===null?a=this._getDefaultRenderPassDescriptor():a=this._getRenderPassDescriptor(e),this.initTimestampQuery(e,a),a.occlusionQuerySet=s;const l=a.depthStencilAttachment;if(e.textures!==null){const d=a.colorAttachments;for(let f=0;f<d.length;f++){const h=d[f];e.clearColor?(h.clearValue=f===0?e.clearColorValue:{r:0,g:0,b:0,a:1},h.loadOp=yr.Clear,h.storeOp=Zr.Store):(h.loadOp=yr.Load,h.storeOp=Zr.Store)}}else{const d=a.colorAttachments[0];e.clearColor?(d.clearValue=e.clearColorValue,d.loadOp=yr.Clear,d.storeOp=Zr.Store):(d.loadOp=yr.Load,d.storeOp=Zr.Store)}e.depth&&(e.clearDepth?(l.depthClearValue=e.clearDepthValue,l.depthLoadOp=yr.Clear,l.depthStoreOp=Zr.Store):(l.depthLoadOp=yr.Load,l.depthStoreOp=Zr.Store)),e.stencil&&(e.clearStencil?(l.stencilClearValue=e.clearStencilValue,l.stencilLoadOp=yr.Clear,l.stencilStoreOp=Zr.Store):(l.stencilLoadOp=yr.Load,l.stencilStoreOp=Zr.Store));const c=i.createCommandEncoder({label:"renderContext_"+e.id}),u=c.beginRenderPass(a);if(r.descriptor=a,r.encoder=c,r.currentPass=u,r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){const{x:d,y:f,width:h,height:p}=e.scissorValue;u.setScissorRect(d,f,h,p)}}finishRender(e){const r=this.get(e),i=e.occlusionQueryCount;if(r.renderBundles.length>0&&r.currentPass.executeBundles(r.renderBundles),i>r.occlusionQueryIndex&&r.currentPass.endOcclusionQuery(),r.currentPass.end(),i>0){const o=i*8;let s=this.occludedResolveCache.get(o);s===void 0&&(s=this.device.createBuffer({size:o,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(o,s));const a=this.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});r.encoder.resolveQuerySet(r.occlusionQuerySet,0,i,s,0),r.encoder.copyBufferToBuffer(s,0,a,0,o),r.occlusionQueryBuffer=a,this.resolveOccludedAsync(e)}if(this.prepareTimestampBuffer(e,r.encoder),this.device.queue.submit([r.encoder.finish()]),e.textures!==null){const o=e.textures;for(let s=0;s<o.length;s++){const a=o[s];a.generateMipmaps===!0&&this.textureUtils.generateMipmaps(a)}}}isOccluded(e,r){const i=this.get(e);return i.occluded&&i.occluded.has(r)}async resolveOccludedAsync(e){const r=this.get(e),{currentOcclusionQueryBuffer:i,currentOcclusionQueryObjects:o}=r;if(i&&o){const s=new WeakSet;r.currentOcclusionQueryObjects=null,r.currentOcclusionQueryBuffer=null,await i.mapAsync(GPUMapMode.READ);const a=i.getMappedRange(),l=new BigUint64Array(a);for(let c=0;c<o.length;c++)l[c]!==BigInt(0)&&s.add(o[c]);i.destroy(),r.occluded=s}}updateViewport(e){const{currentPass:r}=this.get(e),{x:i,y:o,width:s,height:a,minDepth:l,maxDepth:c}=e.viewportValue;r.setViewport(i,o,s,a,l,c)}clear(e,r,i,o=null){const s=this.device,a=this.renderer;let l=[],c,u,d,f;if(e){const g=this.getClearColor();if(this.renderer.alpha===!0){const y=g.a;u={r:g.r*y,g:g.g*y,b:g.b*y,a:y}}else u={r:g.r,g:g.g,b:g.b,a:g.a}}if(o===null){d=a.depth,f=a.stencil;const g=this._getDefaultRenderPassDescriptor();if(e){l=g.colorAttachments;const y=l[0];y.clearValue=u,y.loadOp=yr.Clear,y.storeOp=Zr.Store}(d||f)&&(c=g.depthStencilAttachment)}else{if(d=o.depth,f=o.stencil,e)for(const g of o.textures){const y=this.get(g),v=y.texture.createView();let m,_;y.msaaTexture!==void 0?(m=y.msaaTexture.createView(),_=v):(m=v,_=void 0),l.push({view:m,resolveTarget:_,clearValue:u,loadOp:yr.Clear,storeOp:Zr.Store})}(d||f)&&(c={view:this.get(o.depthTexture).texture.createView()})}d&&(r?(c.depthLoadOp=yr.Clear,c.depthClearValue=a.getClearDepth(),c.depthStoreOp=Zr.Store):(c.depthLoadOp=yr.Load,c.depthStoreOp=Zr.Store)),f&&(i?(c.stencilLoadOp=yr.Clear,c.stencilClearValue=a.getClearStencil(),c.stencilStoreOp=Zr.Store):(c.stencilLoadOp=yr.Load,c.stencilStoreOp=Zr.Store));const h=s.createCommandEncoder({});h.beginRenderPass({colorAttachments:l,depthStencilAttachment:c}).end(),s.queue.submit([h.finish()])}beginCompute(e){const r=this.get(e),i={};this.initTimestampQuery(e,i),r.cmdEncoderGPU=this.device.createCommandEncoder(),r.passEncoderGPU=r.cmdEncoderGPU.beginComputePass(i)}compute(e,r,i,o){const{passEncoderGPU:s}=this.get(e),a=this.get(o).pipeline;s.setPipeline(a);for(let d=0,f=i.length;d<f;d++){const h=i[d],p=this.get(h);s.setBindGroup(d,p.group)}const l=this.device.limits.maxComputeWorkgroupsPerDimension,c=this.get(r);c.dispatchSize===void 0&&(c.dispatchSize={x:0,y:1,z:1});const{dispatchSize:u}=c;r.dispatchCount>l?(u.x=Math.min(r.dispatchCount,l),u.y=Math.ceil(r.dispatchCount/l)):u.x=r.dispatchCount,s.dispatchWorkgroups(u.x,u.y,u.z)}finishCompute(e){const r=this.get(e);r.passEncoderGPU.end(),this.prepareTimestampBuffer(e,r.cmdEncoderGPU),this.device.queue.submit([r.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,r){const{object:i,context:o,pipeline:s}=e,a=e.getBindings(),l=this.get(o),c=this.get(s).pipeline,u=l.currentSets,d=l.currentPass,f=e.getDrawParameters();if(f===null)return;u.pipeline!==c&&(d.setPipeline(c),u.pipeline=c);const h=u.bindingGroups;for(let v=0,m=a.length;v<m;v++){const _=a[v],x=this.get(_);h[_.index]!==_.id&&(d.setBindGroup(_.index,x.group),h[_.index]=_.id)}const p=e.getIndex(),g=p!==null;if(g===!0&&u.index!==p){const v=this.get(p).buffer,m=p.array instanceof Uint16Array?Pf.Uint16:Pf.Uint32;d.setIndexBuffer(v,m),u.index=p}const y=e.getVertexBuffers();for(let v=0,m=y.length;v<m;v++){const _=y[v];if(u.attributes[v]!==_){const x=this.get(_).buffer;d.setVertexBuffer(v,x),u.attributes[v]=_}}if(l.occlusionQuerySet!==void 0){const v=l.lastOcclusionObject;v!==i&&(v!==null&&v.occlusionTest===!0&&(d.endOcclusionQuery(),l.occlusionQueryIndex++),i.occlusionTest===!0&&(d.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=i),l.lastOcclusionObject=i)}if(i.isBatchedMesh===!0){const v=i._multiDrawStarts,m=i._multiDrawCounts,_=i._multiDrawCount,x=i._multiDrawInstances,S=g?p.array.BYTES_PER_ELEMENT:1;for(let w=0;w<_;w++){const E=x?x[w]:1,C=E>1?0:w;d.drawIndexed(m[w],E,v[w]/S,0,C)}}else if(g===!0){const{vertexCount:v,instanceCount:m,firstVertex:_}=f,x=e.getIndirect();if(x!==null){const S=this.get(x).buffer;d.drawIndexedIndirect(S,0)}else d.drawIndexed(v,m,_,0,0);r.update(i,v,m)}else{const{vertexCount:v,instanceCount:m,firstVertex:_}=f,x=e.getIndirect();if(x!==null){const S=this.get(x).buffer;d.drawIndirect(S,0)}else d.draw(v,m,_,0);r.update(i,v,m)}}needsRenderUpdate(e){const r=this.get(e),{object:i,material:o}=e,s=this.utils,a=s.getSampleCountRenderContext(e.context),l=s.getCurrentColorSpace(e.context),c=s.getCurrentColorFormat(e.context),u=s.getCurrentDepthStencilFormat(e.context),d=s.getPrimitiveTopology(i,o);let f=!1;return(r.material!==o||r.materialVersion!==o.version||r.transparent!==o.transparent||r.blending!==o.blending||r.premultipliedAlpha!==o.premultipliedAlpha||r.blendSrc!==o.blendSrc||r.blendDst!==o.blendDst||r.blendEquation!==o.blendEquation||r.blendSrcAlpha!==o.blendSrcAlpha||r.blendDstAlpha!==o.blendDstAlpha||r.blendEquationAlpha!==o.blendEquationAlpha||r.colorWrite!==o.colorWrite||r.depthWrite!==o.depthWrite||r.depthTest!==o.depthTest||r.depthFunc!==o.depthFunc||r.stencilWrite!==o.stencilWrite||r.stencilFunc!==o.stencilFunc||r.stencilFail!==o.stencilFail||r.stencilZFail!==o.stencilZFail||r.stencilZPass!==o.stencilZPass||r.stencilFuncMask!==o.stencilFuncMask||r.stencilWriteMask!==o.stencilWriteMask||r.side!==o.side||r.alphaToCoverage!==o.alphaToCoverage||r.sampleCount!==a||r.colorSpace!==l||r.colorFormat!==c||r.depthStencilFormat!==u||r.primitiveTopology!==d||r.clippingContextCacheKey!==e.clippingContextCacheKey)&&(r.material=o,r.materialVersion=o.version,r.transparent=o.transparent,r.blending=o.blending,r.premultipliedAlpha=o.premultipliedAlpha,r.blendSrc=o.blendSrc,r.blendDst=o.blendDst,r.blendEquation=o.blendEquation,r.blendSrcAlpha=o.blendSrcAlpha,r.blendDstAlpha=o.blendDstAlpha,r.blendEquationAlpha=o.blendEquationAlpha,r.colorWrite=o.colorWrite,r.depthWrite=o.depthWrite,r.depthTest=o.depthTest,r.depthFunc=o.depthFunc,r.stencilWrite=o.stencilWrite,r.stencilFunc=o.stencilFunc,r.stencilFail=o.stencilFail,r.stencilZFail=o.stencilZFail,r.stencilZPass=o.stencilZPass,r.stencilFuncMask=o.stencilFuncMask,r.stencilWriteMask=o.stencilWriteMask,r.side=o.side,r.alphaToCoverage=o.alphaToCoverage,r.sampleCount=a,r.colorSpace=l,r.colorFormat=c,r.depthStencilFormat=u,r.primitiveTopology=d,r.clippingContextCacheKey=e.clippingContextCacheKey,f=!0),f}getRenderCacheKey(e){const{object:r,material:i}=e,o=this.utils,s=e.context;return[i.transparent,i.blending,i.premultipliedAlpha,i.blendSrc,i.blendDst,i.blendEquation,i.blendSrcAlpha,i.blendDstAlpha,i.blendEquationAlpha,i.colorWrite,i.depthWrite,i.depthTest,i.depthFunc,i.stencilWrite,i.stencilFunc,i.stencilFail,i.stencilZFail,i.stencilZPass,i.stencilFuncMask,i.stencilWriteMask,i.side,o.getSampleCountRenderContext(s),o.getCurrentColorSpace(s),o.getCurrentColorFormat(s),o.getCurrentDepthStencilFormat(s),o.getPrimitiveTopology(r,i),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,r){this.textureUtils.createTexture(e,r)}updateTexture(e,r){this.textureUtils.updateTexture(e,r)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,r,i,o,s,a){return this.textureUtils.copyTextureToBuffer(e,r,i,o,s,a)}initTimestampQuery(e,r){if(!this.trackTimestamp)return;const i=this.get(e);if(!i.timeStampQuerySet){const o=e.isComputeNode?"compute":"render",s=this.device.createQuerySet({type:"timestamp",count:2,label:`timestamp_${o}_${e.id}`});Object.assign(r,{timestampWrites:{querySet:s,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1}}),i.timeStampQuerySet=s}}prepareTimestampBuffer(e,r){if(!this.trackTimestamp)return;const i=this.get(e),o=2*BigInt64Array.BYTES_PER_ELEMENT;i.currentTimestampQueryBuffers===void 0&&(i.currentTimestampQueryBuffers={resolveBuffer:this.device.createBuffer({label:"timestamp resolve buffer",size:o,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),resultBuffer:this.device.createBuffer({label:"timestamp result buffer",size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})});const{resolveBuffer:s,resultBuffer:a}=i.currentTimestampQueryBuffers;r.resolveQuerySet(i.timeStampQuerySet,0,2,s,0),a.mapState==="unmapped"&&r.copyBufferToBuffer(s,0,a,0,o)}async resolveTimestampAsync(e,r="render"){if(!this.trackTimestamp)return;const i=this.get(e);if(i.currentTimestampQueryBuffers===void 0)return;const{resultBuffer:o}=i.currentTimestampQueryBuffers;await this.device.queue.onSubmittedWorkDone(),o.mapState==="unmapped"&&o.mapAsync(GPUMapMode.READ).then(()=>{const s=new BigUint64Array(o.getMappedRange()),a=Number(s[1]-s[0])/1e6;this.renderer.info.updateTimestamp(r,a),o.unmap()})}createNodeBuilder(e,r){return new wye(e,r)}createProgram(e){const r=this.get(e);r.module={module:this.device.createShaderModule({code:e.code,label:e.stage}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,r){this.pipelineUtils.createRenderPipeline(e,r)}createComputePipeline(e,r){this.pipelineUtils.createComputePipeline(e,r)}beginBundle(e){const r=this.get(e);r._currentPass=r.currentPass,r._currentSets=r.currentSets,r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,r){const i=this.get(e),s=i.currentPass.finish();this.get(r).bundleGPU=s,i.currentSets=i._currentSets,i.currentPass=i._currentPass}addBundle(e,r){this.get(e).renderBundles.push(this.get(r).bundleGPU)}createBindings(e,r,i,o){this.bindingUtils.createBindings(e,r,i,o)}updateBindings(e,r,i,o){this.bindingUtils.createBindings(e,r,i,o)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,r,i=null,o=null,s=0){let a=0,l=0,c=0,u=0,d=0,f=0,h=e.image.width,p=e.image.height;i!==null&&(u=i.x,d=i.y,f=i.z||0,h=i.width,p=i.height),o!==null&&(a=o.x,l=o.y,c=o.z||0);const g=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+r.id}),y=this.get(e).texture,v=this.get(r).texture;g.copyTextureToTexture({texture:y,mipLevel:s,origin:{x:u,y:d,z:f}},{texture:v,mipLevel:s,origin:{x:a,y:l,z:c}},[h,p,1]),this.device.queue.submit([g.finish()])}copyFramebufferToTexture(e,r,i){const o=this.get(r);let s=null;r.renderTarget?e.isDepthTexture?s=this.get(r.depthTexture).texture:s=this.get(r.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(r.depth,r.stencil):s=this.context.getCurrentTexture();const a=this.get(e).texture;if(s.format!==a.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,a.format);return}let l;if(o.currentPass?(o.currentPass.end(),l=o.encoder):l=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),l.copyTextureToTexture({texture:s,origin:[i.x,i.y,0]},{texture:a},[i.z,i.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e),o.currentPass){const{descriptor:c}=o;for(let u=0;u<c.colorAttachments.length;u++)c.colorAttachments[u].loadOp=yr.Load;if(r.depth&&(c.depthStencilAttachment.depthLoadOp=yr.Load),r.stencil&&(c.depthStencilAttachment.stencilLoadOp=yr.Load),o.currentPass=l.beginRenderPass(c),o.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.viewport&&this.updateViewport(r),r.scissor){const{x:u,y:d,width:f,height:h}=r.scissorValue;o.currentPass.setScissorRect(u,d,f,h)}}else this.device.queue.submit([l.finish()])}}class Oye extends k${constructor(e,r,i,o,s,a){super(e,r,i,o,s,a),this.iesMap=null}copy(e,r){return super.copy(e,r),this.iesMap=e.iesMap,this}}class Iye extends A4{constructor(){super(),this.addMaterial(Tme,"MeshPhongMaterial"),this.addMaterial(h4,"MeshStandardMaterial"),this.addMaterial(fge,"MeshPhysicalMaterial"),this.addMaterial(gge,"MeshToonMaterial"),this.addMaterial(_me,"MeshBasicMaterial"),this.addMaterial(Eme,"MeshLambertMaterial"),this.addMaterial(hme,"MeshNormalMaterial"),this.addMaterial(xge,"MeshMatcapMaterial"),this.addMaterial(lme,"LineBasicMaterial"),this.addMaterial(ume,"LineDashedMaterial"),this.addMaterial(Sge,"PointsMaterial"),this.addMaterial(Tge,"SpriteMaterial"),this.addMaterial(Age,"ShadowMaterial"),this.addLight(qve,Vte),this.addLight(S0e,V$),this.addLight(w0e,Hte),this.addLight(M4,k$),this.addLight(C0e,G$),this.addLight(T0e,$te),this.addLight(M0e,Wte),this.addLight(E0e,Oye),this.addToneMapping(cve,b$),this.addToneMapping(uve,S$),this.addToneMapping(dve,w$),this.addToneMapping(hve,E$),this.addToneMapping(vve,C$),this.addToneMapping(yve,T$)}}class Dye extends B0e{constructor(e={}){let r;e.forceWebGL?r=tD:(r=Pye,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new tD(e)));const i=new r(e);super(i,e),this.library=new Iye,this.isWebGPURenderer=!0}}const o1={type:"change"},uR={type:"start"},dR={type:"end"},lD=1e-6,wn={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},Iv=new je,pl=new je,Lye=new K,Dv=new K,s1=new K,rd=new Xs,cD=new K,Lv=new K,a1=new K,Fv=new K;class Fye extends Z_{constructor(e,r=null){super(e,r),this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:ei.ROTATE,MIDDLE:ei.DOLLY,RIGHT:ei.PAN},this.state=wn.NONE,this.keyState=wn.NONE,this.target=new K,this._lastPosition=new K,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new K,this._movePrev=new je,this._moveCurr=new je,this._lastAxis=new K,this._zoomStart=new je,this._zoomEnd=new je,this._panStart=new je,this._panEnd=new je,this._pointers=[],this._pointerPositions={},this._onPointerMove=Bye.bind(this),this._onPointerDown=Uye.bind(this),this._onPointerUp=$ye.bind(this),this._onPointerCancel=zye.bind(this),this._onContextMenu=qye.bind(this),this._onMouseWheel=Wye.bind(this),this._onKeyDown=Vye.bind(this),this._onKeyUp=kye.bind(this),this._onTouchStart=Xye.bind(this),this._onTouchMove=Kye.bind(this),this._onTouchEnd=Yye.bind(this),this._onMouseDown=Gye.bind(this),this._onMouseMove=Hye.bind(this),this._onMouseUp=jye.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,r!==null&&(this.connect(),this.handleResize()),this.update()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),r=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-r.clientLeft,this.screen.top=e.top+window.pageYOffset-r.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>lD&&(this.dispatchEvent(o1),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>lD||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(o1),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=wn.NONE,this.keyState=wn.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(o1),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(pl.copy(this._panEnd).sub(this._panStart),pl.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,r=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;pl.x*=e,pl.y*=r}pl.multiplyScalar(this._eye.length()*this.panSpeed),Dv.copy(this._eye).cross(this.object.up).setLength(pl.x),Dv.add(Lye.copy(this.object.up).setLength(pl.y)),this.object.position.add(Dv),this.target.add(Dv),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(pl.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){Fv.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=Fv.length();e?(this._eye.copy(this.object.position).sub(this.target),cD.copy(this._eye).normalize(),Lv.copy(this.object.up).normalize(),a1.crossVectors(Lv,cD).normalize(),Lv.setLength(this._moveCurr.y-this._movePrev.y),a1.setLength(this._moveCurr.x-this._movePrev.x),Fv.copy(Lv.add(a1)),s1.crossVectors(Fv,this._eye).normalize(),e*=this.rotateSpeed,rd.setFromAxisAngle(s1,e),this._eye.applyQuaternion(rd),this.object.up.applyQuaternion(rd),this._lastAxis.copy(s1),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),rd.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(rd),this.object.up.applyQuaternion(rd)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===wn.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=dy.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=dy.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,r){return Iv.set((e-this.screen.left)/this.screen.width,(r-this.screen.top)/this.screen.height),Iv}_getMouseOnCircle(e,r){return Iv.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-r))/this.screen.width),Iv}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r].pointerId==e.pointerId){this._pointers.splice(r,1);return}}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new je,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[r.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function Uye(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n))}function Bye(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function $ye(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchEnd(n):this._onMouseUp(),this._removePointer(n),this._pointers.length===0&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function zye(n){this._removePointer(n)}function kye(){this.enabled!==!1&&(this.keyState=wn.NONE,window.addEventListener("keydown",this._onKeyDown))}function Vye(n){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===wn.NONE&&(n.code===this.keys[wn.ROTATE]&&!this.noRotate?this.keyState=wn.ROTATE:n.code===this.keys[wn.ZOOM]&&!this.noZoom?this.keyState=wn.ZOOM:n.code===this.keys[wn.PAN]&&!this.noPan&&(this.keyState=wn.PAN)))}function Gye(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ei.DOLLY:this.state=wn.ZOOM;break;case ei.ROTATE:this.state=wn.ROTATE;break;case ei.PAN:this.state=wn.PAN;break;default:this.state=wn.NONE}const r=this.keyState!==wn.NONE?this.keyState:this.state;r===wn.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr)):r===wn.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._zoomEnd.copy(this._zoomStart)):r===wn.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(uR)}function Hye(n){const e=this.keyState!==wn.NONE?this.keyState:this.state;e===wn.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY))):e===wn.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY)):e===wn.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY))}function jye(){this.state=wn.NONE,this.dispatchEvent(dR)}function Wye(n){if(this.enabled!==!1&&this.noZoom!==!0){switch(n.preventDefault(),n.deltaMode){case 2:this._zoomStart.y-=n.deltaY*.025;break;case 1:this._zoomStart.y-=n.deltaY*.01;break;default:this._zoomStart.y-=n.deltaY*25e-5;break}this.dispatchEvent(uR),this.dispatchEvent(dR)}}function qye(n){this.enabled!==!1&&n.preventDefault()}function Xye(n){switch(this._trackPointer(n),this._pointers.length){case 1:this.state=wn.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=wn.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,r=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+r*r);const i=(this._pointers[0].pageX+this._pointers[1].pageX)/2,o=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(i,o)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(uR)}function Kye(n){switch(this._trackPointer(n),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY));break;default:const e=this._getSecondPointerPosition(n),r=n.pageX-e.x,i=n.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(r*r+i*i);const o=(n.pageX+e.x)/2,s=(n.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(o,s));break}}function Yye(n){switch(this._pointers.length){case 0:this.state=wn.NONE;break;case 1:this.state=wn.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=wn.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==n.pointerId){const r=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(r.x,r.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(dR)}const uD={type:"change"},fR={type:"start"},B4={type:"end"},Uv=new W_,dD=new ls,Qye=Math.cos(70*dy.DEG2RAD),Or=new K,Fi=2*Math.PI,Dn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},l1=1e-6;class Zye extends Z_{constructor(e,r=null){super(e,r),this.state=Dn.NONE,this.enabled=!0,this.target=new K,this.cursor=new K,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ei.ROTATE,MIDDLE:ei.DOLLY,RIGHT:ei.PAN},this.touches={ONE:Ca.ROTATE,TWO:Ca.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new K,this._lastQuaternion=new Xs,this._lastTargetPosition=new K,this._quat=new Xs().setFromUnitVectors(e.up,new K(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new MP,this._sphericalDelta=new MP,this._scale=1,this._panOffset=new K,this._rotateStart=new je,this._rotateEnd=new je,this._rotateDelta=new je,this._panStart=new je,this._panEnd=new je,this._panDelta=new je,this._dollyStart=new je,this._dollyEnd=new je,this._dollyDelta=new je,this._dollyDirection=new K,this._mouse=new je,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=e_e.bind(this),this._onPointerDown=Jye.bind(this),this._onPointerUp=t_e.bind(this),this._onContextMenu=l_e.bind(this),this._onMouseWheel=i_e.bind(this),this._onKeyDown=o_e.bind(this),this._onTouchStart=s_e.bind(this),this._onTouchMove=a_e.bind(this),this._onMouseDown=n_e.bind(this),this._onMouseMove=r_e.bind(this),this._interceptControlDown=c_e.bind(this),this._interceptControlUp=u_e.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(uD),this.update(),this.state=Dn.NONE}update(e=null){const r=this.object.position;Or.copy(r).sub(this.target),Or.applyQuaternion(this._quat),this._spherical.setFromVector3(Or),this.autoRotate&&this.state===Dn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,o=this.maxAzimuthAngle;isFinite(i)&&isFinite(o)&&(i<-Math.PI?i+=Fi:i>Math.PI&&(i-=Fi),o<-Math.PI?o+=Fi:o>Math.PI&&(o-=Fi),i<=o?this._spherical.theta=Math.max(i,Math.min(o,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+o)/2?Math.max(i,this._spherical.theta):Math.min(o,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Or.setFromSpherical(this._spherical),Or.applyQuaternion(this._quatInverse),r.copy(this.target).add(Or),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const l=Or.length();a=this._clampDistance(l*this._scale);const c=l-a;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),s=!!c}else if(this.object.isOrthographicCamera){const l=new K(this._mouse.x,this._mouse.y,0);l.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=c!==this.object.zoom;const u=new K(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(l),this.object.updateMatrixWorld(),a=Or.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(Uv.origin.copy(this.object.position),Uv.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Uv.direction))<Qye?this.object.lookAt(this.target):(dD.setFromNormalAndCoplanarPoint(this.object.up,this.target),Uv.intersectPlane(dD,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>l1||8*(1-this._lastQuaternion.dot(this.object.quaternion))>l1||this._lastTargetPosition.distanceToSquared(this.target)>l1?(this.dispatchEvent(uD),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Fi/60*this.autoRotateSpeed*e:Fi/60/60*this.autoRotateSpeed}_getZoomScale(e){const r=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,r){Or.setFromMatrixColumn(r,0),Or.multiplyScalar(-e),this._panOffset.add(Or)}_panUp(e,r){this.screenSpacePanning===!0?Or.setFromMatrixColumn(r,1):(Or.setFromMatrixColumn(r,0),Or.crossVectors(this.object.up,Or)),Or.multiplyScalar(e),this._panOffset.add(Or)}_pan(e,r){const i=this.domElement;if(this.object.isPerspectiveCamera){const o=this.object.position;Or.copy(o).sub(this.target);let s=Or.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/i.clientHeight,this.object.matrix),this._panUp(2*r*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),o=e-i.left,s=r-i.top,a=i.width,l=i.height;this._mouse.x=o/a*2-1,this._mouse.y=-(s/l)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Fi*this._rotateDelta.x/r.clientHeight),this._rotateUp(Fi*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let r=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Fi*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Fi*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Fi*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Fi*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0;break}r&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._rotateStart.set(i,o)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._panStart.set(i,o)}}_handleTouchStartDolly(e){const r=this._getSecondPointerPosition(e),i=e.pageX-r.x,o=e.pageY-r.y,s=Math.sqrt(i*i+o*o);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),o=.5*(e.pageX+i.x),s=.5*(e.pageY+i.y);this._rotateEnd.set(o,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Fi*this._rotateDelta.x/r.clientHeight),this._rotateUp(Fi*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._panEnd.set(i,o)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const r=this._getSecondPointerPosition(e),i=e.pageX-r.x,o=e.pageY-r.y,s=Math.sqrt(i*i+o*o);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+r.x)*.5,l=(e.pageY+r.y)*.5;this._updateZoomParameters(a,l)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId){this._pointers.splice(r,1);return}}_isTrackingPointer(e){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId)return!0;return!1}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new je,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[r]}_customWheelEvent(e){const r=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(r){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function Jye(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function e_e(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function t_e(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(B4),this.state=Dn.NONE;break;case 1:const e=this._pointers[0],r=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:r.x,pageY:r.y});break}}function n_e(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case ei.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Dn.DOLLY;break;case ei.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Dn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Dn.ROTATE}break;case ei.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Dn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Dn.PAN}break;default:this.state=Dn.NONE}this.state!==Dn.NONE&&this.dispatchEvent(fR)}function r_e(n){switch(this.state){case Dn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Dn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Dn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function i_e(n){this.enabled===!1||this.enableZoom===!1||this.state!==Dn.NONE||(n.preventDefault(),this.dispatchEvent(fR),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(B4))}function o_e(n){this.enabled!==!1&&this._handleKeyDown(n)}function s_e(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Ca.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Dn.TOUCH_ROTATE;break;case Ca.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Dn.TOUCH_PAN;break;default:this.state=Dn.NONE}break;case 2:switch(this.touches.TWO){case Ca.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Dn.TOUCH_DOLLY_PAN;break;case Ca.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Dn.TOUCH_DOLLY_ROTATE;break;default:this.state=Dn.NONE}break;default:this.state=Dn.NONE}this.state!==Dn.NONE&&this.dispatchEvent(fR)}function a_e(n){switch(this._trackPointer(n),this.state){case Dn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Dn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Dn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Dn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Dn.NONE}}function l_e(n){this.enabled!==!1&&n.preventDefault()}function c_e(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function u_e(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const d_e={type:"change"},fD=1e-6,hD=new Xs;class f_e extends Z_{constructor(e,r=null){super(e,r),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new K(0,0,0),this._rotationVector=new K(0,0,0),this._lastQuaternion=new Xs,this._lastPosition=new K,this._status=0,this._onKeyDown=h_e.bind(this),this._onKeyUp=p_e.bind(this),this._onPointerMove=g_e.bind(this),this._onPointerDown=m_e.bind(this),this._onPointerUp=v_e.bind(this),this._onPointerCancel=y_e.bind(this),this._onContextMenu=__e.bind(this),r!==null&&this.connect()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const r=this.object,i=e*this.movementSpeed,o=e*this.rollSpeed;r.translateX(this._moveVector.x*i),r.translateY(this._moveVector.y*i),r.translateZ(this._moveVector.z*i),hD.set(this._rotationVector.x*o,this._rotationVector.y*o,this._rotationVector.z*o,1).normalize(),r.quaternion.multiply(hD),(this._lastPosition.distanceToSquared(r.position)>fD||8*(1-this._lastQuaternion.dot(r.quaternion))>fD)&&(this.dispatchEvent(d_e),this._lastQuaternion.copy(r.quaternion),this._lastPosition.copy(r.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function h_e(n){if(!(n.altKey||this.enabled===!1)){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function p_e(n){if(this.enabled!==!1){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function m_e(n){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(n.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function g_e(n){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),r=e.size[0]/2,i=e.size[1]/2;this._moveState.yawLeft=-(n.pageX-e.offset[0]-r)/r,this._moveState.pitchDown=(n.pageY-e.offset[1]-i)/i,this._updateRotationVector()}}function v_e(n){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(n.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function y_e(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function __e(n){this.enabled!==!1&&n.preventDefault()}const $4={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class lg{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const x_e=new Zm(-1,1,1,-1,0,1);class b_e extends Di{constructor(){super(),this.setAttribute("position",new mr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new mr([0,2,0,0,2,0],2))}}const S_e=new b_e;class z4{constructor(e){this._mesh=new Br(S_e,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,x_e)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class w_e extends lg{constructor(e,r){super(),this.textureID=r!==void 0?r:"tDiffuse",e instanceof Vi?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=fy.clone(e.uniforms),this.material=new Vi({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new z4(this.material)}render(e,r,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class pD extends lg{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,i){const o=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,l;this.inverse?(a=0,l=1):(a=1,l=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.buffers.stencil.setFunc(o.ALWAYS,a,4294967295),s.buffers.stencil.setClear(l),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(o.EQUAL,1,4294967295),s.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.buffers.stencil.setLocked(!0)}}class E_e extends lg{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class C_e{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const i=e.getSize(new je);this._width=i.width,this._height=i.height,r=new xs(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Yr}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new w_e($4),this.copyPass.material.blending=Mi,this.clock=new H$}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let i=!1;for(let o=0,s=this.passes.length;o<s;o++){const a=this.passes[o];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),a.needsSwap){if(i){const l=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}pD!==void 0&&(a instanceof pD?i=!0:a instanceof E_e&&(i=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new je);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const i=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(i,o),this.renderTarget2.setSize(i,o);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class T_e extends lg{constructor(e,r,i=null,o=null,s=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=i,this.clearColor=o,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Tt}render(e,r,i){const o=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=o}}function M_e(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Zd(n,e)}var ks=function(n){M_e(e,n);function e(r){var i;return i=n.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+r+" for more information.")||this,nn(i)}return e}(ny(Error));function c1(n){return Math.round(n*255)}function R_e(n,e,r){return c1(n)+","+c1(e)+","+c1(r)}function Pm(n,e,r,i){if(i===void 0&&(i=R_e),e===0)return i(r,r,r);var o=(n%360+360)%360/60,s=(1-Math.abs(2*r-1))*e,a=s*(1-Math.abs(o%2-1)),l=0,c=0,u=0;o>=0&&o<1?(l=s,c=a):o>=1&&o<2?(l=a,c=s):o>=2&&o<3?(c=s,u=a):o>=3&&o<4?(c=a,u=s):o>=4&&o<5?(l=a,u=s):o>=5&&o<6&&(l=s,u=a);var d=r-s/2,f=l+d,h=c+d,p=u+d;return i(f,h,p)}var mD={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function A_e(n){if(typeof n!="string")return n;var e=n.toLowerCase();return mD[e]?"#"+mD[e]:n}var N_e=/^#[a-fA-F0-9]{6}$/,P_e=/^#[a-fA-F0-9]{8}$/,O_e=/^#[a-fA-F0-9]{3}$/,I_e=/^#[a-fA-F0-9]{4}$/,u1=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,D_e=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,L_e=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,F_e=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function gu(n){if(typeof n!="string")throw new ks(3);var e=A_e(n);if(e.match(N_e))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(P_e)){var r=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:r}}if(e.match(O_e))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(I_e)){var i=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:i}}var o=u1.exec(e);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var s=D_e.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var a=L_e.exec(e);if(a){var l=parseInt(""+a[1],10),c=parseInt(""+a[2],10)/100,u=parseInt(""+a[3],10)/100,d="rgb("+Pm(l,c,u)+")",f=u1.exec(d);if(!f)throw new ks(4,e,d);return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10)}}var h=F_e.exec(e.substring(0,50));if(h){var p=parseInt(""+h[1],10),g=parseInt(""+h[2],10)/100,y=parseInt(""+h[3],10)/100,v="rgb("+Pm(p,g,y)+")",m=u1.exec(v);if(!m)throw new ks(4,e,v);return{red:parseInt(""+m[1],10),green:parseInt(""+m[2],10),blue:parseInt(""+m[3],10),alpha:parseFloat(""+h[4])>1?parseFloat(""+h[4])/100:parseFloat(""+h[4])}}throw new ks(5)}function U_e(n){var e=n.red/255,r=n.green/255,i=n.blue/255,o=Math.max(e,r,i),s=Math.min(e,r,i),a=(o+s)/2;if(o===s)return n.alpha!==void 0?{hue:0,saturation:0,lightness:a,alpha:n.alpha}:{hue:0,saturation:0,lightness:a};var l,c=o-s,u=a>.5?c/(2-o-s):c/(o+s);switch(o){case e:l=(r-i)/c+(r<i?6:0);break;case r:l=(i-e)/c+2;break;default:l=(e-r)/c+4;break}return l*=60,n.alpha!==void 0?{hue:l,saturation:u,lightness:a,alpha:n.alpha}:{hue:l,saturation:u,lightness:a}}function dc(n){return U_e(gu(n))}var B_e=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},qE=B_e;function Rc(n){var e=n.toString(16);return e.length===1?"0"+e:e}function d1(n){return Rc(Math.round(n*255))}function $_e(n,e,r){return qE("#"+d1(n)+d1(e)+d1(r))}function Uy(n,e,r){return Pm(n,e,r,$_e)}function z_e(n,e,r){if(typeof n=="number"&&typeof e=="number"&&typeof r=="number")return Uy(n,e,r);if(typeof n=="object"&&e===void 0&&r===void 0)return Uy(n.hue,n.saturation,n.lightness);throw new ks(1)}function k_e(n,e,r,i){if(typeof n=="number"&&typeof e=="number"&&typeof r=="number"&&typeof i=="number")return i>=1?Uy(n,e,r):"rgba("+Pm(n,e,r)+","+i+")";if(typeof n=="object"&&e===void 0&&r===void 0&&i===void 0)return n.alpha>=1?Uy(n.hue,n.saturation,n.lightness):"rgba("+Pm(n.hue,n.saturation,n.lightness)+","+n.alpha+")";throw new ks(2)}function XE(n,e,r){if(typeof n=="number"&&typeof e=="number"&&typeof r=="number")return qE("#"+Rc(n)+Rc(e)+Rc(r));if(typeof n=="object"&&e===void 0&&r===void 0)return qE("#"+Rc(n.red)+Rc(n.green)+Rc(n.blue));throw new ks(6)}function mx(n,e,r,i){if(typeof n=="string"&&typeof e=="number"){var o=gu(n);return"rgba("+o.red+","+o.green+","+o.blue+","+e+")"}else{if(typeof n=="number"&&typeof e=="number"&&typeof r=="number"&&typeof i=="number")return i>=1?XE(n,e,r):"rgba("+n+","+e+","+r+","+i+")";if(typeof n=="object"&&e===void 0&&r===void 0&&i===void 0)return n.alpha>=1?XE(n.red,n.green,n.blue):"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")"}throw new ks(7)}var V_e=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},G_e=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},H_e=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},j_e=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function fc(n){if(typeof n!="object")throw new ks(8);if(G_e(n))return mx(n);if(V_e(n))return XE(n);if(j_e(n))return k_e(n);if(H_e(n))return z_e(n);throw new ks(8)}function k4(n,e,r){return function(){var o=r.concat(Array.prototype.slice.call(arguments));return o.length>=e?n.apply(this,o):k4(n,e,o)}}function Eo(n){return k4(n,n.length,[])}function W_e(n,e){if(e==="transparent")return e;var r=dc(e);return fc(pt({},r,{hue:r.hue+parseFloat(n)}))}Eo(W_e);function rh(n,e,r){return Math.max(n,Math.min(e,r))}function q_e(n,e){if(e==="transparent")return e;var r=dc(e);return fc(pt({},r,{lightness:rh(0,1,r.lightness-parseFloat(n))}))}Eo(q_e);function X_e(n,e){if(e==="transparent")return e;var r=dc(e);return fc(pt({},r,{saturation:rh(0,1,r.saturation-parseFloat(n))}))}Eo(X_e);function K_e(n,e){if(e==="transparent")return e;var r=dc(e);return fc(pt({},r,{lightness:rh(0,1,r.lightness+parseFloat(n))}))}Eo(K_e);function Y_e(n,e,r){if(e==="transparent")return r;if(r==="transparent")return e;if(n===0)return r;var i=gu(e),o=pt({},i,{alpha:typeof i.alpha=="number"?i.alpha:1}),s=gu(r),a=pt({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),l=o.alpha-a.alpha,c=parseFloat(n)*2-1,u=c*l===-1?c:c+l,d=1+c*l,f=(u/d+1)/2,h=1-f,p={red:Math.floor(o.red*f+a.red*h),green:Math.floor(o.green*f+a.green*h),blue:Math.floor(o.blue*f+a.blue*h),alpha:o.alpha*parseFloat(n)+a.alpha*(1-parseFloat(n))};return mx(p)}var Q_e=Eo(Y_e),V4=Q_e;function Z_e(n,e){if(e==="transparent")return e;var r=gu(e),i=typeof r.alpha=="number"?r.alpha:1,o=pt({},r,{alpha:rh(0,1,(i*100+parseFloat(n)*100)/100)});return mx(o)}var J_e=Eo(Z_e),exe=J_e;function txe(n,e){if(e==="transparent")return e;var r=dc(e);return fc(pt({},r,{saturation:rh(0,1,r.saturation+parseFloat(n))}))}Eo(txe);function nxe(n,e){return e==="transparent"?e:fc(pt({},dc(e),{hue:parseFloat(n)}))}Eo(nxe);function rxe(n,e){return e==="transparent"?e:fc(pt({},dc(e),{lightness:parseFloat(n)}))}Eo(rxe);function ixe(n,e){return e==="transparent"?e:fc(pt({},dc(e),{saturation:parseFloat(n)}))}Eo(ixe);function oxe(n,e){return e==="transparent"?e:V4(parseFloat(n),"rgb(0, 0, 0)",e)}Eo(oxe);function sxe(n,e){return e==="transparent"?e:V4(parseFloat(n),"rgb(255, 255, 255)",e)}Eo(sxe);function axe(n,e){if(e==="transparent")return e;var r=gu(e),i=typeof r.alpha=="number"?r.alpha:1,o=pt({},r,{alpha:rh(0,1,+(i*100-parseFloat(n)*100).toFixed(2)/100)});return mx(o)}Eo(axe);var La=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-La.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?La.Bounce.In(n*2)*.5:La.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),rp=function(){return performance.now()},hR=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var o=0,s=r;o<s.length;o++){var a=s[o];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,o=e;i<o.length;i++){var s=o[i];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=rp()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var s=this._tweens[i[o]],a=!r;s&&s.update(e,a)===!1&&!r&&this.remove(s)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),KE={Linear:function(n,e){var r=n.length-1,i=r*e,o=Math.floor(i),s=KE.Utils.Linear;return e<0?s(n[0],n[1],i):e>1?s(n[r],n[r-1],r-i):s(n[o],n[o+1>r?r:o+1],i-o)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},G4=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),YE=new hR,By=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=La.Linear.None,this._interpolationFunction=KE.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=G4.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=YE,YE.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=rp()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var s in this._valuesEnd)o[s]=this._valuesEnd[s];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,o,s){for(var a in i){var l=e[a],c=Array.isArray(l),u=c?"array":typeof l,d=!c&&Array.isArray(i[a]);if(!(u==="undefined"||u==="function")){if(d){var f=i[a];if(f.length===0)continue;for(var h=[l],p=0,g=f.length;p<g;p+=1){var y=this._handleRelativeValue(l,f[p]);if(isNaN(y)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(y)}d&&(i[a]=h)}if((u==="object"||c)&&l&&!d){r[a]=c?[]:{};var v=l;for(var m in v)r[a][m]=v[m];o[a]=c?[]:{};var f=i[a];if(!this._isDynamic){var _={};for(var m in f)_[m]=f[m];i[a]=f=_}this._setupProperties(v,r[a],f,o[a],s)}else(typeof r[a]>"u"||s)&&(r[a]=l),c||(r[a]*=1),d?o[a]=i[a].slice().reverse():o[a]=r[a]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=rp()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=rp()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=La.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=KE.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,o;if(e===void 0&&(e=rp()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((o=this._repeatDelayTime)!==null&&o!==void 0?o:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(i._duration===0||a>c)return 1;var y=Math.trunc(a/l),v=a-y*l,m=Math.min(v/i._duration,1);return m===0&&a===i._duration?1:m},d=u(),f=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||a>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=h);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,g=this._chainedTweens.length;p<g;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,o){for(var s in i)if(r[s]!==void 0){var a=r[s]||0,l=i[s],c=Array.isArray(e[s]),u=Array.isArray(l),d=!c&&u;d?e[s]=this._interpolationFunction(l,o):typeof l=="object"&&l?this._updateProperties(e[s],a,l,o):(l=this._handleRelativeValue(a,l),typeof l=="number"&&(e[s]=a+(l-a)*o))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();G4.nextId;var Zs=YE;Zs.getAll.bind(Zs);Zs.removeAll.bind(Zs);Zs.add.bind(Zs);Zs.remove.bind(Zs);Zs.update.bind(Zs);function lxe(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var cxe=`.scene-nav-info {
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
}

.scene-tooltip {
  top: 0;
  color: lavender;
  font-size: 15px;
}

.scene-nav-info, .scene-tooltip {
  position: absolute;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;lxe(cxe);function QE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function uxe(n){if(Array.isArray(n))return n}function dxe(n){if(Array.isArray(n))return QE(n)}function fxe(n,e,r){return(e=_xe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function hxe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function pxe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function mxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vxe(n,e){return uxe(n)||pxe(n,e)||H4(n,e)||mxe()}function Bh(n){return dxe(n)||hxe(n)||H4(n)||gxe()}function yxe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _xe(n){var e=yxe(n,"string");return typeof e=="symbol"?e:e+""}function H4(n,e){if(n){if(typeof n=="string")return QE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?QE(n,e):void 0}}var Qn=window.THREE?window.THREE:{WebGLRenderer:Pse,Scene:fM,PerspectiveCamera:Si,Raycaster:j$,SRGBColorSpace:Dt,TextureLoader:Bte,Vector2:je,Vector3:K,Box3:wu,Color:Tt,Mesh:Br,SphereGeometry:Zf,MeshBasicMaterial:Qf,BackSide:er,Clock:H$},j4=tg({props:{width:{default:window.innerWidth,onChange:function(e,r,i){isNaN(e)&&(r.width=i)}},height:{default:window.innerHeight,onChange:function(e,r,i){isNaN(e)&&(r.height=i)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null,r.toolTipElem&&(r.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(s){return s.render(e.scene,e.camera)}),e.enablePointerInteraction){var r=null;if(e.hoverDuringDrag||!e.isPointerDragging){var i=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter(function(s){return e.hoverFilter(s.object)}).sort(function(s,a){return e.hoverOrderComparator(s.object,a.object)}),o=i.length?i[0]:null;r=o?o.object:null,e.intersectionPoint=o?o.point:null}r!==e.hoverObj&&(e.onHover(r,e.hoverObj),e.toolTipElem.innerHTML=r&&At(e.tooltipContent)(r)||"",e.hoverObj=r)}e.tweenGroup.update()}return this},getPointerPos:function(e){var r=e.pointerPos,i=r.x,o=r.y;return{x:i,y:o}},cameraPosition:function(e,r,i,o){var s=e.camera;if(r&&e.initialised){var a=r,l=i||{x:0,y:0,z:0};if(!o)d(a),f(l);else{var c=Object.assign({},s.position),u=h();e.tweenGroup.add(new By(c).to(a,o).easing(La.Quadratic.Out).onUpdate(d).start()),e.tweenGroup.add(new By(u).to(l,o/3).easing(La.Quadratic.Out).onUpdate(f).start())}return this}return Object.assign({},s.position,{lookAt:h()});function d(p){var g=p.x,y=p.y,v=p.z;g!==void 0&&(s.position.x=g),y!==void 0&&(s.position.y=y),v!==void 0&&(s.position.z=v)}function f(p){var g=new Qn.Vector3(p.x,p.y,p.z);e.controls.target?e.controls.target=g:s.lookAt(g)}function h(){return Object.assign(new Qn.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return this.fitToBbox(this.getBbox.apply(this,s),r,i)},fitToBbox:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(r){var a=new Qn.Vector3(0,0,0),l=Math.max.apply(Math,Bh(Object.entries(r).map(function(p){var g=vxe(p,2),y=g[0],v=g[1];return Math.max.apply(Math,Bh(v.map(function(m){return Math.abs(a[y]-m)})))})))*2,c=(1-o*2/e.height)*s.fov,u=l/Math.atan(c*Math.PI/180),d=u/s.aspect,f=Math.max(u,d);if(f>0){var h=a.clone().sub(s.position).normalize().multiplyScalar(-f);this.cameraPosition(h,a,i)}}return this},getBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=new Qn.Box3(new Qn.Vector3(0,0,0),new Qn.Vector3(0,0,0)),o=e.objects.filter(r);return o.length?(o.forEach(function(s){return i.expandByObject(s)}),Object.assign.apply(Object,Bh(["x","y","z"].map(function(s){return fxe({},s,[i.min[s],i.max[s]])})))):null},getScreenCoords:function(e,r,i,o){var s=new Qn.Vector3(r,i,o);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,r,i){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new Qn.Vector2(r/e.width*2-1,-(i/e.height)*2+1),a=new Qn.Raycaster;return a.setFromCamera(s,e.camera),Object.assign({},a.ray.at(o,new Qn.Vector3))},intersectingObjects:function(e,r,i){var o=new Qn.Vector2(r/e.width*2-1,-(i/e.height)*2+1),s=new Qn.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.setFromCamera(o,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new Qn.Scene,camera:new Qn.PerspectiveCamera,clock:new Qn.Clock,tweenGroup:new hR}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.controlType,s=o===void 0?"trackball":o,a=i.useWebGPU,l=a===void 0?!1:a,c=i.rendererConfig,u=c===void 0?{}:c,d=i.extraRenderers,f=d===void 0?[]:d,h=i.waitForLoadComplete,p=h===void 0?!0:h;e.innerHTML="",e.appendChild(r.container=document.createElement("div")),r.container.className="scene-container",r.container.style.position="relative",r.container.appendChild(r.navInfo=document.createElement("div")),r.navInfo.className="scene-nav-info",r.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",r.navInfo.style.display=r.showNavInfo?null:"none",r.toolTipElem=document.createElement("div"),r.toolTipElem.classList.add("scene-tooltip"),r.container.appendChild(r.toolTipElem),r.pointerPos=new Qn.Vector2,r.pointerPos.x=-2,r.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(g){return r.container.addEventListener(g,function(y){if(g==="pointerdown"&&(r.isPointerPressed=!0),!r.isPointerDragging&&y.type==="pointermove"&&(y.pressure>0||r.isPointerPressed)&&(y.pointerType!=="touch"||y.movementX===void 0||[y.movementX,y.movementY].some(function(_){return Math.abs(_)>1}))&&(r.isPointerDragging=!0),r.enablePointerInteraction){var v=m(r.container);r.pointerPos.x=y.pageX-v.left,r.pointerPos.y=y.pageY-v.top,r.toolTipElem.style.top="".concat(r.pointerPos.y,"px"),r.toolTipElem.style.left="".concat(r.pointerPos.x,"px"),r.toolTipElem.style.transform="translate(-".concat(r.pointerPos.x/r.width*100,"%, ").concat(r.height-r.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function m(_){var x=_.getBoundingClientRect(),S=window.pageXOffset||document.documentElement.scrollLeft,w=window.pageYOffset||document.documentElement.scrollTop;return{top:x.top+w,left:x.left+S}}},{passive:!0})}),r.container.addEventListener("pointerup",function(g){r.isPointerPressed=!1,!(r.isPointerDragging&&(r.isPointerDragging=!1,!r.clickAfterDrag))&&requestAnimationFrame(function(){g.button===0&&r.onClick(r.hoverObj||null,g,r.intersectionPoint),g.button===2&&r.onRightClick&&r.onRightClick(r.hoverObj||null,g,r.intersectionPoint)})},{passive:!0,capture:!0}),r.container.addEventListener("contextmenu",function(g){r.onRightClick&&g.preventDefault()}),r.renderer=new(l?Dye:Qn.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},u)),r.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),r.container.appendChild(r.renderer.domElement),r.extraRenderers=f,r.extraRenderers.forEach(function(g){g.domElement.style.position="absolute",g.domElement.style.top="0px",g.domElement.style.pointerEvents="none",r.container.appendChild(g.domElement)}),r.postProcessingComposer=new C_e(r.renderer),r.postProcessingComposer.addPass(new T_e(r.scene,r.camera)),r.controls=new{trackball:Fye,orbit:Zye,fly:f_e}[s](r.camera,r.renderer.domElement),s==="fly"&&(r.controls.movementSpeed=300,r.controls.rollSpeed=Math.PI/6,r.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(r.controls.minDistance=.1,r.controls.maxDistance=r.skyRadius,r.controls.addEventListener("start",function(){r.controlsEngaged=!0}),r.controls.addEventListener("change",function(){r.controlsEngaged&&(r.controlsDragging=!0)}),r.controls.addEventListener("end",function(){r.controlsEngaged=!1,r.controlsDragging=!1})),[r.renderer,r.postProcessingComposer].concat(Bh(r.extraRenderers)).forEach(function(g){return g.setSize(r.width,r.height)}),r.camera.aspect=r.width/r.height,r.camera.updateProjectionMatrix(),r.camera.position.z=1e3,r.scene.add(r.skysphere=new Qn.Mesh),r.skysphere.visible=!1,r.loadComplete=r.scene.visible=!p,window.scene=r.scene},update:function(e,r){if(e.width&&e.height&&(r.hasOwnProperty("width")||r.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(Bh(e.extraRenderers)).forEach(function(s){return s.setSize(e.width,e.height)}),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),r.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&r.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new Qn.SphereGeometry(e.skyRadius)),r.hasOwnProperty("backgroundColor")){var i=gu(e.backgroundColor).alpha;i===void 0&&(i=1),e.renderer.setClearColor(new Qn.Color(exe(1,e.backgroundColor)),i)}r.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new Qn.TextureLoader().load(e.backgroundImageUrl,function(s){s.colorSpace=Qn.SRGBColorSpace,e.skysphere.material=new Qn.MeshBasicMaterial({map:s,side:Qn.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&o()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&o())),r.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),r.hasOwnProperty("lights")&&((r.lights||[]).forEach(function(s){return e.scene.remove(s)}),e.lights.forEach(function(s){return e.scene.add(s)})),r.hasOwnProperty("objects")&&((r.objects||[]).forEach(function(s){return e.scene.remove(s)}),e.objects.forEach(function(s){return e.scene.add(s)}));function o(){e.loadComplete=e.scene.visible=!0}}});function xxe(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var bxe=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;xxe(bxe);function ZE(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function Sxe(n){if(Array.isArray(n))return ZE(n)}function cg(n,e,r){return(e=Txe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function wxe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Exe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gD(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function Bv(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(r),!0).forEach(function(i){cg(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):gD(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function gx(n){return Sxe(n)||wxe(n)||Mxe(n)||Exe()}function Cxe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Txe(n){var e=Cxe(n,"string");return typeof e=="symbol"?e:e+""}function Mxe(n,e){if(n){if(typeof n=="string")return ZE(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ZE(n,e):void 0}}function W4(n,e){var r=new e;return r._destructor&&r._destructor(),{linkProp:function(o){return{default:r[o](),onChange:function(a,l){l[n][o](a)},triggerUpdate:!1}},linkMethod:function(o){return function(s){for(var a=s[n],l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var d=a[o].apply(a,c);return d===a?this:d}}}}var f1=window.THREE?window.THREE:{AmbientLight:G$,DirectionalLight:V$,REVISION:Wf},Rxe=170,q4=W4("forceGraph",Zz),Axe=Object.assign.apply(Object,gx(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return cg({},n,q4.linkProp(n))}))),Nxe=Object.assign.apply(Object,gx(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return cg({},n,q4.linkMethod(n))}))),y0=W4("renderObjs",j4),Pxe=Object.assign.apply(Object,gx(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return cg({},n,y0.linkProp(n))}))),Oxe=Object.assign.apply(Object,gx(["lights","cameraPosition","postProcessingComposer"].map(function(n){return cg({},n,y0.linkMethod(n))})).concat([{graph2ScreenCoords:y0.linkMethod("getScreenCoords"),screen2GraphCoords:y0.linkMethod("getSceneCoords")}])),Ixe=tg({props:Bv(Bv({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,r){return r.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,r){var i=r.renderObjs.controls();i&&(i.enabled=e,e&&i.domElement&&i.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},Axe),Pxe),methods:Bv(Bv({zoomToFit:function(e,r,i){for(var o,s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return e.renderObjs.fitToBbox((o=e.forceGraph).getGraphBbox.apply(o,a),r,i),this},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},Nxe),Oxe),stateInit:function(e){var r=e.controlType,i=e.rendererConfig,o=e.extraRenderers,s=new Zz;return{forceGraph:s,renderObjs:j4({controlType:r,rendererConfig:i,extraRenderers:o}).objects([s]).lights([new f1.AmbientLight(13421772,Math.PI),new f1.DirectionalLight(16777215,.6*Math.PI)])}},init:function(e,r){e.innerHTML="",e.appendChild(r.container=document.createElement("div")),r.container.style.position="relative";var i=document.createElement("div");r.container.appendChild(i),r.renderObjs(i);var o=r.renderObjs.camera(),s=r.renderObjs.renderer(),a=r.renderObjs.controls();a.enabled=!!r.enableNavigationControls,r.lastSetCameraZ=o.position.z;var l;r.container.appendChild(l=document.createElement("div")),l.className="graph-info-msg",l.textContent="",r.forceGraph.onLoading(function(){l.textContent="Loading..."}).onFinishLoading(function(){l.textContent=""}).onUpdate(function(){r.graphData=r.forceGraph.graphData(),o.position.x===0&&o.position.y===0&&o.position.z===r.lastSetCameraZ&&r.graphData.nodes.length&&(o.lookAt(r.forceGraph.position),r.lastSetCameraZ=o.position.z=Math.cbrt(r.graphData.nodes.length)*Rxe)}).onFinishUpdate(function(){if(r._dragControls){var c=r.graphData.nodes.find(function(d){return d.__initialFixedPos&&!d.__disposeControlsAfterDrag});c?c.__disposeControlsAfterDrag=!0:r._dragControls.dispose(),r._dragControls=void 0}if(r.enableNodeDrag&&r.enablePointerInteraction&&r.forceEngine==="d3"){var u=r._dragControls=new Ose(r.graphData.nodes.map(function(d){return d.__threeObj}).filter(function(d){return d}),o,s.domElement);u.addEventListener("dragstart",function(d){a.enabled=!1,d.object.__initialPos=d.object.position.clone(),d.object.__prevPos=d.object.position.clone();var f=ua(d.object).__data;!f.__initialFixedPos&&(f.__initialFixedPos={fx:f.fx,fy:f.fy,fz:f.fz}),!f.__initialPos&&(f.__initialPos={x:f.x,y:f.y,z:f.z}),["x","y","z"].forEach(function(h){return f["f".concat(h)]=f[h]}),s.domElement.classList.add("grabbable")}),u.addEventListener("drag",function(d){var f=ua(d.object);if(!d.object.hasOwnProperty("__graphObjType")){var h=d.object.__initialPos,p=d.object.__prevPos,g=d.object.position;f.position.add(g.clone().sub(p)),p.copy(g),g.copy(h)}var y=f.__data,v=f.position,m={x:v.x-y.x,y:v.y-y.y,z:v.z-y.z};["x","y","z"].forEach(function(_){return y["f".concat(_)]=y[_]=v[_]}),r.forceGraph.d3AlphaTarget(.3).resetCountdown(),y.__dragged=!0,r.onNodeDrag(y,m)}),u.addEventListener("dragend",function(d){delete d.object.__initialPos,delete d.object.__prevPos;var f=ua(d.object).__data;f.__disposeControlsAfterDrag&&(u.dispose(),delete f.__disposeControlsAfterDrag);var h=f.__initialFixedPos,p=f.__initialPos,g={x:p.x-f.x,y:p.y-f.y,z:p.z-f.z};h&&(["x","y","z"].forEach(function(y){var v="f".concat(y);h[v]===void 0&&delete f[v]}),delete f.__initialFixedPos,delete f.__initialPos,f.__dragged&&(delete f.__dragged,r.onNodeDragEnd(f,g))),r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.enableNavigationControls&&(a.enabled=!0,a.domElement&&a.domElement.ownerDocument&&a.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),s.domElement.classList.remove("grabbable")})}}),f1.REVISION<155&&(r.renderObjs.renderer().useLegacyLights=!1),r.renderObjs.hoverOrderComparator(function(c,u){var d=ua(c);if(!d)return 1;var f=ua(u);if(!f)return-1;var h=function(g){return g.__graphObjType==="node"};return h(f)-h(d)}).tooltipContent(function(c){var u=ua(c);return u&&At(r["".concat(u.__graphObjType,"Label")])(u.__data)||""}).hoverDuringDrag(!1).onHover(function(c){var u=ua(c);if(u!==r.hoverObj){var d=r.hoverObj?r.hoverObj.__graphObjType:null,f=r.hoverObj?r.hoverObj.__data:null,h=u?u.__graphObjType:null,p=u?u.__data:null;if(d&&d!==h){var g=r["on".concat(d==="node"?"Node":"Link","Hover")];g&&g(null,f)}if(h){var y=r["on".concat(h==="node"?"Node":"Link","Hover")];y&&y(p,d===h?f:null)}s.domElement.classList[u&&r["on".concat(h==="node"?"Node":"Link","Click")]||!u&&r.onBackgroundClick?"add":"remove"]("clickable"),r.hoverObj=u}}).clickAfterDrag(!1).onClick(function(c,u){var d=ua(c);if(d){var f=r["on".concat(d.__graphObjType==="node"?"Node":"Link","Click")];f&&f(d.__data,u)}else r.onBackgroundClick&&r.onBackgroundClick(u)}).onRightClick(function(c,u){var d=ua(c);if(d){var f=r["on".concat(d.__graphObjType==="node"?"Node":"Link","RightClick")];f&&f(d.__data,u)}else r.onBackgroundRightClick&&r.onBackgroundRightClick(u)}),this._animationCycle()}});function ua(n){for(var e=n;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}var X4={exports:{}},Dxe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Lxe=Dxe,Fxe=Lxe;function K4(){}function Y4(){}Y4.resetWarningCache=K4;var Uxe=function(){function n(i,o,s,a,l,c){if(c!==Fxe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Y4,resetWarningCache:K4};return r.PropTypes=r,r};X4.exports=Uxe();var Bxe=X4.exports;const G=vu(Bxe),vx={width:G.number,height:G.number,graphData:G.shape({nodes:G.arrayOf(G.object).isRequired,links:G.arrayOf(G.object).isRequired}),backgroundColor:G.string,nodeRelSize:G.number,nodeId:G.string,nodeLabel:G.oneOfType([G.string,G.func]),nodeVal:G.oneOfType([G.number,G.string,G.func]),nodeVisibility:G.oneOfType([G.bool,G.string,G.func]),nodeColor:G.oneOfType([G.string,G.func]),nodeAutoColorBy:G.oneOfType([G.string,G.func]),onNodeHover:G.func,onNodeClick:G.func,linkSource:G.string,linkTarget:G.string,linkLabel:G.oneOfType([G.string,G.func]),linkVisibility:G.oneOfType([G.bool,G.string,G.func]),linkColor:G.oneOfType([G.string,G.func]),linkAutoColorBy:G.oneOfType([G.string,G.func]),linkWidth:G.oneOfType([G.number,G.string,G.func]),linkCurvature:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowLength:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowColor:G.oneOfType([G.string,G.func]),linkDirectionalArrowRelPos:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticles:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleSpeed:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleWidth:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleColor:G.oneOfType([G.string,G.func]),onLinkHover:G.func,onLinkClick:G.func,dagMode:G.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:G.number,dagNodeFilter:G.func,onDagError:G.func,d3AlphaMin:G.number,d3AlphaDecay:G.number,d3VelocityDecay:G.number,warmupTicks:G.number,cooldownTicks:G.number,cooldownTime:G.number,onEngineTick:G.func,onEngineStop:G.func,getGraphBbox:G.func},Q4={zoomToFit:G.func,onNodeRightClick:G.func,onNodeDrag:G.func,onNodeDragEnd:G.func,onLinkRightClick:G.func,linkHoverPrecision:G.number,onBackgroundClick:G.func,onBackgroundRightClick:G.func,enablePointerInteraction:G.bool,enableNodeDrag:G.bool},pR={showNavInfo:G.bool,nodeOpacity:G.number,nodeResolution:G.number,nodeThreeObject:G.oneOfType([G.object,G.string,G.func]),nodeThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkOpacity:G.number,linkResolution:G.number,linkCurveRotation:G.oneOfType([G.number,G.string,G.func]),linkMaterial:G.oneOfType([G.object,G.string,G.func]),linkThreeObject:G.oneOfType([G.object,G.string,G.func]),linkThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkPositionUpdate:G.func,linkDirectionalArrowResolution:G.number,linkDirectionalParticleResolution:G.number,forceEngine:G.oneOf(["d3","ngraph"]),ngraphPhysics:G.object,numDimensions:G.oneOf([1,2,3])};Object.assign({},vx,Q4,{linkLineDash:G.oneOfType([G.arrayOf(G.number),G.string,G.func]),nodeCanvasObjectMode:G.oneOfType([G.string,G.func]),nodeCanvasObject:G.func,nodePointerAreaPaint:G.func,linkCanvasObjectMode:G.oneOfType([G.string,G.func]),linkCanvasObject:G.func,linkPointerAreaPaint:G.func,autoPauseRedraw:G.bool,minZoom:G.number,maxZoom:G.number,enableZoomInteraction:G.oneOfType([G.bool,G.func]),enablePanInteraction:G.oneOfType([G.bool,G.func]),onZoom:G.func,onZoomEnd:G.func,onRenderFramePre:G.func,onRenderFramePost:G.func});const $xe=Object.assign({},vx,Q4,pR,{enableNavigationControls:G.bool,controlType:G.oneOf(["trackball","orbit","fly"]),rendererConfig:G.object,extraRenderers:G.arrayOf(G.shape({render:G.func.isRequired}))});Object.assign({},vx,pR,{nodeDesc:G.oneOfType([G.string,G.func]),linkDesc:G.oneOfType([G.string,G.func])});Object.assign({},vx,pR,{markerAttrs:G.object,yOffset:G.number,glScale:G.number});const mR=p$(Ixe,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","lights","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});mR.displayName="ForceGraph3D";mR.propTypes=$xe;function h1(n){return function(){return n}}function vD(n){return(n()-.5)*1e-6}function zxe(n){return n.index}function yD(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function kxe(n){var e=zxe,r=f,i,o=h1(30),s,a,l,c,u,d=1;n==null&&(n=[]);function f(v){return 1/Math.min(l[v.source.index],l[v.target.index])}function h(v){for(var m=0,_=n.length;m<d;++m)for(var x=0,S,w,E,C,T,M,R;x<_;++x)S=n[x],w=S.source,E=S.target,C=E.x+E.vx-w.x-w.vx||vD(u),T=E.y+E.vy-w.y-w.vy||vD(u),M=Math.sqrt(C*C+T*T),M=(M-s[x])/M*v*i[x],C*=M,T*=M,E.vx-=C*(R=c[x]),E.vy-=T*R,w.vx+=C*(R=1-R),w.vy+=T*R}function p(){if(a){var v,m=a.length,_=n.length,x=new Map(a.map((w,E)=>[e(w,E,a),w])),S;for(v=0,l=new Array(m);v<_;++v)S=n[v],S.index=v,typeof S.source!="object"&&(S.source=yD(x,S.source)),typeof S.target!="object"&&(S.target=yD(x,S.target)),l[S.source.index]=(l[S.source.index]||0)+1,l[S.target.index]=(l[S.target.index]||0)+1;for(v=0,c=new Array(_);v<_;++v)S=n[v],c[v]=l[S.source.index]/(l[S.source.index]+l[S.target.index]);i=new Array(_),g(),s=new Array(_),y()}}function g(){if(a)for(var v=0,m=n.length;v<m;++v)i[v]=+r(n[v],v,n)}function y(){if(a)for(var v=0,m=n.length;v<m;++v)s[v]=+o(n[v],v,n)}return h.initialize=function(v,m){a=v,u=m,p()},h.links=function(v){return arguments.length?(n=v,p(),h):n},h.id=function(v){return arguments.length?(e=v,h):e},h.iterations=function(v){return arguments.length?(d=+v,h):d},h.strength=function(v){return arguments.length?(r=typeof v=="function"?v:h1(+v),g(),h):r},h.distance=function(v){return arguments.length?(o=typeof v=="function"?v:h1(+v),y(),h):o},h}const Vxe=window.innerWidth<=600?600:window.innerWidth,Gxe=window.innerHeight<=600?600:window.innerHeight,Hxe=n=>(1-n)*Math.sqrt(Math.pow(Vxe/4,2)+Math.pow(Gxe/4,2))*.5,jxe="#29727e",Wxe=30,qxe="#cd3232",Z4=n=>{const e=b.useRef(),i={nodes:[{id:0,name:n.original_article.title,color:qxe,size:Wxe}],links:[]};return b.useEffect(()=>{e.current.d3Force("link",kxe().distance(s=>s.distance))},[]),{graphData:(()=>{const s=[],a=[];return n.similar_articles.forEach((l,c)=>{s.push({id:c+1,name:l.title,color:"#eed78c"}),a.push({source:c+1,target:0,distance:Hxe(l.similarity),color:jxe,name:`Similarity: ${Number(l.similarity).toFixed(2)}`})}),{nodes:[...i.nodes,...s],links:[...i.links,...a]}})(),forceGraphRef:e}},Xxe={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Tt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class Of extends lg{constructor(e,r,i,o){super(),this.strength=r!==void 0?r:1,this.radius=i,this.threshold=o,this.resolution=e!==void 0?new je(e.x,e.y):new je(256,256),this.clearColor=new Tt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new xs(s,a,{type:Yr}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let f=0;f<this.nMips;f++){const h=new xs(s,a,{type:Yr});h.texture.name="UnrealBloomPass.h"+f,h.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(h);const p=new xs(s,a,{type:Yr});p.texture.name="UnrealBloomPass.v"+f,p.texture.generateMipmaps=!1,this.renderTargetsVertical.push(p),s=Math.round(s/2),a=Math.round(a/2)}const l=Xxe;this.highPassUniforms=fy.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Vi({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];s=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let f=0;f<this.nMips;f++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[f])),this.separableBlurMaterials[f].uniforms.invSize.value=new je(1/s,1/a),s=Math.round(s/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1;const u=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=u,this.bloomTintColors=[new K(1,1,1),new K(1,1,1),new K(1,1,1),new K(1,1,1),new K(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const d=$4;this.copyUniforms=fy.clone(d.uniforms),this.blendMaterial=new Vi({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:au,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Tt,this.oldClearAlpha=1,this.basic=new Qf,this.fsQuad=new z4(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,r){let i=Math.round(e/2),o=Math.round(r/2);this.renderTargetBright.setSize(i,o);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(i,o),this.renderTargetsVertical[s].setSize(i,o),this.separableBlurMaterials[s].uniforms.invSize.value=new je(1/i,1/o),i=Math.round(i/2),o=Math.round(o/2)}render(e,r,i,o,s){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const a=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),s&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let l=this.renderTargetBright;for(let c=0;c<this.nMips;c++)this.fsQuad.material=this.separableBlurMaterials[c],this.separableBlurMaterials[c].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[c].uniforms.direction.value=Of.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[c]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[c].uniforms.colorTexture.value=this.renderTargetsHorizontal[c].texture,this.separableBlurMaterials[c].uniforms.direction.value=Of.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[c]),e.clear(),this.fsQuad.render(e),l=this.renderTargetsVertical[c];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=a}getSeperableBlurMaterial(e){const r=[];for(let i=0;i<e;i++)r.push(.39894*Math.exp(-.5*i*i/(e*e))/e);return new Vi({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new je(.5,.5)},direction:{value:new je(.5,.5)},gaussianCoefficients:{value:r}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new Vi({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}Of.BlurDirectionX=new je(1,0);Of.BlurDirectionY=new je(0,1);const Kxe=32,Yxe=6,_D=32,xD=2,bD=87,Qxe=({articles:n,selectedId:e,selectCallback:r})=>{const{graphData:i,forceGraphRef:o}=Z4(n),[s,a]=b.useState(0);b.useEffect(()=>{const u=()=>{const d=window.innerWidth*bD/100;a(d)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[bD]),b.useEffect(()=>{const u=new Of(new je(window.innerWidth,window.innerHeight),.25,.1,.1);o.current.postProcessingComposer().addPass(u)},[]);const l=b.useCallback(u=>{r(u.id)},[o]),c=u=>new Br(new Zf(u.size?u.size:10),new yM({color:u.id==e?"#1677ff":u.color,transparent:!1,opacity:1}));return Ut.jsx(mR,{graphData:i,ref:o,width:s,backgroundColor:"#000001",onNodeClick:l,nodeThreeObject:c,nodeResolution:Kxe,nodeOpacity:1,nodeRelSize:Yxe,linkResolution:_D,linkWidth:xD,linkOpacity:.75,linkDirectionalParticles:1,linkDirectionalParticleWidth:xD,linkDirectionalParticleSpeed:.005,linkDirectionalParticleColor:()=>"#fff",linkDirectionalParticleResolution:_D/2})};var JE="http://www.w3.org/1999/xhtml";const SD={svg:"http://www.w3.org/2000/svg",xhtml:JE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yx(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),SD.hasOwnProperty(e)?{space:SD[e],local:n}:n}function Zxe(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===JE&&e.documentElement.namespaceURI===JE?e.createElement(n):e.createElementNS(r,n)}}function Jxe(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function J4(n){var e=yx(n);return(e.local?Jxe:Zxe)(e)}function ebe(){}function gR(n){return n==null?ebe:function(){return this.querySelector(n)}}function tbe(n){typeof n!="function"&&(n=gR(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=new Array(a),c,u,d=0;d<a;++d)(c=s[d])&&(u=n.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new bo(i,this._parents)}function nbe(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function rbe(){return[]}function e5(n){return n==null?rbe:function(){return this.querySelectorAll(n)}}function ibe(n){return function(){return nbe(n.apply(this,arguments))}}function obe(n){typeof n=="function"?n=ibe(n):n=e5(n);for(var e=this._groups,r=e.length,i=[],o=[],s=0;s<r;++s)for(var a=e[s],l=a.length,c,u=0;u<l;++u)(c=a[u])&&(i.push(n.call(c,c.__data__,u,a)),o.push(c));return new bo(i,o)}function t5(n){return function(){return this.matches(n)}}function n5(n){return function(e){return e.matches(n)}}var sbe=Array.prototype.find;function abe(n){return function(){return sbe.call(this.children,n)}}function lbe(){return this.firstElementChild}function cbe(n){return this.select(n==null?lbe:abe(typeof n=="function"?n:n5(n)))}var ube=Array.prototype.filter;function dbe(){return Array.from(this.children)}function fbe(n){return function(){return ube.call(this.children,n)}}function hbe(n){return this.selectAll(n==null?dbe:fbe(typeof n=="function"?n:n5(n)))}function pbe(n){typeof n!="function"&&(n=t5(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=[],c,u=0;u<a;++u)(c=s[u])&&n.call(c,c.__data__,u,s)&&l.push(c);return new bo(i,this._parents)}function r5(n){return new Array(n.length)}function mbe(){return new bo(this._enter||this._groups.map(r5),this._parents)}function $y(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}$y.prototype={constructor:$y,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function gbe(n){return function(){return n}}function vbe(n,e,r,i,o,s){for(var a=0,l,c=e.length,u=s.length;a<u;++a)(l=e[a])?(l.__data__=s[a],i[a]=l):r[a]=new $y(n,s[a]);for(;a<c;++a)(l=e[a])&&(o[a]=l)}function ybe(n,e,r,i,o,s,a){var l,c,u=new Map,d=e.length,f=s.length,h=new Array(d),p;for(l=0;l<d;++l)(c=e[l])&&(h[l]=p=a.call(c,c.__data__,l,e)+"",u.has(p)?o[l]=c:u.set(p,c));for(l=0;l<f;++l)p=a.call(n,s[l],l,s)+"",(c=u.get(p))?(i[l]=c,c.__data__=s[l],u.delete(p)):r[l]=new $y(n,s[l]);for(l=0;l<d;++l)(c=e[l])&&u.get(h[l])===c&&(o[l]=c)}function _be(n){return n.__data__}function xbe(n,e){if(!arguments.length)return Array.from(this,_be);var r=e?ybe:vbe,i=this._parents,o=this._groups;typeof n!="function"&&(n=gbe(n));for(var s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=i[u],f=o[u],h=f.length,p=bbe(n.call(d,d&&d.__data__,u,i)),g=p.length,y=l[u]=new Array(g),v=a[u]=new Array(g),m=c[u]=new Array(h);r(d,f,y,v,m,p,e);for(var _=0,x=0,S,w;_<g;++_)if(S=y[_]){for(_>=x&&(x=_+1);!(w=v[x])&&++x<g;);S._next=w||null}}return a=new bo(a,i),a._enter=l,a._exit=c,a}function bbe(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Sbe(){return new bo(this._exit||this._groups.map(r5),this._parents)}function wbe(n,e,r){var i=this.enter(),o=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(o=e(o),o&&(o=o.selection())),r==null?s.remove():r(s),i&&o?i.merge(o).order():o}function Ebe(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,o=r.length,s=i.length,a=Math.min(o,s),l=new Array(o),c=0;c<a;++c)for(var u=r[c],d=i[c],f=u.length,h=l[c]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;c<o;++c)l[c]=r[c];return new bo(l,this._parents)}function Cbe(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],o=i.length-1,s=i[o],a;--o>=0;)(a=i[o])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Tbe(n){n||(n=Mbe);function e(f,h){return f&&h?n(f.__data__,h.__data__):!f-!h}for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s){for(var a=r[s],l=a.length,c=o[s]=new Array(l),u,d=0;d<l;++d)(u=a[d])&&(c[d]=u);c.sort(e)}return new bo(o,this._parents).order()}function Mbe(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Rbe(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Abe(){return Array.from(this)}function Nbe(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length;o<s;++o){var a=i[o];if(a)return a}return null}function Pbe(){let n=0;for(const e of this)++n;return n}function Obe(){return!this.node()}function Ibe(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var o=e[r],s=0,a=o.length,l;s<a;++s)(l=o[s])&&n.call(l,l.__data__,s,o);return this}function Dbe(n){return function(){this.removeAttribute(n)}}function Lbe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Fbe(n,e){return function(){this.setAttribute(n,e)}}function Ube(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function Bbe(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function $be(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function zbe(n,e){var r=yx(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?Lbe:Dbe:typeof e=="function"?r.local?$be:Bbe:r.local?Ube:Fbe)(r,e))}function i5(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function kbe(n){return function(){this.style.removeProperty(n)}}function Vbe(n,e,r){return function(){this.style.setProperty(n,e,r)}}function Gbe(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function Hbe(n,e,r){return arguments.length>1?this.each((e==null?kbe:typeof e=="function"?Gbe:Vbe)(n,e,r??"")):If(this.node(),n)}function If(n,e){return n.style.getPropertyValue(e)||i5(n).getComputedStyle(n,null).getPropertyValue(e)}function jbe(n){return function(){delete this[n]}}function Wbe(n,e){return function(){this[n]=e}}function qbe(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function Xbe(n,e){return arguments.length>1?this.each((e==null?jbe:typeof e=="function"?qbe:Wbe)(n,e)):this.node()[n]}function o5(n){return n.trim().split(/^|\s+/)}function vR(n){return n.classList||new s5(n)}function s5(n){this._node=n,this._names=o5(n.getAttribute("class")||"")}s5.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function a5(n,e){for(var r=vR(n),i=-1,o=e.length;++i<o;)r.add(e[i])}function l5(n,e){for(var r=vR(n),i=-1,o=e.length;++i<o;)r.remove(e[i])}function Kbe(n){return function(){a5(this,n)}}function Ybe(n){return function(){l5(this,n)}}function Qbe(n,e){return function(){(e.apply(this,arguments)?a5:l5)(this,n)}}function Zbe(n,e){var r=o5(n+"");if(arguments.length<2){for(var i=vR(this.node()),o=-1,s=r.length;++o<s;)if(!i.contains(r[o]))return!1;return!0}return this.each((typeof e=="function"?Qbe:e?Kbe:Ybe)(r,e))}function Jbe(){this.textContent=""}function eSe(n){return function(){this.textContent=n}}function tSe(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function nSe(n){return arguments.length?this.each(n==null?Jbe:(typeof n=="function"?tSe:eSe)(n)):this.node().textContent}function rSe(){this.innerHTML=""}function iSe(n){return function(){this.innerHTML=n}}function oSe(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function sSe(n){return arguments.length?this.each(n==null?rSe:(typeof n=="function"?oSe:iSe)(n)):this.node().innerHTML}function aSe(){this.nextSibling&&this.parentNode.appendChild(this)}function lSe(){return this.each(aSe)}function cSe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uSe(){return this.each(cSe)}function dSe(n){var e=typeof n=="function"?n:J4(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function fSe(){return null}function hSe(n,e){var r=typeof n=="function"?n:J4(n),i=e==null?fSe:typeof e=="function"?e:gR(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function pSe(){var n=this.parentNode;n&&n.removeChild(this)}function mSe(){return this.each(pSe)}function gSe(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function vSe(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function ySe(n){return this.select(n?vSe:gSe)}function _Se(n){return arguments.length?this.property("__data__",n):this.node().__data__}function xSe(n){return function(e){n.call(this,e,this.__data__)}}function bSe(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function SSe(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,o=e.length,s;r<o;++r)s=e[r],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function wSe(n,e,r){return function(){var i=this.__on,o,s=xSe(e);if(i){for(var a=0,l=i.length;a<l;++a)if((o=i[a]).type===n.type&&o.name===n.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=r),o.value=e;return}}this.addEventListener(n.type,s,r),o={type:n.type,name:n.name,value:e,listener:s,options:r},i?i.push(o):this.__on=[o]}}function ESe(n,e,r){var i=bSe(n+""),o,s=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(o=0,d=l[c];o<s;++o)if((a=i[o]).type===d.type&&a.name===d.name)return d.value}return}for(l=e?wSe:SSe,o=0;o<s;++o)this.each(l(i[o],e,r));return this}function c5(n,e,r){var i=i5(n),o=i.CustomEvent;typeof o=="function"?o=new o(e,r):(o=i.document.createEvent("Event"),r?(o.initEvent(e,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(e,!1,!1)),n.dispatchEvent(o)}function CSe(n,e){return function(){return c5(this,n,e)}}function TSe(n,e){return function(){return c5(this,n,e.apply(this,arguments))}}function MSe(n,e){return this.each((typeof e=="function"?TSe:CSe)(n,e))}function*RSe(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length,a;o<s;++o)(a=i[o])&&(yield a)}var u5=[null];function bo(n,e){this._groups=n,this._parents=e}function ug(){return new bo([[document.documentElement]],u5)}function ASe(){return this}bo.prototype=ug.prototype={constructor:bo,select:tbe,selectAll:obe,selectChild:cbe,selectChildren:hbe,filter:pbe,data:xbe,enter:mbe,exit:Sbe,join:wbe,merge:Ebe,selection:ASe,order:Cbe,sort:Tbe,call:Rbe,nodes:Abe,node:Nbe,size:Pbe,empty:Obe,each:Ibe,attr:zbe,style:Hbe,property:Xbe,classed:Zbe,text:nSe,html:sSe,raise:lSe,lower:uSe,append:dSe,insert:hSe,remove:mSe,clone:ySe,datum:_Se,on:ESe,dispatch:MSe,[Symbol.iterator]:RSe};function hs(n){return typeof n=="string"?new bo([[document.querySelector(n)]],[document.documentElement]):new bo([[n]],u5)}function NSe(n){let e;for(;e=n.sourceEvent;)n=e;return n}function ma(n,e){if(n=NSe(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[n.clientX-o.left-e.clientLeft,n.clientY-o.top-e.clientTop]}}return[n.pageX,n.pageY]}const PSe={passive:!1},Om={capture:!0,passive:!1};function p1(n){n.stopImmediatePropagation()}function Gd(n){n.preventDefault(),n.stopImmediatePropagation()}function d5(n){var e=n.document.documentElement,r=hs(n).on("dragstart.drag",Gd,Om);"onselectstart"in e?r.on("selectstart.drag",Gd,Om):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function f5(n,e){var r=n.document.documentElement,i=hs(n).on("dragstart.drag",null);e&&(i.on("click.drag",Gd,Om),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const $v=n=>()=>n;function eC(n,{sourceEvent:e,subject:r,target:i,identifier:o,active:s,x:a,y:l,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}eC.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function OSe(n){return!n.ctrlKey&&!n.button}function ISe(){return this.parentNode}function DSe(n,e){return e??{x:n.x,y:n.y}}function LSe(){return navigator.maxTouchPoints||"ontouchstart"in this}function FSe(){var n=OSe,e=ISe,r=DSe,i=LSe,o={},s=Jm("start","drag","end"),a=0,l,c,u,d,f=0;function h(S){S.on("mousedown.drag",p).filter(i).on("touchstart.drag",v).on("touchmove.drag",m,PSe).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,w){if(!(d||!n.call(this,S,w))){var E=x(this,e.call(this,S,w),S,w,"mouse");E&&(hs(S.view).on("mousemove.drag",g,Om).on("mouseup.drag",y,Om),d5(S.view),p1(S),u=!1,l=S.clientX,c=S.clientY,E("start",S))}}function g(S){if(Gd(S),!u){var w=S.clientX-l,E=S.clientY-c;u=w*w+E*E>f}o.mouse("drag",S)}function y(S){hs(S.view).on("mousemove.drag mouseup.drag",null),f5(S.view,u),Gd(S),o.mouse("end",S)}function v(S,w){if(n.call(this,S,w)){var E=S.changedTouches,C=e.call(this,S,w),T=E.length,M,R;for(M=0;M<T;++M)(R=x(this,C,S,w,E[M].identifier,E[M]))&&(p1(S),R("start",S,E[M]))}}function m(S){var w=S.changedTouches,E=w.length,C,T;for(C=0;C<E;++C)(T=o[w[C].identifier])&&(Gd(S),T("drag",S,w[C]))}function _(S){var w=S.changedTouches,E=w.length,C,T;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<E;++C)(T=o[w[C].identifier])&&(p1(S),T("end",S,w[C]))}function x(S,w,E,C,T,M){var R=s.copy(),P=ma(M||E,w),D,F,A;if((A=r.call(S,new eC("beforestart",{sourceEvent:E,target:h,identifier:T,active:a,x:P[0],y:P[1],dx:0,dy:0,dispatch:R}),C))!=null)return D=A.x-P[0]||0,F=A.y-P[1]||0,function I(N,L,O){var V=P,B;switch(N){case"start":o[T]=I,B=a++;break;case"end":delete o[T],--a;case"drag":P=ma(O||L,w),B=a;break}R.call(N,S,new eC(N,{sourceEvent:L,subject:A,target:h,identifier:T,active:B,x:P[0]+D,y:P[1]+F,dx:P[0]-V[0],dy:P[1]-V[1],dispatch:R}),C)}}return h.filter=function(S){return arguments.length?(n=typeof S=="function"?S:$v(!!S),h):n},h.container=function(S){return arguments.length?(e=typeof S=="function"?S:$v(S),h):e},h.subject=function(S){return arguments.length?(r=typeof S=="function"?S:$v(S),h):r},h.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:$v(!!S),h):i},h.on=function(){var S=s.on.apply(s,arguments);return S===s?h:S},h.clickDistance=function(S){return arguments.length?(f=(S=+S)*S,h):Math.sqrt(f)},h}var USe=Jm("start","end","cancel","interrupt"),BSe=[],h5=0,wD=1,tC=2,_0=3,ED=4,nC=5,x0=6;function _x(n,e,r,i,o,s){var a=n.__transition;if(!a)n.__transition={};else if(r in a)return;$Se(n,r,{name:e,index:i,group:o,on:USe,tween:BSe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:h5})}function yR(n,e){var r=Ts(n,e);if(r.state>h5)throw new Error("too late; already scheduled");return r}function na(n,e){var r=Ts(n,e);if(r.state>_0)throw new Error("too late; already running");return r}function Ts(n,e){var r=n.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function $Se(n,e,r){var i=n.__transition,o;i[e]=r,r.timer=TM(s,0,r.time);function s(u){r.state=wD,r.timer.restart(a,r.delay,r.time),r.delay<=u&&a(u-r.delay)}function a(u){var d,f,h,p;if(r.state!==wD)return c();for(d in i)if(p=i[d],p.name===r.name){if(p.state===_0)return oO(a);p.state===ED?(p.state=x0,p.timer.stop(),p.on.call("interrupt",n,n.__data__,p.index,p.group),delete i[d]):+d<e&&(p.state=x0,p.timer.stop(),p.on.call("cancel",n,n.__data__,p.index,p.group),delete i[d])}if(oO(function(){r.state===_0&&(r.state=ED,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=tC,r.on.call("start",n,n.__data__,r.index,r.group),r.state===tC){for(r.state=_0,o=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(n,n.__data__,r.index,r.group))&&(o[++f]=p);o.length=f+1}}function l(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=nC,1),f=-1,h=o.length;++f<h;)o[f].call(n,d);r.state===nC&&(r.on.call("end",n,n.__data__,r.index,r.group),c())}function c(){r.state=x0,r.timer.stop(),delete i[e];for(var u in i)return;delete n.__transition}}function b0(n,e){var r=n.__transition,i,o,s=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((i=r[a]).name!==e){s=!1;continue}o=i.state>tC&&i.state<nC,i.state=x0,i.timer.stop(),i.on.call(o?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete r[a]}s&&delete n.__transition}}function zSe(n){return this.each(function(){b0(this,n)})}function kSe(n,e){var r,i;return function(){var o=na(this,n),s=o.tween;if(s!==r){i=r=s;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}o.tween=i}}function VSe(n,e,r){var i,o;if(typeof r!="function")throw new Error;return function(){var s=na(this,n),a=s.tween;if(a!==i){o=(i=a).slice();for(var l={name:e,value:r},c=0,u=o.length;c<u;++c)if(o[c].name===e){o[c]=l;break}c===u&&o.push(l)}s.tween=o}}function GSe(n,e){var r=this._id;if(n+="",arguments.length<2){for(var i=Ts(this.node(),r).tween,o=0,s=i.length,a;o<s;++o)if((a=i[o]).name===n)return a.value;return null}return this.each((e==null?kSe:VSe)(r,n,e))}function _R(n,e,r){var i=n._id;return n.each(function(){var o=na(this,i);(o.value||(o.value={}))[e]=r.apply(this,arguments)}),function(o){return Ts(o,i).value[e]}}function p5(n,e){var r;return(typeof e=="number"?bl:e instanceof bm?PO:(r=bm(e))?(e=r,PO):sue)(n,e)}function HSe(n){return function(){this.removeAttribute(n)}}function jSe(n){return function(){this.removeAttributeNS(n.space,n.local)}}function WSe(n,e,r){var i,o=r+"",s;return function(){var a=this.getAttribute(n);return a===o?null:a===i?s:s=e(i=a,r)}}function qSe(n,e,r){var i,o=r+"",s;return function(){var a=this.getAttributeNS(n.space,n.local);return a===o?null:a===i?s:s=e(i=a,r)}}function XSe(n,e,r){var i,o,s;return function(){var a,l=r(this),c;return l==null?void this.removeAttribute(n):(a=this.getAttribute(n),c=l+"",a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l)))}}function KSe(n,e,r){var i,o,s;return function(){var a,l=r(this),c;return l==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),c=l+"",a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l)))}}function YSe(n,e){var r=yx(n),i=r==="transform"?uue:p5;return this.attrTween(n,typeof e=="function"?(r.local?KSe:XSe)(r,i,_R(this,"attr."+n,e)):e==null?(r.local?jSe:HSe)(r):(r.local?qSe:WSe)(r,i,e))}function QSe(n,e){return function(r){this.setAttribute(n,e.call(this,r))}}function ZSe(n,e){return function(r){this.setAttributeNS(n.space,n.local,e.call(this,r))}}function JSe(n,e){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&ZSe(n,s)),r}return o._value=e,o}function e1e(n,e){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&QSe(n,s)),r}return o._value=e,o}function t1e(n,e){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=yx(n);return this.tween(r,(i.local?JSe:e1e)(i,e))}function n1e(n,e){return function(){yR(this,n).delay=+e.apply(this,arguments)}}function r1e(n,e){return e=+e,function(){yR(this,n).delay=e}}function i1e(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?n1e:r1e)(e,n)):Ts(this.node(),e).delay}function o1e(n,e){return function(){na(this,n).duration=+e.apply(this,arguments)}}function s1e(n,e){return e=+e,function(){na(this,n).duration=e}}function a1e(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?o1e:s1e)(e,n)):Ts(this.node(),e).duration}function l1e(n,e){if(typeof e!="function")throw new Error;return function(){na(this,n).ease=e}}function c1e(n){var e=this._id;return arguments.length?this.each(l1e(e,n)):Ts(this.node(),e).ease}function u1e(n,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;na(this,n).ease=r}}function d1e(n){if(typeof n!="function")throw new Error;return this.each(u1e(this._id,n))}function f1e(n){typeof n!="function"&&(n=t5(n));for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o)for(var s=e[o],a=s.length,l=i[o]=[],c,u=0;u<a;++u)(c=s[u])&&n.call(c,c.__data__,u,s)&&l.push(c);return new qa(i,this._parents,this._name,this._id)}function h1e(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,r=n._groups,i=e.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=e[l],u=r[l],d=c.length,f=a[l]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(f[p]=h);for(;l<i;++l)a[l]=e[l];return new qa(a,this._parents,this._name,this._id)}function p1e(n){return(n+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function m1e(n,e,r){var i,o,s=p1e(e)?yR:na;return function(){var a=s(this,n),l=a.on;l!==i&&(o=(i=l).copy()).on(e,r),a.on=o}}function g1e(n,e){var r=this._id;return arguments.length<2?Ts(this.node(),r).on.on(n):this.each(m1e(r,n,e))}function v1e(n){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==n)return;e&&e.removeChild(this)}}function y1e(){return this.on("end.remove",v1e(this._id))}function _1e(n){var e=this._name,r=this._id;typeof n!="function"&&(n=gR(n));for(var i=this._groups,o=i.length,s=new Array(o),a=0;a<o;++a)for(var l=i[a],c=l.length,u=s[a]=new Array(c),d,f,h=0;h<c;++h)(d=l[h])&&(f=n.call(d,d.__data__,h,l))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,_x(u[h],e,r,h,u,Ts(d,r)));return new qa(s,this._parents,e,r)}function x1e(n){var e=this._name,r=this._id;typeof n!="function"&&(n=e5(n));for(var i=this._groups,o=i.length,s=[],a=[],l=0;l<o;++l)for(var c=i[l],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=n.call(d,d.__data__,f,c),p,g=Ts(d,r),y=0,v=h.length;y<v;++y)(p=h[y])&&_x(p,e,r,y,h,g);s.push(h),a.push(d)}return new qa(s,a,e,r)}var b1e=ug.prototype.constructor;function S1e(){return new b1e(this._groups,this._parents)}function w1e(n,e){var r,i,o;return function(){var s=If(this,n),a=(this.style.removeProperty(n),If(this,n));return s===a?null:s===r&&a===i?o:o=e(r=s,i=a)}}function m5(n){return function(){this.style.removeProperty(n)}}function E1e(n,e,r){var i,o=r+"",s;return function(){var a=If(this,n);return a===o?null:a===i?s:s=e(i=a,r)}}function C1e(n,e,r){var i,o,s;return function(){var a=If(this,n),l=r(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(n),If(this,n))),a===c?null:a===i&&c===o?s:(o=c,s=e(i=a,l))}}function T1e(n,e){var r,i,o,s="style."+e,a="end."+s,l;return function(){var c=na(this,n),u=c.on,d=c.value[s]==null?l||(l=m5(e)):void 0;(u!==r||o!==d)&&(i=(r=u).copy()).on(a,o=d),c.on=i}}function M1e(n,e,r){var i=(n+="")=="transform"?cue:p5;return e==null?this.styleTween(n,w1e(n,i)).on("end.style."+n,m5(n)):typeof e=="function"?this.styleTween(n,C1e(n,i,_R(this,"style."+n,e))).each(T1e(this._id,n)):this.styleTween(n,E1e(n,i,e),r).on("end.style."+n,null)}function R1e(n,e,r){return function(i){this.style.setProperty(n,e.call(this,i),r)}}function A1e(n,e,r){var i,o;function s(){var a=e.apply(this,arguments);return a!==o&&(i=(o=a)&&R1e(n,a,r)),i}return s._value=e,s}function N1e(n,e,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,A1e(n,e,r??""))}function P1e(n){return function(){this.textContent=n}}function O1e(n){return function(){var e=n(this);this.textContent=e??""}}function I1e(n){return this.tween("text",typeof n=="function"?O1e(_R(this,"text",n)):P1e(n==null?"":n+""))}function D1e(n){return function(e){this.textContent=n.call(this,e)}}function L1e(n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&D1e(o)),e}return i._value=n,i}function F1e(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,L1e(n))}function U1e(){for(var n=this._name,e=this._id,r=g5(),i=this._groups,o=i.length,s=0;s<o;++s)for(var a=i[s],l=a.length,c,u=0;u<l;++u)if(c=a[u]){var d=Ts(c,e);_x(c,n,r,u,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new qa(i,this._parents,n,r)}function B1e(){var n,e,r=this,i=r._id,o=r.size();return new Promise(function(s,a){var l={value:a},c={value:function(){--o===0&&s()}};r.each(function(){var u=na(this,i),d=u.on;d!==n&&(e=(n=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),u.on=e}),o===0&&s()})}var $1e=0;function qa(n,e,r,i){this._groups=n,this._parents=e,this._name=r,this._id=i}function g5(){return++$1e}var da=ug.prototype;qa.prototype={constructor:qa,select:_1e,selectAll:x1e,selectChild:da.selectChild,selectChildren:da.selectChildren,filter:f1e,merge:h1e,selection:S1e,transition:U1e,call:da.call,nodes:da.nodes,node:da.node,size:da.size,empty:da.empty,each:da.each,on:g1e,attr:YSe,attrTween:t1e,style:M1e,styleTween:N1e,text:I1e,textTween:F1e,remove:y1e,tween:GSe,delay:i1e,duration:a1e,ease:c1e,easeVarying:d1e,end:B1e,[Symbol.iterator]:da[Symbol.iterator]};function z1e(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var k1e={time:null,delay:0,duration:250,ease:z1e};function V1e(n,e){for(var r;!(r=n.__transition)||!(r=r[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return r}function G1e(n){var e,r;n instanceof qa?(e=n._id,n=n._name):(e=g5(),(r=k1e).time=CM(),n=n==null?null:n+"");for(var i=this._groups,o=i.length,s=0;s<o;++s)for(var a=i[s],l=a.length,c,u=0;u<l;++u)(c=a[u])&&_x(c,n,e,u,a,r||V1e(c,e));return new qa(i,this._parents,n,e)}ug.prototype.interrupt=zSe;ug.prototype.transition=G1e;const zv=n=>()=>n;function H1e(n,{sourceEvent:e,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Ra(n,e,r){this.k=n,this.x=e,this.y=r}Ra.prototype={constructor:Ra,scale:function(n){return n===1?this:new Ra(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Ra(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var xR=new Ra(1,0,0);Is.prototype=Ra.prototype;function Is(n){for(;!n.__zoom;)if(!(n=n.parentNode))return xR;return n.__zoom}function m1(n){n.stopImmediatePropagation()}function $h(n){n.preventDefault(),n.stopImmediatePropagation()}function j1e(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function W1e(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function CD(){return this.__zoom||xR}function q1e(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function X1e(){return navigator.maxTouchPoints||"ontouchstart"in this}function K1e(n,e,r){var i=n.invertX(e[0][0])-r[0][0],o=n.invertX(e[1][0])-r[1][0],s=n.invertY(e[0][1])-r[0][1],a=n.invertY(e[1][1])-r[1][1];return n.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function Y1e(){var n=j1e,e=W1e,r=K1e,i=q1e,o=X1e,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,c=pue,u=Jm("start","zoom","end"),d,f,h,p=500,g=150,y=0,v=10;function m(A){A.property("__zoom",CD).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",R).filter(o).on("touchstart.zoom",P).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(A,I,N,L){var O=A.selection?A.selection():A;O.property("__zoom",CD),A!==O?w(A,I,N,L):O.interrupt().each(function(){E(this,arguments).event(L).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},m.scaleBy=function(A,I,N,L){m.scaleTo(A,function(){var O=this.__zoom.k,V=typeof I=="function"?I.apply(this,arguments):I;return O*V},N,L)},m.scaleTo=function(A,I,N,L){m.transform(A,function(){var O=e.apply(this,arguments),V=this.__zoom,B=N==null?S(O):typeof N=="function"?N.apply(this,arguments):N,z=V.invert(B),W=typeof I=="function"?I.apply(this,arguments):I;return r(x(_(V,W),B,z),O,a)},N,L)},m.translateBy=function(A,I,N,L){m.transform(A,function(){return r(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof N=="function"?N.apply(this,arguments):N),e.apply(this,arguments),a)},null,L)},m.translateTo=function(A,I,N,L,O){m.transform(A,function(){var V=e.apply(this,arguments),B=this.__zoom,z=L==null?S(V):typeof L=="function"?L.apply(this,arguments):L;return r(xR.translate(z[0],z[1]).scale(B.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof N=="function"?-N.apply(this,arguments):-N),V,a)},L,O)};function _(A,I){return I=Math.max(s[0],Math.min(s[1],I)),I===A.k?A:new Ra(I,A.x,A.y)}function x(A,I,N){var L=I[0]-N[0]*A.k,O=I[1]-N[1]*A.k;return L===A.x&&O===A.y?A:new Ra(A.k,L,O)}function S(A){return[(+A[0][0]+ +A[1][0])/2,(+A[0][1]+ +A[1][1])/2]}function w(A,I,N,L){A.on("start.zoom",function(){E(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(L).end()}).tween("zoom",function(){var O=this,V=arguments,B=E(O,V).event(L),z=e.apply(O,V),W=N==null?S(z):typeof N=="function"?N.apply(O,V):N,ie=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),k=O.__zoom,j=typeof I=="function"?I.apply(O,V):I,Q=c(k.invert(W).concat(ie/k.k),j.invert(W).concat(ie/j.k));return function(Y){if(Y===1)Y=j;else{var ne=Q(Y),ye=ie/ne[2];Y=new Ra(ye,W[0]-ne[0]*ye,W[1]-ne[1]*ye)}B.zoom(null,Y)}})}function E(A,I,N){return!N&&A.__zooming||new C(A,I)}function C(A,I){this.that=A,this.args=I,this.active=0,this.sourceEvent=null,this.extent=e.apply(A,I),this.taps=0}C.prototype={event:function(A){return A&&(this.sourceEvent=A),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(A,I){return this.mouse&&A!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&A!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&A!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(A){var I=hs(this.that).datum();u.call(A,this.that,new H1e(A,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),I)}};function T(A,...I){if(!n.apply(this,arguments))return;var N=E(this,I).event(A),L=this.__zoom,O=Math.max(s[0],Math.min(s[1],L.k*Math.pow(2,i.apply(this,arguments)))),V=ma(A);if(N.wheel)(N.mouse[0][0]!==V[0]||N.mouse[0][1]!==V[1])&&(N.mouse[1]=L.invert(N.mouse[0]=V)),clearTimeout(N.wheel);else{if(L.k===O)return;N.mouse=[V,L.invert(V)],b0(this),N.start()}$h(A),N.wheel=setTimeout(B,g),N.zoom("mouse",r(x(_(L,O),N.mouse[0],N.mouse[1]),N.extent,a));function B(){N.wheel=null,N.end()}}function M(A,...I){if(h||!n.apply(this,arguments))return;var N=A.currentTarget,L=E(this,I,!0).event(A),O=hs(A.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",ie,!0),V=ma(A,N),B=A.clientX,z=A.clientY;d5(A.view),m1(A),L.mouse=[V,this.__zoom.invert(V)],b0(this),L.start();function W(k){if($h(k),!L.moved){var j=k.clientX-B,Q=k.clientY-z;L.moved=j*j+Q*Q>y}L.event(k).zoom("mouse",r(x(L.that.__zoom,L.mouse[0]=ma(k,N),L.mouse[1]),L.extent,a))}function ie(k){O.on("mousemove.zoom mouseup.zoom",null),f5(k.view,L.moved),$h(k),L.event(k).end()}}function R(A,...I){if(n.apply(this,arguments)){var N=this.__zoom,L=ma(A.changedTouches?A.changedTouches[0]:A,this),O=N.invert(L),V=N.k*(A.shiftKey?.5:2),B=r(x(_(N,V),L,O),e.apply(this,I),a);$h(A),l>0?hs(this).transition().duration(l).call(w,B,L,A):hs(this).call(m.transform,B,L,A)}}function P(A,...I){if(n.apply(this,arguments)){var N=A.touches,L=N.length,O=E(this,I,A.changedTouches.length===L).event(A),V,B,z,W;for(m1(A),B=0;B<L;++B)z=N[B],W=ma(z,this),W=[W,this.__zoom.invert(W),z.identifier],O.touch0?!O.touch1&&O.touch0[2]!==W[2]&&(O.touch1=W,O.taps=0):(O.touch0=W,V=!0,O.taps=1+!!d);d&&(d=clearTimeout(d)),V&&(O.taps<2&&(f=W[0],d=setTimeout(function(){d=null},p)),b0(this),O.start())}}function D(A,...I){if(this.__zooming){var N=E(this,I).event(A),L=A.changedTouches,O=L.length,V,B,z,W;for($h(A),V=0;V<O;++V)B=L[V],z=ma(B,this),N.touch0&&N.touch0[2]===B.identifier?N.touch0[0]=z:N.touch1&&N.touch1[2]===B.identifier&&(N.touch1[0]=z);if(B=N.that.__zoom,N.touch1){var ie=N.touch0[0],k=N.touch0[1],j=N.touch1[0],Q=N.touch1[1],Y=(Y=j[0]-ie[0])*Y+(Y=j[1]-ie[1])*Y,ne=(ne=Q[0]-k[0])*ne+(ne=Q[1]-k[1])*ne;B=_(B,Math.sqrt(Y/ne)),z=[(ie[0]+j[0])/2,(ie[1]+j[1])/2],W=[(k[0]+Q[0])/2,(k[1]+Q[1])/2]}else if(N.touch0)z=N.touch0[0],W=N.touch0[1];else return;N.zoom("touch",r(x(B,z,W),N.extent,a))}}function F(A,...I){if(this.__zooming){var N=E(this,I).event(A),L=A.changedTouches,O=L.length,V,B;for(m1(A),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),V=0;V<O;++V)B=L[V],N.touch0&&N.touch0[2]===B.identifier?delete N.touch0:N.touch1&&N.touch1[2]===B.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(B=ma(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<v)){var z=hs(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return m.wheelDelta=function(A){return arguments.length?(i=typeof A=="function"?A:zv(+A),m):i},m.filter=function(A){return arguments.length?(n=typeof A=="function"?A:zv(!!A),m):n},m.touchable=function(A){return arguments.length?(o=typeof A=="function"?A:zv(!!A),m):o},m.extent=function(A){return arguments.length?(e=typeof A=="function"?A:zv([[+A[0][0],+A[0][1]],[+A[1][0],+A[1][1]]]),m):e},m.scaleExtent=function(A){return arguments.length?(s[0]=+A[0],s[1]=+A[1],m):[s[0],s[1]]},m.translateExtent=function(A){return arguments.length?(a[0][0]=+A[0][0],a[1][0]=+A[1][0],a[0][1]=+A[0][1],a[1][1]=+A[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(A){return arguments.length?(r=A,m):r},m.duration=function(A){return arguments.length?(l=+A,m):l},m.interpolate=function(A){return arguments.length?(c=A,m):c},m.on=function(){var A=u.on.apply(u,arguments);return A===u?m:A},m.clickDistance=function(A){return arguments.length?(y=(A=+A)*A,m):Math.sqrt(y)},m.tapDistance=function(A){return arguments.length?(v=+A,m):v},m}var Q1e="Expected a function";function Z1e(n,e,r){var i=!0,o=!0;if(typeof n!="function")throw new TypeError(Q1e);return _y(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Iz(n,e,{leading:i,maxWait:e,trailing:o})}function rC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function J1e(n){if(Array.isArray(n))return rC(n)}function v5(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function ewe(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function twe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ao(n,e){return n.get(v5(n,e))}function TD(n,e,r){ewe(n,e),e.set(n,r)}function MD(n,e,r){return n.set(v5(n,e),r),r}function nwe(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,lwe(i.key),i)}}function rwe(n,e,r){return e&&nwe(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function iwe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function owe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function swe(n){return J1e(n)||iwe(n)||cwe(n)||owe()}function awe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function lwe(n){var e=awe(n,"string");return typeof e=="symbol"?e:e+""}function cwe(n,e){if(n){if(typeof n=="string")return rC(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rC(n,e):void 0}}var uwe=123,dwe=function(e){return"#".concat(Math.min(e,Math.pow(2,24)).toString(16).padStart(6,"0"))},y5=function(e,r,i){return(e<<16)+(r<<8)+i},fwe=function(e){var r=Pt(e).toRgb(),i=r.r,o=r.g,s=r.b;return y5(i,o,s)},RD=function(e,r){return e*uwe%Math.pow(2,r)},bc=new WeakMap,fa=new WeakMap,hwe=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;twe(this,n),TD(this,bc,void 0),TD(this,fa,void 0),MD(fa,this,e),this.reset()}return rwe(n,[{key:"reset",value:function(){MD(bc,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Ao(bc,this).length>=Math.pow(2,24-Ao(fa,this)))return null;var i=Ao(bc,this).length,o=RD(i,Ao(fa,this)),s=dwe(i+(o<<24-Ao(fa,this)));return Ao(bc,this).push(r),s}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?fwe(r):y5.apply(void 0,swe(r));if(!i)return null;var o=i&Math.pow(2,24-Ao(fa,this))-1,s=i>>24-Ao(fa,this)&Math.pow(2,Ao(fa,this))-1;return RD(o,Ao(fa,this))!==s||o>=Ao(bc,this).length?null:Ao(bc,this)[o]}}])}();const{abs:zh,cos:ha,sin:id,acos:pwe,atan2:kh,sqrt:ml,pow:No}=Math;function Vh(n){return n<0?-No(-n,1/3):No(n,1/3)}const _5=Math.PI,kv=2*_5,gl=_5/2,mwe=1e-6,g1=Number.MAX_SAFE_INTEGER||9007199254740991,v1=Number.MIN_SAFE_INTEGER||-9007199254740991,gwe={x:0,y:0,z:0},it={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(n,e){const r=e(n);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),ml(i)},compute:function(n,e,r){if(n===0)return e[0].t=0,e[0];const i=e.length-1;if(n===1)return e[i].t=1,e[i];const o=1-n;let s=e;if(i===0)return e[0].t=n,e[0];if(i===1){const l={x:o*s[0].x+n*s[1].x,y:o*s[0].y+n*s[1].y,t:n};return r&&(l.z=o*s[0].z+n*s[1].z),l}if(i<4){let l=o*o,c=n*n,u,d,f,h=0;i===2?(s=[s[0],s[1],s[2],gwe],u=l,d=o*n*2,f=c):i===3&&(u=l*o,d=l*n*3,f=o*c*3,h=n*c);const p={x:u*s[0].x+d*s[1].x+f*s[2].x+h*s[3].x,y:u*s[0].y+d*s[1].y+f*s[2].y+h*s[3].y,t:n};return r&&(p.z=u*s[0].z+d*s[1].z+f*s[2].z+h*s[3].z),p}const a=JSON.parse(JSON.stringify(e));for(;a.length>1;){for(let l=0;l<a.length-1;l++)a[l]={x:a[l].x+(a[l+1].x-a[l].x)*n,y:a[l].y+(a[l+1].y-a[l].y)*n},typeof a[l].z<"u"&&(a[l].z=a[l].z+(a[l+1].z-a[l].z)*n);a.splice(a.length-1,1)}return a[0].t=n,a[0]},computeWithRatios:function(n,e,r,i){const o=1-n,s=r,a=e;let l=s[0],c=s[1],u=s[2],d=s[3],f;if(l*=o,c*=n,a.length===2)return f=l+c,{x:(l*a[0].x+c*a[1].x)/f,y:(l*a[0].y+c*a[1].y)/f,z:i?(l*a[0].z+c*a[1].z)/f:!1,t:n};if(l*=o,c*=2*o,u*=n*n,a.length===3)return f=l+c+u,{x:(l*a[0].x+c*a[1].x+u*a[2].x)/f,y:(l*a[0].y+c*a[1].y+u*a[2].y)/f,z:i?(l*a[0].z+c*a[1].z+u*a[2].z)/f:!1,t:n};if(l*=o,c*=1.5*o,u*=3*o,d*=n*n*n,a.length===4)return f=l+c+u+d,{x:(l*a[0].x+c*a[1].x+u*a[2].x+d*a[3].x)/f,y:(l*a[0].y+c*a[1].y+u*a[2].y+d*a[3].y)/f,z:i?(l*a[0].z+c*a[1].z+u*a[2].z+d*a[3].z)/f:!1,t:n}},derive:function(n,e){const r=[];for(let i=n,o=i.length,s=o-1;o>1;o--,s--){const a=[];for(let l=0,c;l<s;l++)c={x:s*(i[l+1].x-i[l].x),y:s*(i[l+1].y-i[l].y)},e&&(c.z=s*(i[l+1].z-i[l].z)),a.push(c);r.push(a),i=a}return r},between:function(n,e,r){return e<=n&&n<=r||it.approximately(n,e)||it.approximately(n,r)},approximately:function(n,e,r){return zh(n-e)<=(r||mwe)},length:function(n){const r=it.Tvalues.length;let i=0;for(let o=0,s;o<r;o++)s=.5*it.Tvalues[o]+.5,i+=it.Cvalues[o]*it.arcfn(s,n);return .5*i},map:function(n,e,r,i,o){const s=r-e,a=o-i,l=n-e,c=l/s;return i+a*c},lerp:function(n,e,r){const i={x:e.x+n*(r.x-e.x),y:e.y+n*(r.y-e.y)};return e.z!==void 0&&r.z!==void 0&&(i.z=e.z+n*(r.z-e.z)),i},pointToString:function(n){let e=n.x+"/"+n.y;return typeof n.z<"u"&&(e+="/"+n.z),e},pointsToString:function(n){return"["+n.map(it.pointToString).join(", ")+"]"},copy:function(n){return JSON.parse(JSON.stringify(n))},angle:function(n,e,r){const i=e.x-n.x,o=e.y-n.y,s=r.x-n.x,a=r.y-n.y,l=i*a-o*s,c=i*s+o*a;return kh(l,c)},round:function(n,e){const r=""+n,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(n,e){const r=n.x-e.x,i=n.y-e.y;return ml(r*r+i*i)},closest:function(n,e){let r=No(2,63),i,o;return n.forEach(function(s,a){o=it.dist(e,s),o<r&&(r=o,i=a)}),{mdist:r,mpos:i}},abcratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=No(n,e)+No(1-n,e),i=r-1;return zh(i/r)},projectionratio:function(n,e){if(e!==2&&e!==3)return!1;if(typeof n>"u")n=.5;else if(n===0||n===1)return n;const r=No(1-n,e),i=No(n,e)+r;return r/i},lli8:function(n,e,r,i,o,s,a,l){const c=(n*i-e*r)*(o-a)-(n-r)*(o*l-s*a),u=(n*i-e*r)*(s-l)-(e-i)*(o*l-s*a),d=(n-r)*(s-l)-(e-i)*(o-a);return d==0?!1:{x:c/d,y:u/d}},lli4:function(n,e,r,i){const o=n.x,s=n.y,a=e.x,l=e.y,c=r.x,u=r.y,d=i.x,f=i.y;return it.lli8(o,s,a,l,c,u,d,f)},lli:function(n,e){return it.lli4(n,n.c,e,e.c)},makeline:function(n,e){return new Gn(n.x,n.y,(n.x+e.x)/2,(n.y+e.y)/2,e.x,e.y)},findbbox:function(n){let e=g1,r=g1,i=v1,o=v1;return n.forEach(function(s){const a=s.bbox();e>a.x.min&&(e=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),o<a.y.max&&(o=a.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(n,e,r,i,o){if(!it.bboxoverlap(e,i))return[];const s=[],a=[n.startcap,n.forward,n.back,n.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return a.forEach(function(c){c.virtual||l.forEach(function(u){if(u.virtual)return;const d=c.intersects(u,o);d.length>0&&(d.c1=c,d.c2=u,d.s1=n,d.s2=r,s.push(d))})}),s},makeshape:function(n,e,r){const i=e.points.length,o=n.points.length,s=it.makeline(e.points[i-1],n.points[0]),a=it.makeline(n.points[o-1],e.points[0]),l={startcap:s,forward:n,back:e,endcap:a,bbox:it.findbbox([s,n,e,a])};return l.intersections=function(c){return it.shapeintersections(l,l.bbox,c,c.bbox,r)},l},getminmax:function(n,e,r){if(!r)return{min:0,max:0};let i=g1,o=v1,s,a;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let l=0,c=r.length;l<c;l++)s=r[l],a=n.get(s),a[e]<i&&(i=a[e]),a[e]>o&&(o=a[e]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(n,e){const r=e.p1.x,i=e.p1.y,o=-kh(e.p2.y-i,e.p2.x-r),s=function(a){return{x:(a.x-r)*ha(o)-(a.y-i)*id(o),y:(a.x-r)*id(o)+(a.y-i)*ha(o)}};return n.map(s)},roots:function(n,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=n.length-1,i=it.align(n,e),o=function(C){return 0<=C&&C<=1};if(r===2){const C=i[0].y,T=i[1].y,M=i[2].y,R=C-2*T+M;if(R!==0){const P=-ml(T*T-C*M),D=-C+T,F=-(P+D)/R,A=-(-P+D)/R;return[F,A].filter(o)}else if(T!==M&&R===0)return[(2*T-M)/(2*T-2*M)].filter(o);return[]}const s=i[0].y,a=i[1].y,l=i[2].y,c=i[3].y;let u=-s+3*a-3*l+c,d=3*s-6*a+3*l,f=-3*s+3*a,h=s;if(it.approximately(u,0)){if(it.approximately(d,0))return it.approximately(f,0)?[]:[-h/f].filter(o);const C=ml(f*f-4*d*h),T=2*d;return[(C-f)/T,(-f-C)/T].filter(o)}d/=u,f/=u,h/=u;const p=(3*f-d*d)/3,g=p/3,y=(2*d*d*d-9*d*f+27*h)/27,v=y/2,m=v*v+g*g*g;let _,x,S,w,E;if(m<0){const C=-p/3,T=C*C*C,M=ml(T),R=-y/(2*M),P=R<-1?-1:R>1?1:R,D=pwe(P),F=Vh(M),A=2*F;return S=A*ha(D/3)-d/3,w=A*ha((D+kv)/3)-d/3,E=A*ha((D+2*kv)/3)-d/3,[S,w,E].filter(o)}else{if(m===0)return _=v<0?Vh(-v):-Vh(v),S=2*_-d/3,w=-_-d/3,[S,w].filter(o);{const C=ml(m);return _=Vh(-v+C),x=Vh(v+C),[_-x-d/3].filter(o)}}},droots:function(n){if(n.length===3){const e=n[0],r=n[1],i=n[2],o=e-2*r+i;if(o!==0){const s=-ml(r*r-e*i),a=-e+r,l=-(s+a)/o,c=-(-s+a)/o;return[l,c]}else if(r!==i&&o===0)return[(2*r-i)/(2*(r-i))];return[]}if(n.length===2){const e=n[0],r=n[1];return e!==r?[e/(e-r)]:[]}return[]},curvature:function(n,e,r,i,o){let s,a,l,c,u=0,d=0;const f=it.compute(n,e),h=it.compute(n,r),p=f.x*f.x+f.y*f.y;if(i?(s=ml(No(f.y*h.z-h.y*f.z,2)+No(f.z*h.x-h.z*f.x,2)+No(f.x*h.y-h.x*f.y,2)),a=No(p+f.z*f.z,3/2)):(s=f.x*h.y-f.y*h.x,a=No(p,3/2)),s===0||a===0)return{k:0,r:0};if(u=s/a,d=a/s,!o){const g=it.curvature(n-.001,e,r,i,!0).k,y=it.curvature(n+.001,e,r,i,!0).k;c=(y-u+(u-g))/2,l=(zh(y-u)+zh(u-g))/2}return{k:u,r:d,dk:c,adk:l}},inflections:function(n){if(n.length<4)return[];const e=it.align(n,{p1:n[0],p2:n.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,o=e[1].x*e[2].y,s=e[3].x*e[2].y,a=18*(-3*r+2*i+3*o-s),l=18*(3*r-i-3*o),c=18*(o-r);if(it.approximately(a,0)){if(!it.approximately(l,0)){let h=-c/l;if(0<=h&&h<=1)return[h]}return[]}const u=2*a;if(it.approximately(u,0))return[];const d=l*l-4*a*c;if(d<0)return[];const f=Math.sqrt(d);return[(f-l)/u,-(l+f)/u].filter(function(h){return 0<=h&&h<=1})},bboxoverlap:function(n,e){const r=["x","y"],i=r.length;for(let o=0,s,a,l,c;o<i;o++)if(s=r[o],a=n[s].mid,l=e[s].mid,c=(n[s].size+e[s].size)/2,zh(a-l)>=c)return!1;return!0},expandbox:function(n,e){e.x.min<n.x.min&&(n.x.min=e.x.min),e.y.min<n.y.min&&(n.y.min=e.y.min),e.z&&e.z.min<n.z.min&&(n.z.min=e.z.min),e.x.max>n.x.max&&(n.x.max=e.x.max),e.y.max>n.y.max&&(n.y.max=e.y.max),e.z&&e.z.max>n.z.max&&(n.z.max=e.z.max),n.x.mid=(n.x.min+n.x.max)/2,n.y.mid=(n.y.min+n.y.max)/2,n.z&&(n.z.mid=(n.z.min+n.z.max)/2),n.x.size=n.x.max-n.x.min,n.y.size=n.y.max-n.y.min,n.z&&(n.z.size=n.z.max-n.z.min)},pairiteration:function(n,e,r){const i=n.bbox(),o=e.bbox(),s=1e5,a=r||.5;if(i.x.size+i.y.size<a&&o.x.size+o.y.size<a)return[(s*(n._t1+n._t2)/2|0)/s+"/"+(s*(e._t1+e._t2)/2|0)/s];let l=n.split(.5),c=e.split(.5),u=[{left:l.left,right:c.left},{left:l.left,right:c.right},{left:l.right,right:c.right},{left:l.right,right:c.left}];u=u.filter(function(f){return it.bboxoverlap(f.left.bbox(),f.right.bbox())});let d=[];return u.length===0||(u.forEach(function(f){d=d.concat(it.pairiteration(f.left,f.right,a))}),d=d.filter(function(f,h){return d.indexOf(f)===h})),d},getccenter:function(n,e,r){const i=e.x-n.x,o=e.y-n.y,s=r.x-e.x,a=r.y-e.y,l=i*ha(gl)-o*id(gl),c=i*id(gl)+o*ha(gl),u=s*ha(gl)-a*id(gl),d=s*id(gl)+a*ha(gl),f=(n.x+e.x)/2,h=(n.y+e.y)/2,p=(e.x+r.x)/2,g=(e.y+r.y)/2,y=f+l,v=h+c,m=p+u,_=g+d,x=it.lli8(f,h,y,v,p,g,m,_),S=it.dist(x,n);let w=kh(n.y-x.y,n.x-x.x),E=kh(e.y-x.y,e.x-x.x),C=kh(r.y-x.y,r.x-x.x),T;return w<C?((w>E||E>C)&&(w+=kv),w>C&&(T=C,C=w,w=T)):C<E&&E<w?(T=C,C=w,w=T):C+=kv,x.s=w,x.e=C,x.r=S,x},numberSort:function(n,e){return n-e}};class Cp{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return it.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),i=1;i<e.length;i++)it.expandbox(r,e[i].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(e))}),new Cp(r)}}const{abs:Gh,min:AD,max:ND,cos:vwe,sin:ywe,acos:_we,sqrt:Hh}=Math,xwe=Math.PI;class Gn{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const p=[];r.forEach(function(g){["x","y","z"].forEach(function(y){typeof g[y]<"u"&&p.push(g[y])})}),r=p}let o=!1;const s=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(s!==6&&s!==8&&s!==9&&s!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!o&&(s===9||s===12)||e&&e[0]&&typeof e[0].z<"u",l=this.points=[];for(let p=0,g=a?3:2;p<s;p+=g){var c={x:r[p],y:r[p+1]};a&&(c.z=r[p+2]),l.push(c)}const u=this.order=l.length-1,d=this.dims=["x","y"];a&&d.push("z"),this.dimlen=d.length;const f=it.align(l,{p1:l[0],p2:l[u]}),h=it.dist(l[0],l[u]);this._linear=f.reduce((p,g)=>p+Gh(g.y),0)<h/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,i,o){if(typeof o>"u"&&(o=.5),o===0)return new Gn(r,r,i);if(o===1)return new Gn(e,r,r);const s=Gn.getABC(2,e,r,i,o);return new Gn(e,s.A,i)}static cubicFromPoints(e,r,i,o,s){typeof o>"u"&&(o=.5);const a=Gn.getABC(3,e,r,i,o);typeof s>"u"&&(s=it.dist(r,a.C));const l=s*(1-o)/o,c=it.dist(e,i),u=(i.x-e.x)/c,d=(i.y-e.y)/c,f=s*u,h=s*d,p=l*u,g=l*d,y={x:r.x-f,y:r.y-h},v={x:r.x+p,y:r.y+g},m=a.A,_={x:m.x+(y.x-m.x)/(1-o),y:m.y+(y.y-m.y)/(1-o)},x={x:m.x+(v.x-m.x)/o,y:m.y+(v.y-m.y)/o},S={x:e.x+(_.x-e.x)/o,y:e.y+(_.y-e.y)/o},w={x:i.x+(x.x-i.x)/(1-o),y:i.y+(x.y-i.y)/(1-o)};return new Gn(e,S,w,i)}static getUtils(){return it}getUtils(){return Gn.getUtils()}static get PolyBezier(){return Cp}valueOf(){return this.toString()}toString(){return it.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,i=e[0].y,o=["M",r,i,this.order===2?"Q":"C"];for(let s=1,a=e.length;s<a;s++)o.push(e[s].x),o.push(e[s].y);return o.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=it.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=it.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return it.length(this.derivative.bind(this))}static getABC(e=2,r,i,o,s=.5){const a=it.projectionratio(s,e),l=1-a,c={x:a*r.x+l*o.x,y:a*r.y+l*o.y},u=it.abcratio(s,e);return{A:{x:i.x+(i.x-c.x)/u,y:i.y+(i.y-c.y)/u},B:i,C:c,S:r,E:o}}getABC(e,r){r=r||this.get(e);let i=this.points[0],o=this.points[this.order];return Gn.getABC(this.order,i,r,o,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,i,o;r<e;r++)o=r/(e-1),i=this.compute(o),i.t=o,this._lut.push(i);return this._lut}on(e,r){r=r||5;const i=this.getLUT(),o=[];for(let s=0,a,l=0;s<i.length;s++)a=i[s],it.dist(a,e)<r&&(o.push(a),l+=s/i.length);return o.length?t/=o.length:!1}project(e){const r=this.getLUT(),i=r.length-1,o=it.closest(r,e),s=o.mpos,a=(s-1)/i,l=(s+1)/i,c=.1/i;let u=o.mdist,d=a,f=d,h;u+=1;for(let p;d<l+c;d+=c)h=this.compute(d),p=it.dist(e,h),p<u&&(u=p,f=d);return f=f<0?0:f>1?1:f,h=this.compute(f),h.t=f,h.d=u,h}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?it.computeWithRatios(e,this.points,this.ratios,this._3d):it.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],i=e.length;for(let o=1,s,a;o<i;o++)s=e[o],a=e[o-1],r[o]={x:(i-o)/i*s.x+o/i*a.x,y:(i-o)/i*s.y+o/i*a.y};return r[i]=e[i-1],new Gn(r)}derivative(e){return it.compute(e,this.dpoints[0],this._3d)}dderivative(e){return it.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new Gn(it.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return it.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return it.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),i=Hh(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/i,y:r.x/i}}__normal3(e){const r=this.derivative(e),i=this.derivative(e+.01),o=Hh(r.x*r.x+r.y*r.y+r.z*r.z),s=Hh(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=o,r.y/=o,r.z/=o,i.x/=s,i.y/=s,i.z/=s;const a={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},l=Hh(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=l,a.y/=l,a.z/=l;const c=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:c[0]*r.x+c[1]*r.y+c[2]*r.z,y:c[3]*r.x+c[4]*r.y+c[5]*r.z,z:c[6]*r.x+c[7]*r.y+c[8]*r.z}}hull(e){let r=this.points,i=[],o=[],s=0;for(o[s++]=r[0],o[s++]=r[1],o[s++]=r[2],this.order===3&&(o[s++]=r[3]);r.length>1;){i=[];for(let a=0,l,c=r.length-1;a<c;a++)l=it.lerp(e,r[a],r[a+1]),o[s++]=l,i.push(l);r=i}return o}split(e,r){if(e===0&&r)return this.split(r).left;if(r===1)return this.split(e).right;const i=this.hull(e),o={left:this.order===2?new Gn([i[0],i[3],i[5]]):new Gn([i[0],i[4],i[7],i[9]]),right:this.order===2?new Gn([i[5],i[4],i[2]]):new Gn([i[9],i[8],i[6],i[3]]),span:i};return o.left._t1=it.map(0,0,1,this._t1,this._t2),o.left._t2=it.map(e,0,1,this._t1,this._t2),o.right._t1=it.map(e,0,1,this._t1,this._t2),o.right._t2=it.map(1,0,1,this._t1,this._t2),r?(r=it.map(r,e,1,0,1),o.right.split(r).left):o}extrema(){const e={};let r=[];return this.dims.forEach((function(i){let o=function(a){return a[i]},s=this.dpoints[0].map(o);e[i]=it.droots(s),this.order===3&&(s=this.dpoints[1].map(o),e[i]=e[i].concat(it.droots(s))),e[i]=e[i].filter(function(a){return a>=0&&a<=1}),r=r.concat(e[i].sort(it.numberSort))}).bind(this)),e.values=r.sort(it.numberSort).filter(function(i,o){return r.indexOf(i)===o}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=it.getminmax(this,i,e[i])}).bind(this)),r}overlaps(e){const r=this.bbox(),i=e.bbox();return it.bboxoverlap(r,i)}offset(e,r){if(typeof r<"u"){const i=this.get(e),o=this.normal(e),s={c:i,n:o,x:i.x+o.x*r,y:i.y+o.y*r};return this._3d&&(s.z=i.z+o.z*r),s}if(this._linear){const i=this.normal(0),o=this.points.map(function(s){const a={x:s.x+e*i.x,y:s.y+e*i.y};return s.z&&i.z&&(a.z=s.z+e*i.z),a});return[new Gn(o)]}return this.reduce().map(function(i){return i._linear?i.offset(e)[0]:i.scale(e)})}simple(){if(this.order===3){const o=it.angle(this.points[0],this.points[3],this.points[1]),s=it.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&s<0||o<0&&s>0)return!1}const e=this.normal(0),r=this.normal(1);let i=e.x*r.x+e.y*r.y;return this._3d&&(i+=e.z*r.z),Gh(_we(i))<xwe/3}reduce(){let e,r=0,i=0,o=.01,s,a=[],l=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),r=c[0],e=1;e<c.length;e++)i=c[e],s=this.split(r,i),s._t1=r,s._t2=i,a.push(s),r=i;return a.forEach(function(u){for(r=0,i=0;i<=1;)for(i=r+o;i<=1+o;i+=o)if(s=u.split(r,i),!s.simple()){if(i-=o,Gh(r-i)<o)return[];s=u.split(r,i),s._t1=it.map(r,0,1,u._t1,u._t2),s._t2=it.map(i,0,1,u._t1,u._t2),l.push(s),r=i;break}r<1&&(s=u.split(r,1),s._t1=it.map(r,0,1,u._t1,u._t2),s._t2=u._t2,l.push(s))}),l}translate(e,r,i){i=typeof i=="number"?i:r;const o=this.order;let s=this.points.map((a,l)=>(1-l/o)*r+l/o*i);return new Gn(this.points.map((a,l)=>({x:a.x+e.x*s[l],y:a.y+e.y*s[l]})))}scale(e){const r=this.order;let i=!1;if(typeof e=="function"&&(i=e),i&&r===2)return this.raise().scale(i);const o=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):e,i?i(1):e);const a=i?i(0):e,l=i?i(1):e,c=[this.offset(0,10),this.offset(1,10)],u=[],d=it.lli4(c[0],c[0].c,c[1],c[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(f){const h=u[f*r]=it.copy(s[f*r]);h.x+=(f?l:a)*c[f].n.x,h.y+=(f?l:a)*c[f].n.y}),i?([0,1].forEach(function(f){if(!(r===2&&f)){var h=s[f+1],p={x:h.x-d.x,y:h.y-d.y},g=i?i((f+1)/r):e;i&&!o&&(g=-g);var y=Hh(p.x*p.x+p.y*p.y);p.x/=y,p.y/=y,u[f+1]={x:h.x+g*p.x,y:h.y+g*p.y}}}),new Gn(u)):([0,1].forEach(f=>{if(r===2&&f)return;const h=u[f*r],p=this.derivative(f),g={x:h.x+p.x,y:h.y+p.y};u[f+1]=it.lli4(h,g,d,s[f+1])}),new Gn(u))}outline(e,r,i,o){if(r=r===void 0?e:r,this._linear){const w=this.normal(0),E=this.points[0],C=this.points[this.points.length-1];let T,M,R;i===void 0&&(i=e,o=r),T={x:E.x+w.x*e,y:E.y+w.y*e},R={x:C.x+w.x*i,y:C.y+w.y*i},M={x:(T.x+R.x)/2,y:(T.y+R.y)/2};const P=[T,M,R];T={x:E.x-w.x*r,y:E.y-w.y*r},R={x:C.x-w.x*o,y:C.y-w.y*o},M={x:(T.x+R.x)/2,y:(T.y+R.y)/2};const D=[R,M,T],F=it.makeline(D[2],P[0]),A=it.makeline(P[2],D[0]),I=[F,new Gn(P),A,new Gn(D)];return new Cp(I)}const s=this.reduce(),a=s.length,l=[];let c=[],u,d=0,f=this.length();const h=typeof i<"u"&&typeof o<"u";function p(w,E,C,T,M){return function(R){const P=T/C,D=(T+M)/C,F=E-w;return it.map(R,0,1,w+P*F,w+D*F)}}s.forEach(function(w){const E=w.length();h?(l.push(w.scale(p(e,i,f,d,E))),c.push(w.scale(p(-r,-o,f,d,E)))):(l.push(w.scale(e)),c.push(w.scale(-r))),d+=E}),c=c.map(function(w){return u=w.points,u[3]?w.points=[u[3],u[2],u[1],u[0]]:w.points=[u[2],u[1],u[0]],w}).reverse();const g=l[0].points[0],y=l[a-1].points[l[a-1].points.length-1],v=c[a-1].points[c[a-1].points.length-1],m=c[0].points[0],_=it.makeline(v,g),x=it.makeline(y,m),S=[_].concat(l).concat([x]).concat(c);return new Cp(S)}outlineshapes(e,r,i){r=r||e;const o=this.outline(e,r).curves,s=[];for(let a=1,l=o.length;a<l/2;a++){const c=it.makeshape(o[a],o[l-a],i);c.startcap.virtual=a>1,c.endcap.virtual=a<l/2-1,s.push(c)}return s}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof Gn&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=AD(e.p1.x,e.p2.x),i=AD(e.p1.y,e.p2.y),o=ND(e.p1.x,e.p2.x),s=ND(e.p1.y,e.p2.y);return it.roots(this.points,e).filter(a=>{var l=this.get(a);return it.between(l.x,r,o)&&it.between(l.y,i,s)})}selfintersects(e){const r=this.reduce(),i=r.length-2,o=[];for(let s=0,a,l,c;s<i;s++)l=r.slice(s,s+1),c=r.slice(s+2),a=this.curveintersects(l,c,e),o.push(...a);return o}curveintersects(e,r,i){const o=[];e.forEach(function(a){r.forEach(function(l){a.overlaps(l)&&o.push({left:a,right:l})})});let s=[];return o.forEach(function(a){const l=it.pairiteration(a.left,a.right,i);l.length>0&&(s=s.concat(l))}),s}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,i,o){const s=(o-i)/4,a=this.get(i+s),l=this.get(o-s),c=it.dist(e,r),u=it.dist(e,a),d=it.dist(e,l);return Gh(u-c)+Gh(d-c)}_iterate(e,r){let i=0,o=1,s;do{s=0,o=1;let a=this.get(i),l,c,u,d,f=!1,h=!1,p,g=o,y=1;do if(h=f,d=u,g=(i+o)/2,l=this.get(g),c=this.get(o),u=it.getccenter(a,l,c),u.interval={start:i,end:o},f=this._error(u,a,i,o)<=e,p=h&&!f,p||(y=o),f){if(o>=1){if(u.interval.end=y=1,d=u,o>1){let m={x:u.x+u.r*vwe(u.e),y:u.y+u.r*ywe(u.e)};u.e+=it.angle({x:u.x,y:u.y},m,this.get(1))}break}o=o+(o-i)/2}else o=g;while(!p&&s++<100);if(s>=100)break;d=d||u,r.push(d),i=y}while(o<1);return r}}function bwe(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var Swe=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .graph-tooltip {
  position: absolute;
  top: 0;
  font-family: sans-serif;
  font-size: 16px;
  padding: 4px;
  border-radius: 3px;
  color: #eee;
  background: rgba(0,0,0,0.65);
  visibility: hidden; /* by default */
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;bwe(Swe);function iC(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function wwe(n){if(Array.isArray(n))return n}function Ewe(n){if(Array.isArray(n))return iC(n)}function PD(n,e,r){if(x5())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var o=new(n.bind.apply(n,i));return o}function Im(n,e,r){return(e=Nwe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function x5(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x5=function(){return!!n})()}function Cwe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Twe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,o,s,a,l=[],c=!0,u=!1;try{if(s=(r=r.call(n)).next,e!==0)for(;!(c=(i=s.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,o=d}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}function Mwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OD(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,i)}return r}function od(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(r),!0).forEach(function(i){Im(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):OD(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Tp(n,e){return wwe(n)||Twe(n,e)||b5(n,e)||Mwe()}function Fo(n){return Ewe(n)||Cwe(n)||b5(n)||Rwe()}function Awe(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Nwe(n){var e=Awe(n,"string");return typeof e=="symbol"?e:e+""}function oC(n){"@babel/helpers - typeof";return oC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oC(n)}function b5(n,e){if(n){if(typeof n=="string")return iC(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?iC(n,e):void 0}}var Pwe=DM(Hz);function ID(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=Pwe(e(i))})}function Owe(n,e){var r=n.nodes,i=n.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.nodeFilter,a=s===void 0?function(){return!0}:s,l=o.onLoopError,c=l===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:l,u={};r.forEach(function(p){return u[e(p)]={data:p,out:[],depth:-1,skip:!a(p)}}),i.forEach(function(p){var g=p.source,y=p.target,v=S(g),m=S(y);if(!u.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!u.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var _=u[v],x=u[m];_.out.push(x);function S(w){return oC(w)==="object"?e(w):w}});var d=[];h(Object.values(u));var f=Object.assign.apply(Object,[{}].concat(Fo(Object.entries(u).filter(function(p){var g=Tp(p,2),y=g[1];return!y.skip}).map(function(p){var g=Tp(p,2),y=g[0],v=g[1];return Im({},y,v.depth)}))));return f;function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var S=p[m];if(g.indexOf(S)!==-1){var w=[].concat(Fo(g.slice(g.indexOf(S))),[S]).map(function(E){return e(E.data)});return d.some(function(E){return E.length===w.length&&E.every(function(C,T){return C===w[T]})})||(d.push(w),c(w)),1}y>S.depth&&(S.depth=y,h(S.out,[].concat(Fo(g),[S]),y+(S.skip?0:1)))},m=0,_=p.length;m<_;m++)v()}}var Iwe=2,ui=function(e,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},DD=function(e,r){if(!r.isShadow){var i=At(r.linkDirectionalParticles);r.graphData.links.forEach(function(o){var s=Math.round(Math.abs(i(o)));s?o.__photons=Fo(Array(s)).map(function(){return{}}):delete o.__photons})}},zy=tg({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1,DD(e,r)}},dagMode:{onChange:function(e,r){!e&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:ui},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:ui},nodeColor:{default:"color",triggerUpdate:!1,onChange:ui},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:ui},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ui},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:ui},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:ui},linkColor:{default:"color",triggerUpdate:!1,onChange:ui},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:ui},linkWidth:{default:1,triggerUpdate:!1,onChange:ui},linkCurvature:{default:0,triggerUpdate:!1,onChange:ui},linkCanvasObject:{triggerUpdate:!1,onChange:ui},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:ui},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:ui},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:ui},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:ui},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:DD},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,r,i){return i===void 0?e.forceLayout.force(r):(e.forceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){return!e.isShadow&&r(),o(),!e.isShadow&&s(),!e.isShadow&&a(),i(),this;function r(){e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick()))}function i(){var l=At(e.nodeVisibility),c=At(e.nodeVal),u=At(e.nodeColor),d=At(e.nodeCanvasObjectMode),f=e.ctx,h=e.isShadow/e.globalScale,p=e.graphData.nodes.filter(l);f.save(),p.forEach(function(g){var y=d(g);if(e.nodeCanvasObject&&(y==="before"||y==="replace")&&(e.nodeCanvasObject(g,f,e.globalScale),y==="replace")){f.restore();return}var v=Math.sqrt(Math.max(0,c(g)||1))*e.nodeRelSize+h;f.beginPath(),f.arc(g.x,g.y,v,0,2*Math.PI,!1),f.fillStyle=u(g)||"rgba(31, 120, 180, 0.92)",f.fill(),e.nodeCanvasObject&&y==="after"&&e.nodeCanvasObject(g,e.ctx,e.globalScale)}),f.restore()}function o(){var l=At(e.linkVisibility),c=At(e.linkColor),u=At(e.linkWidth),d=At(e.linkLineDash),f=At(e.linkCurvature),h=At(e.linkCanvasObjectMode),p=e.ctx,g=e.isShadow*2,y=e.graphData.links.filter(l);y.forEach(E);var v=[],m=[],_=y;if(e.linkCanvasObject){var x=[],S=[];y.forEach(function(C){return({before:v,after:m,replace:x}[h(C)]||S).push(C)}),_=[].concat(Fo(v),m,S),v=v.concat(x)}p.save(),v.forEach(function(C){return e.linkCanvasObject(C,p,e.globalScale)}),p.restore();var w=EE(_,[c,u,d]);p.save(),Object.entries(w).forEach(function(C){var T=Tp(C,2),M=T[0],R=T[1],P=!M||M==="undefined"?"rgba(0,0,0,0.15)":M;Object.entries(R).forEach(function(D){var F=Tp(D,2),A=F[0],I=F[1],N=(A||1)/e.globalScale+g;Object.entries(I).forEach(function(L){var O=Tp(L,2);O[0];var V=O[1],B=d(V[0]);p.beginPath(),V.forEach(function(z){var W=z.source,ie=z.target;if(!(!W||!ie||!W.hasOwnProperty("x")||!ie.hasOwnProperty("x"))){p.moveTo(W.x,W.y);var k=z.__controlPoints;k?p[k.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(p,Fo(k).concat([ie.x,ie.y])):p.lineTo(ie.x,ie.y)}}),p.strokeStyle=P,p.lineWidth=N,p.setLineDash(B||[]),p.stroke()})})}),p.restore(),p.save(),m.forEach(function(C){return e.linkCanvasObject(C,p,e.globalScale)}),p.restore();function E(C){var T=f(C);if(!T){C.__controlPoints=null;return}var M=C.source,R=C.target;if(!(!M||!R||!M.hasOwnProperty("x")||!R.hasOwnProperty("x"))){var P=Math.sqrt(Math.pow(R.x-M.x,2)+Math.pow(R.y-M.y,2));if(P>0){var D=Math.atan2(R.y-M.y,R.x-M.x),F=P*T,A={x:(M.x+R.x)/2+F*Math.cos(D-Math.PI/2),y:(M.y+R.y)/2+F*Math.sin(D-Math.PI/2)};C.__controlPoints=[A.x,A.y]}else{var I=T*70;C.__controlPoints=[R.x,R.y-I,R.x+I,R.y]}}}}function s(){var l=1.6,c=.2,u=At(e.linkDirectionalArrowLength),d=At(e.linkDirectionalArrowRelPos),f=At(e.linkVisibility),h=At(e.linkDirectionalArrowColor||e.linkColor),p=At(e.nodeVal),g=e.ctx;g.save(),e.graphData.links.filter(f).forEach(function(y){var v=u(y);if(!(!v||v<0)){var m=y.source,_=y.target;if(!(!m||!_||!m.hasOwnProperty("x")||!_.hasOwnProperty("x"))){var x=Math.sqrt(Math.max(0,p(m)||1))*e.nodeRelSize,S=Math.sqrt(Math.max(0,p(_)||1))*e.nodeRelSize,w=Math.min(1,Math.max(0,d(y))),E=h(y)||"rgba(0,0,0,0.28)",C=v/l/2,T=y.__controlPoints&&PD(Gn,[m.x,m.y].concat(Fo(y.__controlPoints),[_.x,_.y])),M=T?function(N){return T.get(N)}:function(N){return{x:m.x+(_.x-m.x)*N||0,y:m.y+(_.y-m.y)*N||0}},R=T?T.length():Math.sqrt(Math.pow(_.x-m.x,2)+Math.pow(_.y-m.y,2)),P=x+v+(R-x-S-v)*w,D=M(P/R),F=M((P-v)/R),A=M((P-v*(1-c))/R),I=Math.atan2(D.y-F.y,D.x-F.x)-Math.PI/2;g.beginPath(),g.moveTo(D.x,D.y),g.lineTo(F.x+C*Math.cos(I),F.y+C*Math.sin(I)),g.lineTo(A.x,A.y),g.lineTo(F.x-C*Math.cos(I),F.y-C*Math.sin(I)),g.fillStyle=E,g.fill()}}}),g.restore()}function a(){var l=At(e.linkDirectionalParticles),c=At(e.linkDirectionalParticleSpeed),u=At(e.linkDirectionalParticleWidth),d=At(e.linkVisibility),f=At(e.linkDirectionalParticleColor||e.linkColor),h=e.ctx;h.save(),e.graphData.links.filter(d).forEach(function(p){var g=l(p);if(!(!p.hasOwnProperty("__photons")||!p.__photons.length)){var y=p.source,v=p.target;if(!(!y||!v||!y.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var m=c(p),_=p.__photons||[],x=Math.max(0,u(p)/2)/Math.sqrt(e.globalScale),S=f(p)||"rgba(0,0,0,0.28)";h.fillStyle=S;var w=p.__controlPoints?PD(Gn,[y.x,y.y].concat(Fo(p.__controlPoints),[v.x,v.y])):null,E=0,C=!1;_.forEach(function(T){var M=!!T.__singleHop;if(T.hasOwnProperty("__progressRatio")||(T.__progressRatio=M?0:E/g),!M&&E++,T.__progressRatio+=m,T.__progressRatio>=1)if(!M)T.__progressRatio=T.__progressRatio%1;else{C=!0;return}var R=T.__progressRatio,P=w?w.get(R):{x:y.x+(v.x-y.x)*R||0,y:y.y+(v.y-y.y)*R||0};h.beginPath(),h.arc(P.x,P.y,x,0,2*Math.PI,!1),h.fill()}),C&&(p.__photons=p.__photons.filter(function(T){return!T.__singleHop||T.__progressRatio<=1}))}}}),h.restore()}},emitParticle:function(e,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:fz().force("link",cz()).force("charge",hz()).force("center",nz()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.ctx=e},update:function(e,r){e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&ID(e.graphData.nodes,At(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&ID(e.graphData.links,At(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(h){h.source=h[e.linkSource],h.target=h[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var i=e.forceLayout.force("link");i&&i.id(function(h){return h[e.nodeId]}).links(e.graphData.links);var o=e.dagMode&&Owe(e.graphData,function(h){return h[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),s=Math.max.apply(Math,Fo(Object.values(o||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(s||1)*Iwe*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var l=["lr","rl"].includes(r.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(h){return delete h[l]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var c=["rl","bu"].includes(e.dagMode),u=function(p){return(o[p[e.nodeId]]-s/2)*a*(c?-1:1)},d=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(h){return h[d]=u(h)})}e.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?pz(function(h){var p=o[h[e.nodeId]]||-1;return(e.dagMode==="radialin"?s-p:p)*a}).strength(function(h){return e.dagNodeFilter(h)?1:0}):null);for(var f=0;f<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);f++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function S5(n,e){var r=n instanceof Array?n:[n],i=new e;return i._destructor&&i._destructor(),{linkProp:function(s){return{default:i[s](),onChange:function(l,c){r.forEach(function(u){return c[u][s](l)})},triggerUpdate:!1}},linkMethod:function(s){return function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var d=[];return r.forEach(function(f){var h=a[f],p=h[s].apply(h,c);p!==h&&d.push(p)}),d.length?d[0]:this}}}}var Dwe=800,Lwe=4,w5=S5("forceGraph",zy),Fwe=S5(["forceGraph","shadowGraph"],zy),Uwe=Object.assign.apply(Object,Fo(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return Im({},n,w5.linkProp(n))})).concat(Fo(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(n){return Im({},n,Fwe.linkProp(n))})))),Bwe=Object.assign.apply(Object,Fo(["d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return Im({},n,w5.linkMethod(n))})));function y1(n){if(n.canvas){var e=n.canvas.width,r=n.canvas.height;e===300&&r===150&&(e=r=0);var i=window.devicePixelRatio;e/=i,r/=i,[n.canvas,n.shadowCanvas].forEach(function(s){s.style.width="".concat(n.width,"px"),s.style.height="".concat(n.height,"px"),s.width=n.width*i,s.height=n.height*i,!e&&!r&&s.getContext("2d").scale(i,i)});var o=Is(n.canvas).k;n.zoom.translateBy(n.zoom.__baseElem,(n.width-e)/2/o,(n.height-r)/2/o),n.needsRedraw=!0}}function E5(n){var e=window.devicePixelRatio;n.setTransform(e,0,0,e,0,0)}function LD(n,e,r){n.save(),E5(n),n.clearRect(0,0,e,r),n.restore()}var $we=tg({props:od({width:{default:window.innerWidth,onChange:function(e,r){return y1(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,r){return y1(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){[e.nodes,e.links].every(function(o){return(o||[]).every(function(s){return!s.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(i),r.forceGraph.graphData(e),r.shadowGraph.graphData(e);function i(o){var s=o.type,a=o.objs;a.filter(function(l){if(!l.hasOwnProperty("__indexColor"))return!0;var c=r.colorTracker.lookup(l.__indexColor);return!c||!c.hasOwnProperty("d")||c.d!==l}).forEach(function(l){l.__indexColor=r.colorTracker.register({type:s,d:l})})}},triggerUpdate:!1},backgroundColor:{onChange:function(e,r){r.canvas&&e&&(r.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,r){r.shadowGraph.nodeCanvasObject(e?function(i,o,s){return e(i,i.__indexColor,o,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,r){r.shadowGraph.linkCanvasObject(e?function(i,o,s){return e(i,i.__indexColor,o,s)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,r){r.zoom.scaleExtent([e,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},Uwe),aliases:{stopAnimation:"pauseAnimation"},methods:od({graph2ScreenCoords:function(e,r,i){var o=Is(e.canvas);return{x:r*o.k+o.x,y:i*o.k+o.y}},screen2GraphCoords:function(e,r,i){var o=Is(e.canvas);return{x:(r-o.x)/o.k,y:(i-o.y)/o.k}},centerAt:function(e,r,i,o){if(!e.canvas)return null;if(r!==void 0||i!==void 0){var s=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return o?e.tweenGroup.add(new By(a()).to(s,o).easing(La.Quadratic.Out).onUpdate(l).start()):l(s),this}return a();function a(){var c=Is(e.canvas);return{x:(e.width/2-c.x)/c.k,y:(e.height/2-c.y)/c.k}}function l(c){var u=c.x,d=c.y;e.zoom.translateTo(e.zoom.__baseElem,u===void 0?a().x:u,d===void 0?a().y:d),e.needsRedraw=!0}},zoom:function(e,r,i){if(!e.canvas)return null;if(r!==void 0)return i?e.tweenGroup.add(new By({k:o()}).to({k:r},i).easing(La.Quadratic.Out).onUpdate(function(a){var l=a.k;return s(l)}).start()):s(r),this;return o();function o(){return Is(e.canvas).k}function s(a){e.zoom.scaleTo(e.zoom.__baseElem,a),e.needsRedraw=!0}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];var l=this.getGraphBbox.apply(this,s);if(l){var c={x:(l.x[0]+l.x[1])/2,y:(l.y[0]+l.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(e.width-i*2)/(l.x[1]-l.x[0]),(e.height-i*2)/(l.y[1]-l.y[0])));this.centerAt(c.x,c.y,r),this.zoom(u,r)}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=At(e.nodeVal),o=function(l){return Math.sqrt(Math.max(0,i(l)||1))*e.nodeRelSize},s=e.graphData.nodes.filter(r).map(function(a){return{x:a.x,y:a.y,r:o(a)}});return s.length?{x:[SE(s,function(a){return a.x-a.r}),bE(s,function(a){return a.x+a.r})],y:[SE(s,function(a){return a.y-a.r}),bE(s,function(a){return a.y+a.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},Bwe),stateInit:function(){return{lastSetZoom:1,zoom:Y1e(),forceGraph:new zy,shadowGraph:new zy().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new hwe,tweenGroup:new hR}},init:function(e,r){var i=this;e.innerHTML="";var o=document.createElement("div");o.classList.add("force-graph-container"),o.style.position="relative",e.appendChild(o),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),o.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var s=r.canvas.getContext("2d"),a=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),l={x:-1e12,y:-1e12},c=function(){var h=null,p=window.devicePixelRatio,g=l.x>0&&l.y>0?a.getImageData(l.x*p,l.y*p,1,1):null;return g&&(h=r.colorTracker.lookup(g.data)),h};hs(r.canvas).call(FSe().subject(function(){if(!r.enableNodeDrag)return null;var f=c();return f&&f.type==="Node"?f.d:null}).on("start",function(f){var h=f.subject;h.__initialDragPos={x:h.x,y:h.y,fx:h.fx,fy:h.fy},f.active||(h.fx=h.x,h.fy=h.y),r.canvas.classList.add("grabbable")}).on("drag",function(f){var h=f.subject,p=h.__initialDragPos,g=f,y=Is(r.canvas).k,v={x:p.x+(g.x-p.x)/y-h.x,y:p.y+(g.y-p.y)/y-h.y};["x","y"].forEach(function(m){return h["f".concat(m)]=h[m]=p[m]+(g[m]-p[m])/y}),r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,h.__dragged=!0,r.onNodeDrag(h,v)}).on("end",function(f){var h=f.subject,p=h.__initialDragPos,g={x:h.x-p.x,y:h.y-p.y};p.fx===void 0&&(h.fx=void 0),p.fy===void 0&&(h.fy=void 0),delete h.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,h.__dragged&&(delete h.__dragged,r.onNodeDragEnd(h,g))})),r.zoom(r.zoom.__baseElem=hs(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(f){return!f.button&&r.enableZoomPanInteraction&&(f.type!=="wheel"||At(r.enableZoomInteraction)(f))&&(f.type==="wheel"||At(r.enablePanInteraction)(f))}).on("zoom",function(f){var h=f.transform;[s,a].forEach(function(p){E5(p),p.translate(h.x,h.y),p.scale(h.k,h.k)}),r.onZoom&&r.onZoom(od(od({},h),i.centerAt())),r.needsRedraw=!0}).on("end",function(f){return r.onZoomEnd&&r.onZoomEnd(od(od({},f.transform),i.centerAt()))}),y1(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Is(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=Lwe/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)});var u=document.createElement("div");u.classList.add("graph-tooltip"),o.appendChild(u),["pointermove","pointerdown"].forEach(function(f){return o.addEventListener(f,function(h){f==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=h),!r.isPointerDragging&&h.type==="pointermove"&&r.onBackgroundClick&&(h.pressure>0||r.isPointerPressed)&&(h.pointerType!=="touch"||h.movementX===void 0||[h.movementX,h.movementY].some(function(y){return Math.abs(y)>1}))&&(r.isPointerDragging=!0);var p=g(o);l.x=h.pageX-p.left,l.y=h.pageY-p.top,u.style.top="".concat(l.y,"px"),u.style.left="".concat(l.x,"px"),u.style.transform="translate(-".concat(l.x/r.width*100,"%, ").concat(r.height-l.y<100?"calc(-100% - 8px)":"21px",")");function g(y){var v=y.getBoundingClientRect(),m=window.pageXOffset||document.documentElement.scrollLeft,_=window.pageYOffset||document.documentElement.scrollTop;return{top:v.top+_,left:v.left+m}}},{passive:!0})}),o.addEventListener("pointerup",function(f){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var h=[f,r.pointerDownEvent];requestAnimationFrame(function(){if(f.button===0)if(r.hoverObj){var p=r["on".concat(r.hoverObj.type,"Click")];p&&p.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,h);if(f.button===2)if(r.hoverObj){var g=r["on".concat(r.hoverObj.type,"RightClick")];g&&g.apply(void 0,[r.hoverObj.d].concat(h))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,h)})},{passive:!0}),o.addEventListener("contextmenu",function(f){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(f.preventDefault(),!1)}),r.forceGraph(s),r.shadowGraph(a);var d=Z1e(function(){LD(a,r.width,r.height),r.shadowGraph.linkWidth(function(h){return At(r.linkWidth)(h)+r.linkHoverPrecision});var f=Is(r.canvas);r.shadowGraph.globalScale(f.k).tickFrame()},Dwe);r.flushShadowCanvas=d.flush,(this._animationCycle=function f(){var h=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(w){return w.__photons&&w.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var p=r.isPointerDragging?null:c();if(p!==r.hoverObj){var g=r.hoverObj,y=g?g.type:null,v=p?p.type:null;if(y&&y!==v){var m=r["on".concat(y,"Hover")];m&&m(null,g.d)}if(v){var _=r["on".concat(v,"Hover")];_&&_(p.d,y===v?g.d:null)}var x=p&&At(r["".concat(p.type.toLowerCase(),"Label")])(p.d)||"";u.style.visibility=x?"visible":"hidden",u.innerHTML=x,r.canvas.classList[p&&r["on".concat(v,"Click")]||!p&&r.onBackgroundClick?"add":"remove"]("clickable"),r.hoverObj=p}h&&d()}if(h){LD(s,r.width,r.height);var S=Is(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(s,S),r.forceGraph.globalScale(S).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(s,S)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(f)})()},update:function(e){}});const xx={width:G.number,height:G.number,graphData:G.shape({nodes:G.arrayOf(G.object).isRequired,links:G.arrayOf(G.object).isRequired}),backgroundColor:G.string,nodeRelSize:G.number,nodeId:G.string,nodeLabel:G.oneOfType([G.string,G.func]),nodeVal:G.oneOfType([G.number,G.string,G.func]),nodeVisibility:G.oneOfType([G.bool,G.string,G.func]),nodeColor:G.oneOfType([G.string,G.func]),nodeAutoColorBy:G.oneOfType([G.string,G.func]),onNodeHover:G.func,onNodeClick:G.func,linkSource:G.string,linkTarget:G.string,linkLabel:G.oneOfType([G.string,G.func]),linkVisibility:G.oneOfType([G.bool,G.string,G.func]),linkColor:G.oneOfType([G.string,G.func]),linkAutoColorBy:G.oneOfType([G.string,G.func]),linkWidth:G.oneOfType([G.number,G.string,G.func]),linkCurvature:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowLength:G.oneOfType([G.number,G.string,G.func]),linkDirectionalArrowColor:G.oneOfType([G.string,G.func]),linkDirectionalArrowRelPos:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticles:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleSpeed:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleWidth:G.oneOfType([G.number,G.string,G.func]),linkDirectionalParticleColor:G.oneOfType([G.string,G.func]),onLinkHover:G.func,onLinkClick:G.func,dagMode:G.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:G.number,dagNodeFilter:G.func,onDagError:G.func,d3AlphaMin:G.number,d3AlphaDecay:G.number,d3VelocityDecay:G.number,warmupTicks:G.number,cooldownTicks:G.number,cooldownTime:G.number,onEngineTick:G.func,onEngineStop:G.func,getGraphBbox:G.func},C5={zoomToFit:G.func,onNodeRightClick:G.func,onNodeDrag:G.func,onNodeDragEnd:G.func,onLinkRightClick:G.func,linkHoverPrecision:G.number,onBackgroundClick:G.func,onBackgroundRightClick:G.func,enablePointerInteraction:G.bool,enableNodeDrag:G.bool},bR={showNavInfo:G.bool,nodeOpacity:G.number,nodeResolution:G.number,nodeThreeObject:G.oneOfType([G.object,G.string,G.func]),nodeThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkOpacity:G.number,linkResolution:G.number,linkCurveRotation:G.oneOfType([G.number,G.string,G.func]),linkMaterial:G.oneOfType([G.object,G.string,G.func]),linkThreeObject:G.oneOfType([G.object,G.string,G.func]),linkThreeObjectExtend:G.oneOfType([G.bool,G.string,G.func]),linkPositionUpdate:G.func,linkDirectionalArrowResolution:G.number,linkDirectionalParticleResolution:G.number,forceEngine:G.oneOf(["d3","ngraph"]),ngraphPhysics:G.object,numDimensions:G.oneOf([1,2,3])},zwe=Object.assign({},xx,C5,{linkLineDash:G.oneOfType([G.arrayOf(G.number),G.string,G.func]),nodeCanvasObjectMode:G.oneOfType([G.string,G.func]),nodeCanvasObject:G.func,nodePointerAreaPaint:G.func,linkCanvasObjectMode:G.oneOfType([G.string,G.func]),linkCanvasObject:G.func,linkPointerAreaPaint:G.func,autoPauseRedraw:G.bool,minZoom:G.number,maxZoom:G.number,enableZoomInteraction:G.oneOfType([G.bool,G.func]),enablePanInteraction:G.oneOfType([G.bool,G.func]),onZoom:G.func,onZoomEnd:G.func,onRenderFramePre:G.func,onRenderFramePost:G.func});Object.assign({},xx,C5,bR,{enableNavigationControls:G.bool,controlType:G.oneOf(["trackball","orbit","fly"]),rendererConfig:G.object,extraRenderers:G.arrayOf(G.shape({render:G.func.isRequired}))});Object.assign({},xx,bR,{nodeDesc:G.oneOfType([G.string,G.func]),linkDesc:G.oneOfType([G.string,G.func])});Object.assign({},xx,bR,{markerAttrs:G.object,yOffset:G.number,glScale:G.number});const SR=p$($we,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});SR.displayName="ForceGraph2D";SR.propTypes=zwe;const kwe=8,FD=3,UD=87,Vwe=({articles:n,selectedId:e,selectCallback:r})=>{const{graphData:i,forceGraphRef:o}=Z4(n),[s,a]=b.useState(0);b.useEffect(()=>{const u=()=>{const d=window.innerWidth*UD/100;a(d)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[UD]);const l=(u,d)=>{d.beginPath(),d.fillStyle=u.id===e?"#1677ff":u.color,u.size?d.arc(u.x,u.y,15,0,2*Math.PI,!1):u.id===e?d.arc(u.x,u.y,10,0,2*Math.PI,!1):d.arc(u.x,u.y,5,0,2*Math.PI,!1),d.fill()},c=u=>{console.log(u),r(u.id)};return Ut.jsx(SR,{width:s,graphData:i,ref:o,backgroundColor:"#000011",nodeRelSize:kwe,linkWidth:FD,linkDirectionalParticles:1,linkDirectionalParticleSpeed:.005,linkDirectionalParticleColor:()=>"#b9b9b9",linkDirectionalParticleWidth:FD,nodeCanvasObject:l,onNodeClick:c,onLinkClick:u=>console.log(u),linkColor:u=>u.source.id==e?"#1677ff":u.color?u.color:"grey"})},Gwe=({articleData:n})=>{const[e,r]=b.useState(!1),[i,o]=b.useState(),[s,a]=b.useState(!0),l=c=>{c!==0&&o(u=>u===c?null:c)};return Ut.jsxs("div",{style:{height:"100%",display:"flex"},children:[Ut.jsx(c0,{itemLayout:"vertical",dataSource:n.similar_articles,style:{height:"100vh",overflow:"auto"},renderItem:(c,u)=>Ut.jsx("span",{onClick:()=>l(u+1),children:Ut.jsxs(c0.Item,{style:{padding:"1rem",backgroundColor:i==u+1?"#cfcaca":""},children:[Ut.jsx(c0.Item.Meta,{title:c.title,description:c.abstract},u),Ut.jsxs("div",{children:[Ut.jsx("b",{children:"Authors: "}),c.authors.map((d,f)=>Ut.jsxs("span",{children:[d,f<c.authors.length-1?", ":""]},f))]}),Ut.jsxs("div",{children:[c.ids.arxiv_id&&Ut.jsxs("div",{children:[Ut.jsx("strong",{children:"Arxiv ID:"})," ",c.ids.arxiv_id]}),c.ids.doi&&Ut.jsxs("div",{children:[Ut.jsx("strong",{children:"DOI:"})," ",c.ids.doi]}),c.ids.scopus_id&&Ut.jsxs("div",{children:[Ut.jsx("strong",{children:"Scopus ID:"})," ",c.ids.scopus_id]})]}),Ut.jsx("b",{children:"Similiarity: "})," ",(c.similarity*100).toFixed(2),"%"]})})}),Ut.jsxs(Cs,{open:s,onCancel:()=>a(!1),mask:!1,footer:null,style:{right:"10rem",top:"25vh",margin:0,position:"fixed",width:"30vw",height:"100vh"},children:[Ut.jsx("h3",{children:Ut.jsx("b",{children:n.original_article.title})}),Ut.jsx("p",{children:n.original_article.authors.map((c,u)=>Ut.jsx(jf,{children:Ut.jsxs("b",{children:[" ",c,u<n.original_article.authors.length-1?", ":""]})},u))}),Ut.jsxs("p",{children:[Ut.jsx(d$,{style:{fontSize:"1rem"},children:n.original_article.abstract}),Ut.jsxs("div",{children:[n.original_article.ids.arxiv_id&&Ut.jsxs("div",{children:[Ut.jsx("strong",{children:"Arxiv ID:"})," ",n.original_article.ids.arxiv_id]}),n.original_article.ids.doi&&Ut.jsxs("div",{children:[Ut.jsx("strong",{children:"DOI:"})," ",n.original_article.ids.doi]}),n.original_article.ids.scopus_id&&Ut.jsxs("div",{children:[Ut.jsx("strong",{children:"Scopus ID:"})," ",n.original_article.ids.scopus_id]})]})]})]}),Ut.jsx(l$,{style:{position:"absolute",zIndex:2,right:50,bottom:50},checkedChildren:"3D",unCheckedChildren:"2D",onChange:()=>r(!e)}),e?Ut.jsx(Qxe,{articles:n,selectedId:i,selectCallback:l}):Ut.jsx(Vwe,{articles:n,selectedId:i,selectCallback:l})]})};function Hwe(n,e){const r=/(?:https?:\/\/)?(?:arxiv\.org\/abs\/)?(\d{4}\.\d{5})/,i=n.match(r);if(i)return{article_id:i[1],site:"arxiv",id_type:"arxiv_id",top_n:e};const o=/(?:https?:\/\/)?(?:doi\.org\/)?(10\.48550\/arXiv\.\d{4}\.\d{5})/,s=n.match(o);if(s)return{article_id:s[1],site:"arxiv",id_type:"arxiv_doi",top_n:e};const a=/^(SCOPUS_ID:\d{11})$/,l=n.match(a);if(l)return{article_id:l[1],site:"scopus",id_type:"scopus_id",top_n:e};const c=/^(10\.\d{4,9}\/[-._;()/:A-Z0-9]+)$/i,u=n.match(c);return u?{article_id:u[1],site:"scopus",id_type:"scopus_doi",top_n:e}:null}const{Search:jwe}=Hf,{Title:Wwe}=jf,qwe=({handleSearch:n,isActive:e})=>{const[r,i]=b.useState(""),[o,s]=b.useState(5),a=()=>{n(Hwe(r,o))};return Ut.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},children:Ut.jsxs("div",{style:e?{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"clamp(300px, 50%, 500px)"}:{position:"absolute",zIndex:99,top:0,display:"flex",flexDirection:"column",justifyContent:"center",marginTop:"1rem",alignItems:"center",width:"clamp(300px, 50%, 500px)"},children:[e&&Ut.jsx(Wwe,{children:"Article Explorer"}),Ut.jsxs("div",{style:{display:"flex",width:"100%"},children:[Ut.jsx(Su,{defaultValue:"5",style:{width:70},onChange:l=>s(Number.parseInt(l)),options:[{value:"5",label:"5"},{value:"10",label:"10"},{value:"15",label:"15"},{value:"20",label:"20"}]}),Ut.jsx(Xm,{trigger:["focus"],title:"Supported formats: arXiv link or arXiv article ID (e.g. 2412.12081)",placement:"bottomLeft",children:Ut.jsx(jwe,{style:{width:"100%"},placeholder:"Link to article...",onChange:l=>i(l.target.value),onSearch:a,enterButton:!0})})]})]})})},Xwe="http://74.248.108.18",Kwe="article/similarity/";class Ywe{static async fetchPosts(e){try{const r=new URLSearchParams({article_id:e.article_id,site:e.site,id_type:e.id_type,...e.top_n&&{top_n:e.top_n.toString()}}).toString(),i=new URL(`${Xwe}/${Kwe}?${r}`),o=await fetch(i);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(r){throw console.error("Error fetching posts:",r),r}}}const Qwe=()=>{const[n,e]=b.useState(null),[r,i]=b.useState(!1),[o,s]=b.useState(null),a=c=>{c!==null&&l(c)},l=async c=>{try{i(!0),console.log("fetching data...");const u=await Ywe.fetchPosts(c);e(u),i(!1),console.log(u)}catch{s("Failed to fetch posts. Please try again later."),i(!1)}};return Ut.jsxs("div",{style:n?{}:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:[Ut.jsx(qwe,{handleSearch:a,isActive:!n}),Ut.jsx(DT,{spinning:r,fullscreen:!0,size:"large"}),n?Ut.jsx(Gwe,{articleData:n}):Ut.jsx("div",{children:o||""})]})};QF(document.getElementById("root")).render(Ut.jsx(b.StrictMode,{children:Ut.jsx(Qwe,{})}));
